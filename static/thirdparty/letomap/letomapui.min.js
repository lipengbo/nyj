/**
 * letomapui - letomap
 * @abstract 
 * @version v1.0.0
 * @author letomap
 * @link 
 * @license CECILL-B
 */
var com;com||(com={}),com.leto||(com.leto={}),com.leto.map||(com.leto.map={}),com.leto.map.config||(com.leto.map.config={}),com.leto.map.overlay||(com.leto.map.overlay={}),com.leto.map.interaction||(com.leto.map.interaction={}),com.leto.map.basecomps||(com.leto.map.basecomps={}),com.leto.map.businesscomps||(com.leto.map.businesscomps={}),com.leto.map.LetoMap.coreMap,com.leto.map.overlay.CONTENT_OVERLAY_ID="contentOverlayDiv",com.leto.map.initMapui=function(t){if((t=t||{}).bars&&com.leto.map.basecomps.Bar.init(t.bars),!0===t.hasOverViewMap&&(t.overViewMapCollapsed=t.overViewMapCollapsed||!1,com.leto.map.LetoMap.coreMap.setOverViewMap({collapsed:t.overViewMapCollapsed})),!0===t.hasMousePosition&&com.leto.map.LetoMap.coreMap.addControl(new ol.control.MousePosition({projection:"EPSG:4326",coordinateFormat:ol.coordinate.createStringXY(6)})),!0===t.hasScaleLine&&com.leto.map.LetoMap.coreMap.addControl(new ol.control.ScaleLine),!0===t.hasScaleLine){var e=new ol.control.Toggle({id:"legend1",html:$("#legendTemplate").html(),className:"legend-bar",title:"图层图例",onToggle:function(t){com.leto.map.basecomps.LegendWindow.window||com.leto.map.basecomps.LegendWindow.init(),com.leto.map.basecomps.LegendWindow.toggle()}});com.leto.map.LetoMap.coreMap.addControl(e)}com.leto.map.LetoMap.coreMap.addControl(new ol.control.LayerSwitcherImage)},com.leto.map.initData=function(){var t=this;if(com.leto.map.config.SEARCH_LAYER_URL&&$.ajax({type:"GET",url:com.leto.map.config.SEARCH_LAYER_URL,dataType:"json",context:t,success:function(t){var e={SearchLayerData:t},i=$("#searchLayerTemplate").html();Mustache.parse(i);var n=Mustache.render(i,e);$("#searchLayerDiv").html(n),com.leto.map.businesscomps.Search.searchLayers=[];for(var r=0;r<t.length;r++)com.leto.map.businesscomps.Search.searchLayers.push(t[r].value)},error:function(t,e,i){alert("加载查询图层信息失败，请检查网络！")}}),com.leto.map.config.SUGGEST_RESULT_URL)$.UIkit.autocomplete($("#searchautocomplete"),{minLength:1,source:function(t){$("#searchautocompleteresults").html(""),$("#searchautocompleteresults").hide();var e=this;$.ajax({type:"GET",url:com.leto.map.config.SUGGEST_RESULT_URL+"?criteria="+$("#searchKeyInput").val(),dataType:"json",context:e,success:function(e){e&&e.length>0&&t(e)},error:function(t,e,i){console.error("加载数据失败，请检查网络！"),console.error(i)}})}})},function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.jsts=t.jsts||{})}(this,function(t){"use strict";function e(){}function i(){}function n(){}function r(){}function o(){}function s(){}function a(){}function l(t){this.name="RuntimeException",this.message=t,this.stack=(new Error).stack,Error.call(this,t)}function h(){if(0===arguments.length)l.call(this);else if(1===arguments.length){var t=arguments[0];l.call(this,t)}}function c(){}function u(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)u.call(this,0,0);else if(1===arguments.length){var t=arguments[0];u.call(this,t.x,t.y,t.z)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];u.call(this,e,i,u.NULL_ORDINATE)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this.x=n,this.y=r,this.z=o}}function f(){if(this.dimensionsToTest=2,0===arguments.length)f.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new i("only 2 or 3 dimensions may be specified");this.dimensionsToTest=t}}function g(){}function d(){}function p(t){this.message=t||""}function m(){}function y(t){this.message=t||""}function v(t){this.message=t||""}function x(){this.array_=[],arguments[0]instanceof d&&this.addAll(arguments[0])}function w(){if(x.apply(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.ensureCapacity(e.length),this.add(e,i)}}function C(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof u){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof C){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.init(i.x,n.x,i.y,n.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.init(r,o,s,a)}}function E(){}function I(){E.call(this,"Projective point not representable on the Cartesian plane.")}function S(){}function b(){}function _(t){this.str=t}function N(t){this.value=t}function L(){}function T(){if(this.hi=0,this.lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof T){var e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){var i=arguments[0];T.call(this,T.parse(i))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n,r)}}function A(){}function P(){}function M(){}function R(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],i=arguments[1];this.x=e,this.y=i,this.w=1}else if(arguments[0]instanceof R&&arguments[1]instanceof R){var n=arguments[0],r=arguments[1];this.x=n.y*r.w-r.y*n.w,this.y=r.x*n.w-n.x*r.w,this.w=n.x*r.y-r.x*n.y}else if(arguments[0]instanceof u&&arguments[1]instanceof u){var o=arguments[0],s=arguments[1];this.x=o.y-s.y,this.y=s.x-o.x,this.w=o.x*s.y-s.x*o.y}}else if(3===arguments.length){var a=arguments[0],l=arguments[1],h=arguments[2];this.x=a,this.y=l,this.w=h}else if(4===arguments.length){var c=arguments[0],f=arguments[1],g=arguments[2],d=arguments[3],p=c.y-f.y,m=f.x-c.x,y=c.x*f.y-f.x*c.y,v=g.y-d.y,x=d.x-g.x,w=g.x*d.y-d.x*g.y;this.x=m*w-x*y,this.y=v*y-p*w,this.w=p*x-v*m}}function O(){}function k(){}function F(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function D(){}function G(){}function B(){}function V(){}function z(){}function q(){}function Y(){}function U(){}function X(){}function H(){}function W(){}function j(){}function Q(){this.array_=[],arguments[0]instanceof d&&this.addAll(arguments[0])}function Z(t){return null==t?Ko:t.color}function J(t){return null==t?null:t.parent}function K(t,e){null!==t&&(t.color=e)}function $(t){return null==t?null:t.left}function tt(t){return null==t?null:t.right}function et(){this.root_=null,this.size_=0}function it(){}function nt(){}function rt(){this.array_=[],arguments[0]instanceof d&&this.addAll(arguments[0])}function ot(){}function st(){}function at(){}function lt(){}function ht(){this.geometries=null;var t=arguments[0],e=arguments[1];if(F.call(this,e),null===t&&(t=[]),F.hasNullElements(t))throw new i("geometries must not contain null elements");this.geometries=t}function ct(){var t=arguments[0],e=arguments[1];ht.call(this,t,e)}function ut(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,1===arguments.length){var t=arguments[0];ut.call(this,t,G.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=i}}function ft(){this.count=null}function gt(){}function dt(){}function pt(){}function mt(){}function yt(){}function vt(){}function xt(){}function wt(){this.points=null;var t=arguments[0],e=arguments[1];F.call(this,e),this.init(t)}function Ct(){}function Et(){this.coordinates=null;var t=arguments[0],e=arguments[1];F.call(this,e),this.init(t)}function It(){}function St(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(F.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),F.hasNullElements(e))throw new i("holes must not contain null elements");if(t.isEmpty()&&F.hasNonEmptyElements(e))throw new i("shell is empty but holes are not");this.shell=t,this.holes=e}function bt(){var t=arguments[0],e=arguments[1];ht.call(this,t,e)}function _t(){if(arguments[0]instanceof u&&arguments[1]instanceof Yt){var t=arguments[0],e=arguments[1];_t.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(Zo(arguments[0],P)&&arguments[1]instanceof Yt){var i=arguments[0],n=arguments[1];wt.call(this,i,n),this.validateConstruction()}}function Nt(){var t=arguments[0],e=arguments[1];ht.call(this,t,e)}function Lt(){if(this.factory=null,this.isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.factory=t}}function Tt(){}function At(){}function Pt(){}function Mt(){}function Rt(){if(this.dimension=3,this.coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];Rt.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(a=0;a<e;a++)this.coordinates[a]=new u}else if(Zo(arguments[0],P)){var i=arguments[0];if(null===i)return this.coordinates=new Array(0).fill(null),null;this.dimension=i.getDimension(),this.coordinates=new Array(i.size()).fill(null);for(a=0;a<this.coordinates.length;a++)this.coordinates[a]=i.getCoordinateCopy(a)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var n=arguments[0],r=arguments[1];this.coordinates=n,this.dimension=r,null===n&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this.coordinates=new Array(o).fill(null),this.dimension=s;for(var a=0;a<o;a++)this.coordinates[a]=new u}}function Ot(){}function kt(t,e){return t===e||t!==t&&e!==e}function Ft(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}function Dt(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||0===e)for(ts=t.length;ts--&&!kt(t[ts],e););else ts=t.indexOf(e);return ts>-1}function Gt(t,e,i){var n=[0],r=!1;return t.push(n),{next:function(){var o,s=n[0];return!r&&s<e.length?(o=i?[e[s],i[s]]:e[s],n[0]++):(r=!0,t.splice(t.indexOf(n),1)),{done:r,value:o}}}}function Bt(){return this._values.length}function Vt(){this.map_=new ns}function zt(){if(this.modelType=null,this.scale=null,0===arguments.length)this.modelType=zt.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof qt){var t=arguments[0];this.modelType=t,t===zt.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this.modelType=zt.FIXED,this.setScale(e)}else if(arguments[0]instanceof zt){var i=arguments[0];this.modelType=i.modelType,this.scale=i.scale}}function qt(){this.name=null;var t=arguments[0];this.name=t,qt.nameToTypeMap.put(t,this)}function Yt(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,0===arguments.length)Yt.call(this,new zt,0);else if(1===arguments.length){if(Zo(arguments[0],O)){var t=arguments[0];Yt.call(this,new zt,0,t)}else if(arguments[0]instanceof zt){var e=arguments[0];Yt.call(this,e,0,Yt.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];Yt.call(this,i,n,Yt.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.precisionModel=r,this.coordinateSequenceFactory=s,this.SRID=o}}function Ut(t){this.geometryFactory=t||new Yt}function Xt(t){this.parser=new Ut(t)}function Ht(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new u,this.intPt[1]=new u,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function Wt(){Ht.apply(this)}function jt(){}function Qt(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function Zt(){}function Jt(){if(this.p0=null,this.p1=null,0===arguments.length)Jt.call(this,new u,new u);else if(1===arguments.length){var t=arguments[0];Jt.call(this,t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.p0=e,this.p1=i}else if(4===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3];Jt.call(this,new u(n,r),new u(o,s))}}function Kt(){if(this.matrix=null,0===arguments.length)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(st.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];Kt.call(this),this.set(t)}else if(arguments[0]instanceof Kt){var e=arguments[0];Kt.call(this),this.matrix[S.INTERIOR][S.INTERIOR]=e.matrix[S.INTERIOR][S.INTERIOR],this.matrix[S.INTERIOR][S.BOUNDARY]=e.matrix[S.INTERIOR][S.BOUNDARY],this.matrix[S.INTERIOR][S.EXTERIOR]=e.matrix[S.INTERIOR][S.EXTERIOR],this.matrix[S.BOUNDARY][S.INTERIOR]=e.matrix[S.BOUNDARY][S.INTERIOR],this.matrix[S.BOUNDARY][S.BOUNDARY]=e.matrix[S.BOUNDARY][S.BOUNDARY],this.matrix[S.BOUNDARY][S.EXTERIOR]=e.matrix[S.BOUNDARY][S.EXTERIOR],this.matrix[S.EXTERIOR][S.INTERIOR]=e.matrix[S.EXTERIOR][S.INTERIOR],this.matrix[S.EXTERIOR][S.BOUNDARY]=e.matrix[S.EXTERIOR][S.BOUNDARY],this.matrix[S.EXTERIOR][S.EXTERIOR]=e.matrix[S.EXTERIOR][S.EXTERIOR]}}function $t(){this.areaBasePt=null,this.triangleCent3=new u,this.areasum2=0,this.cg3=new u,this.lineCentSum=new u,this.totalLength=0,this.ptCount=0,this.ptCentSum=new u;var t=arguments[0];this.areaBasePt=null,this.add(t)}function te(t){this.message=t||""}function ee(){this.array_=[]}function ie(){this.treeSet=new rt,this.list=new x}function ne(){if(this.geomFactory=null,this.inputPts=null,1===arguments.length){var t=arguments[0];ne.call(this,ne.extractCoordinates(t),t.getFactory())}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.inputPts=ie.filterCoordinates(e),this.geomFactory=i}}function re(){this.origin=null;var t=arguments[0];this.origin=t}function oe(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function se(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new Jt,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof wt&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];se.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var i=arguments[0],n=arguments[1];this.srcPts=i,this._isClosed=se.isClosed(i),this.snapTolerance=n}}function ae(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function le(){if(oe.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this.snapTolerance=i,this.snapPts=n,this.isSelfSnap=r}}function he(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function ce(){this.commonCoord=null,this.ccFilter=new ue}function ue(){this.commonBitsX=new he,this.commonBitsY=new he}function fe(){this.trans=null;var t=arguments[0];this.trans=t}function ge(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function de(){if(this.boundaryRule=G.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new i("Rule must be non-null");this.boundaryRule=t}}function pe(){}function me(){}function ye(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function ve(){}function xe(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function we(){this._size=null,this.items=null,this._size=0,this.items=new x,this.items.add(null)}function Ce(){}function Ee(){}function Ie(){if(this.childBoundables=new x,this.bounds=null,this.level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.level=t}}function Se(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],i=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=i,this._distance=this.distance()}function be(){if(this.root=null,this.built=!1,this.itemBoundables=new x,this.nodeCapacity=null,0===arguments.length)be.call(this,be.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];c.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function _e(){}function Ne(){if(0===arguments.length)Ne.call(this,Ne.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];be.call(this,t)}}function Le(){var t=arguments[0];Ie.call(this,t)}function Te(){}function Ae(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this.segString=t,this.coord=new u(e),this.segmentIndex=i,this.segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(i))}function Pe(){this.nodeMap=new et,this.edge=null;var t=arguments[0];this.edge=t}function Me(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function Re(){}function Oe(){this.nodeList=new Pe(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function ke(){this.tempEnv1=new C,this.tempEnv2=new C,this.overlapSeg1=new Jt,this.overlapSeg2=new Jt}function Fe(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this.pts=t,this.start=e,this.end=i,this.context=n}function De(){}function Ge(){}function Be(){}function Ve(){if(this.segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}function ze(){if(this.monoChains=new x,this.index=new Ne,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];Ve.call(this,t)}}function qe(){ke.apply(this),this.si=null;var t=arguments[0];this.si=t}function Ye(){if(this.pt=null,1===arguments.length){var t=arguments[0];l.call(this,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];l.call(this,Ye.msgWithCoord(e,i)),this.name="TopologyException",this.pt=new u(i)}}function Ue(){}function Xe(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new x,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function He(){this.li=new Wt,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function We(){this.nv=null;var t=arguments[0];this.nv=new He(We.toSegmentStrings(t))}function je(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function Qe(){}function Ze(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[Qe.ON]=e}else if(arguments[0]instanceof Ze){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var n=0;n<this.location.length;n++)this.location[n]=i.location[n]}}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.init(3),this.location[Qe.ON]=r,this.location[Qe.LEFT]=o,this.location[Qe.RIGHT]=s}}function Je(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Ze(t),this.elt[1]=new Ze(t)}else if(arguments[0]instanceof Je){var e=arguments[0];this.elt[0]=new Ze(e.elt[0]),this.elt[1]=new Ze(e.elt[1])}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.elt[0]=new Ze(S.NONE),this.elt[1]=new Ze(S.NONE),this.elt[i].setLocation(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.elt[0]=new Ze(r,o,s),this.elt[1]=new Ze(r,o,s)}else if(4===arguments.length){var a=arguments[0],l=arguments[1],h=arguments[2],c=arguments[3];this.elt[0]=new Ze(S.NONE,S.NONE,S.NONE),this.elt[1]=new Ze(S.NONE,S.NONE,S.NONE),this.elt[a].setLocations(l,h,c)}}function Ke(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new x,this.pts=new x,this.label=new Je(S.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new x,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function $e(){var t=arguments[0],e=arguments[1];Ke.call(this,t,e)}function ti(){var t=arguments[0],e=arguments[1];Ke.call(this,t,e)}function ei(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.label=t}}function ii(){ei.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new Je(0,S.NONE)}function ni(){this.nodeMap=new et,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function ri(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,1===arguments.length){var t=arguments[0];this.edge=t}else if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2];ri.call(this,e,i,n,null)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];ri.call(this,r),this.init(o,s),this.label=a}}function oi(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(ri.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var i=t.getNumPoints()-1;this.init(t.getCoordinate(i),t.getCoordinate(i-1))}this.computeDirectedLabel()}function si(){}function ai(){if(this.edges=new x,this.nodes=null,this.edgeEndList=new x,0===arguments.length)this.nodes=new ni(new si);else if(1===arguments.length){var t=arguments[0];this.nodes=new ni(t)}}function li(){this.geometryFactory=null,this.shellList=new x;var t=arguments[0];this.geometryFactory=t}function hi(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new x,this.resultLineList=new x;var t=arguments[0],e=arguments[1],i=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=i}function ci(){this.op=null,this.geometryFactory=null,this.resultPointList=new x;var t=arguments[0],e=arguments[1];arguments[2],this.op=t,this.geometryFactory=e}function ui(){}function fi(){this.geom=null;var t=arguments[0];this.geom=t}function gi(){this.edgeMap=new et,this.edgeList=null,this.ptInAreaLocation=[S.NONE,S.NONE]}function di(){gi.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function pi(){si.apply(this)}function mi(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function yi(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.eventType=yi.DELETE,this.xValue=t,this.insertEvent=e}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this.eventType=yi.INSERT,this.label=i,this.xValue=n,this.obj=r}}function vi(){}function xi(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],i=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=i}function wi(){vi.apply(this),this.events=new x,this.nOverlaps=null}function Ci(){this.min=n.POSITIVE_INFINITY,this.max=n.NEGATIVE_INFINITY}function Ei(){}function Ii(){Ci.apply(this),this.item=null;var t=arguments[0],e=arguments[1],i=arguments[2];this.min=t,this.max=e,this.item=i}function Si(){Ci.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function bi(){this.leaves=new x,this.root=null,this.level=0}function _i(){if(this.lines=null,this.isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this.lines=t}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.lines=e,this.isForcedToLineString=i}}function Ni(){this.items=new x}function Li(){this.index=null;var t=arguments[0];if(!Zo(t,It))throw new i("Argument must be Polygonal");this.index=new Ai(t)}function Ti(){this.counter=null;var t=arguments[0];this.counter=t}function Ai(){this.index=new bi;var t=arguments[0];this.init(t)}function Pi(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],i=arguments[2];this.coord=new u(t),this.segmentIndex=e,this.dist=i}function Mi(){this.nodeMap=new et,this.edge=null;var t=arguments[0];this.edge=t}function Ri(){}function Oi(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new C,this.env2=new C;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Ri;this.startIndex=e.getChainStartIndices(this.pts)}function ki(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this.depth[t][e]=ki.NULL_VALUE}function Fi(){if(ei.apply(this),this.pts=null,this.env=null,this.eiList=new Mi(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new ki,this.depthDelta=0,1===arguments.length){var t=arguments[0];Fi.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.pts=e,this.label=i}}function Di(){if(ai.apply(this),this.parentGeom=null,this.lineEdgeMap=new Vt,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new de,2===arguments.length){var t=arguments[0],e=arguments[1];Di.call(this,t,e,G.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this.argIndex=i,this.parentGeom=n,this.boundaryNodeRule=r,null!==n&&this.add(n)}}function Gi(){if(this.li=new Wt,this.resultPrecisionModel=null,this.arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new Di(0,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];Gi.call(this,e,i,G.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];n.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(n.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new Di(0,n,o),this.arg[1]=new Di(1,r,o)}}function Bi(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=Bi.orientation(t)}function Vi(){this.edges=new x,this.ocaMap=new et}function zi(){this.ptLocator=new de,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new Vi,this.resultPolyList=new x,this.resultLineList=new x,this.resultPointList=new x;var t=arguments[0],e=arguments[1];Gi.call(this,t,e),this.graph=new ai(new pi),this.geomFact=t.getFactory()}function qi(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function Yi(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function Ui(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function Xi(){this.poly=null,this.centreY=null,this.hiY=n.MAX_VALUE,this.loY=-n.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=Ui.avg(this.loY,this.hiY)}function Hi(){this.centroid=null,this.minDistance=n.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null===this.interiorPoint&&this.addEndpoints(t)}function Wi(){this.centroid=null,this.minDistance=n.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function ji(){this.tempEnv1=new C,this.selectedSegment=new Jt}function Qi(){this.items=new x,this.subnode=[null,null]}function Zi(){if(this.min=null,this.max=null,0===arguments.length)this.min=0,this.max=0;else if(1===arguments.length){var t=arguments[0];this.init(t.min,t.max)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.init(e,i)}}function Ji(){}function Ki(t,e){var i,n,r,o,s={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},a={32:8,64:11}[t];if(o||(i=e<0||1/e<0,isFinite(e)||(o=s[t],i&&(o.d+=1<<t/4-1),n=Math.pow(2,a)-1,r=0)),!o){for(n={32:127,64:1023}[t],r=Math.abs(e);r>=2;)n++,r/=2;for(;r<1&&n>0;)n--,r*=2;n<=0&&(r/=2),32===t&&n>254&&(o={d:i?255:127,c:128,b:0,a:0},n=Math.pow(2,a)-1,r=0)}return n}function $i(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function tn(){Qi.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function en(){}function nn(){Qi.apply(this)}function rn(){this.root=null,this.minExtent=1,this.root=new nn}function on(){}function sn(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new Zi;var t=arguments[0];this.ring=t,this.buildIndex()}function an(){ji.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function ln(){}function hn(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],i=arguments[2];this.p0=t,this.p1=e,this.p2=i}function cn(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function un(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new Jt,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,1===arguments.length){var t=arguments[0];un.call(this,t,!1)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.inputGeom=e,this.isConvex=i}}function fn(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function gn(){oe.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function dn(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function pn(){this._isMarked=!1;var t=arguments[0];dn.call(this,t)}function mn(){this.vertexMap=new Vt}function yn(){this._isStart=!1;var t=arguments[0];pn.call(this,t)}function vn(){mn.apply(this)}function xn(){this.result=null,this.factory=null,this.graph=null,this.lines=new x,this.nodeEdgeStack=new ee,this.ringStartEdge=null,this.graph=new vn}function wn(){this.items=new x,this.subnode=new Array(4).fill(null)}function Cn(){this.pt=new u,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function En(){wn.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function In(){wn.apply(this)}function Sn(){this.root=null,this.minExtent=1,this.root=new In}function bn(t){this.geometryFactory=t||new Yt}function _n(t){this.geometryFactory=t||new Yt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new bn(this.geometryFactory)}function Nn(){this.parser=new bn(this.geometryFactory)}function Ln(t){this.geometryFactory=t||new Yt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ut(this.geometryFactory)}function Tn(t){return[t.x,t.y]}function An(t,e){this.geometryFactory=t||new Yt,this.ol=e||"undefined"!=typeof ol&&ol}function Pn(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];Pn.call(this,t,e,0,0)}else if(4===arguments.length){var i=arguments[0],n=arguments[1];arguments[2],arguments[3],this.noder=i,this.scaleFactor=n,this.isScaled=!this.isIntegerPrecision()}}function Mn(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,1===arguments.length){var t=arguments[0];this.inputGeom=t}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!i.isInBoundary(2)}}function Rn(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function On(){if(this.quadrantSegments=On.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=On.CAP_ROUND,this.joinStyle=On.JOIN_ROUND,this.mitreLimit=On.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=On.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(i)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3];this.setQuadrantSegments(n),this.setEndCapStyle(r),this.setJoinStyle(o),this.setMitreLimit(s)}}function kn(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function Fn(){this.array_=[]}function Dn(){this.finder=null,this.dirEdgeList=new x,this.nodes=new x,this.rightMostCoord=null,this.env=null,this.finder=new kn}function Gn(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=Zt.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function Bn(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new x}function Vn(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new Jt,this.seg1=new Jt,this.offset0=new Jt,this.offset1=new Jt,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],i=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new Wt,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===On.JOIN_ROUND&&(this.closingSegLengthFactor=Vn.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)}function zn(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function qn(){this.subgraphs=null,this.seg=new Jt,this.cga=new Zt;var t=arguments[0];this.subgraphs=t}function Yn(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new Jt(t),this.leftDepth=e}function Un(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new x;var t=arguments[0],e=arguments[1],i=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=i}function Xn(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function Hn(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new Vi;var t=arguments[0];this.bufParams=t}function Wn(){this.li=new Wt,this.segStrings=null;var t=arguments[0];this.segStrings=t}function jn(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,e<=0)throw new i("Scale factor must be non-zero");1!==e&&(this.pt=new u(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new u,this.p1Scaled=new u),this.initCorners(this.pt)}function Qn(){this.index=null;var t=arguments[0];this.index=t}function Zn(){ji.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],i=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=i}function Jn(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new x}function Kn(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new Wt,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function $n(){if(this.argGeom=null,this.distance=null,this.bufParams=new On,this.resultGeometry=null,this.saveException=null,1===arguments.length){var t=arguments[0];this.argGeom=t}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.argGeom=e,this.bufParams=i}}function tr(){this.comps=null;var t=arguments[0];this.comps=t}function er(){if(this.component=null,this.segIndex=null,this.pt=null,2===arguments.length){var t=arguments[0],e=arguments[1];er.call(this,t,er.INSIDE_AREA,e)}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this.component=i,this.segIndex=n,this.pt=r}}function ir(){this.pts=null;var t=arguments[0];this.pts=t}function nr(){this.locations=null;var t=arguments[0];this.locations=t}function rr(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new de,this.minDistanceLocation=null,this.minDistance=n.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];rr.call(this,t,e,0)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=i,this.geom[1]=r,this.terminateDistance=o}}function or(){this.factory=null,this.directedEdges=new x,this.coordinates=null;var t=arguments[0];this.factory=t}function sr(){this._isMarked=!1,this._isVisited=!1,this.data=null}function ar(){sr.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this.from=t,this.to=e,this.edgeDirection=n,this.p0=t.getCoordinate(),this.p1=i;var r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y;this.quadrant=De.quadrant(r,o),this.angle=Math.atan2(o,r)}function lr(){var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];ar.call(this,t,e,i,n)}function hr(){if(sr.apply(this),this.dirEdge=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}function cr(){this.outEdges=new x,this.sorted=!1}function ur(){if(sr.apply(this),this.pt=null,this.deStar=null,1===arguments.length){var t=arguments[0];ur.call(this,t,new cr)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.pt=e,this.deStar=i}}function fr(){hr.apply(this),this.line=null;var t=arguments[0];this.line=t}function gr(){this.nodeMap=new et}function dr(){this.edges=new Q,this.dirEdges=new Q,this.nodeMap=new gr}function pr(){dr.apply(this)}function mr(){this.graph=new pr,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function yr(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];ar.call(this,t,e,i,n)}function vr(){hr.apply(this),this.line=null;var t=arguments[0];this.line=t}function xr(){this.geometryFactory=new Yt,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function wr(){}function Cr(){if(this.edgeEnds=new x,1===arguments.length){var t=arguments[0];Cr.call(this,null,t)}else if(2===arguments.length){var e=(arguments[0],arguments[1]);ri.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new Je(e.getLabel())),this.insert(e)}}function Er(){gi.apply(this)}function Ir(){var t=arguments[0],e=arguments[1];ii.call(this,t,e)}function Sr(){si.apply(this)}function br(){this.nodes=new ni(new Sr)}function _r(){this.li=new Wt,this.geomGraph=null,this.nodeGraph=new br,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function Nr(){this.graph=null,this.rings=new x,this.totalEnv=new C,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function Lr(){if(this.errorType=null,this.pt=null,1===arguments.length){var t=arguments[0];Lr.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.errorType=e,null!==i&&(this.pt=i.copy())}}function Tr(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function Ar(){this.factory=null,this.deList=new x,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function Pr(){}function Mr(){dr.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function Rr(){if(this.lineStringAdder=new Or(this),this.graph=null,this.dangles=new x,this.cutEdges=new x,this.invalidRingLines=new x,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,0===arguments.length)Rr.call(this,!1);else if(1===arguments.length){var t=arguments[0];this.extractOnlyPolygonal=t}}function Or(){this.p=null;var t=arguments[0];this.p=t}function kr(){this.li=new Wt,this.ptLocator=new de,this.arg=null,this.nodes=new ni(new Sr),this.im=null,this.isolatedEdges=new x,this.invalidPoint=null;var t=arguments[0];this.arg=t}function Fr(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function Dr(){this.li=new Wt,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new u(t.getMinX(),t.getMinY()),this.diagUp1=new u(t.getMaxX(),t.getMaxY()),this.diagDown0=new u(t.getMinX(),t.getMaxY()),this.diagDown1=new u(t.getMaxX(),t.getMinY())}function Gr(){this._isDone=!1}function Br(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function Vr(){Gr.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function zr(){Gr.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function qr(){Gr.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new u,this.p1=new u;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new Dr(this.rectEnv)}function Yr(){if(this._relate=null,2===arguments.length){var t=arguments[0],e=arguments[1];Gi.call(this,t,e),this._relate=new kr(this.arg)}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];Gi.call(this,i,n,r),this._relate=new kr(this.arg)}}function Ur(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=Ur.extractFactory(t),this.inputGeoms=t}function Xr(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function Hr(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function Wr(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,null===this.inputPolys&&(this.inputPolys=new x)}function jr(){if(this.polygons=new x,this.lines=new x,this.points=new x,this.geomFact=null,1===arguments.length){if(Zo(arguments[0],d)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof F){var e=arguments[0];this.extract(e)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.geomFact=n,this.extract(i)}}function Qr(){Lt.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function Zr(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function Jr(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new Jt;var t=arguments[0];this.pts=t}function Kr(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function $r(){oe.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function to(){if(this.parent=null,this.index=null,2===arguments.length){var t=arguments[0],e=arguments[1];to.call(this,t,e,null,-1)}else if(4===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=arguments[3];Jt.call(this,i,n),this.parent=r,this.index=o}}function eo(){if(this.parentLine=null,this.segs=null,this.resultSegs=new x,this.minimumSize=null,1===arguments.length){var t=arguments[0];eo.call(this,t,2)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.parentLine=e,this.minimumSize=i,this.init()}}function io(){this.index=new Sn}function no(){this.querySeg=null,this.items=new x;var t=arguments[0];this.querySeg=t}function ro(){this.li=new Wt,this.inputIndex=new io,this.outputIndex=new io,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function oo(){this.inputIndex=new io,this.outputIndex=new io,this.distanceTolerance=0}function so(){this.inputGeom=null,this.lineSimplifier=new oo,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function ao(){oe.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function lo(){this.tps=null;var t=arguments[0];this.tps=t}function ho(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function co(){}function uo(){}function fo(){}function go(){if(this.p=null,1===arguments.length){var t=arguments[0];this.p=new u(t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.p=new u(e,i)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this.p=new u(n,r,o)}}function po(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];go.call(this,t)}function mo(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function yo(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0}function vo(){}function xo(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function wo(){if(this.seg=null,1===arguments.length){if("string"==typeof arguments[0]){var t=arguments[0];l.call(this,t)}else if(arguments[0]instanceof Jt){var e=arguments[0];l.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new Jt(e)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];l.call(this,wo.msgWithSpatial(i,n)),this.seg=new Jt(n)}}function Co(){}function Eo(){this.visitedKey=0,this.quadEdges=new x,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new Jt,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/Eo.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new xo(this)}function Io(){}function So(){this.triList=new x}function bo(){this.triList=new x}function _o(){this.coordList=new w,this.triCoords=new x}function No(){if(this.ls=null,this.data=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.ls=new Jt(t,e)}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this.ls=new Jt(i,n),this.data=r}else if(6===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3],h=arguments[4],c=arguments[5];No.call(this,new u(o,s,a),new u(l,h,c))}else if(7===arguments.length){var f=arguments[0],g=arguments[1],d=arguments[2],p=arguments[3],m=arguments[4],y=arguments[5],v=arguments[6];No.call(this,new u(f,g,d),new u(p,m,y),v)}}function Lo(){}function To(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.p=new u(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this.p=new u(i,n),this.left=null,this.right=null,this.count=1,this.data=r}}function Ao(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,0===arguments.length)Ao.call(this,0);else if(1===arguments.length){var t=arguments[0];this.tolerance=t}}function Po(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function Mo(){this.initialVertices=null,this.segVertices=null,this.segments=new x,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new uo,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new x(t),this.tolerance=e,this.kdt=new Ao(e)}function Ro(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Oo(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new et}function ko(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function Fo(){if(this.componentIndex=0,this.segmentIndex=0,this.segmentFraction=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.componentIndex=t.componentIndex,this.segmentIndex=t.segmentIndex,this.segmentFraction=t.segmentFraction}else if(2===arguments.length){var e=arguments[0],i=arguments[1];Fo.call(this,0,e,i)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this.componentIndex=n,this.segmentIndex=r,this.segmentFraction=o,this.normalize()}else if(4===arguments.length){var s=arguments[0],a=arguments[1],l=arguments[2],h=arguments[3];this.componentIndex=s,this.segmentIndex=a,this.segmentFraction=l,h&&this.normalize()}}function Do(){if(this.linearGeom=null,this.numLines=null,this.currentLine=null,this.componentIndex=0,this.vertexIndex=0,1===arguments.length){var t=arguments[0];Do.call(this,t,0,0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Do.call(this,e,n.getComponentIndex(),Do.segmentEndVertexIndex(n))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];if(!Zo(r,it))throw new i("Lineal geometry is required");this.linearGeom=r,this.numLines=r.getNumGeometries(),this.componentIndex=o,this.vertexIndex=s,this.loadCurrentLine()}}function Go(){this.linearGeom=null;var t=arguments[0];this.linearGeom=t}function Bo(){this.linearGeom=null;var t=arguments[0];this.linearGeom=t}function Vo(){this.geomFact=null,this.lines=new x,this.coordList=null,this.ignoreInvalidLines=!1,this.fixInvalidLines=!1,this.lastPt=null;var t=arguments[0];this.geomFact=t}function zo(){this.line=null;var t=arguments[0];this.line=t}function qo(){this.linearGeom=null;var t=arguments[0];this.linearGeom=t,this.checkGeometryType()}function Yo(){this.linearGeom=null;var t=arguments[0];this.linearGeom=t}function Uo(){this.linearGeom=null;var t=arguments[0];this.linearGeom=t}function Xo(){this.linearGeom=null;var t=arguments[0];this.linearGeom=t}function Ho(){}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),i=Math.max(Math.min(e.length,9007199254740991),0)||0,n=1 in arguments?parseInt(Number(arguments[1]),10)||0:0;n=n<0?Math.max(i+n,0):Math.min(n,i);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:i;for(r=r<0?Math.max(i+arguments[2],0):Math.min(r,i);n<r;)e[n]=t,++n;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Wo=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};Wo(e.prototype,{interfaces_:function(){return[]},getClass:function(){return e}}),e.equalsWithTolerance=function(t,e,i){return Math.abs(t-e)<=i},n.isNaN=function(t){return Number.isNaN(t)},n.doubleToLongBits=function(t){return t},n.longBitsToDouble=function(t){return t},n.isInfinite=function(t){return!Number.isFinite(t)},n.MAX_VALUE=Number.MAX_VALUE,l.prototype=Object.create(Error.prototype),l.prototype.constructor=Error;var jo=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t};jo(h,l),Wo(h.prototype,{interfaces_:function(){return[]},getClass:function(){return h}}),Wo(c.prototype,{interfaces_:function(){return[]},getClass:function(){return c}}),c.shouldNeverReachHere=function(){if(0===arguments.length)c.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new h("Should never reach here"+(null!==t?": "+t:""))}},c.isTrue=function(){if(1===arguments.length){var t=arguments[0];c.isTrue(t,null)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(!e)throw null===i?new h:new h(i)}},c.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];c.equals(t,e,null)}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];if(!n.equals(i))throw new h("Expected "+i+" but encountered "+n+(null!==r?": "+r:""))}},Wo(u.prototype,{setOrdinate:function(t,e){switch(t){case u.X:this.x=e;break;case u.Y:this.y=e;break;case u.Z:this.z=e;break;default:throw new i("Invalid ordinate index: "+t)}},equals2D:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var i=arguments[0],n=arguments[1];return!!e.equalsWithTolerance(this.x,i.x,n)&&!!e.equalsWithTolerance(this.y,i.y,n)}},getOrdinate:function(t){switch(t){case u.X:return this.x;case u.Y:return this.y;case u.Z:return this.z}throw new i("Invalid ordinate index: "+t)},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||n.isNaN(this.z)&&n.isNaN(t.z))},equals:function(t){return t instanceof u&&this.equals2D(t)},equalInZ:function(t,i){return e.equalsWithTolerance(this.z,t.z,i)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return c.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}},copy:function(){return new u(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return Math.sqrt(e*e+i*i+n*n)},distance:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},hashCode:function(){var t=17;return t=37*t+u.hashCode(this.x),t=37*t+u.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[r,o,a]},getClass:function(){return u}}),u.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=n.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},Wo(f.prototype,{compare:function(t,e){var i=t,n=e,r=f.compare(i.x,n.x);if(0!==r)return r;var o=f.compare(i.y,n.y);return 0!==o?o:this.dimensionsToTest<=2?0:f.compare(i.z,n.z)},interfaces_:function(){return[s]},getClass:function(){return f}}),f.compare=function(t,e){return t<e?-1:t>e?1:n.isNaN(t)?n.isNaN(e)?0:-1:n.isNaN(e)?1:0},u.DimensionalComparator=f,u.serialVersionUID=0x5cbf2c235c7e5800,u.NULL_ORDINATE=n.NaN,u.X=0,u.Y=1,u.Z=2,g.prototype.hasNext=function(){},g.prototype.next=function(){},g.prototype.remove=function(){},d.prototype.add=function(){},d.prototype.addAll=function(){},d.prototype.isEmpty=function(){},d.prototype.iterator=function(){},d.prototype.size=function(){},d.prototype.toArray=function(){},d.prototype.remove=function(){},(p.prototype=new Error).name="IndexOutOfBoundsException",(m.prototype=Object.create(d.prototype)).constructor=m,m.prototype.get=function(){},m.prototype.set=function(){},m.prototype.isEmpty=function(){},(y.prototype=new Error).name="NoSuchElementException",(v.prototype=new Error).name="OperationNotSupported",x.prototype=Object.create(m.prototype),x.prototype.constructor=x,x.prototype.ensureCapacity=function(){},x.prototype.interfaces_=function(){return[m,d]},x.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},x.prototype.clear=function(){this.array_=[]},x.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},x.prototype.set=function(t,e){var i=this.array_[t];return this.array_[t]=e,i},x.prototype.iterator=function(){return new Qo(this)},x.prototype.get=function(t){if(t<0||t>=this.size())throw new p;return this.array_[t]},x.prototype.isEmpty=function(){return 0===this.array_.length},x.prototype.size=function(){return this.array_.length},x.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},x.prototype.remove=function(t){for(var e=!1,i=0,n=this.array_.length;i<n;i++)if(this.array_[i]===t){this.array_.splice(i,1),e=!0;break}return e};var Qo=function(t){this.arrayList_=t,this.position_=0};Qo.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new y;return this.arrayList_.get(this.position_++)},Qo.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Qo.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},Qo.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},jo(w,x),Wo(w.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(2===arguments.length){for(var t=arguments[0],e=arguments[1],i=!1,n=t.iterator();n.hasNext();)this.add(n.next(),e),i=!0;return i}return x.prototype.addAll.apply(this,arguments)},clone:function(){for(var t=x.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},toCoordinateArray:function(){return this.toArray(w.coordArrayType)},add:function(){if(1===arguments.length){var t=arguments[0];x.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],i=arguments[1];return this.add(e,i,!0),!0}if(arguments[0]instanceof u&&"boolean"==typeof arguments[1]){var n=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(n))return null;x.prototype.add.call(this,n)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var r=arguments[0],o=arguments[1];return this.add(r,o),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];if(arguments[2])for(y=0;y<s.length;y++)this.add(s[y],a);else for(y=s.length-1;y>=0;y--)this.add(s[y],a);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof u){var l=arguments[0],h=arguments[1];if(!arguments[2]){var c=this.size();if(c>0){if(l>0&&this.get(l-1).equals2D(h))return null;if(l<c&&this.get(l).equals2D(h))return null}}x.prototype.add.call(this,l,h)}}else if(4===arguments.length){var f=arguments[0],g=arguments[1],d=arguments[2],p=arguments[3],m=1;d>p&&(m=-1);for(var y=d;y!==p;y+=m)this.add(f[y],g);return!0}},closeRing:function(){this.size()>0&&this.add(new u(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return w}}),w.coordArrayType=new Array(0).fill(null),Wo(C.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof C))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new C;var e=this.minx>t.minx?this.minx:t.minx,i=this.miny>t.miny?this.miny:t.miny;return new C(e,this.maxx<t.maxx?this.maxx:t.maxx,i,this.maxy<t.maxy?this.maxy:t.maxy)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(1===arguments.length){if(arguments[0]instanceof u){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof C){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];return!this.isNull()&&i>=this.minx&&i<=this.maxx&&n>=this.miny&&n<=this.maxy}},intersects:function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof u){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];return!this.isNull()&&!(i>this.maxx||i<this.minx||n>this.maxy||n<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(1===arguments.length){if(arguments[0]instanceof u){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof C){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.isNull()?(this.minx=i,this.maxx=i,this.miny=n,this.maxy=n):(i<this.minx&&(this.minx=i),i>this.maxx&&(this.maxx=i),n<this.miny&&(this.miny=n),n>this.maxy&&(this.maxy=n))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=i,this.maxy+=i,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof u){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];return this.covers(i,n)}},centre:function(){return this.isNull()?null:new u((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof u){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof C){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.init(i.x,n.x,i.y,n.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r<o?(this.minx=r,this.maxx=o):(this.minx=o,this.maxx=r),s<a?(this.miny=s,this.maxy=a):(this.miny=a,this.maxy=s)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var i=0;return this.maxy<t.miny?i=t.miny-this.maxy:this.miny>t.maxy&&(i=this.miny-t.maxy),0===e?i:0===i?e:Math.sqrt(e*e+i*i)},hashCode:function(){var t=17;return t=37*t+u.hashCode(this.minx),t=37*t+u.hashCode(this.maxx),t=37*t+u.hashCode(this.miny),t=37*t+u.hashCode(this.maxy)},interfaces_:function(){return[r,a]},getClass:function(){return C}}),C.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2];return i.x>=(t.x<e.x?t.x:e.x)&&i.x<=(t.x>e.x?t.x:e.x)&&i.y>=(t.y<e.y?t.y:e.y)&&i.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),l=Math.max(o.x,s.x),h=Math.min(n.x,r.x),c=Math.max(n.x,r.x);return!(h>l||c<a||(a=Math.min(o.y,s.y),l=Math.max(o.y,s.y),h=Math.min(n.y,r.y),c=Math.max(n.y,r.y),h>l||c<a))}},C.serialVersionUID=0x51845cd552189800,jo(I,E),Wo(I.prototype,{interfaces_:function(){return[]},getClass:function(){return I}}),Wo(S.prototype,{interfaces_:function(){return[]},getClass:function(){return S}}),S.toLocationSymbol=function(t){switch(t){case S.EXTERIOR:return"e";case S.BOUNDARY:return"b";case S.INTERIOR:return"i";case S.NONE:return"-"}throw new i("Unknown location value: "+t)},S.INTERIOR=0,S.BOUNDARY=1,S.EXTERIOR=2,S.NONE=-1;var Zo=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1};Wo(b.prototype,{interfaces_:function(){return[]},getClass:function(){return b}}),b.log10=function(t){var e=Math.log(t);return n.isInfinite(e)?e:n.isNaN(e)?e:e/b.LOG_10},b.min=function(t,e,i,n){var r=t;return e<r&&(r=e),i<r&&(r=i),n<r&&(r=n),r},b.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],i=arguments[2];return t<e?e:t>i?i:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var n=arguments[0],r=arguments[1],o=arguments[2];return n<r?r:n>o?o:n}},b.wrap=function(t,e){return t<0?e- -t%e:t%e},b.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2];return e>(a=t)&&(a=e),i>a&&(a=i),a}if(4===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=n;return r>a&&(a=r),o>a&&(a=o),s>a&&(a=s),a}},b.average=function(t,e){return(t+e)/2},b.LOG_10=Math.log(10),_.prototype.append=function(t){this.str+=t},_.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},_.prototype.toString=function(t){return this.str},N.prototype.intValue=function(){return this.value},N.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},N.isNaN=function(t){return Number.isNaN(t)},L.isWhitespace=function(t){return t<=32&&t>=0||127==t},L.toUpperCase=function(t){return t.toUpperCase()},Wo(T.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var i=this.abs(),n=T.magnitude(i.hi),r=T.TEN.pow(n);(i=i.divide(r)).gt(T.TEN)?(i=i.divide(T.TEN),n+=1):i.lt(T.ONE)&&(i=i.multiply(T.TEN),n-=1);for(var o=n+1,s=new _,a=T.MAX_PRINT_DIGITS-1,l=0;l<=a;l++){t&&l===o&&s.append(".");var h=Math.trunc(i.hi);if(h<0)break;var c=!1,u=0;h>9?(c=!0,u="9"):u="0"+h,s.append(u),i=i.subtract(T.valueOf(h)).multiply(T.TEN),c&&i.selfAdd(T.TEN);var f=!0,g=T.magnitude(i.hi);if(g<0&&Math.abs(g)>=a-l&&(f=!1),!f)break}return e[0]=n,s.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof T){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},equals:function(){if(1===arguments.length){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return 0===this.hi&&0===this.lo},selfSubtract:function(){if(arguments[0]instanceof T){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(1===arguments.length){if(arguments[0]instanceof T){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1],r=null,o=null,s=null,a=null,l=null,h=null,c=null,u=null;return l=this.hi/i,h=T.SPLIT*l,r=h-l,u=T.SPLIT*i,r=h-r,o=l-r,s=u-i,c=l*i,s=u-s,a=i-s,u=r*s-c+r*a+o*s+o*a,h=(this.hi-c-u+this.lo-l*n)/i,u=l+h,this.hi=u,this.lo=l-u+h,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof T){var t=arguments[0],e=null,i=null,r=null,o=null,s=null,a=null,l=null,h=null;return s=this.hi/t.hi,a=T.SPLIT*s,e=a-s,h=T.SPLIT*t.hi,e=a-e,i=s-e,r=h-t.hi,l=s*t.hi,r=h-r,o=t.hi-r,h=e*r-l+e*o+i*r+i*o,a=(this.hi-l-h+this.lo-s*t.lo)/t.hi,h=s+a,new T(h,s-h+a)}if("number"==typeof arguments[0]){var c=arguments[0];return n.isNaN(c)?T.createNaN():T.copy(this).selfDivide(c,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(0===t)return T.valueOf(1);var e=new T(this),i=T.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&i.selfMultiply(e),(n/=2)>0&&(e=e.sqr());else i=e;return t<0?i.reciprocal():i},ceil:function(){if(this.isNaN())return T.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new T(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){return this.isNaN()?this:this.add(.5).floor()},setValue:function(){if(arguments[0]instanceof T){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return T.valueOf(0);if(this.isNegative())return T.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,i=T.valueOf(e),n=this.subtract(i.sqr()).hi*(.5*t);return i.add(n)},selfAdd:function(){if(1===arguments.length){if(arguments[0]instanceof T){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0],i=null,n=null,r=null,o=null,s=null,a=null;return r=this.hi+e,s=r-this.hi,o=r-s,o=e-s+(this.hi-o),a=o+this.lo,i=r+a,n=a+(r-i),this.hi=i+n,this.lo=n+(i-this.hi),this}}else if(2===arguments.length){var l=arguments[0],h=arguments[1],i=null,n=null,c=null,u=null,r=null,o=null,s=null,a=null;r=this.hi+l,c=this.lo+h,o=r-(s=r-this.hi),u=c-(a=c-this.lo);var f=(i=r+(s=(o=l-s+(this.hi-o))+c))+(s=(u=h-a+(this.lo-u))+(n=s+(r-i))),g=s+(i-f);return this.hi=f,this.lo=g,this}},selfMultiply:function(){if(1===arguments.length){if(arguments[0]instanceof T){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1],r=null,o=null,s=null,a=null,l=null,h=null;r=(l=T.SPLIT*this.hi)-this.hi,h=T.SPLIT*i,r=l-r,o=this.hi-r,s=h-i;var c=(l=this.hi*i)+(h=r*(s=h-s)-l+r*(a=i-s)+o*s+o*a+(this.hi*n+this.lo*i)),u=h+(r=l-c);return this.hi=c,this.lo=u,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return T.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new T(t,e)},negate:function(){return this.isNaN()?this:new T(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}},multiply:function(){if(arguments[0]instanceof T){var t=arguments[0];return t.isNaN()?T.createNaN():T.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return n.isNaN(e)?T.createNaN():T.copy(this).selfMultiply(e,0)}},isNaN:function(){return n.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=T.magnitude(this.hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),i=this.extractSignificantDigits(!0,e),n=e[0]+1,r=i;if("."===i.charAt(0))r="0"+i;else if(n<0)r="0."+T.stringOfChar("0",-n)+i;else if(-1===i.indexOf(".")){var o=n-i.length;r=i+T.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},reciprocal:function(){var t=null,e=null,i=null,n=null,r=null,o=null,s=null,a=null;e=(r=1/this.hi)-(t=(o=T.SPLIT*r)-(t=o-r)),i=(a=T.SPLIT*this.hi)-this.hi;var l=r+(o=(1-(s=r*this.hi)-(a=t*(i=a-i)-s+t*(n=this.hi-i)+e*i+e*n)-r*this.lo)/this.hi);return new T(l,r-l+o)},toSciNotation:function(){if(this.isZero())return T.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),i=this.extractSignificantDigits(!1,e),n=T.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===i.charAt(0))throw new IllegalStateException("Found leading zero: "+i);var r="";i.length>1&&(r=i.substring(1));var o=i.charAt(0)+"."+r;return this.isNegative()?"-"+o+n:o+n},abs:function(){return this.isNaN()?T.NaN:this.isNegative()?this.negate():new T(this)},isPositive:function(){return this.hi>0||0===this.hi&&this.lo>0},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof T){var t=arguments[0];return T.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return T.copy(this).selfAdd(e)}},init:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof T){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.hi=i,this.lo=n}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||0===this.hi&&this.lo<0},trunc:function(){return this.isNaN()?T.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[a,r,o]},getClass:function(){return T}}),T.sqr=function(t){return T.valueOf(t).selfMultiply(t)},T.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return T.parse(t)}if("number"==typeof arguments[0])return new T(arguments[0])},T.sqrt=function(t){return T.valueOf(t).sqrt()},T.parse=function(t){for(var e=0,i=t.length;L.isWhitespace(t.charAt(e));)e++;var n=!1;if(e<i){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(n=!0))}for(var o=new T,s=0,a=0,l=0;!(e>=i);){var h=t.charAt(e);if(e++,L.isDigit(h)){var c=h-"0";o.selfMultiply(T.TEN),o.selfAdd(c),s++}else{if("."!==h){if("e"===h||"E"===h){var u=t.substring(e);try{l=N.parseInt(u)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+u+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+h+"' at position "+e+" in string "+t)}a=s}}var f=o,g=s-a-l;if(0===g)f=o;else if(g>0){d=T.TEN.pow(g);f=o.divide(d)}else if(g<0){var d=T.TEN.pow(-g);f=o.multiply(d)}return n?f.negate():f},T.createNaN=function(){return new T(n.NaN,n.NaN)},T.copy=function(t){return new T(t)},T.magnitude=function(t){var e=Math.abs(t),i=Math.log(e)/Math.log(10),n=Math.trunc(Math.floor(i));return 10*Math.pow(10,n)<=e&&(n+=1),n},T.stringOfChar=function(t,e){for(var i=new _,n=0;n<e;n++)i.append(t);return i.toString()},T.PI=new T(3.141592653589793,1.2246467991473532e-16),T.TWO_PI=new T(6.283185307179586,2.4492935982947064e-16),T.PI_2=new T(1.5707963267948966,6.123233995736766e-17),T.E=new T(2.718281828459045,1.4456468917292502e-16),T.NaN=new T(n.NaN,n.NaN),T.EPS=1.23259516440783e-32,T.SPLIT=134217729,T.MAX_PRINT_DIGITS=32,T.TEN=T.valueOf(10),T.ONE=T.valueOf(1),T.SCI_NOT_EXPONENT_CHAR="E",T.SCI_NOT_ZERO="0.0E0",Wo(A.prototype,{interfaces_:function(){return[]},getClass:function(){return A}}),A.orientationIndex=function(t,e,i){var n=A.orientationIndexFilter(t,e,i);if(n<=1)return n;var r=T.valueOf(e.x).selfAdd(-t.x),o=T.valueOf(e.y).selfAdd(-t.y),s=T.valueOf(i.x).selfAdd(-e.x),a=T.valueOf(i.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},A.signOfDet2x2=function(t,e,i,n){return t.multiply(n).selfSubtract(e.multiply(i)).signum()},A.intersection=function(t,e,i,n){var r=T.valueOf(n.y).selfSubtract(i.y).selfMultiply(T.valueOf(e.x).selfSubtract(t.x)),o=T.valueOf(n.x).selfSubtract(i.x).selfMultiply(T.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=T.valueOf(n.x).selfSubtract(i.x).selfMultiply(T.valueOf(t.y).selfSubtract(i.y)),l=T.valueOf(n.y).selfSubtract(i.y).selfMultiply(T.valueOf(t.x).selfSubtract(i.x)),h=a.subtract(l).selfDivide(s).doubleValue(),c=T.valueOf(t.x).selfAdd(T.valueOf(e.x).selfSubtract(t.x).selfMultiply(h)).doubleValue(),f=T.valueOf(e.x).selfSubtract(t.x).selfMultiply(T.valueOf(t.y).selfSubtract(i.y)),g=T.valueOf(e.y).selfSubtract(t.y).selfMultiply(T.valueOf(t.x).selfSubtract(i.x)),d=f.subtract(g).selfDivide(s).doubleValue();return new u(c,T.valueOf(i.y).selfAdd(T.valueOf(n.y).selfSubtract(i.y).selfMultiply(d)).doubleValue())},A.orientationIndexFilter=function(t,e,i){var n=null,r=(t.x-i.x)*(e.y-i.y),o=(t.y-i.y)*(e.x-i.x),s=r-o;if(r>0){if(o<=0)return A.signum(s);n=r+o}else{if(!(r<0))return A.signum(s);if(o>=0)return A.signum(s);n=-r-o}var a=A.DP_SAFE_EPSILON*n;return s>=a||-s>=a?A.signum(s):2},A.signum=function(t){return t>0?1:t<0?-1:0},A.DP_SAFE_EPSILON=1e-15,Wo(P.prototype,{setOrdinate:function(t,e,i){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[o]},getClass:function(){return P}}),P.X=0,P.Y=1,P.Z=2,P.M=3,M.arraycopy=function(t,e,i,n,r){for(var o=0,s=e;s<e+r;s++)i[n+o]=t[s],o++},M.getProperty=function(t){return{"line.separator":"\n"}[t]},Wo(R.prototype,{getY:function(){var t=this.y/this.w;if(n.isNaN(t)||n.isInfinite(t))throw new I;return t},getX:function(){var t=this.x/this.w;if(n.isNaN(t)||n.isInfinite(t))throw new I;return t},getCoordinate:function(){var t=new u;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return R}}),R.intersection=function(t,e,i,r){var o=t.y-e.y,s=e.x-t.x,a=t.x*e.y-e.x*t.y,l=i.y-r.y,h=r.x-i.x,c=i.x*r.y-r.x*i.y,f=o*h-l*s,g=(s*c-h*a)/f,d=(l*a-o*c)/f;if(n.isNaN(g)||n.isInfinite(g)||n.isNaN(d)||n.isInfinite(d))throw new I;return new u(g,d)},Wo(O.prototype,{create:function(){1===arguments.length?arguments[0]instanceof Array?arguments[0]:Zo(arguments[0],P)&&arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return O}}),Wo(k.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return k}}),Wo(F.prototype,{isGeometryCollection:function(){return this.getSortIndex()===F.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof F))return!1;var i=e;return this.equalsExact(i)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(F.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return null!==t&&this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var i=arguments[0],n=arguments[1],e=i;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(i,n)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===F.SORTINDEX_GEOMETRYCOLLECTION)throw new i("This method does not support GeometryCollection arguments")},equal:function(t,e,i){return 0===i?t.equals(e):t.distance(e)<=i},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new C(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var i=t.iterator(),n=e.iterator();i.hasNext()&&n.hasNext();){var r=i.next(),o=n.next(),s=r.compareTo(o);if(0!==s)return s}return i.hasNext()?1:n.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===F.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===F.SORTINDEX_MULTIPOINT||this.getSortIndex()===F.SORTINDEX_MULTILINESTRING||this.getSortIndex()===F.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[o,r,a]},getClass:function(){return F}}),F.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},F.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},F.serialVersionUID=0x799ea46522854c00,F.SORTINDEX_POINT=0,F.SORTINDEX_MULTIPOINT=1,F.SORTINDEX_LINESTRING=2,F.SORTINDEX_LINEARRING=3,F.SORTINDEX_MULTILINESTRING=4,F.SORTINDEX_POLYGON=5,F.SORTINDEX_MULTIPOLYGON=6,F.SORTINDEX_GEOMETRYCOLLECTION=7,F.geometryChangedFilter={interfaces_:function(){return[k]},filter:function(t){t.geometryChangedAction()}},Wo(D.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return D}}),Wo(G.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return G}}),Wo(B.prototype,{isInBoundary:function(t){return t%2==1},interfaces_:function(){return[G]},getClass:function(){return B}}),Wo(V.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[G]},getClass:function(){return V}}),Wo(z.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[G]},getClass:function(){return z}}),Wo(q.prototype,{isInBoundary:function(t){return 1===t},interfaces_:function(){return[G]},getClass:function(){return q}}),G.Mod2BoundaryNodeRule=B,G.EndPointBoundaryNodeRule=V,G.MultiValentEndPointBoundaryNodeRule=z,G.MonoValentEndPointBoundaryNodeRule=q,G.MOD2_BOUNDARY_RULE=new B,G.ENDPOINT_BOUNDARY_RULE=new V,G.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new z,G.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new q,G.OGC_SFS_BOUNDARY_RULE=G.MOD2_BOUNDARY_RULE,Wo(Y.prototype,{interfaces_:function(){return[]},getClass:function(){return Y}}),Y.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Y.ptNotInList=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(Y.indexOf(n,e)<0)return n}return null},Y.scroll=function(t,e){var i=Y.indexOf(e,t);if(i<0)return null;var n=new Array(t.length).fill(null);M.arraycopy(t,i,n,0,t.length-i),M.arraycopy(t,0,n,t.length-i,i),M.arraycopy(n,0,t,0,t.length)},Y.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(!t[o].equals(e[o]))return!1;return!0}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];if(i===n)return!0;if(null===i||null===n)return!1;if(i.length!==n.length)return!1;for(var o=0;o<i.length;o++)if(0!==r.compare(i[o],n[o]))return!1;return!0}},Y.intersection=function(t,e){for(var i=new w,n=0;n<t.length;n++)e.intersects(t[n])&&i.add(t[n],!0);return i.toCoordinateArray()},Y.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Y.removeRepeatedPoints=function(t){return Y.hasRepeatedPoints(t)?new w(t,!1).toCoordinateArray():t},Y.reverse=function(t){for(var e=t.length-1,i=Math.trunc(e/2),n=0;n<=i;n++){var r=t[n];t[n]=t[e-n],t[e-n]=r}},Y.removeNull=function(t){for(var e=0,i=0;i<t.length;i++)null!==t[i]&&e++;var n=new Array(e).fill(null);if(0===e)return n;for(var r=0,i=0;i<t.length;i++)null!==t[i]&&(n[r++]=t[i]);return n},Y.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),i=0;i<t.length;i++)e[i]=new u(t[i]);return e}if(5===arguments.length)for(var n=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],i=0;i<a;i++)o[s+i]=new u(n[r+i])},Y.isEqualReversed=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=e[t.length-i-1];if(0!==n.compareTo(r))return!1}return!0},Y.envelope=function(t){for(var e=new C,i=0;i<t.length;i++)e.expandToInclude(t[i]);return e},Y.toCoordinateArray=function(t){return t.toArray(Y.coordArrayType)},Y.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Y.indexOf=function(t,e){for(var i=0;i<e.length;i++)if(t.equals(e[i]))return i;return-1},Y.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var i=t.length-1-e,n=t[e].compareTo(t[i]);if(0!==n)return n}return 1},Y.compare=function(t,e){for(var i=0;i<t.length&&i<e.length;){var n=t[i].compareTo(e[i]);if(0!==n)return n;i++}return i<e.length?-1:i<t.length?1:0},Y.minCoordinate=function(t){for(var e=null,i=0;i<t.length;i++)(null===e||e.compareTo(t[i])>0)&&(e=t[i]);return e},Y.extract=function(t,e,i){e=b.clamp(e,0,t.length);var n=(i=b.clamp(i,-1,t.length))-e+1;i<0&&(n=0),e>=t.length&&(n=0),i<e&&(n=0);var r=new Array(n).fill(null);if(0===n)return r;for(var o=0,s=e;s<=i;s++)r[o++]=t[s];return r},Wo(U.prototype,{compare:function(t,e){var i=t,n=e;return Y.compare(i,n)},interfaces_:function(){return[s]},getClass:function(){return U}}),Wo(X.prototype,{compare:function(t,e){var i=t,n=e;if(i.length<n.length)return-1;if(i.length>n.length)return 1;if(0===i.length)return 0;var r=Y.compare(i,n);return Y.isEqualReversed(i,n)?0:r},OLDcompare:function(t,e){var i=t,n=e;if(i.length<n.length)return-1;if(i.length>n.length)return 1;if(0===i.length)return 0;for(var r=Y.increasingDirection(i),o=Y.increasingDirection(n),s=r>0?0:i.length-1,a=o>0?0:i.length-1,l=0;l<i.length;l++){var h=i[s].compareTo(n[a]);if(0!==h)return h;s+=r,a+=o}return 0},interfaces_:function(){return[s]},getClass:function(){return X}}),Y.ForwardComparator=U,Y.BidirectionalComparator=X,Y.coordArrayType=new Array(0).fill(null),H.prototype.get=function(){},H.prototype.put=function(){},H.prototype.size=function(){},H.prototype.values=function(){},H.prototype.entrySet=function(){},W.prototype=new H,(j.prototype=new d).contains=function(){},Q.prototype=new j,Q.prototype.contains=function(t){for(var e=0,i=this.array_.length;e<i;e++)if(this.array_[e]===t)return!0;return!1},Q.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},Q.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Q.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},Q.prototype.size=function(){return this.array_.length},Q.prototype.isEmpty=function(){return 0===this.array_.length},Q.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},Q.prototype.iterator=function(){return new Jo(this)};var Jo=function(t){this.hashSet_=t,this.position_=0};Jo.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new y;return this.hashSet_.array_[this.position_++]},Jo.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Jo.prototype.remove=function(){throw new v};var Ko=0;et.prototype=new W,et.prototype.get=function(t){for(var e=this.root_;null!==e;){var i=t.compareTo(e.key);if(i<0)e=e.left;else{if(!(i>0))return e.value;e=e.right}}return null},et.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Ko,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var i,n,r=this.root_;do{if(i=r,(n=t.compareTo(r.key))<0)r=r.left;else{if(!(n>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:i,color:Ko,getValue:function(){return this.value},getKey:function(){return this.key}};return n<0?i.left=s:i.right=s,this.fixAfterInsertion(s),this.size_++,null},et.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;)if(J(t)==$(J(J(t))))1==Z(e=tt(J(J(t))))?(K(J(t),Ko),K(e,Ko),K(J(J(t)),1),t=J(J(t))):(t==tt(J(t))&&(t=J(t),this.rotateLeft(t)),K(J(t),Ko),K(J(J(t)),1),this.rotateRight(J(J(t))));else{var e=$(J(J(t)));1==Z(e)?(K(J(t),Ko),K(e,Ko),K(J(J(t)),1),t=J(J(t))):(t==$(J(t))&&(t=J(t),this.rotateRight(t)),K(J(t),Ko),K(J(J(t)),1),this.rotateLeft(J(J(t))))}this.root_.color=Ko},et.prototype.values=function(){var t=new x,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=et.successor(e));)t.add(e.value);return t},et.prototype.entrySet=function(){var t=new Q,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=et.successor(e));)t.add(e);return t},et.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},et.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},et.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},et.successor=function(t){if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}for(var e=t.parent,i=t;null!==e&&i===e.right;)i=e,e=e.parent;return e},et.prototype.size=function(){return this.size_},Wo(it.prototype,{interfaces_:function(){return[]},getClass:function(){return it}}),nt.prototype=new j,rt.prototype=new nt,rt.prototype.contains=function(t){for(var e=0,i=this.array_.length;e<i;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},rt.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,i=this.array_.length;e<i;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},rt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},rt.prototype.remove=function(t){throw new v},rt.prototype.size=function(){return this.array_.length},rt.prototype.isEmpty=function(){return 0===this.array_.length},rt.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},rt.prototype.iterator=function(){return new $o(this)};var $o=function(t){this.treeSet_=t,this.position_=0};$o.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new y;return this.treeSet_.array_[this.position_++]},$o.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},$o.prototype.remove=function(){throw new v},ot.sort=function(){var t,e,i,n,r=arguments[0];if(1===arguments.length)return n=function(t,e){return t.compareTo(e)},void r.sort(n);if(2===arguments.length)i=arguments[1],n=function(t,e){return i.compare(t,e)},r.sort(n);else{if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t]);return}if(4===arguments.length){for(e=r.slice(arguments[1],arguments[2]),i=arguments[3],n=function(t,e){return i.compare(t,e)},e.sort(n),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t]);return}}},ot.asList=function(t){for(var e=new x,i=0,n=t.length;i<n;i++)e.add(t[i]);return e},Wo(st.prototype,{interfaces_:function(){return[]},getClass:function(){return st}}),st.toDimensionSymbol=function(t){switch(t){case st.FALSE:return st.SYM_FALSE;case st.TRUE:return st.SYM_TRUE;case st.DONTCARE:return st.SYM_DONTCARE;case st.P:return st.SYM_P;case st.L:return st.SYM_L;case st.A:return st.SYM_A}throw new i("Unknown dimension value: "+t)},st.toDimensionValue=function(t){switch(L.toUpperCase(t)){case st.SYM_FALSE:return st.FALSE;case st.SYM_TRUE:return st.TRUE;case st.SYM_DONTCARE:return st.DONTCARE;case st.SYM_P:return st.P;case st.SYM_L:return st.L;case st.SYM_A:return st.A}throw new i("Unknown dimension symbol: "+t)},st.P=0,st.L=1,st.A=2,st.FALSE=-1,st.TRUE=-2,st.DONTCARE=-3,st.SYM_FALSE="F",st.SYM_TRUE="T",st.SYM_DONTCARE="*",st.SYM_P="0",st.SYM_L="1",st.SYM_A="2",Wo(at.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return at}}),Wo(lt.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return lt}}),jo(ht,F),Wo(ht.prototype,{computeEnvelopeInternal:function(){for(var t=new C,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return F.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,i=0;i<this.geometries.length;i++)for(var n=this.geometries[i].getCoordinates(),r=0;r<n.length;r++)e++,t[e]=n[r];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t;if(this.geometries.length!==i.geometries.length)return!1;for(var n=0;n<this.geometries.length;n++)if(!this.geometries[n].equalsExact(i.geometries[n],e))return!1;return!0}return F.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();ot.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=st.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=st.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),i=0;i<this.geometries.length;i++)e[i]=this.geometries[i].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=new rt(ot.asList(this.geometries)),i=new rt(ot.asList(t.geometries));return this.compare(e,i)}if(2===arguments.length){for(var n=arguments[0],r=arguments[1],o=n,s=this.getNumGeometries(),a=o.getNumGeometries(),l=0;l<s&&l<a;){var h=this.getGeometryN(l),c=o.getGeometryN(l),u=h.compareToSameClass(c,r);if(0!==u)return u;l++}return l<s?1:l<a?-1:0}},apply:function(){if(Zo(arguments[0],D))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(Zo(arguments[0],lt)){var i=arguments[0];if(0===this.geometries.length)return null;for(e=0;e<this.geometries.length&&(this.geometries[e].apply(i),!i.isDone());e++);i.isGeometryChanged()&&this.geometryChanged()}else if(Zo(arguments[0],at)){var n=arguments[0];n.filter(this);for(e=0;e<this.geometries.length;e++)this.geometries[e].apply(n)}else if(Zo(arguments[0],k)){var r=arguments[0];r.filter(this);for(e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}},getBoundary:function(){return this.checkNotGeometryCollection(this),c.shouldNeverReachHere(),null},clone:function(){var t=F.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ht(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ht}}),ht.serialVersionUID=-0x4f07bcb1f857d800,jo(ct,ht),Wo(ct.prototype,{getSortIndex:function(){return F.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ht.prototype.equalsExact.call(this,t,e)}return ht.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?st.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),i=0;i<this.geometries.length;i++)e[t-1-i]=this.geometries[i].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new ut(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ct(t,this.factory)},interfaces_:function(){return[it]},getClass:function(){return ct}}),ct.serialVersionUID=0x7155d2ab4afa8000,Wo(ut.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof wt?this.boundaryLineString(this.geom):this.geom instanceof ct?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){return this.geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this.bnRule.isInBoundary(2)?t.getStartPoint():this.geomFact.createMultiPoint():this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new x;this.endpointMap=new et;for(var i=0;i<t.getNumGeometries();i++){var n=t.getGeometryN(i);0!==n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)))}for(var r=this.endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue().count;this.bnRule.isInBoundary(s)&&e.add(o.getKey())}return Y.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);null===e&&(e=new ft,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return ut}}),ut.getBoundary=function(){if(1===arguments.length)return(t=new ut(arguments[0])).getBoundary();if(2===arguments.length){var t=new ut(arguments[0],arguments[1]);return t.getBoundary()}},Wo(ft.prototype,{interfaces_:function(){return[]},getClass:function(){return ft}}),Wo(vt.prototype,{interfaces_:function(){return[]},getClass:function(){return vt}}),vt.chars=function(t,e){for(var i=new Array(e).fill(null),n=0;n<e;n++)i[n]=t;return new String(i)},vt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new pt,i=new gt(e);return t.printStackTrace(i),e.toString()}if(2===arguments.length){for(var n=arguments[0],r=arguments[1],o="",s=new yt(new dt(vt.getStackTrace(n))),a=0;a<r;a++)try{o+=s.readLine()+vt.NEWLINE}catch(t){if(!(t instanceof mt))throw t;c.shouldNeverReachHere()}return o}},vt.split=function(t,e){for(var i=e.length,n=new x,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);n.add(s),o=(r=r.substring(o+i)).indexOf(e)}r.length>0&&n.add(r);for(var a=new Array(n.size()).fill(null),l=0;l<a.length;l++)a[l]=n.get(l);return a},vt.toString=function(){if(1===arguments.length){var t=arguments[0];return vt.SIMPLE_ORDINATE_FORMAT.format(t)}},vt.spaces=function(t){return vt.chars(" ",t)},vt.NEWLINE=M.getProperty("line.separator"),vt.SIMPLE_ORDINATE_FORMAT=new function(){}("0.#"),Wo(xt.prototype,{interfaces_:function(){return[]},getClass:function(){return xt}}),xt.copyCoord=function(t,e,i,n){for(var r=Math.min(t.getDimension(),i.getDimension()),o=0;o<r;o++)i.setOrdinate(n,o,t.getOrdinate(e,o))},xt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,P.X)===t.getOrdinate(e-1,P.X)&&t.getOrdinate(0,P.Y)===t.getOrdinate(e-1,P.Y)},xt.isEqual=function(t,e){var i=t.size();if(i!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),o=0;o<i;o++)for(var s=0;s<r;s++){var a=t.getOrdinate(o,s),l=e.getOrdinate(o,s);if(!(t.getOrdinate(o,s)===e.getOrdinate(o,s)||n.isNaN(a)&&n.isNaN(l)))return!1}return!0},xt.extend=function(t,e,i){var n=t.create(i,e.getDimension()),r=e.size();if(xt.copy(e,0,n,0,r),r>0)for(var o=r;o<i;o++)xt.copy(e,r-1,n,o,1);return n},xt.reverse=function(t){for(var e=t.size()-1,i=Math.trunc(e/2),n=0;n<=i;n++)xt.swap(t,n,e-n)},xt.swap=function(t,e,i){if(e===i)return null;for(var n=0;n<t.getDimension();n++){var r=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(i,n)),t.setOrdinate(i,n,r)}},xt.copy=function(t,e,i,n,r){for(var o=0;o<r;o++)xt.copyCoord(t,e+o,i,n+o)},xt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var i=t.getDimension(),n=new _;n.append("(");for(var r=0;r<e;r++){r>0&&n.append(" ");for(var o=0;o<i;o++)o>0&&n.append(","),n.append(vt.toString(t.getOrdinate(r,o)))}return n.append(")"),n.toString()}},xt.ensureValidRing=function(t,e){var i=e.size();return 0===i?e:i<=3?xt.createClosedRing(t,e,4):e.getOrdinate(0,P.X)===e.getOrdinate(i-1,P.X)&&e.getOrdinate(0,P.Y)===e.getOrdinate(i-1,P.Y)?e:xt.createClosedRing(t,e,i+1)},xt.createClosedRing=function(t,e,i){var n=t.create(i,e.getDimension()),r=e.size();xt.copy(e,0,n,0,r);for(var o=r;o<i;o++)xt.copy(e,0,n,o,1);return n},jo(wt,F),Wo(wt.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new C:this.points.expandEnvelope(new C)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return F.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t;if(this.points.size()!==i.points.size())return!1;for(var n=0;n<this.points.size();n++)if(!this.equal(this.points.getCoordinate(n),i.points.getCoordinate(n),e))return!1;return!0}return F.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&xt.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?st.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return Zt.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();return xt.reverse(t),this.getFactory().createLineString(t)},compareToSameClass:function(){if(1===arguments.length){for(var t=arguments[0],e=0,i=0;e<this.points.size()&&i<t.points.size();){var n=this.points.getCoordinate(e).compareTo(t.points.getCoordinate(i));if(0!==n)return n;e++,i++}return e<this.points.size()?1:i<t.points.size()?-1:0}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this.points,t.points)}},apply:function(){if(Zo(arguments[0],D))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(Zo(arguments[0],lt)){var i=arguments[0];if(0===this.points.size())return null;for(e=0;e<this.points.size()&&(i.filter(this.points,e),!i.isDone());e++);i.isGeometryChanged()&&this.geometryChanged()}else Zo(arguments[0],at)?arguments[0].filter(this):Zo(arguments[0],k)&&arguments[0].filter(this)},getBoundary:function(){return new ut(this).getBoundary()},isEquivalentClass:function(t){return t instanceof wt},clone:function(){var t=F.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new wt(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return 0===this.points.size()},init:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new i("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[it]},getClass:function(){return wt}}),wt.serialVersionUID=0x2b2b51ba435c8e00,Wo(Ct.prototype,{interfaces_:function(){return[]},getClass:function(){return Ct}}),jo(Et,F),Wo(Et.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new C;var t=new C;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return F.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return F.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return st.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(1===arguments.length){t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var t=arguments[0];return arguments[1].compare(this.coordinates,t.coordinates)}},apply:function(){if(Zo(arguments[0],D)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Zo(arguments[0],lt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else Zo(arguments[0],at)?arguments[0].filter(this):Zo(arguments[0],k)&&arguments[0].filter(this)},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=F.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new Et(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return 0===this.coordinates.size()},init:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),c.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[Ct]},getClass:function(){return Et}}),Et.serialVersionUID=0x44077bad161cbc00,Wo(It.prototype,{interfaces_:function(){return[]},getClass:function(){return It}}),jo(St,F),Wo(St.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return F.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,i=this.shell.getCoordinates(),n=0;n<i.length;n++)e++,t[e]=i[n];for(var r=0;r<this.holes.length;r++)for(var o=this.holes[r].getCoordinates(),s=0;s<o.length;s++)e++,t[e]=o[s];return t},getArea:function(){var t=0;t+=Math.abs(Zt.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(Zt.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),i=0;i<5;i++){if((o=t.getX(i))!==e.getMinX()&&o!==e.getMaxX())return!1;if((s=t.getY(i))!==e.getMinY()&&s!==e.getMaxY())return!1}for(var n=t.getX(0),r=t.getY(0),i=1;i<=4;i++){var o=t.getX(i),s=t.getY(i);if(o!==n==(s!==r))return!1;n=o,r=s}return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t,n=this.shell,r=i.shell;if(!n.equalsExact(r,e))return!1;if(this.holes.length!==i.holes.length)return!1;for(var o=0;o<this.holes.length;o++)if(!this.holes[o].equalsExact(i.holes[o],e))return!1;return!0}return F.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(0===arguments.length){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);ot.sort(this.holes)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(e.isEmpty())return null;var n=new Array(e.getCoordinates().length-1).fill(null);M.arraycopy(e.getCoordinates(),0,n,0,n.length);var r=Y.minCoordinate(e.getCoordinates());Y.scroll(n,r),M.arraycopy(n,0,e.getCoordinates(),0,n.length),e.getCoordinates()[n.length]=n[0],Zt.isCCW(e.getCoordinates())===i&&Y.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=this.shell,i=t.shell;return e.compareToSameClass(i)}if(2===arguments.length){var n=arguments[0],r=arguments[1],o=n,e=this.shell,i=o.shell,s=e.compareToSameClass(i,r);if(0!==s)return s;for(var a=this.getNumInteriorRing(),l=o.getNumInteriorRing(),h=0;h<a&&h<l;){var c=this.getInteriorRingN(h),u=o.getInteriorRingN(h),f=c.compareToSameClass(u,r);if(0!==f)return f;h++}return h<a?1:h<l?-1:0}},apply:function(){if(Zo(arguments[0],D)){var t=arguments[0];this.shell.apply(t);for(n=0;n<this.holes.length;n++)this.holes[n].apply(t)}else if(Zo(arguments[0],lt)){var e=arguments[0];if(this.shell.apply(e),!e.isDone())for(n=0;n<this.holes.length&&(this.holes[n].apply(e),!e.isDone());n++);e.isGeometryChanged()&&this.geometryChanged()}else if(Zo(arguments[0],at))arguments[0].filter(this);else if(Zo(arguments[0],k)){var i=arguments[0];i.filter(this),this.shell.apply(i);for(var n=0;n<this.holes.length;n++)this.holes[n].apply(i)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=F.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),i=0;i<e.length;i++)e[i]=this.holes[i].copy();return new St(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[It]},getClass:function(){return St}}),St.serialVersionUID=-0x307ffefd8dc97200,jo(bt,ht),Wo(bt.prototype,{getSortIndex:function(){return F.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ht.prototype.equalsExact.call(this,t,e)}return ht.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.geometries[t].getCoordinate()}return ht.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return st.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new bt(t,this.factory)},interfaces_:function(){return[Ct]},getClass:function(){return bt}}),bt.serialVersionUID=-0x6fb1ed4162e0fc00,jo(_t,wt),Wo(_t.prototype,{getSortIndex:function(){return F.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return st.FALSE},isClosed:function(){return!!this.isEmpty()||wt.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();return xt.reverse(t),this.getFactory().createLinearRing(t)},validateConstruction:function(){if(!this.isEmpty()&&!wt.prototype.isClosed.call(this))throw new i("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<_t.MINIMUM_VALID_SIZE)throw new i("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new _t(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return _t}}),_t.MINIMUM_VALID_SIZE=4,_t.serialVersionUID=-0x3b229e262367a600,jo(Nt,ht),Wo(Nt.prototype,{getSortIndex:function(){return F.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ht.prototype.equalsExact.call(this,t,e)}return ht.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),i=0;i<this.geometries.length;i++)e[i]=this.geometries[i].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new x,e=0;e<this.geometries.length;e++)for(var i=this.geometries[e],n=i.getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var o=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(o))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Nt(t,this.factory)},interfaces_:function(){return[It]},getClass:function(){return Nt}}),Nt.serialVersionUID=-0x7a5aa1369171980,Wo(Lt.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(null===t)return null;var i=this.editInternal(t,e);return this.isUserDataCopied&&i.setUserData(t.getUserData()),i},editInternal:function(t,e){return null===this.factory&&(this.factory=t.getFactory()),t instanceof ht?this.editGeometryCollection(t,e):t instanceof St?this.editPolygon(t,e):t instanceof Et?e.edit(t,this.factory):t instanceof wt?e.edit(t,this.factory):(c.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var i=e.edit(t,this.factory),n=new x,r=0;r<i.getNumGeometries();r++){var o=this.edit(i.getGeometryN(r),e);null===o||o.isEmpty()||n.add(o)}return i.getClass()===bt?this.factory.createMultiPoint(n.toArray([])):i.getClass()===ct?this.factory.createMultiLineString(n.toArray([])):i.getClass()===Nt?this.factory.createMultiPolygon(n.toArray([])):this.factory.createGeometryCollection(n.toArray([]))},editPolygon:function(t,e){var i=e.edit(t,this.factory);if(null===i&&(i=this.factory.createPolygon(null)),i.isEmpty())return i;var n=this.edit(i.getExteriorRing(),e);if(null===n||n.isEmpty())return this.factory.createPolygon();for(var r=new x,o=0;o<i.getNumInteriorRing();o++){var s=this.edit(i.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this.factory.createPolygon(n,r.toArray([]))},interfaces_:function(){return[]},getClass:function(){return Lt}}),Lt.GeometryEditorOperation=Tt,Wo(At.prototype,{edit:function(t,e){return t},interfaces_:function(){return[Tt]},getClass:function(){return At}}),Wo(Pt.prototype,{edit:function(t,e){var i=this.editCoordinates(t.getCoordinates(),t);return null===i?t:t instanceof _t?e.createLinearRing(i):t instanceof wt?e.createLineString(i):t instanceof Et?i.length>0?e.createPoint(i[0]):e.createPoint():t},interfaces_:function(){return[Tt]},getClass:function(){return Pt}}),Wo(Mt.prototype,{edit:function(t,e){return t instanceof _t?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof wt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Et?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[Tt]},getClass:function(){return Mt}}),Lt.NoOpGeometryOperation=At,Lt.CoordinateOperation=Pt,Lt.CoordinateSequenceOperation=Mt,Wo(Rt.prototype,{setOrdinate:function(t,e,n){switch(e){case P.X:this.coordinates[t].x=n;break;case P.Y:this.coordinates[t].y=n;break;case P.Z:this.coordinates[t].z=n;break;default:throw new i("invalid ordinateIndex")}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case P.X:return this.coordinates[t].x;case P.Y:return this.coordinates[t].y;case P.Z:return this.coordinates[t].z}return n.NaN},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.coordinates[t]}if(2===arguments.length){var e=arguments[0],i=arguments[1];i.x=this.coordinates[e].x,i.y=this.coordinates[e].y,i.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new u(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new Rt(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new Rt(t,this.dimension)},toString:function(){if(this.coordinates.length>0){var t=new _(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[P,a]},getClass:function(){return Rt}}),Rt.serialVersionUID=-0xcb44a778db18e00,Wo(Ot.prototype,{readResolve:function(){return Ot.instance()},create:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Rt(arguments[0]);if(Zo(arguments[0],P))return new Rt(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new Rt(t):new Rt(t,e)}},interfaces_:function(){return[O,a]},getClass:function(){return Ot}}),Ot.instance=function(){return Ot.instanceObject},Ot.serialVersionUID=-0x38e49fa6cf6f2e00,Ot.instanceObject=new Ot;var ts,es=Object.defineProperty,is=function(t,e){function i(t){if(!this||this.constructor!==i)return new i(t);this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,t&&Ft.call(this,t)}return e||es(t,"size",{get:Bt}),t.constructor=i,i.prototype=t,i}({delete:function(t){return this.has(t)&&(this._keys.splice(ts,1),this._values.splice(ts,1),this._itp.forEach(function(t){ts<t[0]&&t[0]--})),ts>-1},has:function(t){return Dt.call(this,this._keys,t)},get:function(t){return this.has(t)?this._values[ts]:void 0},set:function(t,e){return this.has(t)?this._values[ts]=e:this._values[this._keys.push(t)-1]=e,this},keys:function(){return Gt(this._itp,this._keys)},values:function(){return Gt(this._itp,this._values)},entries:function(){return Gt(this._itp,this._keys,this._values)},forEach:function(t,e){for(var i=this.entries();;){var n=i.next();if(n.done)break;t.call(e,n.value[1],n.value[0],this)}},clear:function(){(this._keys||0).length=this._values.length=0}}),ns="undefined"!=typeof Map&&Map.prototype.values?Map:is;Vt.prototype=new H,Vt.prototype.get=function(t){return this.map_.get(t)||null},Vt.prototype.put=function(t,e){return this.map_.set(t,e),e},Vt.prototype.values=function(){for(var t=new x,e=this.map_.values(),i=e.next();!i.done;)t.add(i.value),i=e.next();return t},Vt.prototype.entrySet=function(){var t=new Q;return this.map_.entries().forEach(function(e){return t.add(e)}),t},Vt.prototype.size=function(){return this.map_.size()},Wo(zt.prototype,{equals:function(t){if(!(t instanceof zt))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,i=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return new N(i).compareTo(new N(n))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===zt.FLOATING||this.modelType===zt.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===zt.FLOATING?t="Floating":this.modelType===zt.FLOATING_SINGLE?t="Floating-Single":this.modelType===zt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if("number"==typeof arguments[0]){var t=arguments[0];return n.isNaN(t)?t:this.modelType===zt.FLOATING_SINGLE?t:this.modelType===zt.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof u){var e=arguments[0];if(this.modelType===zt.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===zt.FLOATING?t=16:this.modelType===zt.FLOATING_SINGLE?t=6:this.modelType===zt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[a,r]},getClass:function(){return zt}}),zt.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Wo(qt.prototype,{readResolve:function(){return qt.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[a]},getClass:function(){return qt}}),qt.serialVersionUID=-552860263173159e4,qt.nameToTypeMap=new Vt,zt.Type=qt,zt.serialVersionUID=0x6bee6404e9a25c00,zt.FIXED=new qt("FIXED"),zt.FLOATING=new qt("FLOATING"),zt.FLOATING_SINGLE=new qt("FLOATING SINGLE"),zt.maximumPreciseValue=9007199254740992,Wo(Yt.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new u(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new u(t.getMinX(),t.getMinY()),new u(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new u(t.getMinX(),t.getMinY()),new u(t.getMinX(),t.getMaxY()),new u(t.getMaxX(),t.getMaxY()),new u(t.getMaxX(),t.getMinY()),new u(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Zo(arguments[0],P))return new wt(arguments[0],this)}},createMultiLineString:function(){return 0===arguments.length?new ct(null,this):1===arguments.length?new ct(arguments[0],this):void 0},buildGeometry:function(t){for(var e=null,i=!1,n=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(i=!0),o.isGeometryCollectionOrDerived()&&(n=!0)}if(null===e)return this.createGeometryCollection();if(i||n)return this.createGeometryCollection(Yt.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof St)return this.createMultiPolygon(Yt.toPolygonArray(t));if(a instanceof wt)return this.createMultiLineString(Yt.toLineStringArray(t));if(a instanceof Et)return this.createMultiPoint(Yt.toPointArray(t));c.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},createMultiPointFromCoords:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof u){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Zo(arguments[0],P))return new Et(arguments[0],this)}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(0===arguments.length)return new St(null,null,this);if(1===arguments.length){if(Zo(arguments[0],P)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof _t){var i=arguments[0];return this.createPolygon(i,null)}}else if(2===arguments.length)return new St(arguments[0],arguments[1],this)},getSRID:function(){return this.SRID},createGeometryCollection:function(){return 0===arguments.length?new ht(null,this):1===arguments.length?new ht(arguments[0],this):void 0},createGeometry:function(t){return new Lt(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return arguments[1],this.coordinateSequenceFactory.create(t)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Zo(arguments[0],P))return new _t(arguments[0],this)}},createMultiPolygon:function(){return 0===arguments.length?new Nt(null,this):1===arguments.length?new Nt(arguments[0],this):void 0},createMultiPoint:function(){if(0===arguments.length)return new bt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new bt(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Zo(arguments[0],P)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(e.size()).fill(null),n=0;n<e.size();n++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension());xt.copy(e,n,r,0,1),i[n]=this.createPoint(r)}return this.createMultiPoint(i)}}},interfaces_:function(){return[a]},getClass:function(){return Yt}}),Yt.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.getDefaultCoordinateSequenceFactory=function(){return Ot.instance()},Yt.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Yt.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Yt.serialVersionUID=-0x5ea75f2051eeb400;var rs={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};Wo(Ut.prototype,{read:function(t){var e,i,n;t=t.replace(/[\n\r]/g," ");var r=rs.typeStr.exec(t);if(-1!==t.search("EMPTY")&&(r=rs.emptyTypeStr.exec(t),r[2]=void 0),r&&(i=r[1].toLowerCase(),n=r[2],ss[i]&&(e=ss[i].apply(this,[n]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!os[e])return null;var i=e.toUpperCase();return t.isEmpty()?i+" EMPTY":i+"("+os[e].apply(this,[t])+")"}});var os={coordinate:function(t){return t.x+" "+t.y},point:function(t){return os.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],i=0,n=t.geometries.length;i<n;++i)e.push("("+os.point.apply(this,[t.geometries[i]])+")");return e.join(",")},linestring:function(t){for(var e=[],i=0,n=t.points.coordinates.length;i<n;++i)e.push(os.coordinate.apply(this,[t.points.coordinates[i]]));return e.join(",")},linearring:function(t){for(var e=[],i=0,n=t.points.coordinates.length;i<n;++i)e.push(os.coordinate.apply(this,[t.points.coordinates[i]]));return e.join(",")},multilinestring:function(t){for(var e=[],i=0,n=t.geometries.length;i<n;++i)e.push("("+os.linestring.apply(this,[t.geometries[i]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+os.linestring.apply(this,[t.shell])+")");for(var i=0,n=t.holes.length;i<n;++i)e.push("("+os.linestring.apply(this,[t.holes[i]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],i=0,n=t.geometries.length;i<n;++i)e.push("("+os.polygon.apply(this,[t.geometries[i]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],i=0,n=t.geometries.length;i<n;++i)e.push(this.extractGeometry(t.geometries[i]));return e.join(",")}},ss={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(rs.spaces);return this.geometryFactory.createPoint(new u(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,i=t.trim().split(","),n=[],r=0,o=i.length;r<o;++r)e=i[r].replace(rs.trimParens,"$1"),n.push(ss.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(n)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,i=t.trim().split(","),n=[],r=0,o=i.length;r<o;++r)e=i[r].trim().split(rs.spaces),n.push(new u(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(n)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,i=t.trim().split(","),n=[],r=0,o=i.length;r<o;++r)e=i[r].trim().split(rs.spaces),n.push(new u(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,i=t.trim().split(rs.parenComma),n=[],r=0,o=i.length;r<o;++r)e=i[r].replace(rs.trimParens,"$1"),n.push(ss.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(n)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,i,n,r,o=t.trim().split(rs.parenComma),s=[],a=0,l=o.length;a<l;++a)e=o[a].replace(rs.trimParens,"$1"),i=ss.linestring.apply(this,[e]),n=this.geometryFactory.createLinearRing(i.points),0===a?r=n:s.push(n);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,i=t.trim().split(rs.doubleParenComma),n=[],r=0,o=i.length;r<o;++r)e=i[r].replace(rs.trimParens,"$1"),n.push(ss.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(n)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),i=[],n=0,r=e.length;n<r;++n)i.push(this.read(e[n]));return this.geometryFactory.createGeometryCollection(i)}};Wo(Xt.prototype,{write:function(t){return this.parser.write(t)}}),Wo(Xt,{toLineString:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),Wo(Ht.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new _;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,i,n){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=i,this.inputLines[1][1]=n,this.result=this.computeIntersect(t,e,i,n)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(0===arguments.length)null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==Ht.NO_INTERSECTION},getEdgeDistance:function(t,e){return Ht.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1])},isCollinear:function(){return this.result===Ht.COLLINEAR_INTERSECTION},toString:function(){return Xt.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+Xt.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return Ht}}),Ht.computeEdgeDistance=function(t,e,i){var n=Math.abs(i.x-e.x),r=Math.abs(i.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(i))o=n>r?n:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=n>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return c.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Ht.nonRobustComputeEdgeDistance=function(t,e,i){var n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(n*n+r*r);return c.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Ht.DONT_INTERSECT=0,Ht.DO_INTERSECT=1,Ht.COLLINEAR=2,Ht.NO_INTERSECTION=0,Ht.POINT_INTERSECTION=1,Ht.COLLINEAR_INTERSECTION=2,jo(Wt,Ht),Wo(Wt.prototype,{isInSegmentEnvelopes:function(t){var e=new C(this.inputLines[0][0],this.inputLines[0][1]),i=new C(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&i.contains(t)},computeIntersection:function(){if(3!==arguments.length)return Ht.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],i=arguments[2];if(this._isProper=!1,C.intersects(e,i,t)&&0===Zt.orientationIndex(e,i,t)&&0===Zt.orientationIndex(i,e,t))return this._isProper=!0,(t.equals(e)||t.equals(i))&&(this._isProper=!1),this.result=Ht.POINT_INTERSECTION,null;this.result=Ht.NO_INTERSECTION},normalizeToMinimum:function(t,e,i,n,r){r.x=this.smallestInAbsValue(t.x,e.x,i.x,n.x),r.y=this.smallestInAbsValue(t.y,e.y,i.y,n.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,i.x-=r.x,i.y-=r.y,n.x-=r.x,n.y-=r.y},safeHCoordinateIntersection:function(t,e,i,n){var r=null;try{r=R.intersection(t,e,i,n)}catch(o){if(!(o instanceof I))throw o;r=Wt.nearestEndpoint(t,e,i,n)}return r},intersection:function(t,e,i,n){var r=this.intersectionWithNormalization(t,e,i,n);return this.isInSegmentEnvelopes(r)||(r=new u(Wt.nearestEndpoint(t,e,i,n))),null!==this.precisionModel&&this.precisionModel.makePrecise(r),r},smallestInAbsValue:function(t,e,i,n){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(i)<o&&(r=i,o=Math.abs(i)),Math.abs(n)<o&&(r=n),r},checkDD:function(t,e,i,n,r){var o=A.intersection(t,e,i,n),s=this.isInSegmentEnvelopes(o);M.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&M.out.println("Distance = "+r.distance(o))},intersectionWithNormalization:function(t,e,i,n){var r=new u(t),o=new u(e),s=new u(i),a=new u(n),l=new u;this.normalizeToEnvCentre(r,o,s,a,l);var h=this.safeHCoordinateIntersection(r,o,s,a);return h.x+=l.x,h.y+=l.y,h},computeCollinearIntersection:function(t,e,i,n){var r=C.intersects(t,e,i),o=C.intersects(t,e,n),s=C.intersects(i,n,t),a=C.intersects(i,n,e);return r&&o?(this.intPt[0]=i,this.intPt[1]=n,Ht.COLLINEAR_INTERSECTION):s&&a?(this.intPt[0]=t,this.intPt[1]=e,Ht.COLLINEAR_INTERSECTION):r&&s?(this.intPt[0]=i,this.intPt[1]=t,!i.equals(t)||o||a?Ht.COLLINEAR_INTERSECTION:Ht.POINT_INTERSECTION):r&&a?(this.intPt[0]=i,this.intPt[1]=e,!i.equals(e)||o||s?Ht.COLLINEAR_INTERSECTION:Ht.POINT_INTERSECTION):o&&s?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||r||a?Ht.COLLINEAR_INTERSECTION:Ht.POINT_INTERSECTION):o&&a?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||r||s?Ht.COLLINEAR_INTERSECTION:Ht.POINT_INTERSECTION):Ht.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,i,n,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,h=i.x<n.x?i.x:n.x,c=i.y<n.y?i.y:n.y,u=i.x>n.x?i.x:n.x,f=i.y>n.y?i.y:n.y,g=((o>h?o:h)+(a<u?a:u))/2,d=((s>c?s:c)+(l<f?l:f))/2;r.x=g,r.y=d,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,i.x-=r.x,i.y-=r.y,n.x-=r.x,n.y-=r.y},computeIntersect:function(t,e,i,n){if(this._isProper=!1,!C.intersects(t,e,i,n))return Ht.NO_INTERSECTION;var r=Zt.orientationIndex(t,e,i),o=Zt.orientationIndex(t,e,n);if(r>0&&o>0||r<0&&o<0)return Ht.NO_INTERSECTION;var s=Zt.orientationIndex(i,n,t),a=Zt.orientationIndex(i,n,e);return s>0&&a>0||s<0&&a<0?Ht.NO_INTERSECTION:0===r&&0===o&&0===s&&0===a?this.computeCollinearIntersection(t,e,i,n):(0===r||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(i)||t.equals2D(n)?this.intPt[0]=t:e.equals2D(i)||e.equals2D(n)?this.intPt[0]=e:0===r?this.intPt[0]=new u(i):0===o?this.intPt[0]=new u(n):0===s?this.intPt[0]=new u(t):0===a&&(this.intPt[0]=new u(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,i,n)),Ht.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return Wt}}),Wt.nearestEndpoint=function(t,e,i,n){var r=t,o=Zt.distancePointLine(t,i,n),s=Zt.distancePointLine(e,i,n);return s<o&&(o=s,r=e),(s=Zt.distancePointLine(i,t,e))<o&&(o=s,r=i),(s=Zt.distancePointLine(n,t,e))<o&&(o=s,r=n),r},Wo(jt.prototype,{interfaces_:function(){return[]},getClass:function(){return jt}}),jt.orientationIndex=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=i.x-e.x,s=i.y-e.y;return jt.signOfDet2x2(n,r,o,s)},jt.signOfDet2x2=function(t,e,i,n){var r=null,o=null,s=null;if(r=1,0===t||0===n)return 0===e||0===i?0:e>0?i>0?-r:r:i>0?r:-r;if(0===e||0===i)return n>0?t>0?r:-r:t>0?-r:r;if(0<e?0<n?e<=n||(r=-r,o=t,t=i,i=o,o=e,e=n,n=o):e<=-n?(r=-r,i=-i,n=-n):(o=t,t=-i,i=o,o=e,e=-n,n=o):0<n?-e<=n?(r=-r,t=-t,e=-e):(o=-t,t=i,i=o,o=-e,e=n,n=o):e>=n?(t=-t,e=-e,i=-i,n=-n):(r=-r,o=-t,t=-i,i=o,o=-e,e=-n,n=o),0<t){if(!(0<i))return r;if(!(t<=i))return r}else{if(0<i)return-r;if(!(t>=i))return-r;r=-r,t=-t,i=-i}for(;;){if(1,s=Math.floor(i/t),i-=s*t,(n-=s*e)<0)return-r;if(n>e)return r;if(t>i+i){if(e<n+n)return r}else{if(e>n+n)return-r;i=t-i,n=e-n,r=-r}if(0===n)return 0===i?0:-r;if(0===i)return r;if(s=Math.floor(t/i),t-=s*i,(e-=s*n)<0)return r;if(e>n)return-r;if(i>t+t){if(n<e+e)return-r}else{if(n>e+e)return r;t=i-t,e=n-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}},Wo(Qt.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var i=t.x,n=e.x;return i>n&&(i=e.x,n=t.x),this.p.x>=i&&this.p.x<=n&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var r=t.x-this.p.x,o=t.y-this.p.y,s=e.x-this.p.x,a=e.y-this.p.y,l=jt.signOfDet2x2(r,o,s,a);if(0===l)return this.isPointOnSegment=!0,null;a<o&&(l=-l),l>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==S.EXTERIOR},getLocation:function(){return this.isPointOnSegment?S.BOUNDARY:this.crossingCount%2==1?S.INTERIOR:S.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return Qt}}),Qt.locatePointInRing=function(){if(arguments[0]instanceof u&&Zo(arguments[1],P)){for(var t=arguments[0],e=arguments[1],i=new Qt(t),n=new u,r=new u,o=1;o<e.size();o++)if(e.getCoordinate(o,n),e.getCoordinate(o-1,r),i.countSegment(n,r),i.isOnSegment())return i.getLocation();return i.getLocation()}if(arguments[0]instanceof u&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],i=new Qt(s),o=1;o<a.length;o++){var n=a[o],r=a[o-1];if(i.countSegment(n,r),i.isOnSegment())return i.getLocation()}return i.getLocation()}},Wo(Zt.prototype,{interfaces_:function(){return[]},getClass:function(){return Zt}}),Zt.orientationIndex=function(t,e,i){return A.orientationIndex(t,e,i)},Zt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,i=t[0].x,n=1;n<t.length-1;n++){var r=t[n].x-i,o=t[n+1].y;e+=r*(t[n-1].y-o)}return e/2}if(Zo(arguments[0],P)){var s=arguments[0],a=s.size();if(a<3)return 0;var l=new u,h=new u,c=new u;s.getCoordinate(0,h),s.getCoordinate(1,c);i=h.x;c.x-=i;for(var e=0,n=1;n<a-1;n++)l.y=h.y,h.x=c.x,h.y=c.y,s.getCoordinate(n+1,c),c.x-=i,e+=h.x*(l.y-c.y);return e/2}},Zt.distanceLineLine=function(t,e,i,n){if(t.equals(e))return Zt.distancePointLine(t,i,n);if(i.equals(n))return Zt.distancePointLine(n,t,e);var r=!1;if(C.intersects(t,e,i,n)){var o=(e.x-t.x)*(n.y-i.y)-(e.y-t.y)*(n.x-i.x);if(0===o)r=!0;else{var s=(t.y-i.y)*(n.x-i.x)-(t.x-i.x)*(n.y-i.y),a=((t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y))/o,l=s/o;(l<0||l>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?b.min(Zt.distancePointLine(t,i,n),Zt.distancePointLine(e,i,n),Zt.distancePointLine(i,t,e),Zt.distancePointLine(n,t,e)):0},Zt.isPointInRing=function(t,e){return Zt.locatePointInRing(t,e)!==S.EXTERIOR},Zt.computeLength=function(t){var e=t.size();if(e<=1)return 0;var i=0,n=new u;t.getCoordinate(0,n);for(var r=n.x,o=n.y,s=1;s<e;s++){t.getCoordinate(s,n);var a=n.x,l=n.y,h=a-r,c=l-o;i+=Math.sqrt(h*h+c*c),r=a,o=l}return i},Zt.isCCW=function(t){var e=t.length-1;if(e<3)throw new i("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,o=1;o<=e;o++){var s=t[o];s.y>n.y&&(n=s,r=o)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var l=r;do{l=(l+1)%e}while(t[l].equals2D(n)&&l!==r);var h=t[a],c=t[l];if(h.equals2D(n)||c.equals2D(n)||h.equals2D(c))return!1;var u=Zt.computeOrientation(h,n,c);return 0===u?h.x>c.x:u>0},Zt.locatePointInRing=function(t,e){return Qt.locatePointInRing(t,e)},Zt.distancePointLinePerpendicular=function(t,e,i){var n=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y),r=((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/n;return Math.abs(r)*Math.sqrt(n)},Zt.computeOrientation=function(t,e,i){return Zt.orientationIndex(t,e,i)},Zt.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new i("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var o=Zt.distancePointLine(t,e[r],e[r+1]);o<n&&(n=o)}return n}if(3===arguments.length){var s=arguments[0],a=arguments[1],l=arguments[2];if(a.x===l.x&&a.y===l.y)return s.distance(a);var h=(l.x-a.x)*(l.x-a.x)+(l.y-a.y)*(l.y-a.y),c=((s.x-a.x)*(l.x-a.x)+(s.y-a.y)*(l.y-a.y))/h;if(c<=0)return s.distance(a);if(c>=1)return s.distance(l);var u=((a.y-s.y)*(l.x-a.x)-(a.x-s.x)*(l.y-a.y))/h;return Math.abs(u)*Math.sqrt(h)}},Zt.isOnLine=function(t,e){for(var i=new Wt,n=1;n<e.length;n++){var r=e[n-1],o=e[n];if(i.computeIntersection(t,r,o),i.hasIntersection())return!0}return!1},Zt.CLOCKWISE=-1,Zt.RIGHT=Zt.CLOCKWISE,Zt.COUNTERCLOCKWISE=1,Zt.LEFT=Zt.COUNTERCLOCKWISE,Zt.COLLINEAR=0,Zt.STRAIGHT=Zt.COLLINEAR,Wo(Jt.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof Jt){var t=arguments[0],e=Zt.orientationIndex(this.p0,this.p1,t.p0),i=Zt.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&i>=0?Math.max(e,i):e<=0&&i<=0?Math.max(e,i):0}if(arguments[0]instanceof u){var n=arguments[0];return Zt.orientationIndex(this.p0,this.p1,n)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof Jt))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new Wt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof u){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new u(t);var e=this.projectionFactor(t),i=new u;return i.x=this.p0.x+e*(this.p1.x-this.p0.x),i.y=this.p0.y+e*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof Jt){var n=arguments[0],r=this.projectionFactor(n.p0),o=this.projectionFactor(n.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var s=this.project(n.p0);r<0&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(n.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new Jt(s,a)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return 0===t?this.p0:this.p1},distancePerpendicular:function(t){return Zt.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return Jt.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,r=e*e+i*i;return r<=0?n.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*i)/r},closestPoints:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var i=new Array(2).fill(null),r=n.MAX_VALUE,o=null,s=this.closestPoint(t.p0);r=s.distance(t.p0),i[0]=s,i[1]=t.p0;var a=this.closestPoint(t.p1);(o=a.distance(t.p1))<r&&(r=o,i[0]=a,i[1]=t.p1);var l=t.closestPoint(this.p0);(o=l.distance(this.p0))<r&&(r=o,i[0]=this.p0,i[1]=l);var h=t.closestPoint(this.p1);return(o=h.distance(this.p1))<r&&(r=o,i[0]=this.p1,i[1]=h),i},closestPoint:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,i=this.p0.compareTo(e.p0);return 0!==i?i:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{return R.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof I))throw t}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var i=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,l=0;if(0!==e){if(s<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/s,l=e*o/s}return new u(i-l,n+a)},setCoordinates:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=i.x,this.p1.y=i.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||n.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof Jt){var t=arguments[0];return Zt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof u){var e=arguments[0];return Zt.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new u;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),i=java.lang.Double.doubleToLongBits(this.p1.x);return i^=31*java.lang.Double.doubleToLongBits(this.p1.y),e^Math.trunc(i)^Math.trunc(i>>32)},interfaces_:function(){return[r,a]},getClass:function(){return Jt}}),Jt.midPoint=function(t,e){return new u((t.x+e.x)/2,(t.y+e.y)/2)},Jt.serialVersionUID=0x2d2172135f411c00,Wo(Kt.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){return(Kt.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])||Kt.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||Kt.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||Kt.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]))&&this.matrix[S.EXTERIOR][S.INTERIOR]===st.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===st.FALSE},isCoveredBy:function(){return(Kt.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])||Kt.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||Kt.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||Kt.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]))&&this.matrix[S.INTERIOR][S.EXTERIOR]===st.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===st.FALSE},set:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var i=Math.trunc(e/3),n=e%3;this.matrix[i][n]=st.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.matrix[r][o]=s}},isContains:function(){return Kt.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.EXTERIOR][S.INTERIOR]===st.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===st.FALSE},setAtLeast:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var i=Math.trunc(e/3),n=e%3;this.setAtLeast(i,n,st.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.matrix[r][o]<s&&(this.matrix[r][o]=s)}},setAtLeastIfValid:function(t,e,i){t>=0&&e>=0&&this.setAtLeast(t,e,i)},isWithin:function(){return Kt.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.INTERIOR][S.EXTERIOR]===st.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===st.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):(t===st.A&&e===st.A||t===st.L&&e===st.L||t===st.L&&e===st.A||t===st.P&&e===st.A||t===st.P&&e===st.L)&&this.matrix[S.INTERIOR][S.INTERIOR]===st.FALSE&&(Kt.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||Kt.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||Kt.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]))},isOverlaps:function(t,e){return t===st.P&&e===st.P||t===st.A&&e===st.A?Kt.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&Kt.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR])&&Kt.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]):t===st.L&&e===st.L&&1===this.matrix[S.INTERIOR][S.INTERIOR]&&Kt.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR])&&Kt.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR])},isEquals:function(t,e){return t===e&&Kt.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.INTERIOR][S.EXTERIOR]===st.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===st.FALSE&&this.matrix[S.EXTERIOR][S.INTERIOR]===st.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===st.FALSE},toString:function(){for(var t=new _("123456789"),e=0;e<3;e++)for(var i=0;i<3;i++)t.setCharAt(3*e+i,st.toDimensionSymbol(this.matrix[e][i]));return t.toString()},setAll:function(t){for(var e=0;e<3;e++)for(var i=0;i<3;i++)this.matrix[e][i]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(9!==t.length)throw new i("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!Kt.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;e<3;e++)for(var i=0;i<3;i++)this.setAtLeast(e,i,t.get(e,i))},isDisjoint:function(){return this.matrix[S.INTERIOR][S.INTERIOR]===st.FALSE&&this.matrix[S.INTERIOR][S.BOUNDARY]===st.FALSE&&this.matrix[S.BOUNDARY][S.INTERIOR]===st.FALSE&&this.matrix[S.BOUNDARY][S.BOUNDARY]===st.FALSE},isCrosses:function(t,e){return t===st.P&&e===st.L||t===st.P&&e===st.A||t===st.L&&e===st.A?Kt.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&Kt.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR]):t===st.L&&e===st.P||t===st.A&&e===st.P||t===st.A&&e===st.L?Kt.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&Kt.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]):t===st.L&&e===st.L&&0===this.matrix[S.INTERIOR][S.INTERIOR]},interfaces_:function(){return[o]},getClass:function(){return Kt}}),Kt.matches=function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===st.SYM_DONTCARE||e===st.SYM_TRUE&&(t>=0||t===st.TRUE)||e===st.SYM_FALSE&&t===st.FALSE||e===st.SYM_P&&t===st.P||e===st.SYM_L&&t===st.L||e===st.SYM_A&&t===st.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var i=arguments[0],n=arguments[1];return new Kt(i).matches(n)}},Kt.isTrue=function(t){return t>=0||t===st.TRUE};var as=Object.freeze({Coordinate:u,CoordinateList:w,Envelope:C,LineSegment:Jt,GeometryFactory:Yt,Geometry:F,Point:Et,LineString:wt,LinearRing:_t,Polygon:St,GeometryCollection:ht,MultiPoint:bt,MultiLineString:ct,MultiPolygon:Nt,Dimension:st,IntersectionMatrix:Kt,PrecisionModel:zt});Wo($t.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){null===this.areaBasePt&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,i=0;i<t.length-1;i++){var n=t[i].distance(t[i+1]);if(0!==n){e+=n;var r=(t[i].x+t[i+1].x)/2;this.lineCentSum.x+=n*r;var o=(t[i].y+t[i+1].y)/2;this.lineCentSum.y+=n*o}}this.totalLength+=e,0===e&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=Zt.isCCW(t),i=0;i<t.length-1;i++)this.addTriangle(this.areaBasePt,t[i],t[i+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new u;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!Zt.isCCW(t),i=0;i<t.length-1;i++)this.addTriangle(this.areaBasePt,t[i],t[i+1],e);this.addLineSegments(t)},addTriangle:function(t,e,i,n){var r=n?1:-1;$t.centroid3(t,e,i,this.triangleCent3);var o=$t.area2(t,e,i);this.cg3.x+=r*o*this.triangleCent3.x,this.cg3.y+=r*o*this.triangleCent3.y,this.areasum2+=r*o},add:function(){if(arguments[0]instanceof St){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(r=0;r<t.getNumInteriorRing();r++)this.addHole(t.getInteriorRingN(r).getCoordinates())}else if(arguments[0]instanceof F){var e=arguments[0];if(e.isEmpty())return null;if(e instanceof Et)this.addPoint(e.getCoordinate());else if(e instanceof wt)this.addLineSegments(e.getCoordinates());else if(e instanceof St){var i=e;this.add(i)}else if(e instanceof ht)for(var n=e,r=0;r<n.getNumGeometries();r++)this.add(n.getGeometryN(r))}},interfaces_:function(){return[]},getClass:function(){return $t}}),$t.area2=function(t,e,i){return(e.x-t.x)*(i.y-t.y)-(i.x-t.x)*(e.y-t.y)},$t.centroid3=function(t,e,i,n){return n.x=t.x+e.x+i.x,n.y=t.y+e.y+i.y,null},$t.getCentroid=function(t){return new $t(t).getCentroid()},(te.prototype=new Error).name="EmptyStackException",ee.prototype=new m,ee.prototype.add=function(t){return this.array_.push(t),!0},ee.prototype.get=function(t){if(t<0||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},ee.prototype.push=function(t){return this.array_.push(t),t},ee.prototype.pop=function(t){if(0===this.array_.length)throw new te;return this.array_.pop()},ee.prototype.peek=function(){if(0===this.array_.length)throw new te;return this.array_[this.array_.length-1]},ee.prototype.empty=function(){return 0===this.array_.length},ee.prototype.isEmpty=function(){return this.empty()},ee.prototype.search=function(t){return this.array_.indexOf(t)},ee.prototype.size=function(){return this.array_.length},ee.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},Wo(ie.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[D]},getClass:function(){return ie}}),ie.filterCoordinates=function(t){for(var e=new ie,i=0;i<t.length;i++)e.filter(t[i]);return e.getCoordinates()},Wo(ne.prototype,{preSort:function(t){for(var e=null,i=1;i<t.length;i++)(t[i].y<t[0].y||t[i].y===t[0].y&&t[i].x<t[0].x)&&(e=t[0],t[0]=t[i],t[i]=e);return ot.sort(t,1,t.length,new re(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),i=new w;return i.add(e,!1),i.size()<3?null:(i.closeRing(),i.toCoordinateArray())},lineOrPolygon:function(t){if(3===(t=this.cleanRing(t)).length)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){c.equals(t[0],t[t.length-1]);for(var e=new x,i=null,n=0;n<=t.length-2;n++){var r=t[n],o=t[n+1];r.equals(o)||null!==i&&this.isBetween(i,r,o)||(e.add(r),i=r)}e.add(t[t.length-1]);var s=new Array(e.size()).fill(null);return e.toArray(s)},isBetween:function(t,e,i){if(0!==Zt.computeOrientation(t,e,i))return!1;if(t.x!==i.x){if(t.x<=e.x&&e.x<=i.x)return!0;if(i.x<=e.x&&e.x<=t.x)return!0}if(t.y!==i.y){if(t.y<=e.y&&e.y<=i.y)return!0;if(i.y<=e.y&&e.y<=t.y)return!0}return!1},reduce:function(t){var e=this.computeOctRing(t);if(null===e)return t;for(var i=new rt,n=0;n<e.length;n++)i.add(e[n]);for(n=0;n<t.length;n++)Zt.isPointInRing(t[n],e)||i.add(t[n]);var r=Y.toCoordinateArray(i);return r.length<3?this.padArray3(r):r},getConvexHull:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),i=this.grahamScan(e),n=this.toCoordinateArray(i);return this.lineOrPolygon(n)},padArray3:function(t){for(var e=new Array(3).fill(null),i=0;i<e.length;i++)i<t.length?e[i]=t[i]:e[i]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),i=0;i<e.length;i++)e[i]=t[0];for(var n=1;n<t.length;n++)t[n].x<e[0].x&&(e[0]=t[n]),t[n].x-t[n].y<e[1].x-e[1].y&&(e[1]=t[n]),t[n].y>e[2].y&&(e[2]=t[n]),t[n].x+t[n].y>e[3].x+e[3].y&&(e[3]=t[n]),t[n].x>e[4].x&&(e[4]=t[n]),t[n].x-t[n].y>e[5].x-e[5].y&&(e[5]=t[n]),t[n].y<e[6].y&&(e[6]=t[n]),t[n].x+t[n].y<e[7].x+e[7].y&&(e[7]=t[n]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),i=0;i<t.size();i++){var n=t.get(i);e[i]=n}return e},grahamScan:function(t){var e=null,i=new ee;e=i.push(t[0]),e=i.push(t[1]),e=i.push(t[2]);for(var n=3;n<t.length;n++){for(e=i.pop();!i.empty()&&Zt.computeOrientation(i.peek(),e,t[n])>0;)e=i.pop();e=i.push(e),e=i.push(t[n])}return e=i.push(t[0]),i},interfaces_:function(){return[]},getClass:function(){return ne}}),ne.extractCoordinates=function(t){var e=new ie;return t.apply(e),e.getCoordinates()},Wo(re.prototype,{compare:function(t,e){var i=t,n=e;return re.polarCompare(this.origin,i,n)},interfaces_:function(){return[s]},getClass:function(){return re}}),re.polarCompare=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=i.x-t.x,s=i.y-t.y,a=Zt.computeOrientation(t,e,i);if(a===Zt.COUNTERCLOCKWISE)return 1;if(a===Zt.CLOCKWISE)return-1;var l=n*n+r*r,h=o*o+s*s;return l<h?-1:l>h?1:0},ne.RadialComparator=re,Wo(oe.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var i=!0,n=this.transformLinearRing(t.getExteriorRing(),t);null!==n&&n instanceof _t&&!n.isEmpty()||(i=!1);for(var r=new x,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof _t||(i=!1),r.add(s))}if(i)return this.factory.createPolygon(n,r.toArray([]));var a=new x;return null!==n&&a.add(n),a.addAll(r),this.factory.buildGeometry(a)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var i=new x,n=0;n<t.getNumGeometries();n++){var r=this.transformLineString(t.getGeometryN(n),t);null!==r&&(r.isEmpty()||i.add(r))}return this.factory.buildGeometry(i)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var i=new x,n=0;n<t.getNumGeometries();n++){var r=this.transformPoint(t.getGeometryN(n),t);null!==r&&(r.isEmpty()||i.add(r))}return this.factory.buildGeometry(i)},transformMultiPolygon:function(t,e){for(var i=new x,n=0;n<t.getNumGeometries();n++){var r=this.transformPolygon(t.getGeometryN(n),t);null!==r&&(r.isEmpty()||i.add(r))}return this.factory.buildGeometry(i)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var i=new x,n=0;n<t.getNumGeometries();n++){var r=this.transform(t.getGeometryN(n));null!==r&&(this.pruneEmptyGeometry&&r.isEmpty()||i.add(r))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(Yt.toGeometryArray(i)):this.factory.buildGeometry(i)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof Et)return this.transformPoint(t,null);if(t instanceof bt)return this.transformMultiPoint(t,null);if(t instanceof _t)return this.transformLinearRing(t,null);if(t instanceof wt)return this.transformLineString(t,null);if(t instanceof ct)return this.transformMultiLineString(t,null);if(t instanceof St)return this.transformPolygon(t,null);if(t instanceof Nt)return this.transformMultiPolygon(t,null);if(t instanceof ht)return this.transformGeometryCollection(t,null);throw new i("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var i=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===i)return this.factory.createLinearRing(null);var n=i.size();return n>0&&n<4&&!this.preserveType?this.factory.createLineString(i):this.factory.createLinearRing(i)},interfaces_:function(){return[]},getClass:function(){return oe}}),Wo(se.prototype,{snapVertices:function(t,e){for(var i=this._isClosed?t.size()-1:t.size(),n=0;n<i;n++){var r=t.get(n),o=this.findSnapForVertex(r,e);null!==o&&(t.set(n,new u(o)),0===n&&this._isClosed&&t.set(t.size()-1,new u(o)))}},findSnapForVertex:function(t,e){for(var i=0;i<e.length;i++){if(t.equals2D(e[i]))return null;if(t.distance(e[i])<this.snapTolerance)return e[i]}return null},snapTo:function(t){var e=new w(this.srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},snapSegments:function(t,e){if(0===e.length)return null;var i=e.length;e[0].equals2D(e[e.length-1])&&(i=e.length-1);for(var n=0;n<i;n++){var r=e[n],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new u(r),!1)}},findSegmentIndexToSnap:function(t,e){for(var i=n.MAX_VALUE,r=-1,o=0;o<e.size()-1;o++){if(this.seg.p0=e.get(o),this.seg.p1=e.get(o+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var s=this.seg.distance(t);s<this.snapTolerance&&s<i&&(i=s,r=o)}return r},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return se}}),se.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])},Wo(ae.prototype,{snapTo:function(t,e){return new le(e,this.extractTargetCoordinates(t)).transform(this.srcGeom)},snapToSelf:function(t,e){var i=new le(t,this.extractTargetCoordinates(this.srcGeom),!0).transform(this.srcGeom),n=i;return e&&Zo(n,It)&&(n=i.buffer(0)),n},computeSnapTolerance:function(t){return this.computeMinimumSegmentLength(t)/10},extractTargetCoordinates:function(t){for(var e=new rt,i=t.getCoordinates(),n=0;n<i.length;n++)e.add(i[n]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=n.MAX_VALUE,i=0;i<t.length-1;i++){var r=t[i].distance(t[i+1]);r<e&&(e=r)}return e},interfaces_:function(){return[]},getClass:function(){return ae}}),ae.snap=function(t,e,i){var n=new Array(2).fill(null),r=new ae(t);n[0]=r.snapTo(e,i);var o=new ae(e);return n[1]=o.snapTo(n[0],i),n},ae.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=ae.computeSizeBasedSnapTolerance(t),i=t.getPrecisionModel();if(i.getType()===zt.FIXED){var n=1/i.getScale()*2/1.415;n>e&&(e=n)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(ae.computeOverlaySnapTolerance(r),ae.computeOverlaySnapTolerance(o))}},ae.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*ae.SNAP_PRECISION_FACTOR},ae.snapToSelf=function(t,e,i){return new ae(t).snapToSelf(e,i)},ae.SNAP_PRECISION_FACTOR=1e-9,jo(le,oe),Wo(le.prototype,{snapLine:function(t,e){var i=new se(t,this.snapTolerance);return i.setAllowSnappingToSourceVertices(this.isSelfSnap),i.snapTo(e)},transformCoordinates:function(t,e){var i=t.toCoordinateArray(),n=this.snapLine(i,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(n)},interfaces_:function(){return[]},getClass:function(){return le}}),Wo(he.prototype,{getCommon:function(){return n.longBitsToDouble(this.commonBits)},add:function(t){var e=n.doubleToLongBits(t);return this.isFirst?(this.commonBits=e,this.commonSignExp=he.signExpBits(this.commonBits),this.isFirst=!1,null):he.signExpBits(e)!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=he.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=he.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(1===arguments.length){var t=arguments[0],e=n.longBitsToDouble(t),i="0000000000000000000000000000000000000000000000000000000000000000"+Long.toBinaryString(t),r=i.substring(i.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},interfaces_:function(){return[]},getClass:function(){return he}}),he.getBit=function(t,e){return 0!=(t&1<<e)?1:0},he.signExpBits=function(t){return t>>52},he.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},he.numCommonMostSigMantissaBits=function(t,e){for(var i=0,n=52;n>=0;n--){if(he.getBit(t,n)!==he.getBit(e,n))return i;i++}return 52},Wo(ce.prototype,{addCommonBits:function(t){var e=new fe(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(0===this.commonCoord.x&&0===this.commonCoord.y)return t;var e=new u(this.commonCoord);e.x=-e.x,e.y=-e.y;var i=new fe(e);return t.apply(i),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return ce}}),Wo(ue.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new u(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[D]},getClass:function(){return ue}}),Wo(fe.prototype,{filter:function(t,e){var i=t.getOrdinate(e,0)+this.trans.x,n=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,i),t.setOrdinate(e,1,n)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[lt]},getClass:function(){return fe}}),ce.CommonCoordinateFilter=ue,ce.Translater=fe,Wo(ge.prototype,{next:function(){if(this.atStart)return this.atStart=!1,ge.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new y;var t=this.parent.getGeometryN(this.index++);return t instanceof ht?(this.subcollectionIterator=new ge(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[g]},getClass:function(){return ge}}),ge.isAtomic=function(t){return!(t instanceof ht)},Wo(de.prototype,{locateInternal:function(){if(arguments[0]instanceof u&&arguments[1]instanceof St){var t=arguments[0],e=arguments[1];if(e.isEmpty())return S.EXTERIOR;var i=e.getExteriorRing(),n=this.locateInPolygonRing(t,i);if(n===S.EXTERIOR)return S.EXTERIOR;if(n===S.BOUNDARY)return S.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);if(s===S.INTERIOR)return S.EXTERIOR;if(s===S.BOUNDARY)return S.BOUNDARY}return S.INTERIOR}if(arguments[0]instanceof u&&arguments[1]instanceof wt){var a=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(a))return S.EXTERIOR;var h=l.getCoordinates();return l.isClosed()||!a.equals(h[0])&&!a.equals(h[h.length-1])?Zt.isOnLine(a,h)?S.INTERIOR:S.EXTERIOR:S.BOUNDARY}if(arguments[0]instanceof u&&arguments[1]instanceof Et){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?S.INTERIOR:S.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?Zt.locatePointInRing(t,e.getCoordinates()):S.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==S.EXTERIOR},updateLocationInfo:function(t){t===S.INTERIOR&&(this.isIn=!0),t===S.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof Et&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof wt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof St)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof ct)for(var i=e,n=0;n<i.getNumGeometries();n++){var r=i.getGeometryN(n);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof Nt)for(var o=e,n=0;n<o.getNumGeometries();n++){var s=o.getGeometryN(n);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof ht)for(var a=new ge(e);a.hasNext();){var l=a.next();l!==e&&this.computeLocation(t,l)}},locate:function(t,e){return e.isEmpty()?S.EXTERIOR:e instanceof wt?this.locateInternal(t,e):e instanceof St?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?S.BOUNDARY:this.numBoundaries>0||this.isIn?S.INTERIOR:S.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return de}}),Wo(pe.prototype,{interfaces_:function(){return[]},getClass:function(){return pe}}),pe.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof u&&arguments[1]instanceof u){var o=arguments[0],s=arguments[1],a=s.x-o.x,l=s.y-o.y;if(0===a&&0===l)throw new i("Cannot compute the octant for two identical points "+o);return pe.octant(a,l)}},Wo(me.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return me}}),Wo(ye.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:pe.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return Xt.toLineString(new Rt(this.pts))},interfaces_:function(){return[me]},getClass:function(){return ye}}),Wo(ve.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return ve}}),Wo(xe.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[ve,a]},getClass:function(){return xe}}),Wo(we.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,i=this.items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(i)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,i)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return 0===this._size},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return we}}),Wo(Ce.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return Ce}}),Wo(Ee.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return Ee}}),Wo(Ie.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){c.isTrue(null===this.bounds),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[ve,a]},getClass:function(){return Ie}}),Ie.serialVersionUID=0x5a1e55ec41369800;var ls={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return ls.sort(t),t.get(0)},sort:function(t,e){var i=t.toArray();e?ot.sort(i,e):ot.sort(i);for(var n=t.iterator(),r=0,o=i.length;r<o;r++)n.next(),n.set(i[r])},singletonList:function(t){var e=new x;return e.add(t),e}};Wo(Se.prototype,{expandToQueue:function(t,e){var n=Se.isComposite(this.boundable1),r=Se.isComposite(this.boundable2);if(n&&r)return Se.area(this.boundable1)>Se.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(r)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new i("neither boundable is composite")},isLeaves:function(){return!(Se.isComposite(this.boundable1)||Se.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,i,n){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=new Se(r.next(),e,this.itemDistance);o.getDistance()<n&&i.add(o)}},getBoundable:function(t){return 0===t?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[r]},getClass:function(){return Se}}),Se.area=function(t){return t.getBounds().getArea()},Se.isComposite=function(t){return t instanceof Ie},Wo(be.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();i instanceof Ie?t+=this.size(i):i instanceof xe&&(t+=1)}return t}},removeItem:function(t,e){for(var i=null,n=t.getChildBoundables().iterator();n.hasNext();){var r=n.next();r instanceof xe&&r.getItem()===e&&(i=r)}return null!==i&&(t.getChildBoundables().remove(i),!0)},itemsTree:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this.root);return null===t?new x:t}if(1===arguments.length){for(var e=arguments[0],i=new x,n=e.getChildBoundables().iterator();n.hasNext();){var r=n.next();if(r instanceof Ie){var o=this.itemsTree(r);null!==o&&i.add(o)}else r instanceof xe?i.add(r.getItem()):c.shouldNeverReachHere()}return i.size()<=0?null:i}},insert:function(t,e){c.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new xe(t,e))},boundablesAtLevel:function(){if(1===arguments.length){var t=arguments[0],e=new x;return this.boundablesAtLevel(t,this.root,e),e}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];if(c.isTrue(i>-2),n.getLevel()===i)return r.add(n),null;for(var o=n.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Ie?this.boundablesAtLevel(i,s,r):(c.isTrue(s instanceof xe),-1===i&&r.add(s))}return null}},query:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new x;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e)}if(2===arguments.length){var i=arguments[0],n=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),i)&&this.query(i,this.root,n)}else if(3===arguments.length)if(Zo(arguments[2],Ce)&&arguments[0]instanceof Object&&arguments[1]instanceof Ie)for(var r=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),l=0;l<a.size();l++){g=a.get(l);this.getIntersectsOp().intersects(g.getBounds(),r)&&(g instanceof Ie?this.query(r,g,s):g instanceof xe?s.visitItem(g.getItem()):c.shouldNeverReachHere())}else if(Zo(arguments[2],m)&&arguments[0]instanceof Object&&arguments[1]instanceof Ie)for(var h=arguments[0],u=arguments[1],f=arguments[2],a=u.getChildBoundables(),l=0;l<a.size();l++){var g=a.get(l);this.getIntersectsOp().intersects(g.getBounds(),h)&&(g instanceof Ie?this.query(h,g,f):g instanceof xe?f.add(g.getItem()):c.shouldNeverReachHere())}},build:function(){if(this.built)return null;this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,this.built=!0},getRoot:function(){return this.build(),this.root},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove(t,this.root,e)}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=this.removeItem(n,r);if(o)return!0;for(var s=null,a=n.getChildBoundables().iterator();a.hasNext();){var l=a.next();if(this.getIntersectsOp().intersects(l.getBounds(),i)&&l instanceof Ie&&(o=this.remove(i,l,r))){s=l;break}}return null!==s&&s.getChildBoundables().isEmpty()&&n.getChildBoundables().remove(s),o}},createHigherLevels:function(t,e){c.isTrue(!t.isEmpty());var i=this.createParentBoundables(t,e+1);return 1===i.size()?i.get(0):this.createHigherLevels(i,e+1)},depth:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();if(i instanceof Ie){var n=this.depth(i);n>t&&(t=n)}}return t+1}},createParentBoundables:function(t,e){c.isTrue(!t.isEmpty());var i=new x;i.add(this.createNode(e));var n=new x(t);ls.sort(n,this.getComparator());for(var r=n.iterator();r.hasNext();){var o=r.next();this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()&&i.add(this.createNode(e)),this.lastNode(i).addChildBoundable(o)}return i},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[a]},getClass:function(){return be}}),be.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},be.IntersectsOp=function(){},be.serialVersionUID=-0x35ef64c82d4c5400,be.DEFAULT_NODE_CAPACITY=10,Wo(_e.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return _e}}),jo(Ne,be),Wo(Ne.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){c.isTrue(t.length>0);for(var i=new x,n=0;n<t.length;n++)i.addAll(this.createParentBoundablesFromVerticalSlice(t[n],e));return i},createNode:function(t){return new Le(t)},size:function(){return 0===arguments.length?be.prototype.size.call(this):be.prototype.size.apply(this,arguments)},insert:function(){if(2!==arguments.length)return be.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;be.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return Ne.intersectsOp},verticalSlices:function(t,e){for(var i=Math.trunc(Math.ceil(t.size()/e)),n=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){n[o]=new x;for(var s=0;r.hasNext()&&s<i;){var a=r.next();n[o].add(a),s++}}return n},query:function(){if(1===arguments.length){var t=arguments[0];return be.prototype.query.call(this,t)}if(2===arguments.length){var e=arguments[0],i=arguments[1];be.prototype.query.call(this,e,i)}else if(3===arguments.length)if(Zo(arguments[2],Ce)&&arguments[0]instanceof Object&&arguments[1]instanceof Ie){var n=arguments[0],r=arguments[1],o=arguments[2];be.prototype.query.call(this,n,r,o)}else if(Zo(arguments[2],m)&&arguments[0]instanceof Object&&arguments[1]instanceof Ie){var s=arguments[0],a=arguments[1],l=arguments[2];be.prototype.query.call(this,s,a,l)}},getComparator:function(){return Ne.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return be.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return be.prototype.remove.call(this,t,e)}return be.prototype.remove.apply(this,arguments)},depth:function(){return 0===arguments.length?be.prototype.depth.call(this):be.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){c.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),n=new x(t);ls.sort(n,Ne.xComparator);var r=this.verticalSlices(n,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(r,e)},nearestNeighbour:function(){if(1===arguments.length){if(Zo(arguments[0],_e)){var t=arguments[0],e=new Se(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof Se){var i=arguments[0];return this.nearestNeighbour(i,n.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof Ne&&Zo(arguments[1],_e)){var r=arguments[0],o=arguments[1],e=new Se(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(e)}if(arguments[0]instanceof Se&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],l=null,h=new we;for(h.add(s);!h.isEmpty()&&a>0;){var c=h.poll(),u=c.getDistance();if(u>=a)break;c.isLeaves()?(a=u,l=c):c.expandToQueue(h,a)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],g=arguments[1],d=arguments[2],p=new xe(f,g),e=new Se(this.getRoot(),p,d);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[Ee,a]},getClass:function(){return Ne}}),Ne.centreX=function(t){return Ne.avg(t.getMinX(),t.getMaxX())},Ne.avg=function(t,e){return(t+e)/2},Ne.centreY=function(t){return Ne.avg(t.getMinY(),t.getMaxY())},jo(Le,Ie),Wo(Le.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var i=e.next();null===t?t=new C(i.getBounds()):t.expandToInclude(i.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Le}}),Ne.STRtreeNode=Le,Ne.serialVersionUID=0x39920f7d5f261e0,Ne.xComparator={interfaces_:function(){return[s]},compare:function(t,e){return be.compareDoubles(Ne.centreX(t.getBounds()),Ne.centreX(e.getBounds()))}},Ne.yComparator={interfaces_:function(){return[s]},compare:function(t,e){return be.compareDoubles(Ne.centreY(t.getBounds()),Ne.centreY(e.getBounds()))}},Ne.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},Ne.DEFAULT_NODE_CAPACITY=10,Wo(Te.prototype,{interfaces_:function(){return[]},getClass:function(){return Te}}),Te.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Te.compare=function(t,e,i){if(e.equals2D(i))return 0;var n=Te.relativeSign(e.x,i.x),r=Te.relativeSign(e.y,i.y);switch(t){case 0:return Te.compareValue(n,r);case 1:return Te.compareValue(r,n);case 2:return Te.compareValue(r,-n);case 3:return Te.compareValue(-n,r);case 4:return Te.compareValue(-n,-r);case 5:return Te.compareValue(-r,-n);case 6:return Te.compareValue(-r,n);case 7:return Te.compareValue(n,-r)}return c.shouldNeverReachHere("invalid octant value"),0},Te.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0},Wo(Ae.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Te.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},isInterior:function(){return this._isInterior},interfaces_:function(){return[r]},getClass:function(){return Ae}}),Wo(Pe.prototype,{getSplitCoordinates:function(){var t=new w;this.addEndpoints();for(var e=this.iterator(),i=e.next();e.hasNext();){var n=e.next();this.addEdgeCoordinates(i,n,t),i=n}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new x;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var i=e.next().intValue();this.add(this.edge.getCoordinate(i),i)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var i=this.edge.getCoordinate(e),n=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));i.equals2D(n)&&t.add(new N(e+1))}},addEdgeCoordinates:function(t,e,i){e.segmentIndex,t.segmentIndex;var n=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(n);i.add(new u(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)i.add(this.edge.getCoordinate(o));r&&i.add(new u(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),i=e.next();e.hasNext();){var n=e.next(),r=this.createSplitEdge(i,n);t.add(r),i=n}},findCollapseIndex:function(t,e,i){if(!t.coord.equals2D(e.coord))return!1;var n=e.segmentIndex-t.segmentIndex;return e.isInterior()||n--,1===n&&(i[0]=t.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),i=this.iterator(),n=i.next();i.hasNext();){var r=i.next();this.findCollapseIndex(n,r,e)&&t.add(new N(e[0])),n=r}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var i=e.segmentIndex-t.segmentIndex+2,n=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(n);r||i--;var o=new Array(i).fill(null),s=0;o[s++]=new u(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.getCoordinate(a);return r&&(o[s]=new u(e.coord)),new Oe(o,this.edge.getData())},add:function(t,e){var i=new Ae(this.edge,t,e,this.edge.getSegmentOctant(e)),n=this.nodeMap.get(i);return null!==n?(c.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this.nodeMap.put(i,i),i)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),i=t.get(0).getCoordinate(0);if(!i.equals2D(e[0]))throw new l("bad split edge start point at "+i);var n=t.get(t.size()-1).getCoordinates(),r=n[n.length-1];if(!r.equals2D(e[e.length-1]))throw new l("bad split edge end point at "+r)},interfaces_:function(){return[]},getClass:function(){return Pe}}),Wo(Me.prototype,{next:function(){return null===this.currNode?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):null===this.nextNode?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex,this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return null!==this.nextNode},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[g]},getClass:function(){return Me}}),Wo(Re.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[me]},getClass:function(){return Re}}),Wo(Oe.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:pe.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var i=arguments[0],n=arguments[1],r=(arguments[2],arguments[3]),o=new u(i.getIntersection(r));this.addIntersection(o,n)}},toString:function(){return Xt.toLineString(new Rt(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var i=e,n=i+1;if(n<this.pts.length){var r=this.pts[n];t.equals2D(r)&&(i=n)}return this.nodeList.add(t,i)},addIntersections:function(t,e,i){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,i,n)},interfaces_:function(){return[Re]},getClass:function(){return Oe}}),Oe.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new x;return Oe.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var i=arguments[0],n=arguments[1],r=i.iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)},Wo(ke.prototype,{overlap:function(){if(2===arguments.length)arguments[0],arguments[1];else if(4===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];t.getLineSegment(e,this.overlapSeg1),i.getLineSegment(n,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}},interfaces_:function(){return[]},getClass:function(){return ke}}),Wo(Fe.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,i,n){var r=this.pts[e],o=this.pts[i];if(n.tempEnv1.init(r,o),i-e==1)return n.select(this,e),null;if(!t.intersects(n.tempEnv1))return null;var s=Math.trunc((e+i)/2);e<s&&this.computeSelect(t,e,s,n),s<i&&this.computeSelect(t,s,i,n)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,i=this.start;i<=this.end;i++)t[e++]=this.pts[i];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(null===this.env){var t=this.pts[this.start],e=this.pts[this.end];this.env=new C(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,i,n,r,o){var s=this.pts[t],a=this.pts[e],l=i.pts[n],h=i.pts[r];if(e-t==1&&r-n==1)return o.overlap(this,t,i,n),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(l,h),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),u=Math.trunc((n+r)/2);t<c&&(n<u&&this.computeOverlapsInternal(t,c,i,n,u,o),u<r&&this.computeOverlapsInternal(t,c,i,u,r,o)),c<e&&(n<u&&this.computeOverlapsInternal(c,e,i,n,u,o),u<r&&this.computeOverlapsInternal(c,e,i,u,r,o))},interfaces_:function(){return[]},getClass:function(){return Fe}}),Wo(De.prototype,{interfaces_:function(){return[]},getClass:function(){return De}}),De.isNorthern=function(t){return t===De.NE||t===De.NW},De.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},De.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var i=t<e?t:e,n=t>e?t:e;return 0===i&&3===n?3:i},De.isInHalfPlane=function(t,e){return e===De.SE?t===De.SE||t===De.SW:t===e||t===e+1},De.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?De.NE:De.SE:e>=0?De.NW:De.SW}if(arguments[0]instanceof u&&arguments[1]instanceof u){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new i("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?De.NE:De.SE:r.y>=n.y?De.NW:De.SW}},De.NE=0,De.NW=1,De.SW=2,De.SE=3,Wo(Ge.prototype,{interfaces_:function(){return[]},getClass:function(){return Ge}}),Ge.getChainStartIndices=function(t){var e=0,i=new x;i.add(new N(e));do{var n=Ge.findChainEnd(t,e);i.add(new N(n)),e=n}while(e<t.length-1);return Ge.toIntArray(i)},Ge.findChainEnd=function(t,e){for(var i=e;i<t.length-1&&t[i].equals2D(t[i+1]);)i++;if(i>=t.length-1)return t.length-1;for(var n=De.quadrant(t[i],t[i+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||De.quadrant(t[r-1],t[r])===n);)r++;return r-1},Ge.getChains=function(){if(1===arguments.length){var t=arguments[0];return Ge.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],i=arguments[1],n=new x,r=Ge.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new Fe(e,r[o],r[o+1],i);n.add(s)}return n}},Ge.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e},Wo(Be.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return Be}}),Wo(Ve.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[Be]},getClass:function(){return Ve}}),jo(ze,Ve),Wo(ze.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Oe.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=Ge.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var i=e.next();i.setId(this.idCounter++),this.index.insert(i.getEnvelope(),i),this.monoChains.add(i)}},computeNodes:function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new qe(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var i=e.next(),n=this.index.query(i.getEnvelope()),r=n.iterator();r.hasNext();){var o=r.next();if(o.getId()>i.getId()&&(i.computeOverlaps(o,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return ze}}),jo(qe,ke),Wo(qe.prototype,{overlap:function(){if(4!==arguments.length)return ke.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],r=t.getContext(),o=i.getContext();this.si.processIntersections(r,e,o,n)},interfaces_:function(){return[]},getClass:function(){return qe}}),ze.SegmentOverlapAction=qe,jo(Ye,l),Wo(Ye.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ye}}),Ye.msgWithCoord=function(t,e){return null!==e?t+" [ "+e+" ]":t},Wo(Ue.prototype,{processIntersections:function(t,e,i,n){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return Ue}}),Wo(Xe.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,i,n){if(!this.findAllIntersections&&this.hasIntersection())return null;if(t===i&&e===n)return null;if(this.isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(i,n))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=i.getCoordinates()[n],a=i.getCoordinates()[n+1];this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=r,this.intSegments[1]=o,this.intSegments[2]=s,this.intSegments[3]=a,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return 0===e||e>=t.size()-2},hasIntersection:function(){return null!==this.interiorIntersection},isDone:function(){return!this.findAllIntersections&&null!==this.interiorIntersection},interfaces_:function(){return[Ue]},getClass:function(){return Xe}}),Xe.createAllIntersectionsFinder=function(t){var e=new Xe(t);return e.setFindAllIntersections(!0),e},Xe.createAnyIntersectionFinder=function(t){return new Xe(t)},Xe.createIntersectionCounter=function(t){var e=new Xe(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},Wo(He.prototype,{execute:function(){if(null!==this.segInt)return null;this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new Xe(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new ze;if(t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection())return this._isValid=!1,null},checkValid:function(){if(this.execute(),!this._isValid)throw new Ye(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+Xt.toLineString(t[0],t[1])+" and "+Xt.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return He}}),He.computeIntersections=function(t){var e=new He(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},Wo(We.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return We}}),We.toSegmentStrings=function(t){for(var e=new x,i=t.iterator();i.hasNext();){var n=i.next();e.add(new ye(n.getCoordinates(),n))}return e},We.checkValid=function(t){new We(t).checkValid()},Wo(je.prototype,{map:function(t){for(var e=new x,i=0;i<t.getNumGeometries();i++){var n=this.mapOp.map(t.getGeometryN(i));n.isEmpty()||e.add(n)}return t.getFactory().createGeometryCollection(Yt.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return je}}),je.map=function(t,e){return new je(e).map(t)},Wo(Qe.prototype,{interfaces_:function(){return[]},getClass:function(){return Qe}}),Qe.opposite=function(t){return t===Qe.LEFT?Qe.RIGHT:t===Qe.RIGHT?Qe.LEFT:t},Qe.ON=0,Qe.LEFT=1,Qe.RIGHT=2,Wo(Ze.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==S.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===S.NONE&&(this.location[e]=t)},isLine:function(){return 1===this.location.length},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Qe.ON]=this.location[Qe.ON],e[Qe.LEFT]=S.NONE,e[Qe.RIGHT]=S.NONE,this.location=e}for(var i=0;i<this.location.length;i++)this.location[i]===S.NONE&&i<t.location.length&&(this.location[i]=t.location[i])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[Qe.LEFT];this.location[Qe.LEFT]=this.location[Qe.RIGHT],this.location[Qe.RIGHT]=t},toString:function(){var t=new _;return this.location.length>1&&t.append(S.toLocationSymbol(this.location[Qe.LEFT])),t.append(S.toLocationSymbol(this.location[Qe.ON])),this.location.length>1&&t.append(S.toLocationSymbol(this.location[Qe.RIGHT])),t.toString()},setLocations:function(t,e,i){this.location[Qe.ON]=t,this.location[Qe.LEFT]=e,this.location[Qe.RIGHT]=i},get:function(t){return t<this.location.length?this.location[t]:S.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===S.NONE)return!0;return!1},setLocation:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Qe.ON,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.location[e]=i}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(S.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return Ze}}),Wo(Je.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.elt[e].setAllLocationsIfNull(i)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ze(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Qe.ON)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return this.elt[e].get(i)}},toString:function(){var t=new _;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Qe.ON,e)}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this.elt[i].setLocation(n,r)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new Ze(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return Je}}),Je.toLineLabel=function(t){for(var e=new Je(S.NONE),i=0;i<2;i++)e.setLocation(i,t.getLocation(i));return e},Wo(Ke.prototype,{computeRing:function(){if(null!==this.ring)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=Zt.isCCW(this.ring.getCoordinates())},isIsolated:function(){return 1===this.label.getGeometryCount()},computePoints:function(t){this.startDe=t;var e=t,i=!0;do{if(null===e)throw new Ye("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ye("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var n=e.getLabel();c.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(e.getEdge(),e.isForward(),i),i=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this.maxNodeDegree&&(this.maxNodeDegree=e),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,i){var n=t.getCoordinates();if(e){r=1;i&&(r=0);for(o=r;o<n.length;o++)this.pts.add(n[o])}else{var r=n.length-2;i&&(r=n.length-1);for(var o=r;o>=0;o--)this.pts.add(n[o])}},isHole:function(){return this._isHole},setInResult:function(){var t=this.startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this.startDe)},containsPoint:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Zt.isPointInRing(t,e.getCoordinates()))return!1;for(var i=this.holes.iterator();i.hasNext();)if(i.next().containsPoint(t))return!1;return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return null===this.shell},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],n=e.getLocation(i,Qe.RIGHT);if(n===S.NONE)return null;if(this.label.getLocation(i)===S.NONE)return this.label.setLocation(i,n),null}},setShell:function(t){this.shell=t,null!==t&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),i=0;i<this.holes.size();i++)e[i]=this.holes.get(i).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},interfaces_:function(){return[]},getClass:function(){return Ke}}),jo($e,Ke),Wo($e.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return $e}}),jo(ti,Ke),Wo(ti.prototype,{buildMinimalRings:function(){var t=new x,e=this.startDe;do{if(null===e.getMinEdgeRing()){var i=new $e(e,this.geometryFactory);t.add(i)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return ti}}),Wo(ei.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){c.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return ei}}),jo(ii,ei),Wo(ii.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},isIsolated:function(){return 1===this.label.getGeometryCount()},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var i=S.NONE;if(i=this.label.getLocation(e),!t.isNull(e)){var n=t.getLocation(e);i!==S.BOUNDARY&&(i=n)}return i},setLabel:function(){if(2!==arguments.length)return ei.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this.label?this.label=new Je(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof ii){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof Je)for(var e=arguments[0],i=0;i<2;i++){var n=this.computeMergedLocation(e,i);this.label.getLocation(i)===S.NONE&&this.label.setLocation(i,n)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(null===this.label)return null;var e=S.NONE;null!==this.label&&(e=this.label.getLocation(t));var i=null;switch(e){case S.BOUNDARY:i=S.INTERIOR;break;case S.INTERIOR:default:i=S.BOUNDARY}this.label.setLocation(t,i)},interfaces_:function(){return[]},getClass:function(){return ii}}),Wo(ni.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof u){var t=arguments[0];return null===(i=this.nodeMap.get(t))&&(i=this.nodeFact.createNode(t),this.nodeMap.put(t,i)),i}if(arguments[0]instanceof ii){var e=arguments[0],i=this.nodeMap.get(e.getCoordinate());return null===i?(this.nodeMap.put(e.getCoordinate(),e),e):(i.mergeLabel(e),i)}},print:function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new x,i=this.iterator();i.hasNext();){var n=i.next();n.getLabel().getLocation(t)===S.BOUNDARY&&e.add(n)}return e},add:function(t){var e=t.getCoordinate();this.addNode(e).add(t)},interfaces_:function(){return[]},getClass:function(){return ni}}),Wo(ri.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:Zt.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),i=this.getClass().getName(),n=i.lastIndexOf("."),r=i.substring(n+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),i=e.lastIndexOf(".");return"  "+e.substring(i+1)+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=De.quadrant(this.dx,this.dy),c.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[r]},getClass:function(){return ri}}),jo(oi,ri),Wo(oi.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new Je(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(-999!==this.depth[t]&&this.depth[t]!==e)throw new Ye("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function(){for(var t=!0,e=0;e<2;e++)this.label.isArea(e)&&this.label.getLocation(e,Qe.LEFT)===S.INTERIOR&&this.label.getLocation(e,Qe.RIGHT)===S.INTERIOR||(t=!1);return t},setNextMin:function(t){this.nextMin=t},print:function(t){ri.prototype.print.call(this,t),t.print(" "+this.depth[Qe.LEFT]+"/"+this.depth[Qe.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,S.EXTERIOR),i=!this.label.isArea(1)||this.label.allPositionsEqual(1,S.EXTERIOR);return t&&e&&i},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var n=1;t===Qe.LEFT&&(n=-1);var r=Qe.opposite(t),o=e+i*n;this.setDepth(t,e),this.setDepth(r,o)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return oi}}),oi.depthFactor=function(t,e){return t===S.EXTERIOR&&e===S.INTERIOR?1:t===S.INTERIOR&&e===S.EXTERIOR?-1:0},Wo(si.prototype,{createNode:function(t){return new ii(t,null)},interfaces_:function(){return[]},getClass:function(){return si}}),Wo(ai.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var i=this.edges.get(e);i.print(t),i.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof ii){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof u){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},debugPrintln:function(t){M.out.println(t)},isBoundaryNode:function(t,e){var i=this.nodes.find(e);if(null===i)return!1;var n=i.getLabel();return null!==n&&n.getLocation(t)===S.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},matchInSameDirection:function(t,e,i,n){return!!t.equals(i)&&Zt.computeOrientation(t,e,n)===Zt.COLLINEAR&&De.quadrant(t,e)===De.quadrant(i,n)},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){M.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var i=0;i<this.edges.size();i++){var n=this.edges.get(i),r=n.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return n;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return n}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var i=e.next();if(i.getEdge()===t)return i}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this.edges.add(i);var n=new oi(i,!0),r=new oi(i,!1);n.setSym(r),r.setSym(n),this.add(n),this.add(r)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var i=0;i<this.edges.size();i++){var n=this.edges.get(i),r=n.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return n}return null},interfaces_:function(){return[]},getClass:function(){return ai}}),ai.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()},Wo(li.prototype,{sortShellsAndHoles:function(t,e,i){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()?i.add(r):e.add(r)}},computePolygons:function(t){for(var e=new x,i=t.iterator();i.hasNext();){var n=i.next().toPolygon(this.geometryFactory);e.add(n)}return e},placeFreeHoles:function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next();if(null===n.getShell()){var r=this.findEdgeRingContaining(n,t);if(null===r)throw new Ye("unable to assign hole to a shell",n.getCoordinate(0));n.setShell(r)}}},buildMinimalEdgeRings:function(t,e,i){for(var n=new x,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):i.addAll(s)}else n.add(o)}return n},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},buildMaximalEdgeRings:function(t){for(var e=new x,i=t.iterator();i.hasNext();){var n=i.next();if(n.isInResult()&&n.getLabel().isArea()&&null===n.getEdgeRing()){var r=new ti(n,this.geometryFactory);e.add(r),r.setInResult()}}return e},placePolygonHoles:function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next();n.isHole()&&n.setShell(t)}},getPolygons:function(){return this.computePolygons(this.shellList)},findEdgeRingContaining:function(t,e){for(var i=t.getLinearRing(),n=i.getEnvelopeInternal(),r=i.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),h=l.getLinearRing(),c=h.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var u=!1;c.contains(n)&&Zt.isPointInRing(r,h.getCoordinates())&&(u=!0),u&&(null===o||s.contains(c))&&(o=l)}return o},findShell:function(t){for(var e=0,i=null,n=t.iterator();n.hasNext();){var r=n.next();r.isHole()||(i=r,e++)}return c.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),i},add:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],i=arguments[1];ai.linkResultDirectedEdges(i);var n=this.buildMaximalEdgeRings(e),r=new x,o=this.buildMinimalEdgeRings(n,this.shellList,r);this.sortShellsAndHoles(o,this.shellList,r),this.placeFreeHoles(this.shellList,r)}},interfaces_:function(){return[]},getClass:function(){return li}}),Wo(hi.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var i=e.next();this.collectLineEdge(i,t,this.lineEdgesList),this.collectBoundaryTouchEdge(i,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var i=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,i)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,i){var n=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!zi.isResultOfOp(n,e)||r.isCovered()||(i.add(r),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var i=e.next(),n=i.getEdge();if(i.isLineEdge()&&!n.isCoveredSet()){var r=this.op.isCoveredByA(i.getCoordinate());n.setCovered(r)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),n=i.getLabel();i.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(i,0):this.labelIsolatedLine(i,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var i=e.next(),n=(i.getLabel(),this.geometryFactory.createLineString(i.getCoordinates()));this.resultLineList.add(n),i.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,i){var n=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(c.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(zi.isResultOfOp(n,e)&&e===zi.INTERSECTION&&(i.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return hi}}),Wo(ci.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var i=this.geometryFactory.createPoint(e);this.resultPointList.add(i)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var i=e.next();if(!(i.isInResult()||i.isIncidentEdgeInResult()||0!==i.getEdges().getDegree()&&t!==zi.INTERSECTION)){var n=i.getLabel();zi.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(i)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return ci}}),Wo(ui.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return ui}}),Wo(fi.prototype,{locate:function(t){return fi.locate(t,this.geom)},interfaces_:function(){return[ui]},getClass:function(){return fi}}),fi.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Zt.isPointInRing(t,e.getCoordinates())},fi.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var i=e.getExteriorRing();if(!fi.isPointInRing(t,i))return!1;for(var n=0;n<e.getNumInteriorRing();n++){var r=e.getInteriorRingN(n);if(fi.isPointInRing(t,r))return!1}return!0},fi.containsPoint=function(t,e){if(e instanceof St)return fi.containsPointInPolygon(t,e);if(e instanceof ht)for(var i=new ge(e);i.hasNext();){var n=i.next();if(n!==e&&fi.containsPoint(t,n))return!0}return!1},fi.locate=function(t,e){return e.isEmpty()?S.EXTERIOR:fi.containsPoint(t,e)?S.INTERIOR:S.EXTERIOR},Wo(gi.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),i=e-1;return 0===e&&(i=this.edgeList.size()-1),this.edgeList.get(i)},propagateSideLabels:function(t){for(var e=S.NONE,i=this.iterator();i.hasNext();)(o=(r=i.next()).getLabel()).isArea(t)&&o.getLocation(t,Qe.LEFT)!==S.NONE&&(e=o.getLocation(t,Qe.LEFT));if(e===S.NONE)return null;for(var n=e,i=this.iterator();i.hasNext();){var r=i.next(),o=r.getLabel();if(o.getLocation(t,Qe.ON)===S.NONE&&o.setLocation(t,Qe.ON,n),o.isArea(t)){var s=o.getLocation(t,Qe.LEFT),a=o.getLocation(t,Qe.RIGHT);if(a!==S.NONE){if(a!==n)throw new Ye("side location conflict",r.getCoordinate());s===S.NONE&&c.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),n=s}else c.isTrue(o.getLocation(t,Qe.LEFT)===S.NONE,"found single null side"),o.setLocation(t,Qe.RIGHT,n),o.setLocation(t,Qe.LEFT,n)}}},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},print:function(t){M.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var i=e.size()-1,n=e.get(i).getLabel().getLocation(t,Qe.LEFT);c.isTrue(n!==S.NONE,"Found unlabelled area edge");for(var r=n,o=this.iterator();o.hasNext();){var s=o.next().getLabel();c.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Qe.LEFT),l=s.getLocation(t,Qe.RIGHT);if(a===l)return!1;if(l!==r)return!1;r=a}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++)if(this.edgeList.get(e)===t)return e;return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return null===this.edgeList&&(this.edgeList=new x(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,i){return this.ptInAreaLocation[t]===S.NONE&&(this.ptInAreaLocation[t]=fi.locate(e,i[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new _;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var i=e.next();t.append(i),t.append("\n")}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],i=this.iterator();i.hasNext();)for(var n=i.next(),r=n.getLabel(),o=0;o<2;o++)r.isLine(o)&&r.getLocation(o)===S.BOUNDARY&&(e[o]=!0);for(i=this.iterator();i.hasNext();)for(var n=i.next(),r=n.getLabel(),o=0;o<2;o++)if(r.isAnyNull(o)){var s=S.NONE;if(e[o])s=S.EXTERIOR;else{var a=n.getCoordinate();s=this.getLocation(o,a,t)}r.setAllLocationsIfNull(o,s)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return gi}}),jo(di,gi),Wo(di.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,i=this.SCANNING_FOR_INCOMING,n=0;n<this.resultAreaEdgeList.size();n++){var r=this.resultAreaEdgeList.get(n),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),i){case this.SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,i=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),i=this.SCANNING_FOR_INCOMING}}if(i===this.LINKING_TO_OUTGOING){if(null===t)throw new Ye("no outgoing dirEdge found",this.getCoordinate());c.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var i=t.get(0);if(1===e)return i;var n=t.get(e-1),r=i.getQuadrant(),o=n.getQuadrant();return De.isNorthern(r)&&De.isNorthern(o)?i:De.isNorthern(r)||De.isNorthern(o)?0!==i.getDy()?i:0!==n.getDy()?n:(c.shouldNeverReachHere("found two horizontal edges incident on node"),null):n},print:function(t){M.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var i=e.next();t.print("out "),i.print(t),t.println(),t.print("in "),i.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new x;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var i=e.next().getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,i=this.edgeList.size()-1;i>=0;i--){var n=this.edgeList.get(i),r=n.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=n}e.setNext(t)},computeDepths:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),i=(t.getLabel(),t.getDepth(Qe.LEFT)),n=t.getDepth(Qe.RIGHT),r=this.computeDepths(e+1,this.edgeList.size(),i);if(this.computeDepths(0,e,r)!==n)throw new Ye("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],s=arguments[1],a=arguments[2],l=o;l<s;l++){var h=this.edgeList.get(l);h.getLabel(),h.setEdgeDepths(Qe.RIGHT,a),a=h.getDepth(Qe.LEFT)}return a}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,i=null,n=this.SCANNING_FOR_INCOMING,r=this.resultAreaEdgeList.size()-1;r>=0;r--){var o=this.resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),n){case this.SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;i=s,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;i.setNextMin(o),n=this.SCANNING_FOR_INCOMING}}n===this.LINKING_TO_OUTGOING&&(c.isTrue(null!==e,"found null for first outgoing dirEdge"),c.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),i.setNextMin(e))},getOutgoingDegree:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)(n=e.next()).isInResult()&&t++;return t}if(1===arguments.length){for(var i=arguments[0],t=0,e=this.iterator();e.hasNext();){var n=e.next();n.getEdgeRing()===i&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=S.NONE,e=this.iterator();e.hasNext();){r=(n=e.next()).getSym();if(!n.isLineEdge()){if(n.isInResult()){t=S.INTERIOR;break}if(r.isInResult()){t=S.EXTERIOR;break}}}if(t===S.NONE)return null;for(var i=t,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();n.isLineEdge()?n.getEdge().setCovered(i===S.INTERIOR):(n.isInResult()&&(i=S.EXTERIOR),r.isInResult()&&(i=S.INTERIOR))}},computeLabelling:function(t){gi.prototype.computeLabelling.call(this,t),this.label=new Je(S.NONE);for(var e=this.iterator();e.hasNext();)for(var i=e.next(),n=i.getEdge(),r=n.getLabel(),o=0;o<2;o++){var s=r.getLocation(o);s!==S.INTERIOR&&s!==S.BOUNDARY||this.label.setLocation(o,S.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return di}}),jo(pi,si),Wo(pi.prototype,{createNode:function(t){return new ii(t,new di)},interfaces_:function(){return[]},getClass:function(){return pi}}),Wo(mi.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return mi}}),Wo(yi.prototype,{isDelete:function(){return this.eventType===yi.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===yi.INSERT},isSameLabel:function(t){return null!==this.label&&this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[r]},getClass:function(){return yi}}),yi.INSERT=1,yi.DELETE=2,Wo(vi.prototype,{interfaces_:function(){return[]},getClass:function(){return vi}}),Wo(xi.prototype,{isTrivialIntersection:function(t,e,i,n){if(t===i&&1===this.li.getIntersectionNum()){if(xi.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&n===r||0===n&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next().getCoordinate();if(t.isIntersection(n))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,i,n){if(t===i&&e===n)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=i.getCoordinates()[n],a=i.getCoordinates()[n+1];this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),i.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,i,n)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),i.addIntersections(this.li,n,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return xi}}),xi.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},jo(wi,vi),Wo(wi.prototype,{prepareEvents:function(){ls.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var i=this.events.get(e);if(i.isInsert()&&this.processOverlaps(e,i.getDeleteEventIndex(),i,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof xi&&Zo(arguments[0],m)&&Zo(arguments[1],m)){var n=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(n,n),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Zo(arguments[0],m)&&arguments[1]instanceof xi){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},addEdge:function(t,e){for(var i=t.getMonotoneChainEdge(),n=i.getStartIndexes(),r=0;r<n.length-1;r++){var o=new mi(i,r),s=new yi(e,i.getMinX(r),o);this.events.add(s),this.events.add(new yi(i.getMaxX(r),s))}},processOverlaps:function(t,e,i,n){for(var r=i.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();i.isSameLabel(s)||(r.computeIntersections(a,n),this.nOverlaps++)}}},addEdges:function(){if(1===arguments.length)for(var t=arguments[0],e=t.iterator();e.hasNext();){r=e.next();this.addEdge(r,r)}else if(2===arguments.length)for(var i=arguments[0],n=arguments[1],e=i.iterator();e.hasNext();){var r=e.next();this.addEdge(r,n)}},interfaces_:function(){return[]},getClass:function(){return wi}}),Wo(Ci.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return Xt.toLineString(new u(this.min,0),new u(this.max,0))},interfaces_:function(){return[]},getClass:function(){return Ci}}),Wo(Ei.prototype,{compare:function(t,e){var i=t,n=e,r=(i.min+i.max)/2,o=(n.min+n.max)/2;return r<o?-1:r>o?1:0},interfaces_:function(){return[s]},getClass:function(){return Ei}}),Ci.NodeComparator=Ei,jo(Ii,Ci),Wo(Ii.prototype,{query:function(t,e,i){if(!this.intersects(t,e))return null;i.visitItem(this.item)},interfaces_:function(){return[]},getClass:function(){return Ii}}),jo(Si,Ci),Wo(Si.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,i){if(!this.intersects(t,e))return null;null!==this.node1&&this.node1.query(t,e,i),null!==this.node2&&this.node2.query(t,e,i)},interfaces_:function(){return[]},getClass:function(){return Si}}),Wo(bi.prototype,{buildTree:function(){ls.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,i=new x;;){if(this.buildLevel(t,i),1===i.size())return i.get(0);e=t,t=i,i=e}},insert:function(t,e,i){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new Ii(t,e,i))},query:function(t,e,i){this.init(),this.root.query(t,e,i)},buildRoot:function(){if(null!==this.root)return null;this.root=this.buildTree()},printNode:function(t){M.out.println(Xt.toLineString(new u(t.min,this.level),new u(t.max,this.level)))},init:function(){if(null!==this.root)return null;this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var i=0;i<t.size();i+=2){var n=t.get(i);if(null===(i+1<t.size()?t.get(i):null))e.add(n);else{var r=new Si(t.get(i),t.get(i+1));e.add(r)}}},interfaces_:function(){return[]},getClass:function(){return bi}}),Wo(_i.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof _t){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof wt&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[k]},getClass:function(){return _i}}),_i.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(_i.getLines(t))}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e.getFactory().buildGeometry(_i.getLines(e,i))}},_i.getLines=function(){if(1===arguments.length){var t=arguments[0];return _i.getLines(t,!1)}if(2===arguments.length){if(Zo(arguments[0],d)&&Zo(arguments[1],d)){for(var e=arguments[0],i=arguments[1],n=e.iterator();n.hasNext();){f=n.next();_i.getLines(f,i)}return i}if(arguments[0]instanceof F&&"boolean"==typeof arguments[1]){var r=arguments[0],o=arguments[1],s=new x;return r.apply(new _i(s,o)),s}if(arguments[0]instanceof F&&Zo(arguments[1],d)){var a=arguments[0],l=arguments[1];return a instanceof wt?l.add(a):a.apply(new _i(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Zo(arguments[0],d)&&Zo(arguments[1],d)){for(var h=arguments[0],c=arguments[1],u=arguments[2],n=h.iterator();n.hasNext();){var f=n.next();_i.getLines(f,c,u)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof F&&Zo(arguments[1],d)){var g=arguments[0],p=arguments[1],m=arguments[2];return g.apply(new _i(p,m)),p}}},Wo(Ni.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Ce]},getClass:function(){return Ni}}),Wo(Li.prototype,{locate:function(t){var e=new Qt(t),i=new Ti(e);return this.index.query(t.y,t.y,i),e.getLocation()},interfaces_:function(){return[ui]},getClass:function(){return Li}}),Wo(Ti.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[Ce]},getClass:function(){return Ti}}),Wo(Ai.prototype,{init:function(t){for(var e=_i.getLines(t).iterator();e.hasNext();){var i=e.next().getCoordinates();this.addLine(i)}},addLine:function(t){for(var e=1;e<t.length;e++){var i=new Jt(t[e-1],t[e]),n=Math.min(i.p0.y,i.p1.y),r=Math.max(i.p0.y,i.p1.y);this.index.insert(n,r,i)}},query:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=new Ni;return this.index.query(t,e,i),i.getItems()}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this.index.query(n,r,o)}},interfaces_:function(){return[]},getClass:function(){return Ai}}),Li.SegmentVisitor=Ti,Li.IntervalIndexedGeometry=Ai,Wo(Pi.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[r]},getClass:function(){return Pi}}),Wo(Mi.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),i=e.next();e.hasNext();){var n=e.next(),r=this.createSplitEdge(i,n);t.add(r),i=n}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var i=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(n);r||i--;var o=new Array(i).fill(null),s=0;o[s++]=new u(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new Fi(o,new Je(this.edge.label))},add:function(t,e,i){var n=new Pi(t,e,i),r=this.nodeMap.get(n);return null!==r?r:(this.nodeMap.put(n,n),n)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},interfaces_:function(){return[]},getClass:function(){return Mi}}),Wo(Ri.prototype,{getChainStartIndices:function(t){var e=0,i=new x;i.add(new N(e));do{var n=this.findChainEnd(t,e);i.add(new N(n)),e=n}while(e<t.length-1);return Ri.toIntArray(i)},findChainEnd:function(t,e){for(var i=De.quadrant(t[e],t[e+1]),n=e+1;n<t.length&&De.quadrant(t[n-1],t[n])===i;)n++;return n-1},interfaces_:function(){return[]},getClass:function(){return Ri}}),Ri.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e},Wo(Oi.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e>i?e:i},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e<i?e:i},computeIntersectsForChain:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[i],e.startIndex[i+1],n)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],l=arguments[4],h=arguments[5],c=this.pts[r],u=this.pts[o],f=s.pts[a],g=s.pts[l];if(o-r==1&&l-a==1)return h.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(c,u),this.env2.init(f,g),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),p=Math.trunc((a+l)/2);r<d&&(a<p&&this.computeIntersectsForChain(r,d,s,a,p,h),p<l&&this.computeIntersectsForChain(r,d,s,p,l,h)),d<o&&(a<p&&this.computeIntersectsForChain(d,o,s,a,p,h),p<l&&this.computeIntersectsForChain(d,o,s,p,l,h))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var i=0;i<this.startIndex.length-1;i++)for(var n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(i,t,n,e)},interfaces_:function(){return[]},getClass:function(){return Oi}}),Wo(ki.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,i){this.depth[t][e]=i},isNull:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this.depth[t][e]!==ki.NULL_VALUE)return!1;return!0}if(1===arguments.length){var i=arguments[0];return this.depth[i][1]===ki.NULL_VALUE}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.depth[n][r]===ki.NULL_VALUE}},normalize:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),e<0&&(e=0);for(var i=1;i<3;i++){var n=0;this.depth[t][i]>e&&(n=1),this.depth[t][i]=n}}},getDelta:function(t){return this.depth[t][Qe.RIGHT]-this.depth[t][Qe.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?S.EXTERIOR:S.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var i=1;i<3;i++){var n=t.getLocation(e,i);n!==S.EXTERIOR&&n!==S.INTERIOR||(this.isNull(e,i)?this.depth[e][i]=ki.depthAtLocation(n):this.depth[e][i]+=ki.depthAtLocation(n))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===S.INTERIOR&&this.depth[r][o]++}},interfaces_:function(){return[]},getClass:function(){return ki}}),ki.depthAtLocation=function(t){return t===S.EXTERIOR?0:t===S.INTERIOR?1:ki.NULL_VALUE},ki.NULL_VALUE=-1,jo(Fi,ei),Wo(Fi.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new Fi(t,Je.toLineLabel(this.label))},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof Fi))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var i=!0,n=!0,r=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(i=!1),this.pts[o].equals2D(e.pts[--r])||(n=!1),!i&&!n)return!1;return!0},getCoordinate:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){Fi.updateIM(this.label,t)},isCollapsed:function(){return!!this.label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return null===this.mce&&(this.mce=new Oi(this)),this.mce},getEnvelope:function(){if(null===this.env){this.env=new C;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,i,n){var r=new u(t.getIntersection(n)),o=e,s=t.getEdgeDistance(i,n),a=o+1;if(a<this.pts.length){var l=this.pts[a];r.equals2D(l)&&(o=a,s=0)}this.eiList.add(r,o,s)},toString:function(){var t=new _;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,i){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,i,n)},interfaces_:function(){return[]},getClass:function(){return Fi}}),Fi.updateIM=function(){if(2!==arguments.length)return ei.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,Qe.ON),t.getLocation(1,Qe.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,Qe.LEFT),t.getLocation(1,Qe.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,Qe.RIGHT),t.getLocation(1,Qe.RIGHT),2))},jo(Di,ai),Wo(Di.prototype,{insertBoundaryPoint:function(t,e){var i=this.nodes.addNode(e).getLabel(),n=1;S.NONE;i.getLocation(t,Qe.ON)===S.BOUNDARY&&n++;var r=Di.determineBoundary(this.boundaryNodeRule,n);i.setLocation(t,r)},computeSelfNodes:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=new xi(i,!0,!1);o.setIsDoneIfProperInt(r);var s=this.createEdgeSetIntersector(),a=this.parentGeom instanceof _t||this.parentGeom instanceof St||this.parentGeom instanceof Nt,l=n||!a;return s.computeIntersections(this.edges,o,l),this.addSelfIntersectionNodes(this.argIndex),o}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},computeEdgeIntersections:function(t,e,i){var n=new xi(e,i,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this.edges,t.edges,n),n},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof Et){var t=arguments[0].getCoordinate();this.insertPoint(this.argIndex,t,S.INTERIOR)}else if(arguments[0]instanceof u){var e=arguments[0];this.insertPoint(this.argIndex,e,S.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),S.EXTERIOR,S.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var i=t.getInteriorRingN(e);this.addPolygonRing(i,S.INTERIOR,S.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],S.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],S.BOUNDARY)},addLineString:function(t){var e=Y.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var i=new Fi(e,new Je(this.argIndex,S.INTERIOR));this.lineEdgeMap.put(t,i),this.insertEdge(i),c.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),i=0,n=t.iterator();n.hasNext();){var r=n.next();e[i++]=r.getCoordinate().copy()}return e},getBoundaryNodes:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,i){if(this.isBoundaryNode(t,e))return null;i===S.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,i)},addPolygonRing:function(t,e,i){if(t.isEmpty())return null;var n=Y.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=n[0],null;var r=e,o=i;Zt.isCCW(n)&&(r=i,o=e);var s=new Fi(n,new Je(this.argIndex,S.BOUNDARY,r,o));this.lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this.argIndex,n[0],S.BOUNDARY)},insertPoint:function(t,e,i){var n=this.nodes.addNode(e),r=n.getLabel();null===r?n.label=new Je(t,i):r.setLocation(t,i)},createEdgeSetIntersector:function(){return new wi},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var i=e.next(),n=i.getLabel().getLocation(t),r=i.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,n)}},add:function(){if(1!==arguments.length)return ai.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Nt&&(this.useBoundaryDeterminationRule=!1),t instanceof St)this.addPolygon(t);else if(t instanceof wt)this.addLineString(t);else if(t instanceof Et)this.addPoint(t);else if(t instanceof bt)this.addCollection(t);else if(t instanceof ct)this.addCollection(t);else if(t instanceof Nt)this.addCollection(t);else{if(!(t instanceof ht))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e);this.add(i)}},locate:function(t){return Zo(this.parentGeom,It)&&this.parentGeom.getNumGeometries()>50?(null===this.areaPtLocator&&(this.areaPtLocator=new Li(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(1===arguments.length){var t=arguments[0];return this.lineEdgeMap.get(t)}return ai.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return Di}}),Di.determineBoundary=function(t,e){return t.isInBoundary(e)?S.BOUNDARY:S.INTERIOR},Wo(Gi.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return Gi}}),Wo(Bi.prototype,{compareTo:function(t){var e=t;return Bi.compareOriented(this.pts,this._orientation,e.pts,e._orientation)},interfaces_:function(){return[r]},getClass:function(){return Bi}}),Bi.orientation=function(t){return 1===Y.increasingDirection(t)},Bi.compareOriented=function(t,e,i,n){for(var r=e?1:-1,o=n?1:-1,s=e?t.length:-1,a=n?i.length:-1,l=e?0:t.length-1,h=n?0:i.length-1;;){var c=t[l].compareTo(i[h]);if(0!==c)return c;var u=(l+=r)===s,f=(h+=o)===a;if(u&&!f)return-1;if(!u&&f)return 1;if(u&&f)return 0}},Wo(Vi.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var i=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var n=i.getCoordinates(),r=0;r<n.length;r++)r>0&&t.print(","),t.print(n[r].x+" "+n[r].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new Bi(t.getCoordinates());return this.ocaMap.get(e)},add:function(t){this.edges.add(t);var e=new Bi(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return Vi}}),jo(zi,Gi),Wo(zi.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var i=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Je(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(i),r.add(n),i.merge(n)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),i=e.getSym();e.isInResult()&&i.isInResult()&&(e.setInResult(!1),i.setInResult(!1))}},isCoveredByLA:function(t){return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,i,n){var r=new x;return r.addAll(t),r.addAll(e),r.addAll(i),r.isEmpty()?zi.createEmptyResult(n,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(r)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},isCovered:function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next();if(this.ptLocator.locate(t,n)!==S.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new x,e=this.edgeList.iterator();e.hasNext();){var i=e.next();i.isCollapsed()&&(e.remove(),t.add(i.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),i=e.getEdges().getLabel();e.getLabel().merge(i)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this.insertUniqueEdge(i)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new x;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),We.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var i=new li(this.geomFact);i.add(this.graph),this.resultPolyList=i.getPolygons();var n=new hi(this,this.geomFact,this.ptLocator);this.resultLineList=n.build(t);var r=new ci(this,this.geomFact,this.ptLocator);this.resultPointList=r.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var i=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,i)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var i=e.next();this.graph.addNode(i.getCoordinate()).setLabel(t,i.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var i=e.next(),n=i.getLabel();n.isArea()&&!i.isInteriorAreaEdge()&&zi.isResultOfOp(n.getLocation(0,Qe.RIGHT),n.getLocation(1,Qe.RIGHT),t)&&i.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),i=e.getLabel(),n=e.getDepth();if(!n.isNull()){n.normalize();for(var r=0;r<2;r++)i.isNull(r)||!i.isArea()||n.isNull(r)||(0===n.getDelta(r)?i.toLine(r):(c.isTrue(!n.isNull(r,Qe.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(r,Qe.LEFT,n.getLocation(r,Qe.LEFT)),c.isTrue(!n.isNull(r,Qe.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(r,Qe.RIGHT,n.getLocation(r,Qe.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this.arg);this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),i=e.getLabel();e.isIsolated()&&(0,i.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(i)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return zi}}),zi.overlayOp=function(t,e,i){return new zi(t,e).getResultGeometry(i)},zi.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return zi.createEmptyResult(zi.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var i=e;return je.map(t,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(i)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Yi.overlayOp(t,e,zi.INTERSECTION)},zi.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return zi.createEmptyResult(zi.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Yi.overlayOp(t,e,zi.SYMDIFFERENCE)},zi.resultDimension=function(t,e,i){var n=e.getDimension(),r=i.getDimension(),o=-1;switch(t){case zi.INTERSECTION:o=Math.min(n,r);break;case zi.UNION:o=Math.max(n,r);break;case zi.DIFFERENCE:o=n;break;case zi.SYMDIFFERENCE:o=Math.max(n,r)}return o},zi.createEmptyResult=function(t,e,i,n){var r=null;switch(zi.resultDimension(t,e,i)){case-1:r=n.createGeometryCollection(new Array(0).fill(null));break;case 0:r=n.createPoint();break;case 1:r=n.createLineString();break;case 2:r=n.createPolygon()}return r},zi.difference=function(t,e){return t.isEmpty()?zi.createEmptyResult(zi.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Yi.overlayOp(t,e,zi.DIFFERENCE))},zi.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=t.getLocation(0),n=t.getLocation(1);return zi.isResultOfOp(i,n,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===S.BOUNDARY&&(r=S.INTERIOR),o===S.BOUNDARY&&(o=S.INTERIOR),s){case zi.INTERSECTION:return r===S.INTERIOR&&o===S.INTERIOR;case zi.UNION:return r===S.INTERIOR||o===S.INTERIOR;case zi.DIFFERENCE:return r===S.INTERIOR&&o!==S.INTERIOR;case zi.SYMDIFFERENCE:return r===S.INTERIOR&&o!==S.INTERIOR||r!==S.INTERIOR&&o===S.INTERIOR}return!1}},zi.INTERSECTION=1,zi.UNION=2,zi.DIFFERENCE=3,zi.SYMDIFFERENCE=4,Wo(qi.prototype,{selfSnap:function(t){return new ae(t).snapTo(t,this.snapTolerance)},removeCommonBits:function(t){this.cbr=new ce,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),i=zi.overlayOp(e[0],e[1],t);return this.prepareResult(i)},checkValid:function(t){t.isValid()||M.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=ae.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t);return ae.snap(e[0],e[1],this.snapTolerance)},interfaces_:function(){return[]},getClass:function(){return qi}}),qi.overlayOp=function(t,e,i){return new qi(t,e).getResultGeometry(i)},qi.union=function(t,e){return qi.overlayOp(t,e,zi.UNION)},qi.intersection=function(t,e){return qi.overlayOp(t,e,zi.INTERSECTION)},qi.symDifference=function(t,e){return qi.overlayOp(t,e,zi.SYMDIFFERENCE)},qi.difference=function(t,e){return qi.overlayOp(t,e,zi.DIFFERENCE)},Wo(Yi.prototype,{getResultGeometry:function(t){var e=null,i=!1,n=null;try{e=zi.overlayOp(this.geom[0],this.geom[1],t),i=!0}catch(t){if(!(t instanceof l))throw t;n=t}if(!i)try{e=qi.overlayOp(this.geom[0],this.geom[1],t)}catch(t){throw t instanceof l?n:t}return e},interfaces_:function(){return[]},getClass:function(){return Yi}}),Yi.overlayOp=function(t,e,i){return new Yi(t,e).getResultGeometry(i)},Yi.union=function(t,e){return Yi.overlayOp(t,e,zi.UNION)},Yi.intersection=function(t,e){return Yi.overlayOp(t,e,zi.INTERSECTION)},Yi.symDifference=function(t,e){return Yi.overlayOp(t,e,zi.SYMDIFFERENCE)},Yi.difference=function(t,e){return Yi.overlayOp(t,e,zi.DIFFERENCE)},Wo(Ui.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,i=0,n=this.horizontalBisector(t);if(0===n.getLength())i=0,e=n.getCoordinate();else{var r=Yi.overlayOp(n,t,zi.INTERSECTION),o=this.widestGeometry(r);i=o.getEnvelopeInternal().getWidth(),e=Ui.centre(o.getEnvelopeInternal())}(null===this.interiorPoint||i>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=i)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof ht){var t=arguments[0];if(t.isEmpty())return t;for(var e=t.getGeometryN(0),i=1;i<t.getNumGeometries();i++)t.getGeometryN(i).getEnvelopeInternal().getWidth()>e.getEnvelopeInternal().getWidth()&&(e=t.getGeometryN(i));return e}if(arguments[0]instanceof F){var n=arguments[0];return n instanceof ht?this.widestGeometry(n):n}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),i=Xi.getBisectorY(t);return this.factory.createLineString([new u(e.getMinX(),i),new u(e.getMaxX(),i)])},add:function(t){if(t instanceof St)this.addPolygon(t);else if(t instanceof ht)for(var e=t,i=0;i<e.getNumGeometries();i++)this.add(e.getGeometryN(i))},interfaces_:function(){return[]},getClass:function(){return Ui}}),Ui.centre=function(t){return new u(Ui.avg(t.getMinX(),t.getMaxX()),Ui.avg(t.getMinY(),t.getMaxY()))},Ui.avg=function(t,e){return(t+e)/2},Wo(Xi.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));return Ui.avg(this.hiY,this.loY)},process:function(t){for(var e=t.getCoordinateSequence(),i=0;i<e.size();i++){var n=e.getY(i);this.updateInterval(n)}},interfaces_:function(){return[]},getClass:function(){return Xi}}),Xi.getBisectorY=function(t){return new Xi(t).getBisectorY()},Ui.SafeBisectorFinder=Xi,Wo(Hi.prototype,{addEndpoints:function(){if(arguments[0]instanceof F){var t=arguments[0];if(t instanceof wt)this.addEndpoints(t.getCoordinates());else if(t instanceof ht)for(var e=t,i=0;i<e.getNumGeometries();i++)this.addEndpoints(e.getGeometryN(i))}else if(arguments[0]instanceof Array){var n=arguments[0];this.add(n[0]),this.add(n[n.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof F){var t=arguments[0];if(t instanceof wt)this.addInterior(t.getCoordinates());else if(t instanceof ht)for(var e=t,i=0;i<e.getNumGeometries();i++)this.addInterior(e.getGeometryN(i))}else if(arguments[0]instanceof Array)for(var n=arguments[0],i=1;i<n.length-1;i++)this.add(n[i])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new u(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return Hi}}),Wo(Wi.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof F){var t=arguments[0];if(t instanceof Et)this.add(t.getCoordinate());else if(t instanceof ht)for(var e=t,i=0;i<e.getNumGeometries();i++)this.add(e.getGeometryN(i))}else if(arguments[0]instanceof u){var n=arguments[0],r=n.distance(this.centroid);r<this.minDistance&&(this.interiorPoint=new u(n),this.minDistance=r)}},interfaces_:function(){return[]},getClass:function(){return Wi}}),Wo(ji.prototype,{select:function(){if(1===arguments.length)arguments[0];else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},interfaces_:function(){return[]},getClass:function(){return ji}}),Wo(Qi.prototype,{hasChildren:function(){for(var t=0;t<2;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<2;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(null!==t&&!this.isSearchMatch(t))return null;e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e)},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var i=!1,n=0;n<2;n++)if(null!==this.subnode[n]&&(i=this.subnode[n].remove(t,e))){this.subnode[n].isPrunable()&&(this.subnode[n]=null);break}return i||(i=this.items.remove(e))},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<2;e++)if(null!==this.subnode[e]){var i=this.subnode[e].depth();i>t&&(t=i)}return t+1},nodeSize:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return Qi}}),Qi.getSubnodeIndex=function(t,e){var i=-1;return t.min>=e&&(i=1),t.max<=e&&(i=0),i},Wo(Zi.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(1===arguments.length){var t=arguments[0];return this.overlaps(t.min,t.max)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return!(this.min>i||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(1===arguments.length){if(arguments[0]instanceof Zi){var t=arguments[0];return this.contains(t.min,t.max)}if("number"==typeof arguments[0]){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];return i>=this.min&&n<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return Zi}}),Ji.exponent=function(t){return Ki(64,t)-1023},Ji.powerOf2=function(t){return Math.pow(2,t)},Wo($i.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=$i.computeLevel(t),this.interval=new Zi,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var i=Ji.powerOf2(t);this.pt=Math.floor(e.getMin()/i)*i,this.interval.init(this.pt,this.pt+i)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return $i}}),$i.computeLevel=function(t){var e=t.getWidth();return Ji.exponent(e)+1},jo(tn,Qi),Wo(tn.prototype,{getInterval:function(){return this.interval},find:function(t){var e=Qi.getSubnodeIndex(t,this.centre);return-1===e?this:null!==this.subnode[e]?this.subnode[e].find(t):this},insert:function(t){c.isTrue(null===this.interval||this.interval.contains(t.interval));var e=Qi.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var i=this.createSubnode(e);i.insert(t),this.subnode[e]=i}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=Qi.getSubnodeIndex(t,this.centre);return-1!==e?this.getSubnode(e).getNode(t):this},createSubnode:function(t){var e=0,i=0;switch(t){case 0:e=this.interval.getMin(),i=this.centre;break;case 1:e=this.centre,i=this.interval.getMax()}return new tn(new Zi(e,i),this.level-1)},interfaces_:function(){return[]},getClass:function(){return tn}}),tn.createNode=function(t){var e=new $i(t);return new tn(e.getInterval(),e.getLevel())},tn.createExpanded=function(t,e){var i=new Zi(e);null!==t&&i.expandToInclude(t.interval);var n=tn.createNode(i);return null!==t&&n.insert(t),n},Wo(en.prototype,{interfaces_:function(){return[]},getClass:function(){return en}}),en.isZeroWidth=function(t,e){var i=e-t;if(0===i)return!0;var n=i/Math.max(Math.abs(t),Math.abs(e));return Ji.exponent(n)<=en.MIN_BINARY_EXPONENT},en.MIN_BINARY_EXPONENT=-50,jo(nn,Qi),Wo(nn.prototype,{insert:function(t,e){var i=Qi.getSubnodeIndex(t,nn.origin);if(-1===i)return this.add(e),null;var n=this.subnode[i];if(null===n||!n.getInterval().contains(t)){var r=tn.createExpanded(n,t);this.subnode[i]=r}this.insertContained(this.subnode[i],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,i){c.isTrue(t.getInterval().contains(e));(en.isZeroWidth(e.getMin(),e.getMax())?t.find(e):t.getNode(e)).add(i)},interfaces_:function(){return[]},getClass:function(){return nn}}),nn.origin=0,Wo(rn.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var i=rn.ensureExtent(t,this.minExtent);this.root.insert(i,e)},query:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];return this.query(new Zi(t,t))}if(arguments[0]instanceof Zi){var e=arguments[0],i=new x;return this.query(e,i),i}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.root.addAllItemsFromOverlapping(n,r)}},iterator:function(){var t=new x;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var i=rn.ensureExtent(t,this.minExtent);return this.root.remove(i,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},depth:function(){return null!==this.root?this.root.depth():0},nodeSize:function(){return null!==this.root?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return rn}}),rn.ensureExtent=function(t,e){var i=t.getMin(),n=t.getMax();return i!==n?t:(i===n&&(i-=e/2,n=i+e/2),new Zi(i,n))},Wo(on.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return on}}),Wo(sn.prototype,{testLineSegment:function(t,e){var i=null,n=null,r=null,o=null,s=e.p0,a=e.p1;i=s.x-t.x,n=s.y-t.y,r=a.x-t.x,o=a.y-t.y,(n>0&&o<=0||o>0&&n<=0)&&0<jt.signOfDet2x2(i,n,r,o)/(o-n)&&this.crossings++},buildIndex:function(){this.tree=new rn;for(var t=Y.removeRepeatedPoints(this.ring.getCoordinates()),e=Ge.getChains(t),i=0;i<e.size();i++){var n=e.get(i),r=n.getEnvelope();this.interval.min=r.getMinY(),this.interval.max=r.getMaxY(),this.tree.insert(this.interval,n)}},testMonotoneChain:function(t,e,i){i.select(t,e)},isInside:function(t){this.crossings=0;var e=new C(n.NEGATIVE_INFINITY,n.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var i=this.tree.query(this.interval),r=new an(this,t),o=i.iterator();o.hasNext();){var s=o.next();this.testMonotoneChain(e,r,s)}return this.crossings%2==1},interfaces_:function(){return[on]},getClass:function(){return sn}}),jo(an,ji),Wo(an.prototype,{select:function(){if(1!==arguments.length)return ji.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return an}}),sn.MCSelecter=an,Wo(ln.prototype,{interfaces_:function(){return[]},getClass:function(){return ln}}),ln.toDegrees=function(t){return 180*t/Math.PI},ln.normalize=function(t){for(;t>Math.PI;)t-=ln.PI_TIMES_2;for(;t<=-Math.PI;)t+=ln.PI_TIMES_2;return t},ln.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],i=arguments[1],n=i.x-e.x,r=i.y-e.y;return Math.atan2(r,n)}},ln.isAcute=function(t,e,i){var n=t.x-e.x,r=t.y-e.y;return n*(i.x-e.x)+r*(i.y-e.y)>0},ln.isObtuse=function(t,e,i){var n=t.x-e.x,r=t.y-e.y;return n*(i.x-e.x)+r*(i.y-e.y)<0},ln.interiorAngle=function(t,e,i){var n=ln.angle(e,t),r=ln.angle(e,i);return Math.abs(r-n)},ln.normalizePositive=function(t){if(t<0){for(;t<0;)t+=ln.PI_TIMES_2;t>=ln.PI_TIMES_2&&(t=0)}else{for(;t>=ln.PI_TIMES_2;)t-=ln.PI_TIMES_2;t<0&&(t=0)}return t},ln.angleBetween=function(t,e,i){var n=ln.angle(e,t),r=ln.angle(e,i);return ln.diff(n,r)},ln.diff=function(t,e){var i=null;return(i=t<e?e-t:t-e)>Math.PI&&(i=2*Math.PI-i),i},ln.toRadians=function(t){return t*Math.PI/180},ln.getTurn=function(t,e){var i=Math.sin(e-t);return i>0?ln.COUNTERCLOCKWISE:i<0?ln.CLOCKWISE:ln.NONE},ln.angleBetweenOriented=function(t,e,i){var n=ln.angle(e,t),r=ln.angle(e,i)-n;return r<=-Math.PI?r+ln.PI_TIMES_2:r>Math.PI?r-ln.PI_TIMES_2:r},ln.PI_TIMES_2=2*Math.PI,ln.PI_OVER_2=Math.PI/2,ln.PI_OVER_4=Math.PI/4,ln.COUNTERCLOCKWISE=Zt.COUNTERCLOCKWISE,ln.CLOCKWISE=Zt.CLOCKWISE,ln.NONE=Zt.COLLINEAR,Wo(hn.prototype,{area:function(){return hn.area(this.p0,this.p1,this.p2)},signedArea:function(){return hn.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(null===t)throw new i("Supplied point is null.");return hn.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return hn.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return hn.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return hn.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return hn.area3D(this.p0,this.p1,this.p2)},centroid:function(){return hn.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return hn.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return hn}}),hn.area=function(t,e,i){return Math.abs(((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2)},hn.signedArea=function(t,e,i){return((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2},hn.det=function(t,e,i,n){return t*n-e*i},hn.interpolateZ=function(t,e,i,n){var r=e.x,o=e.y,s=i.x-r,a=n.x-r,l=i.y-o,h=n.y-o,c=s*h-a*l,u=t.x-r,f=t.y-o,g=(h*u-a*f)/c,d=(-l*u+s*f)/c;return e.z+g*(i.z-e.z)+d*(n.z-e.z)},hn.longestSideLength=function(t,e,i){var n=t.distance(e),r=e.distance(i),o=i.distance(t),s=n;return r>s&&(s=r),o>s&&(s=o),s},hn.isAcute=function(t,e,i){return!!ln.isAcute(t,e,i)&&!!ln.isAcute(e,i,t)&&!!ln.isAcute(i,t,e)},hn.circumcentre=function(t,e,i){var n=i.x,r=i.y,o=t.x-n,s=t.y-r,a=e.x-n,l=e.y-r,h=2*hn.det(o,s,a,l);return new u(n-hn.det(s,o*o+s*s,l,a*a+l*l)/h,r+hn.det(o,o*o+s*s,a,a*a+l*l)/h)},hn.perpendicularBisector=function(t,e){var i=e.x-t.x,n=e.y-t.y;return new R(new R(t.x+i/2,t.y+n/2,1),new R(t.x-n+i/2,t.y+i+n/2,1))},hn.angleBisector=function(t,e,i){var n=e.distance(t),r=n/(n+e.distance(i)),o=i.x-t.x,s=i.y-t.y;return new u(t.x+r*o,t.y+r*s)},hn.area3D=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=i.x-t.x,a=i.y-t.y,l=i.z-t.z,h=r*l-o*a,c=o*s-n*l,u=n*a-r*s,f=h*h+c*c+u*u;return Math.sqrt(f)/2},hn.centroid=function(t,e,i){return new u((t.x+e.x+i.x)/3,(t.y+e.y+i.y)/3)},hn.inCentre=function(t,e,i){var n=e.distance(i),r=t.distance(i),o=t.distance(e),s=n+r+o;return new u((n*t.x+r*e.x+o*i.x)/s,(n*t.y+r*e.y+o*i.y)/s)},Wo(cn.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(1===this.input.getNumPoints()){e=this.input.getCoordinates();return this.extremalPts=[new u(e[0])],null}var t=this.input.convexHull().getCoordinates(),e=t;if(t[0].equals2D(t[t.length-1])&&(e=new Array(t.length-1).fill(null),Y.copyDeep(t,0,e,0,t.length-1)),e.length<=2)return this.extremalPts=Y.copyDeep(e),null;for(var i=cn.lowestPoint(e),n=cn.pointWitMinAngleWithX(e,i),r=0;r<e.length;r++){var o=cn.pointWithMinAngleWithSegment(e,i,n);if(ln.isObtuse(i,o,n))return this.extremalPts=[new u(i),new u(n)],null;if(ln.isObtuse(o,i,n))i=o;else{if(!ln.isObtuse(o,n,i))return this.extremalPts=[new u(i),new u(n),new u(o)],null;n=o}}c.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){if(null!==this.extremalPts)return null;this.computeCirclePoints(),this.computeCentre(),null!==this.centre&&(this.radius=this.centre.distance(this.extremalPts[0]))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),null===this.centre)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return 0===this.radius?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new u((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=hn.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return cn}}),cn.pointWitMinAngleWithX=function(t,e){for(var i=n.MAX_VALUE,r=null,o=0;o<t.length;o++){var s=t[o];if(s!==e){var a=s.x-e.x,l=s.y-e.y;l<0&&(l=-l);var h=l/Math.sqrt(a*a+l*l);h<i&&(i=h,r=s)}}return r},cn.lowestPoint=function(t){for(var e=t[0],i=1;i<t.length;i++)t[i].y<e.y&&(e=t[i]);return e},cn.pointWithMinAngleWithSegment=function(t,e,i){for(var r=n.MAX_VALUE,o=null,s=0;s<t.length;s++){var a=t[s];if(a!==e&&a!==i){var l=ln.angleBetween(e,a,i);l<r&&(r=l,o=a)}}return o},Wo(un.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),null===this.minWidthPt)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){this.convexHullPts=t instanceof St?t.getExteriorRing().getCoordinates():t.getCoordinates(),0===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):1===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):2===this.convexHullPts.length||3===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=n.MAX_VALUE;for(var e=1,i=new Jt,r=0;r<t.length-1;r++)i.p0=t[r],i.p1=t[r+1],e=this.findMaxPerpDistance(t,i,e)},computeMinimumDiameter:function(){if(null!==this.minWidthPt)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new ne(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,i){for(var n=e.distancePerpendicular(t[i]),r=n,o=i,s=o;r>=n;)n=r,o=s,s=un.nextIndex(t,o),r=e.distancePerpendicular(t[s]);return n<this.minWidth&&(this.minPtIndex=o,this.minWidth=n,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new Jt(e)),o},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),0===this.minWidth)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,i=n.MAX_VALUE,r=-n.MAX_VALUE,o=n.MAX_VALUE,s=-n.MAX_VALUE,a=0;a<this.convexHullPts.length;a++){var l=un.computeC(t,e,this.convexHullPts[a]);l>r&&(r=l),l<i&&(i=l);var h=un.computeC(-e,t,this.convexHullPts[a]);h>s&&(s=h),h<o&&(o=h)}var c=un.computeSegmentForLine(-t,-e,s),u=un.computeSegmentForLine(-t,-e,o),f=un.computeSegmentForLine(-e,t,r),g=un.computeSegmentForLine(-e,t,i),d=f.lineIntersection(c),p=g.lineIntersection(c),m=g.lineIntersection(u),y=f.lineIntersection(u),v=this.inputGeom.getFactory().createLinearRing([d,p,m,y,d]);return this.inputGeom.getFactory().createPolygon(v,null)},interfaces_:function(){return[]},getClass:function(){return un}}),un.nextIndex=function(t,e){return++e>=t.length&&(e=0),e},un.computeC=function(t,e,i){return t*i.y-e*i.x},un.getMinimumDiameter=function(t){return new un(t).getDiameter()},un.getMinimumRectangle=function(t){return new un(t).getMinimumRectangle()},un.computeSegmentForLine=function(t,e,i){var n=null,r=null;return Math.abs(e)>Math.abs(t)?(n=new u(0,i/e),r=new u(1,i/e-t/e)):(n=new u(i/t,0),r=new u(i/t-e/t,1)),new Jt(n,r)};var hs=Object.freeze({Centroid:$t,CGAlgorithms:Zt,ConvexHull:ne,InteriorPointArea:Ui,InteriorPointLine:Hi,InteriorPointPoint:Wi,RobustLineIntersector:Wt,MCPointInRing:sn,MinimumBoundingCircle:cn,MinimumDiameter:un});Wo(fn.prototype,{getResultGeometry:function(){return new gn(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<=0)throw new i("Tolerance must be positive");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return fn}}),fn.densifyPoints=function(t,e,i){for(var n=new Jt,r=new w,o=0;o<t.length-1;o++){n.p0=t[o],n.p1=t[o+1],r.add(n.p0,!1);var s=n.getLength(),a=Math.trunc(s/e)+1;if(a>1)for(var l=s/a,h=1;h<a;h++){var c=h*l/s,u=n.pointAlong(c);i.makePrecise(u),r.add(u,!1)}}return r.add(t[t.length-1],!1),r.toCoordinateArray()},fn.densify=function(t,e){var i=new fn(t);return i.setDistanceTolerance(e),i.getResultGeometry()},jo(gn,oe),Wo(gn.prototype,{transformMultiPolygon:function(t,e){var i=oe.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(i)},transformPolygon:function(t,e){var i=oe.prototype.transformPolygon.call(this,t,e);return e instanceof Nt?i:this.createValidArea(i)},transformCoordinates:function(t,e){var i=t.toCoordinateArray(),n=fn.densifyPoints(i,this.distanceTolerance,e.getPrecisionModel());return e instanceof wt&&1===n.length&&(n=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(n)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return gn}}),fn.DensifyTransformer=gn;var cs=Object.freeze({Densifier:fn});Wo(dn.prototype,{find:function(t){var e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),i=this;do{var n=i.oNext();if(n.compareTo(t)!==e||n===this)return i.insertAfter(t),null;i=n}while(i!==this);c.shouldNeverReachHere()},insertAfter:function(t){c.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){var t=0,e=this;do{t++,e=e.oNext()}while(e!==this);return t},equals:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),i=this.deltaY(),n=t.deltaX(),r=t.deltaY();if(e===n&&i===r)return 0;var o=De.quadrant(e,i),s=De.quadrant(n,r);return o>s?1:o<s?-1:Zt.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;2===t.degree();)if((t=t.prev())===this)return null;return t},compareTo:function(t){var e=t;return this.compareAngularDirection(e)},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return dn}}),dn.init=function(t,e){if(null!==t._sym||null!==e._sym||null!==t._next||null!==e._next)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},dn.create=function(t,e){var i=new dn(t),n=new dn(e);return i.init(n),i},jo(pn,dn),Wo(pn.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return pn}}),pn.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},pn.isMarked=function(t){return t.isMarked()},pn.setMark=function(t,e){t.setMark(e)},pn.markBoth=function(t){t.mark(),t.sym().mark()},pn.mark=function(t){t.mark()},Wo(mn.prototype,{insert:function(t,e,i){var n=this.create(t,e);null!==i?i.insert(n):this.vertexMap.put(t,n);var r=this.vertexMap.get(e);return null!==r?r.insert(n.sym()):this.vertexMap.put(e,n.sym()),n},create:function(t,e){var i=this.createEdge(t),n=this.createEdge(e);return dn.init(i,n),i},createEdge:function(t){return new dn(t)},addEdge:function(t,e){if(!mn.isValidEdge(t,e))return null;var i=this.vertexMap.get(t),n=null;return null!==i&&(n=i.find(e)),null!==n?n:this.insert(t,e,i)},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var i=this.vertexMap.get(t);return null===i?null:i.find(e)},interfaces_:function(){return[]},getClass:function(){return mn}}),mn.isValidEdge=function(t,e){return 0!==e.compareTo(t)},jo(yn,pn),Wo(yn.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return yn}}),jo(vn,mn),Wo(vn.prototype,{createEdge:function(t){return new yn(t)},interfaces_:function(){return[]},getClass:function(){return vn}}),Wo(xn.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym()).isStart()?null===this.ringStartEdge?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return null===this.result&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new w,i=t;for(e.add(i.orig().copy(),!1);2===i.sym().degree();){var n=i.next();if(n===t)break;e.add(n.orig().copy(),!1),i=n}e.add(i.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new w,i=t;for(this.ringStartEdge=null,pn.markBoth(i),e.add(i.orig().copy(),!1);2===i.sym().degree();){this.updateRingStartEdge(i);var n=i.next();if(n===t)return this.buildRing(this.ringStartEdge),null;e.add(n.orig().copy(),!1),i=n,pn.markBoth(i)}e.add(i.dest().copy(),!1),this.stackEdges(i.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do{pn.isMarked(e)||this.nodeEdgeStack.add(e),e=e.oNext()}while(e!==t)},computeResult:function(){for(var t=this.graph.getVertexEdges().iterator();t.hasNext();){var e=t.next();pn.isMarked(e)||this.process(e)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();pn.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof F)arguments[0].apply({interfaces_:function(){return[k]},filter:function(t){t instanceof wt&&this.add(t)}});else if(Zo(arguments[0],d))for(var t=arguments[0],e=t.iterator();e.hasNext();){var i=e.next();this.add(i)}else if(arguments[0]instanceof wt){var n=arguments[0];null===this.factory&&(this.factory=n.getFactory());for(var r=n.getCoordinateSequence(),o=!1,e=1;e<r.size();e++){var s=this.graph.addEdge(r.getCoordinate(e-1),r.getCoordinate(e));null!==s&&(o||(s.setStart(),o=!0))}}},interfaces_:function(){return[]},getClass:function(){return xn}}),xn.dissolve=function(t){var e=new xn;return e.add(t),e.getResult()};var us=Object.freeze({LineDissolver:xn}),fs=Object.freeze({GeometryGraph:Di});Wo(wn.prototype,{hasChildren:function(){for(var t=0;t<4;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<4;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var i=0;i<4;i++)null!==this.subnode[i]&&this.subnode[i].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var i=this.items.iterator();i.hasNext();)e.visitItem(i.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var i=!1,n=0;n<4;n++)if(null!==this.subnode[n]&&(i=this.subnode[n].remove(t,e))){this.subnode[n].isPrunable()&&(this.subnode[n]=null);break}return i||(i=this.items.remove(e))},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var i=0;i<4;i++)null!==this.subnode[i]&&this.subnode[i].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<4;e++)if(null!==this.subnode[e]){var i=this.subnode[e].depth();i>t&&(t=i)}return t+1},isEmpty:function(){var t=!0;this.items.isEmpty()||(t=!1);for(var e=0;e<4;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t},add:function(t){this.items.add(t)},interfaces_:function(){return[a]},getClass:function(){return wn}}),wn.getSubnodeIndex=function(t,e,i){var n=-1;return t.getMinX()>=e&&(t.getMinY()>=i&&(n=3),t.getMaxY()<=i&&(n=1)),t.getMaxX()<=e&&(t.getMinY()>=i&&(n=2),t.getMaxY()<=i&&(n=0)),n},Wo(Cn.prototype,{getLevel:function(){return this.level},computeKey:function(){if(1===arguments.length){var t=arguments[0];for(this.level=Cn.computeQuadLevel(t),this.env=new C,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],n=Ji.powerOf2(e);this.pt.x=Math.floor(i.getMinX()/n)*n,this.pt.y=Math.floor(i.getMinY()/n)*n,this.env.init(this.pt.x,this.pt.x+n,this.pt.y,this.pt.y+n)}},getEnvelope:function(){return this.env},getCentre:function(){return new u((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Cn}}),Cn.computeQuadLevel=function(t){var e=t.getWidth(),i=t.getHeight(),n=e>i?e:i;return Ji.exponent(n)+1},jo(En,wn),Wo(En.prototype,{find:function(t){var e=wn.getSubnodeIndex(t,this.centrex,this.centrey);return-1===e?this:null!==this.subnode[e]?this.subnode[e].find(t):this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=wn.getSubnodeIndex(t,this.centrex,this.centrey);return-1!==e?this.getSubnode(e).getNode(t):this},createSubnode:function(t){var e=0,i=0,n=0,r=0;switch(t){case 0:e=this.env.getMinX(),i=this.centrex,n=this.env.getMinY(),r=this.centrey;break;case 1:e=this.centrex,i=this.env.getMaxX(),n=this.env.getMinY(),r=this.centrey;break;case 2:e=this.env.getMinX(),i=this.centrex,n=this.centrey,r=this.env.getMaxY();break;case 3:e=this.centrex,i=this.env.getMaxX(),n=this.centrey,r=this.env.getMaxY()}return new En(new C(e,i,n,r),this.level-1)},insertNode:function(t){c.isTrue(null===this.env||this.env.contains(t.env));var e=wn.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var i=this.createSubnode(e);i.insertNode(t),this.subnode[e]=i}},interfaces_:function(){return[]},getClass:function(){return En}}),En.createNode=function(t){var e=new Cn(t);return new En(e.getEnvelope(),e.getLevel())},En.createExpanded=function(t,e){var i=new C(e);null!==t&&i.expandToInclude(t.env);var n=En.createNode(i);return null!==t&&n.insertNode(t),n},jo(In,wn),Wo(In.prototype,{insert:function(t,e){var i=wn.getSubnodeIndex(t,In.origin.x,In.origin.y);if(-1===i)return this.add(e),null;var n=this.subnode[i];if(null===n||!n.getEnvelope().contains(t)){var r=En.createExpanded(n,t);this.subnode[i]=r}this.insertContained(this.subnode[i],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,i){c.isTrue(t.getEnvelope().contains(e));var n=en.isZeroWidth(e.getMinX(),e.getMaxX()),r=en.isZeroWidth(e.getMinY(),e.getMaxY());(n||r?t.find(e):t.getNode(e)).add(i)},interfaces_:function(){return[]},getClass:function(){return In}}),In.origin=new u(0,0),Wo(Sn.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var i=Sn.ensureExtent(t,this.minExtent);this.root.insert(i,e)},query:function(){if(1===arguments.length){var t=arguments[0],e=new Ni;return this.query(t,e),e.getItems()}if(2===arguments.length){var i=arguments[0],n=arguments[1];this.root.visit(i,n)}},queryAll:function(){var t=new x;return this.root.addAllItems(t),t},remove:function(t,e){var i=Sn.ensureExtent(t,this.minExtent);return this.root.remove(i,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var i=t.getHeight();i<this.minExtent&&i>0&&(this.minExtent=i)},depth:function(){return null!==this.root?this.root.depth():0},isEmpty:function(){return null===this.root},interfaces_:function(){return[Ee,a]},getClass:function(){return Sn}}),Sn.ensureExtent=function(t,e){var i=t.getMinX(),n=t.getMaxX(),r=t.getMinY(),o=t.getMaxY();return i!==n&&r!==o?t:(i===n&&(i-=e/2,n=i+e/2),r===o&&(r-=e/2,o=r+e/2),new C(i,n,r,o))},Sn.serialVersionUID=-0x678b60c967a25400;var gs=Object.freeze({Quadtree:Sn}),ds=Object.freeze({STRtree:Ne}),ps=Object.freeze({quadtree:gs,strtree:ds}),ms=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];Wo(bn.prototype,{read:function(t){var e=void 0,i=(e="string"==typeof t?JSON.parse(t):t).type;if(!ys[i])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==ms.indexOf(i)?ys[i].apply(this,[e.coordinates]):"GeometryCollection"===i?ys[i].apply(this,[e.geometries]):ys[i].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!vs[e])throw new Error("Geometry is not supported");return vs[e].apply(this,[t])}});var ys={Feature:function(t){var e={};for(var i in t)e[i]=t[i];if(t.geometry){var n=t.geometry.type;if(!ys[n])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=ys.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var i=0;i<t.features.length;++i)e.features.push(this.read(t.features[i]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],i=0;i<t.length;++i){var n=t[i];e.push(new u(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new u(t[0],t[1]),new u(t[2],t[1]),new u(t[2],t[3]),new u(t[0],t[3]),new u(t[0],t[1])])},Point:function(t){var e=new u(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],i=0;i<t.length;++i)e.push(ys.Point.apply(this,[t[i]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=ys.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],i=0;i<t.length;++i)e.push(ys.LineString.apply(this,[t[i]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=ys.coordinates.apply(this,[t[0]]),i=this.geometryFactory.createLinearRing(e),n=[],r=1;r<t.length;++r){var o=t[r],s=ys.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);n.push(a)}return this.geometryFactory.createPolygon(i,n)},MultiPolygon:function(t){for(var e=[],i=0;i<t.length;++i){var n=t[i];e.push(ys.Polygon.apply(this,[n]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],i=0;i<t.length;++i){var n=t[i];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},vs={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:vs.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],i=0;i<t.geometries.length;++i){var n=t.geometries[i],r=vs.Point.apply(this,[n]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],i=t.getCoordinates(),n=0;n<i.length;++n){var r=i[n];e.push(vs.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],i=0;i<t.geometries.length;++i){var n=t.geometries[i],r=vs.LineString.apply(this,[n]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],i=vs.LineString.apply(this,[t.shell]);e.push(i.coordinates);for(var n=0;n<t.holes.length;++n){var r=t.holes[n],o=vs.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],i=0;i<t.geometries.length;++i){var n=t.geometries[i],r=vs.Polygon.apply(this,[n]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],i=0;i<t.geometries.length;++i){var n=t.geometries[i],r=n.getGeometryType();e.push(vs[r].apply(this,[n]))}return{type:"GeometryCollection",geometries:e}}};Wo(_n.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===zt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,i;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,i=t.points.length;e<i;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,i=t.geometries.length;e<i;e++)this.reducePrecision(t.geometries[e])}}),Wo(Nn.prototype,{write:function(t){return this.parser.write(t)}}),Wo(Ln.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===zt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,i=t.points.coordinates.length;e<i;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var n=0,r=t.geometries.length;n<r;n++)this.reducePrecision(t.geometries[n])}}),Wo(An.prototype,{read:function(t){var e=this.ol;return t instanceof e.geom.Point?this.convertFromPoint(t):t instanceof e.geom.LineString?this.convertFromLineString(t):t instanceof e.geom.LinearRing?this.convertFromLinearRing(t):t instanceof e.geom.Polygon?this.convertFromPolygon(t):t instanceof e.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof e.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof e.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof e.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new u(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new u(t[0],t[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new u(t[0],t[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),i=null,n=[],r=0;r<e.length;r++){var o=this.convertFromLinearRing(e[r]);0===r?i=o:n.push(o)}return this.geometryFactory.createPolygon(i,n)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0},convertToPoint:function(t){return new this.ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(Tn);return new this.ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(Tn);return new this.ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(Tn)],i=0;i<t.holes.length;i++)e.push(t.holes[i].points.coordinates.map(Tn));return new this.ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(Tn))},convertToMultiLineString:function(t){for(var e=[],i=0;i<t.geometries.length;i++)e.push(this.convertToLineString(t.geometries[i]).getCoordinates());return new this.ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],i=0;i<t.geometries.length;i++)e.push(this.convertToPolygon(t.geometries[i]).getCoordinates());return new this.ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],i=0;i<t.geometries.length;i++){var n=t.geometries[i];e.push(this.write(n))}return new this.ol.geom.GeometryCollection(e)}});var xs=Object.freeze({GeoJSONReader:_n,GeoJSONWriter:Nn,OL3Parser:An,WKTReader:Ln,WKTWriter:Xt});Wo(Pn.prototype,{rescale:function(){if(Zo(arguments[0],d))for(var t=arguments[0],e=t.iterator();e.hasNext();){var i=e.next();this.rescale(i.getCoordinates())}else if(arguments[0]instanceof Array){var n=arguments[0];2===n.length&&(new u(n[0]),new u(n[1]));for(e=0;e<n.length;e++)n[e].x=n[e].x/this.scaleFactor+this.offsetX,n[e].y=n[e].y/this.scaleFactor+this.offsetY;2===n.length&&n[0].equals2D(n[1])&&M.out.println(n)}},scale:function(){if(Zo(arguments[0],d)){for(var t=arguments[0],e=new x,i=t.iterator();i.hasNext();){var n=i.next();e.add(new Oe(this.scale(n.getCoordinates()),n.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),i=0;i<r.length;i++)o[i]=new u(Math.round((r[i].x-this.offsetX)*this.scaleFactor),Math.round((r[i].y-this.offsetY)*this.scaleFactor),r[i].z);return Y.removeRepeatedPoints(o)}},isIntegerPrecision:function(){return 1===this.scaleFactor},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[Be]},getClass:function(){return Pn}});var ws=Object.freeze({MCIndexNoder:ze,ScaledNoder:Pn,SegmentString:me});Wo(Mn.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new rt,i=0;i<t.getNumGeometries();i++){var n=t.getGeometryN(i).getCoordinate();if(e.contains(n))return this.nonSimpleLocation=n,!1;e.add(n)}return!0},isSimplePolygonal:function(t){for(var e=_i.getLines(t).iterator();e.hasNext();){var i=e.next();if(!this.isSimpleLinearGeometry(i))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new et,i=t.getEdgeIterator();i.hasNext();){var n=i.next(),r=(n.getMaximumSegmentIndex(),n.isClosed()),o=n.getCoordinate(0);this.addEndpoint(e,o,r);var s=n.getCoordinate(n.getNumPoints()-1);this.addEndpoint(e,s,r)}for(i=e.values().iterator();i.hasNext();){var a=i.next();if(a.isClosed&&2!==a.degree)return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new Di(0,t),i=new Wt,n=e.computeSelfNodes(i,!0);return!(n.hasIntersection()&&(n.hasProperIntersection()?(this.nonSimpleLocation=n.getProperIntersectionPoint(),1):this.hasNonEndpointIntersection(e)||this.isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(e)))},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var i=e.next(),n=i.getMaximumSegmentIndex(),r=i.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next();if(!o.isEndPoint(n))return this.nonSimpleLocation=o.getCoordinate(),!0}return!1},addEndpoint:function(t,e,i){var n=t.get(e);null===n&&(n=new Rn(e),t.put(e,n)),n.addEndpoint(i)},computeSimple:function(t){return this.nonSimpleLocation=null,!!t.isEmpty()||(t instanceof wt?this.isSimpleLinearGeometry(t):t instanceof ct?this.isSimpleLinearGeometry(t):t instanceof bt?this.isSimpleMultiPoint(t):Zo(t,It)?this.isSimplePolygonal(t):!(t instanceof ht)||this.isSimpleGeometryCollection(t))},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e);if(!this.computeSimple(i))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return Mn}}),Wo(Rn.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Rn}}),Mn.EndpointInfo=Rn,Wo(On.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=On.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=On.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),t<=0&&(this.quadrantSegments=1),this.joinStyle!==On.JOIN_ROUND&&(this.quadrantSegments=On.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=t<0?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return On}}),On.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},On.CAP_ROUND=1,On.CAP_FLAT=2,On.CAP_SQUARE=3,On.JOIN_ROUND=1,On.JOIN_MITRE=2,On.JOIN_BEVEL=3,On.DEFAULT_QUADRANT_SEGMENTS=8,On.DEFAULT_MITRE_LIMIT=5,On.DEFAULT_SIMPLIFY_FACTOR=.01,Wo(kn.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var i=this.getRightmostSideOfSegment(t,e);return i<0&&(i=this.getRightmostSideOfSegment(t,e-1)),i<0&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),i},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();c.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],i=t[this.minIndex+1],n=Zt.computeOrientation(this.minCoord,i,e),r=!1;e.y<this.minCoord.y&&i.y<this.minCoord.y&&n===Zt.COUNTERCLOCKWISE?r=!0:e.y>this.minCoord.y&&i.y>this.minCoord.y&&n===Zt.CLOCKWISE&&(r=!0),r&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var i=t.getEdge().getCoordinates();if(e<0||e+1>=i.length)return-1;if(i[e].y===i[e+1].y)return-1;var n=Qe.LEFT;return i[e].y<i[e+1].y&&(n=Qe.RIGHT),n},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),i=0;i<e.length-1;i++)(null===this.minCoord||e[i].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=i,this.minCoord=e[i])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode().getEdges();this.minDe=t.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();i.isForward()&&this.checkForRightmostCoordinate(i)}c.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe,this.getRightmostSide(this.minDe,this.minIndex)===Qe.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return kn}}),Fn.prototype.addLast=function(t){this.array_.push(t)},Fn.prototype.removeFirst=function(){return this.array_.shift()},Fn.prototype.isEmpty=function(){return 0===this.array_.length},Wo(Dn.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,i=t.getEdges().iterator();i.hasNext();)if((n=i.next()).isVisited()||n.getSym().isVisited()){e=n;break}if(null===e)throw new Ye("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(i=t.getEdges().iterator();i.hasNext();){var n=i.next();n.setVisited(!0),this.copySymDepths(n)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(Qe.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Qe.RIGHT)>=1&&e.getDepth(Qe.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new Q,i=new Fn,n=t.getNode();for(i.addLast(n),e.add(n),t.setVisited(!0);!i.isEmpty();){var r=i.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(i.addLast(a),e.add(a))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(null===this.env){for(var t=new C,e=this.dirEdgeList.iterator();e.hasNext();)for(var i=e.next(),n=i.getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this.env=t}return this.env},addReachable:function(t){var e=new ee;for(e.add(t);!e.empty();){var i=e.pop();this.add(i,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(Qe.LEFT,t.getDepth(Qe.RIGHT)),e.setDepth(Qe.RIGHT,t.getDepth(Qe.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var i=t.getEdges().iterator();i.hasNext();){var n=i.next();this.dirEdgeList.add(n);var r=n.getSym().getNode();r.isVisited()||e.push(r)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[r]},getClass:function(){return Dn}}),Wo(Gn.prototype,{isDeletable:function(t,e,i,n){var r=this.inputLine[t],o=this.inputLine[e],s=this.inputLine[i];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,n)&&this.isShallowSampled(r,o,t,i,n)},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length,this.findNextNonDeletedIndex(t)),i=this.findNextNonDeletedIndex(e),n=!1;i<this.inputLine.length;){var r=!1;this.isDeletable(t,e,i,this.distanceTol)&&(this.isDeleted[e]=Gn.DELETE,r=!0,n=!0),t=r?i:e,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e)}return n},isShallowConcavity:function(t,e,i,n){return Zt.computeOrientation(t,e,i)===this.angleOrientation&&Zt.distancePointLine(e,t,i)<n},isShallowSampled:function(t,e,i,n,r){var o=Math.trunc((n-i)/Gn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=i;s<n;s+=o)if(!this.isShallow(t,e,this.inputLine[s],r))return!1;return!0},isConcave:function(t,e,i){return Zt.computeOrientation(t,e,i)===this.angleOrientation},simplify:function(t){this.distanceTol=Math.abs(t),t<0&&(this.angleOrientation=Zt.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===Gn.DELETE;)e++;return e},isShallow:function(t,e,i,n){return Zt.distancePointLine(e,t,i)<n},collapseLine:function(){for(var t=new w,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==Gn.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Gn}}),Gn.simplify=function(t,e){return new Gn(t).simplify(e)},Gn.INIT=0,Gn.DELETE=1,Gn.KEEP=1,Gn.NUM_PTS_TO_CHECK=10,Wo(Bn.prototype,{getCoordinates:function(){return this.ptList.toArray(Bn.COORDINATE_ARRAY_TYPE)},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new u(t);if(this.precisionModel.makePrecise(e),this.isRedundant(e))return null;this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(i=0;i<t.length;i++)this.addPt(t[i]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1);return t.distance(e)<this.minimimVertexDistance},toString:function(){return(new Yt).createLineString(this.getCoordinates()).toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new u(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);if(this.ptList.size()>=2&&this.ptList.get(this.ptList.size()-2),t.equals(e))return null;this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return Bn}}),Bn.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),Wo(Vn.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var i=Zt.computeOrientation(this.s0,this.s1,this.s2),n=i===Zt.CLOCKWISE&&this.side===Qe.LEFT||i===Zt.COUNTERCLOCKWISE&&this.side===Qe.RIGHT;0===i?this.addCollinear(e):n?this.addOutsideTurn(i,e):this.addInsideTurn(i,e)},addLineEndCap:function(t,e){var i=new Jt(t,e),n=new Jt;this.computeOffsetSegment(i,Qe.LEFT,this.distance,n);var r=new Jt;this.computeOffsetSegment(i,Qe.RIGHT,this.distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this.bufParams.getEndCapStyle()){case On.CAP_ROUND:this.segList.addPt(n.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Zt.CLOCKWISE,this.distance),this.segList.addPt(r.p1);break;case On.CAP_FLAT:this.segList.addPt(n.p1),this.segList.addPt(r.p1);break;case On.CAP_SQUARE:var l=new u;l.x=Math.abs(this.distance)*Math.cos(a),l.y=Math.abs(this.distance)*Math.sin(a);var h=new u(n.p1.x+l.x,n.p1.y+l.y),c=new u(r.p1.x+l.x,r.p1.y+l.y);this.segList.addPt(h),this.segList.addPt(c)}},getCoordinates:function(){return this.segList.getCoordinates()},addMitreJoin:function(t,e,i,n){var r=!0,o=null;try{o=R.intersection(e.p0,e.p1,i.p0,i.p1),(n<=0?1:o.distance(t)/Math.abs(n))>this.bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof I))throw t;o=new u(0,0),r=!1}r?this.segList.addPt(o):this.addLimitedMitreJoin(e,i,n,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,i,n,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),l=i.x-t.x,h=i.y-t.y,c=Math.atan2(h,l);n===Zt.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,a,c,n,r),this.segList.addPt(i)},addOutsideTurn:function(t,e){if(this.offset0.p1.distance(this.offset1.p0)<this.distance*Vn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this.segList.addPt(this.offset0.p1),null;this.bufParams.getJoinStyle()===On.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===On.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0))},createSquare:function(t){this.segList.addPt(new u(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new u(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new u(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new u(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,i){this.s1=t,this.s2=e,this.side=i,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,i,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,i,n){var r=this.seg0.p1,o=ln.angle(r,this.seg0.p0),s=(ln.angle(r,this.seg1.p1),ln.angleBetweenOriented(this.seg0.p0,r,this.seg1.p1))/2,a=ln.normalize(o+s),l=ln.normalize(a+Math.PI),h=n*i,c=i-h*Math.abs(Math.sin(s)),f=new Jt(r,new u(r.x+h*Math.cos(l),r.y+h*Math.sin(l))),g=f.pointAlongOffset(1,c),d=f.pointAlongOffset(1,-c);this.side===Qe.LEFT?(this.segList.addPt(g),this.segList.addPt(d)):(this.segList.addPt(d),this.segList.addPt(g))},computeOffsetSegment:function(t,e,i,n){var r=e===Qe.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),l=r*i*o/a,h=r*i*s/a;n.p0.x=t.p0.x-h,n.p0.y=t.p0.y+l,n.p1.x=t.p1.x-h,n.p1.y=t.p1.y+l},addFilletArc:function(t,e,i,n,r){var o=n===Zt.CLOCKWISE?-1:1,s=Math.abs(e-i),a=Math.trunc(s/this.filletAngleQuantum+.5);if(a<1)return null;var l=null;l=s/a;for(var h=0,c=new u;h<s;){var f=e+o*h;c.x=t.x+r*Math.cos(f),c.y=t.y+r*Math.sin(f),this.segList.addPt(c),h+=l}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Vn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var i=new u((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(i);var n=new u((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new u(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new Bn,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*Vn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2),this.li.getIntersectionNum()>=2&&(this.bufParams.getJoinStyle()===On.JOIN_BEVEL||this.bufParams.getJoinStyle()===On.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,Zt.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return Vn}}),Vn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Vn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Vn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Vn.MAX_CLOSING_SEG_LEN_FACTOR=80,Wo(zn.prototype,{getOffsetCurve:function(t,e){if(this.distance=e,0===e)return null;var i=e<0,n=Math.abs(e),r=this.getSegGen(n);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,i,r);var o=r.getCoordinates();return i&&Y.reverse(o),o},computeSingleSidedBufferCurve:function(t,e,i){var n=this.simplifyTolerance(this.distance);if(e){i.addSegments(t,!0);var r=Gn.simplify(t,-n),o=r.length-1;i.initSideSegments(r[o],r[o-1],Qe.LEFT),i.addFirstSegment();for(l=o-2;l>=0;l--)i.addNextSegment(r[l],!0)}else{i.addSegments(t,!1);var s=Gn.simplify(t,n),a=s.length-1;i.initSideSegments(s[0],s[1],Qe.LEFT),i.addFirstSegment();for(var l=2;l<=a;l++)i.addNextSegment(s[l],!0)}i.addLastSegment(),i.closeRing()},computeRingBufferCurve:function(t,e,i){var n=this.simplifyTolerance(this.distance);e===Qe.RIGHT&&(n=-n);var r=Gn.simplify(t,n),o=r.length-1;i.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++){var a=1!==s;i.addNextSegment(r[s],a)}i.closeRing()},computeLineBufferCurve:function(t,e){var i=this.simplifyTolerance(this.distance),n=Gn.simplify(t,i),r=n.length-1;e.initSideSegments(n[0],n[1],Qe.LEFT);for(a=2;a<=r;a++)e.addNextSegment(n[a],!0);e.addLastSegment(),e.addLineEndCap(n[r-1],n[r]);var o=Gn.simplify(t,-i),s=o.length-1;e.initSideSegments(o[s],o[s-1],Qe.LEFT);for(var a=s-2;a>=0;a--)e.addNextSegment(o[a],!0);e.addLastSegment(),e.addLineEndCap(o[1],o[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case On.CAP_ROUND:e.createCircle(t);break;case On.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this.distance=e,e<0&&!this.bufParams.isSingleSided())return null;if(0===e)return null;var i=Math.abs(e),n=this.getSegGen(i);if(t.length<=1)this.computePointCurve(t[0],n);else if(this.bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,n)}else this.computeLineBufferCurve(t,n);return n.getCoordinates()},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,i){if(this.distance=i,t.length<=2)return this.getLineCurve(t,i);if(0===i)return zn.copyCoordinates(t);var n=this.getSegGen(i);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()},computeOffsetCurve:function(t,e,i){var n=this.simplifyTolerance(this.distance);if(e){var r=Gn.simplify(t,-n),o=r.length-1;i.initSideSegments(r[o],r[o-1],Qe.LEFT),i.addFirstSegment();for(l=o-2;l>=0;l--)i.addNextSegment(r[l],!0)}else{var s=Gn.simplify(t,n),a=s.length-1;i.initSideSegments(s[0],s[1],Qe.LEFT),i.addFirstSegment();for(var l=2;l<=a;l++)i.addNextSegment(s[l],!0)}i.addLastSegment()},getSegGen:function(t){return new Vn(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return zn}}),zn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),i=0;i<e.length;i++)e[i]=new u(t[i]);return e},Wo(qn.prototype,{findStabbedSegments:function(){if(1===arguments.length){for(var t=arguments[0],e=new x,i=this.subgraphs.iterator();i.hasNext();){var n=i.next(),r=n.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,n.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Zo(arguments[2],m)&&arguments[0]instanceof u&&arguments[1]instanceof oi){for(var o=arguments[0],s=arguments[1],a=arguments[2],l=s.getEdge().getCoordinates(),i=0;i<l.length-1;i++)if(this.seg.p0=l[i],this.seg.p1=l[i+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse(),!(Math.max(this.seg.p0.x,this.seg.p1.x)<o.x||this.seg.isHorizontal()||o.y<this.seg.p0.y||o.y>this.seg.p1.y||Zt.computeOrientation(this.seg.p0,this.seg.p1,o)===Zt.RIGHT)){var h=s.getDepth(Qe.LEFT);this.seg.p0.equals(l[i])||(h=s.getDepth(Qe.RIGHT));var c=new Yn(this.seg,h);a.add(c)}}else if(Zo(arguments[2],m)&&arguments[0]instanceof u&&Zo(arguments[1],m))for(var f=arguments[0],g=arguments[1],d=arguments[2],i=g.iterator();i.hasNext();){var p=i.next();p.isForward()&&this.findStabbedSegments(f,p,d)}},getDepth:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:ls.min(e).leftDepth},interfaces_:function(){return[]},getClass:function(){return qn}}),Wo(Yn.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var i=this.upwardSeg.orientationIndex(e.upwardSeg);return 0!==i?i:0!=(i=-1*e.upwardSeg.orientationIndex(this.upwardSeg))?i:this.upwardSeg.compareTo(e.upwardSeg)},compareX:function(t,e){var i=t.p0.compareTo(e.p0);return 0!==i?i:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[r]},getClass:function(){return Yn}}),qn.DepthSegment=Yn,Wo(Un.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),i=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(i,S.EXTERIOR,S.INTERIOR)},addPolygon:function(t){var e=this.distance,i=Qe.LEFT;this.distance<0&&(e=-this.distance,i=Qe.RIGHT);var n=t.getExteriorRing(),r=Y.removeRepeatedPoints(n.getCoordinates());if(this.distance<0&&this.isErodedCompletely(n,this.distance))return null;if(this.distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,i,S.EXTERIOR,S.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Y.removeRepeatedPoints(s.getCoordinates());this.distance>0&&this.isErodedCompletely(s,-this.distance)||this.addPolygonRing(a,e,Qe.opposite(i),S.INTERIOR,S.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var i=new hn(t[0],t[1],t[2]),n=i.inCentre();return Zt.distancePointLine(n,i.p0,i.p1)<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=Y.removeRepeatedPoints(t.getCoordinates()),i=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(i,S.EXTERIOR,S.INTERIOR)},addCurve:function(t,e,i){if(null===t||t.length<2)return null;var n=new Oe(t,new Je(0,S.BOUNDARY,e,i));this.curveList.add(n)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,i,n,r){if(0===e&&t.length<_t.MINIMUM_VALID_SIZE)return null;var o=n,s=r;t.length>=_t.MINIMUM_VALID_SIZE&&Zt.isCCW(t)&&(o=r,s=n,i=Qe.opposite(i));var a=this.curveBuilder.getRingCurve(t,i,e);this.addCurve(a,o,s)},add:function(t){if(t.isEmpty())return null;if(t instanceof St)this.addPolygon(t);else if(t instanceof wt)this.addLineString(t);else if(t instanceof Et)this.addPoint(t);else if(t instanceof bt)this.addCollection(t);else if(t instanceof ct)this.addCollection(t);else if(t instanceof Nt)this.addCollection(t);else{if(!(t instanceof ht))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var i=t.getCoordinates();if(i.length<4)return e<0;if(4===i.length)return this.isTriangleErodedCompletely(i,e);var n=t.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth());return e<0&&2*Math.abs(e)>r},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e);this.add(i)}},interfaces_:function(){return[]},getClass:function(){return Un}}),Wo(Xn.prototype,{isTrivialIntersection:function(t,e,i,n){if(t===i&&1===this.li.getIntersectionNum()){if(Xn.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&n===r||0===n&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,i,n){if(t===i&&e===n)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=i.getCoordinates()[n],a=i.getCoordinates()[n+1];this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,i,n)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),i.addIntersections(this.li,n,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[Ue]},getClass:function(){return Xn}}),Xn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},Wo(Hn.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var i=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Je(t.getLabel())).flip(),i.merge(n);var r=Hn.depthDelta(n),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this.edgeList.add(t),t.setDepthDelta(Hn.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var i=new x,n=t.iterator();n.hasNext();){var r=n.next(),o=r.getRightmostCoordinate(),s=new qn(i).getDepth(o);r.computeDepth(s),r.findResultEdges(),i.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},createSubgraphs:function(t){for(var e=new x,i=t.getNodes().iterator();i.hasNext();){var n=i.next();if(!n.isVisited()){var r=new Dn;r.create(n),e.add(r)}}return ls.sort(e,ls.reverseOrder()),e},createEmptyResultGeometry:function(){return this.geomFact.createPolygon()},getNoder:function(t){if(null!==this.workingNoder)return this.workingNoder;var e=new ze,i=new Wt;return i.setPrecisionModel(t),e.setSegmentIntersector(new Xn(i)),e},buffer:function(t,e){var i=this.workingPrecisionModel;null===i&&(i=t.getPrecisionModel()),this.geomFact=t.getFactory();var n=new Un(t,e,new zn(i,this.bufParams)).getCurves();if(n.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(n,i),this.graph=new ai(new pi),this.graph.addEdges(this.edgeList.getEdges());var r=this.createSubgraphs(this.graph),o=new li(this.geomFact);this.buildSubgraphs(r,o);var s=o.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this.geomFact.buildGeometry(s)},computeNodedEdges:function(t,e){var i=this.getNoder(e);i.computeNodes(t);for(var n=i.getNodedSubstrings().iterator();n.hasNext();){var r=n.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new Fi(r.getCoordinates(),new Je(s));this.insertUniqueEdge(a)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return Hn}}),Hn.depthDelta=function(t){var e=t.getLocation(0,Qe.LEFT),i=t.getLocation(0,Qe.RIGHT);return e===S.INTERIOR&&i===S.EXTERIOR?1:e===S.EXTERIOR&&i===S.INTERIOR?-1:0},Hn.convertSegStrings=function(t){for(var e=new Yt,i=new x;t.hasNext();){var n=t.next(),r=e.createLineString(n.getCoordinates());i.add(r)}return e.buildGeometry(i)},Wo(Wn.prototype,{checkEndPtVertexIntersections:function(){if(0===arguments.length)for(i=this.segStrings.iterator();i.hasNext();){r=(n=i.next()).getCoordinates();this.checkEndPtVertexIntersections(r[0],this.segStrings),this.checkEndPtVertexIntersections(r[r.length-1],this.segStrings)}else if(2===arguments.length)for(var t=arguments[0],e=arguments[1],i=e.iterator();i.hasNext();)for(var n=i.next(),r=n.getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(t))throw new l("found endpt/interior pt intersection at index "+o+" :pt "+t)},checkInteriorIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),i=this.segStrings.iterator();i.hasNext();){var n=i.next();this.checkInteriorIntersections(e,n)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),h=0;h<s.length-1;h++)for(var c=0;c<a.length-1;c++)this.checkInteriorIntersections(r,h,o,c);else if(4===arguments.length){var u=arguments[0],f=arguments[1],g=arguments[2],d=arguments[3];if(u===g&&f===d)return null;var p=u.getCoordinates()[f],m=u.getCoordinates()[f+1],y=g.getCoordinates()[d],v=g.getCoordinates()[d+1];if(this.li.computeIntersection(p,m,y,v),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,p,m)||this.hasInteriorIntersection(this.li,y,v)))throw new l("found non-noded intersection at "+p+"-"+m+" and "+y+"-"+v)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(0===arguments.length)for(n=this.segStrings.iterator();n.hasNext();){var t=n.next();this.checkCollapses(t)}else if(1===arguments.length)for(var e=arguments[0],i=e.getCoordinates(),n=0;n<i.length-2;n++)this.checkCollapse(i[n],i[n+1],i[n+2])},hasInteriorIntersection:function(t,e,i){for(var n=0;n<t.getIntersectionNum();n++){var r=t.getIntersection(n);if(!r.equals(e)&&!r.equals(i))return!0}return!1},checkCollapse:function(t,e,i){if(t.equals(i))throw new l("found non-noded collapse at "+Wn.fact.createLineString([t,e,i]))},interfaces_:function(){return[]},getClass:function(){return Wn}}),Wn.fact=new Yt,Wo(jn.prototype,{intersectsScaled:function(t,e){var i=Math.min(t.x,e.x),n=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this.maxx<i||this.minx>n||this.maxy<r||this.miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return c.isTrue(!(s&&a),"Found bad envelope test"),a},initCorners:function(t){this.minx=t.x-.5,this.maxx=t.x+.5,this.miny=t.y-.5,this.maxy=t.y+.5,this.corner[0]=new u(this.maxx,this.maxy),this.corner[1]=new u(this.minx,this.maxy),this.corner[2]=new u(this.minx,this.miny),this.corner[3]=new u(this.maxx,this.miny)},intersects:function(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(null===this.safeEnv){var t=jn.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new C(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.hasIntersection()))))},intersectsToleranceSquare:function(t,e){var i=!1,n=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.isProper()||(this.li.hasIntersection()&&(i=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.isProper()||i&&n||t.equals(this.pt)||e.equals(this.pt)))))},addSnappedNode:function(t,e){var i=t.getCoordinate(e),n=t.getCoordinate(e+1);return!!this.intersects(i,n)&&(t.addIntersection(this.getCoordinate(),e),!0)},interfaces_:function(){return[]},getClass:function(){return jn}}),jn.SAFE_ENV_EXPANSION_FACTOR=.75,Wo(Qn.prototype,{snap:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2],r=e.getSafeEnvelope(),o=new Zn(e,i,n);return this.index.query(r,{interfaces_:function(){return[Ce]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return Qn}}),jo(Zn,ji),Wo(Zn.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(2!==arguments.length)return ji.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],i=t.getContext();if(null!==this.parentEdge&&i===this.parentEdge&&e===this.hotPixelVertexIndex)return null;this._isNodeAdded=this.hotPixel.addSnappedNode(i,e)},interfaces_:function(){return[]},getClass:function(){return Zn}}),Qn.HotPixelSnapAction=Zn,Wo(Jn.prototype,{processIntersections:function(t,e,i,n){if(t===i&&e===n)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=i.getCoordinates()[n],a=i.getCoordinates()[n+1];if(this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var l=0;l<this.li.getIntersectionNum();l++)this.interiorIntersections.add(this.li.getIntersection(l));t.addIntersections(this.li,e,0),i.addIntersections(this.li,n,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[Ue]},getClass:function(){return Jn}}),Wo(Kn.prototype,{checkCorrectness:function(t){var e=new Wn(Oe.getNodedSubstrings(t));try{e.checkValid()}catch(t){if(!(t instanceof E))throw t;t.printStackTrace()}},getNodedSubstrings:function(){return Oe.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var i=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(i),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var i=new Jn(e);return this.noder.setSegmentIntersector(i),this.noder.computeNodes(t),i.getInteriorIntersections()},computeVertexSnaps:function(){if(Zo(arguments[0],d))for(var t=arguments[0],e=t.iterator();e.hasNext();){var i=e.next();this.computeVertexSnaps(i)}else if(arguments[0]instanceof Oe)for(var n=arguments[0],r=n.getCoordinates(),o=0;o<r.length;o++){var s=new jn(r[o],this.scaleFactor,this.li);this.pointSnapper.snap(s,n,o)&&n.addIntersection(r[o],o)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new ze,this.pointSnapper=new Qn(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var i=new jn(e.next(),this.scaleFactor,this.li);this.pointSnapper.snap(i)}},interfaces_:function(){return[Be]},getClass:function(){return Kn}}),Wo($n.prototype,{bufferFixedPrecision:function(t){var e=new Pn(new Kn(new zt(1)),t.getScale()),i=new Hn(this.bufParams);i.setWorkingPrecisionModel(t),i.setNoder(e),this.resultGeometry=i.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(0===arguments.length){for(var t=$n.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof Ye))throw t;this.saveException=t}if(null!==this.resultGeometry)return null}throw this.saveException}if(1===arguments.length){var e=arguments[0],i=new zt($n.precisionScaleFactor(this.argGeom,this.distance,e));this.bufferFixedPrecision(i)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===zt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new Hn(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(t){if(!(t instanceof l))throw t;this.saveException=t}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return f=new $n(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof F&&"number"==typeof arguments[1]){var i=arguments[0],n=arguments[1],r=arguments[2];return(u=new $n(i)).setQuadrantSegments(r),f=u.getResultGeometry(n)}if(arguments[2]instanceof On&&arguments[0]instanceof F&&"number"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return f=(u=new $n(o,arguments[2])).getResultGeometry(s)}}else if(4===arguments.length){var a=arguments[0],l=arguments[1],h=arguments[2],c=arguments[3],u=new $n(a);u.setQuadrantSegments(h),u.setEndCapStyle(c);var f=u.getResultGeometry(l);return f}},$n.precisionScaleFactor=function(t,e,i){var n=t.getEnvelopeInternal(),r=b.max(Math.abs(n.getMaxX()),Math.abs(n.getMaxY()),Math.abs(n.getMinX()),Math.abs(n.getMinY()))+2*(e>0?e:0),o=i-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},$n.CAP_ROUND=On.CAP_ROUND,$n.CAP_BUTT=On.CAP_FLAT,$n.CAP_FLAT=On.CAP_FLAT,$n.CAP_SQUARE=On.CAP_SQUARE,$n.MAX_PRECISION_DIGITS=12;var Cs=Object.freeze({BufferOp:$n,BufferParameters:On});Wo(tr.prototype,{filter:function(t){t instanceof St&&this.comps.add(t)},interfaces_:function(){return[at]},getClass:function(){return tr}}),tr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return tr.getPolygons(t,new x)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e instanceof St?i.add(e):e instanceof ht&&e.apply(new tr(i)),i}},Wo(er.prototype,{isInsideArea:function(){return this.segIndex===er.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return er}}),er.INSIDE_AREA=-1,Wo(ir.prototype,{filter:function(t){t instanceof Et&&this.pts.add(t)},interfaces_:function(){return[at]},getClass:function(){return ir}}),ir.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Et?ls.singletonList(t):ir.getPoints(t,new x)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e instanceof Et?i.add(e):e instanceof ht&&e.apply(new ir(i)),i}},Wo(nr.prototype,{filter:function(t){(t instanceof Et||t instanceof wt||t instanceof St)&&this.locations.add(new er(t,0,t.getCoordinate()))},interfaces_:function(){return[at]},getClass:function(){return nr}}),nr.getLocations=function(t){var e=new x;return t.apply(new nr(e)),e},Wo(rr.prototype,{computeContainmentDistance:function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],n=1-e,r=tr.getPolygons(this.geom[e]);if(r.size()>0){var o=nr.getLocations(this.geom[n]);if(this.computeContainmentDistance(o,r,i),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[n]=i[0],this.minDistanceLocation[e]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Zo(arguments[0],m)&&Zo(arguments[1],m)){for(var s=arguments[0],a=arguments[1],l=arguments[2],h=0;h<s.size();h++)for(var c=s.get(h),u=0;u<a.size();u++)if(this.computeContainmentDistance(c,a.get(u),l),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof er&&arguments[1]instanceof St){var f=arguments[0],g=arguments[1],d=arguments[2],p=f.getCoordinate();if(S.EXTERIOR!==this.ptLocator.locate(p,g))return this.minDistance=0,d[0]=f,d[1]=new er(g,p),null}},computeMinDistanceLinesPoints:function(t,e,i){for(var n=0;n<t.size();n++)for(var r=t.get(n),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,i),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=_i.getLines(this.geom[0]),i=_i.getLines(this.geom[1]),n=ir.getPoints(this.geom[0]),r=ir.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,i,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(i,n,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(n,r,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){if(null===t[0])return null;e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1])},nearestPoints:function(){return this.computeMinDistance(),[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()]},computeMinDistance:function(){if(0===arguments.length){if(null!==this.minDistanceLocation)return null;if(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof wt&&arguments[1]instanceof Et){var t=arguments[0],e=arguments[1],i=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var n=t.getCoordinates(),r=e.getCoordinate(),o=0;o<n.length-1;o++){if((f=Zt.distancePointLine(r,n[o],n[o+1]))<this.minDistance){this.minDistance=f;var s=new Jt(n[o],n[o+1]).closestPoint(r);i[0]=new er(t,o,s),i[1]=new er(e,0,r)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof wt&&arguments[1]instanceof wt){var a=arguments[0],l=arguments[1],h=arguments[2];if(a.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this.minDistance)return null;for(var n=a.getCoordinates(),c=l.getCoordinates(),o=0;o<n.length-1;o++)for(var u=0;u<c.length-1;u++){var f=Zt.distanceLineLine(n[o],n[o+1],c[u],c[u+1]);if(f<this.minDistance){this.minDistance=f;var g=new Jt(n[o],n[o+1]),d=new Jt(c[u],c[u+1]),p=g.closestPoints(d);h[0]=new er(a,o,p[0]),h[1]=new er(l,u,p[1])}if(this.minDistance<=this.terminateDistance)return null}}},computeMinDistancePoints:function(t,e,i){for(var n=0;n<t.size();n++)for(var r=t.get(n),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate());if(a<this.minDistance&&(this.minDistance=a,i[0]=new er(r,0,r.getCoordinate()),i[1]=new er(s,0,s.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(null===this.geom[0]||null===this.geom[1])throw new i("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,i){for(var n=0;n<t.size();n++)for(var r=t.get(n),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,i),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return rr}}),rr.distance=function(t,e){return new rr(t,e).distance()},rr.isWithinDistance=function(t,e,i){return new rr(t,e,i).distance()<=i},rr.nearestPoints=function(t,e){return new rr(t,e).nearestPoints()};var Es=Object.freeze({DistanceOp:rr});Wo(or.prototype,{getCoordinates:function(){if(null===this.coordinates){for(var t=0,e=0,i=new w,n=this.directedEdges.iterator();n.hasNext();){var r=n.next();r.getEdgeDirection()?t++:e++,i.add(r.getEdge().getLine().getCoordinates(),!1,r.getEdgeDirection())}this.coordinates=i.toCoordinateArray(),e>t&&Y.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return or}}),Wo(sr.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return sr}}),sr.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var i=t.next();if(i.isVisited()===e)return i}return null},sr.setVisited=function(t,e){for(;t.hasNext();)t.next().setVisited(e)},sr.setMarked=function(t,e){for(;t.hasNext();)t.next().setMarked(e)},jo(ar,sr),Wo(ar.prototype,{isRemoved:function(){return null===this.parentEdge},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:Zt.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),i=e.lastIndexOf("."),n=e.substring(i+1);t.print("  "+n+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[r]},getClass:function(){return ar}}),ar.toEdges=function(t){for(var e=new x,i=t.iterator();i.hasNext();)e.add(i.next().parentEdge);return e},jo(lr,ar),Wo(lr.prototype,{getNext:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(c.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return lr}}),jo(hr,sr),Wo(hr.prototype,{isRemoved:function(){return null===this.dirEdge},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof ur){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return hr}}),Wo(cr.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(ls.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof hr){var t=arguments[0];this.sortEdges();for(i=0;i<this.outEdges.size();i++)if((n=this.outEdges.get(i)).getEdge()===t)return i;return-1}if(arguments[0]instanceof ar){var e=arguments[0];this.sortEdges();for(var i=0;i<this.outEdges.size();i++){var n=this.outEdges.get(i);if(n===e)return i}return-1}if(Number.isInteger(arguments[0])){var r=arguments[0]%this.outEdges.size();return r<0&&(r+=this.outEdges.size()),r}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return cr}}),jo(ur,sr),Wo(ur.prototype,{isRemoved:function(){return null===this.pt},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(0===arguments.length)this.pt=null;else if(1===arguments.length){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return ur}}),ur.getEdgesBetween=function(t,e){var i=new Q(ar.toEdges(t.getOutEdges().getEdges())),n=ar.toEdges(e.getOutEdges().getEdges());return i.retainAll(n),i},jo(fr,hr),Wo(fr.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return fr}}),Wo(gr.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return gr}}),Wo(dr.prototype,{findNodesOfDegree:function(t){for(var e=new x,i=this.nodeIterator();i.hasNext();){var n=i.next();n.getDegree()===t&&e.add(n)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof hr){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof ar){var e=arguments[0];null!==(o=e.getSym())&&o.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof ur){for(var i=arguments[0],n=i.getOutEdges().getEdges().iterator();n.hasNext();){var r=n.next(),o=r.getSym();null!==o&&this.remove(o),this.dirEdges.remove(r);var s=r.getEdge();null!==s&&this.edges.remove(s)}this.nodeMap.remove(i.getCoordinate()),i.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof hr){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof ar){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof ur){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof hr){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof ar){var i=arguments[0];this.dirEdges.add(i)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return dr}}),jo(pr,dr),Wo(pr.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=Y.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var i=e[0],n=e[e.length-1],r=this.getNode(i),o=this.getNode(n),s=new lr(r,o,e[1],!0),a=new lr(o,r,e[e.length-2],!1),l=new fr(t);l.setDirectedEdges(s,a),this.add(l)},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new ur(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return pr}}),Wo(mr.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(c.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var i=e.next();i.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(i))}},merge:function(){if(null!==this.mergedLineStrings)return null;sr.setMarked(this.graph.nodeIterator(),!1),sr.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new x,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new x;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new or(this.factory),i=t;do{e.add(i),i.getEdge().setMarked(!0),i=i.getNext()}while(null!==i&&i!==t);return e},add:function(){if(arguments[0]instanceof F)arguments[0].apply({interfaces_:function(){return[k]},filter:function(t){t instanceof wt&&this.add(t)}});else if(Zo(arguments[0],d)){var t=arguments[0];this.mergedLineStrings=null;for(var e=t.iterator();e.hasNext();){var i=e.next();this.add(i)}}else if(arguments[0]instanceof wt){var n=arguments[0];null===this.factory&&(this.factory=n.getFactory()),this.graph.addEdge(n)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return mr}});var Is=Object.freeze({LineMerger:mr}),Ss=Object.freeze({OverlayOp:zi});jo(yr,ar),Wo(yr.prototype,{getNext:function(){return this.next},isInRing:function(){return null!==this.edgeRing},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return yr}}),jo(vr,hr),Wo(vr.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return vr}}),Wo(xr.prototype,{visitInteriorRing:function(t,e){var i=t.getCoordinates(),n=i[0],r=xr.findDifferentPoint(i,n),o=e.findEdgeInSameDirection(n,r),s=e.findEdgeEnd(o),a=null;s.getLabel().getLocation(0,Qe.RIGHT)===S.INTERIOR?a=s:s.getSym().getLabel().getLocation(0,Qe.RIGHT)===S.INTERIOR&&(a=s.getSym()),c.isTrue(null!==a,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(a)},visitShellInteriors:function(t,e){if(t instanceof St){r=t;this.visitInteriorRing(r.getExteriorRing(),e)}if(t instanceof Nt)for(var i=t,n=0;n<i.getNumGeometries();n++){var r=i.getGeometryN(n);this.visitInteriorRing(r.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var i=e.next();i.getLabel().getLocation(0,Qe.RIGHT)===S.INTERIOR&&i.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,i=t;do{c.isTrue(null!==i,"found null Directed Edge"),i.setVisited(!0),i=i.getNext()}while(i!==e)},buildEdgeRings:function(t){for(var e=new x,i=t.iterator();i.hasNext();){var n=i.next();if(n.isInResult()&&null===n.getEdgeRing()){var r=new ti(n,this.geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();var o=r.buildMinimalRings();e.addAll(o)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var i=t.get(e);if(!i.isHole()){var n=i.getEdges(),r=n.get(0);if(r.getLabel().getLocation(0,Qe.RIGHT)===S.INTERIOR)for(var o=0;o<n.size();o++)if(!(r=n.get(o)).isVisited())return this.disconnectedRingcoord=r.getCoordinate(),!0}}return!1},isInteriorsConnected:function(){var t=new x;this.geomGraph.computeSplitEdges(t);var e=new ai(new pi);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var i=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(i)},interfaces_:function(){return[]},getClass:function(){return xr}}),xr.findDifferentPoint=function(t,e){for(var i=0;i<t.length;i++)if(!t[i].equals(e))return t[i];return null},Wo(wr.prototype,{createEdgeEndForNext:function(t,e,i,n){var r=i.segmentIndex+1;if(r>=t.getNumPoints()&&null===n)return null;var o=t.getCoordinate(r);null!==n&&n.segmentIndex===i.segmentIndex&&(o=n.coord);var s=new ri(t,i.coord,o,new Je(t.getLabel()));e.add(s)},createEdgeEndForPrev:function(t,e,i,n){var r=i.segmentIndex;if(0===i.dist){if(0===r)return null;r--}var o=t.getCoordinate(r);null!==n&&n.segmentIndex>=r&&(o=n.coord);var s=new Je(t.getLabel());s.flip();var a=new ri(t,i.coord,o,s);e.add(a)},computeEdgeEnds:function(){if(1===arguments.length){for(var t=arguments[0],e=new x,i=t;i.hasNext();){var n=i.next();this.computeEdgeEnds(n,e)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1],s=r.getEdgeIntersectionList();s.addEndpoints();var a=s.iterator(),l=null,h=null;if(!a.hasNext())return null;var c=a.next();do{l=h,h=c,c=null,a.hasNext()&&(c=a.next()),null!==h&&(this.createEdgeEndForPrev(r,o,h,l),this.createEdgeEndForNext(r,o,h,c))}while(null!==h)}},interfaces_:function(){return[]},getClass:function(){return wr}}),jo(Cr,ri),Wo(Cr.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--\x3e Label: "+this.label);for(var e=this.iterator();e.hasNext();)e.next().print(t),t.println()},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var i=0,n=!1,r=this.iterator();r.hasNext();)(o=r.next().getLabel().getLocation(t))===S.BOUNDARY&&i++,o===S.INTERIOR&&(n=!0);var o=S.NONE;n&&(o=S.INTERIOR),i>0&&(o=Di.determineBoundary(e,i)),this.label.setLocation(t,o)},computeLabelSide:function(t,e){for(var i=this.iterator();i.hasNext();){var n=i.next();if(n.getLabel().isArea()){var r=n.getLabel().getLocation(t,e);if(r===S.INTERIOR)return this.label.setLocation(t,e,S.INTERIOR),null;r===S.EXTERIOR&&this.label.setLocation(t,e,S.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,Qe.LEFT),this.computeLabelSide(t,Qe.RIGHT)},updateIM:function(t){Fi.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,i=this.iterator();i.hasNext();)i.next().getLabel().isArea()&&(e=!0);this.label=e?new Je(S.NONE,S.NONE,S.NONE):new Je(S.NONE);for(var n=0;n<2;n++)this.computeLabelOn(n,t),e&&this.computeLabelSides(n)},interfaces_:function(){return[]},getClass:function(){return Cr}}),jo(Er,gi),Wo(Er.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();)e.next().updateIM(t)},insert:function(t){var e=this.edgeMap.get(t);null===e?(e=new Cr(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return Er}}),jo(Ir,ii),Wo(Ir.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return Ir}}),jo(Sr,si),Wo(Sr.prototype,{createNode:function(t){return new Ir(t,new Er)},interfaces_:function(){return[]},getClass:function(){return Sr}}),Wo(br.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this.nodes.add(i)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var i=t.getNodeIterator();i.hasNext();){var n=i.next();this.nodes.addNode(n.getCoordinate()).setLabel(e,n.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=(new wr).computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(e)},computeIntersectionNodes:function(t,e){for(var i=t.getEdgeIterator();i.hasNext();)for(var n=i.next(),r=n.getLabel().getLocation(e),o=n.getEdgeIntersectionList().iterator();o.hasNext();){var s=o.next(),a=this.nodes.addNode(s.coord);r===S.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,S.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return br}}),Wo(_r.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),i=e.getEdges().iterator();i.hasNext();){var n=i.next();if(n.getEdgeEnds().size()>1)return this.invalidPoint=n.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return _r}}),Wo(Nr.prototype,{buildIndex:function(){this.index=new Ne;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),i=e.getEnvelopeInternal();this.index.insert(i,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),i=e.getCoordinates(),n=this.index.query(e.getEnvelopeInternal()),r=0;r<n.size();r++){var o=n.get(r),s=o.getCoordinates();if(e!==o&&e.getEnvelopeInternal().intersects(o.getEnvelopeInternal())){var a=Tr.findPtNotNode(i,o,this.graph);if(null!==a&&Zt.isPointInRing(a,s))return this.nestedPt=a,!1}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return Nr}}),Wo(Lr.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return Lr.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return null!==this.pt&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return Lr}}),Lr.ERROR=0,Lr.REPEATED_POINT=1,Lr.HOLE_OUTSIDE_SHELL=2,Lr.NESTED_HOLES=3,Lr.DISCONNECTED_INTERIOR=4,Lr.SELF_INTERSECTION=5,Lr.RING_SELF_INTERSECTION=6,Lr.NESTED_SHELLS=7,Lr.DUPLICATE_RINGS=8,Lr.TOO_FEW_POINTS=9,Lr.INVALID_COORDINATE=10,Lr.RING_NOT_CLOSED=11,Lr.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],Wo(Tr.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!Tr.isValid(t[e]))return this.validErr=new Lr(Lr.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof St){var i=arguments[0];if(this.checkInvalidCoordinates(i.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(e=0;e<i.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(i.getInteriorRingN(e).getCoordinates()),null!==this.validErr)return null}},checkHolesNotNested:function(t,e){for(var i=new Nr(e),n=0;n<t.getNumInteriorRing();n++){var r=t.getInteriorRingN(n);i.add(r)}i.isNonNested()||(this.validErr=new Lr(Lr.NESTED_HOLES,i.getNestedPoint()))},checkConsistentArea:function(t){var e=new _r(t);if(!e.isNodeConsistentArea())return this.validErr=new Lr(Lr.SELF_INTERSECTION,e.getInvalidPoint()),null;e.hasDuplicateRings()&&(this.validErr=new Lr(Lr.DUPLICATE_RINGS,e.getInvalidPoint()))},isValid:function(){return this.checkValid(this.parentGeometry),null===this.validErr},checkShellInsideHole:function(t,e,i){var n=t.getCoordinates(),r=e.getCoordinates(),o=Tr.findPtNotNode(n,e,i);if(null!==o&&!Zt.isPointInRing(o,r))return o;var s=Tr.findPtNotNode(r,t,i);return null!==s?Zt.isPointInRing(s,n)?s:null:(c.shouldNeverReachHere("points in shell and hole appear to be equal"),null)},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var i=e.next();if(this.checkNoSelfIntersectingRing(i.getEdgeIntersectionList()),null!==this.validErr)return null}},checkConnectedInteriors:function(t){var e=new xr(t);e.isInteriorsConnected()||(this.validErr=new Lr(Lr.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new rt,i=!0,n=t.iterator();n.hasNext();){var r=n.next();if(i)i=!1;else{if(e.contains(r.coord))return this.validErr=new Lr(Lr.RING_SELF_INTERSECTION,r.coord),null;e.add(r.coord)}}},checkHolesInShell:function(t,e){for(var i=t.getExteriorRing(),n=new sn(i),r=0;r<t.getNumInteriorRing();r++){var o=t.getInteriorRingN(r),s=Tr.findPtNotNode(o.getCoordinates(),i,e);if(null===s)return null;if(!n.isInside(s))return this.validErr=new Lr(Lr.HOLE_OUTSIDE_SHELL,s),null}},checkTooFewPoints:function(t){if(t.hasTooFewPoints())return this.validErr=new Lr(Lr.TOO_FEW_POINTS,t.getInvalidPoint()),null},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof Et){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof bt){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof _t){var i=arguments[0];if(this.checkInvalidCoordinates(i.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(i),null!==this.validErr)return null;l=new Di(0,i);if(this.checkTooFewPoints(l),null!==this.validErr)return null;var n=new Wt;l.computeSelfNodes(n,!0,!0),this.checkNoSelfIntersectingRings(l)}else if(arguments[0]instanceof wt){var r=arguments[0];if(this.checkInvalidCoordinates(r.getCoordinates()),null!==this.validErr)return null;l=new Di(0,r);this.checkTooFewPoints(l)}else if(arguments[0]instanceof St){var o=arguments[0];if(this.checkInvalidCoordinates(o),null!==this.validErr)return null;if(this.checkClosedRings(o),null!==this.validErr)return null;l=new Di(0,o);if(this.checkTooFewPoints(l),null!==this.validErr)return null;if(this.checkConsistentArea(l),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(l),null!==this.validErr))return null;if(this.checkHolesInShell(o,l),null!==this.validErr)return null;if(this.checkHolesNotNested(o,l),null!==this.validErr)return null;this.checkConnectedInteriors(l)}else if(arguments[0]instanceof Nt){for(var s=arguments[0],a=0;a<s.getNumGeometries();a++){h=s.getGeometryN(a);if(this.checkInvalidCoordinates(h),null!==this.validErr)return null;if(this.checkClosedRings(h),null!==this.validErr)return null}var l=new Di(0,s);if(this.checkTooFewPoints(l),null!==this.validErr)return null;if(this.checkConsistentArea(l),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(l),null!==this.validErr))return null;for(a=0;a<s.getNumGeometries();a++){h=s.getGeometryN(a);if(this.checkHolesInShell(h,l),null!==this.validErr)return null}for(a=0;a<s.getNumGeometries();a++){var h=s.getGeometryN(a);if(this.checkHolesNotNested(h,l),null!==this.validErr)return null}if(this.checkShellsNotNested(s,l),null!==this.validErr)return null;this.checkConnectedInteriors(l)}else if(arguments[0]instanceof ht)for(var c=arguments[0],a=0;a<c.getNumGeometries();a++){var u=c.getGeometryN(a);if(this.checkValid(u),null!==this.validErr)return null}else if(arguments[0]instanceof F){var f=arguments[0];if(this.validErr=null,f.isEmpty())return null;if(f instanceof Et)this.checkValid(f);else if(f instanceof bt)this.checkValid(f);else if(f instanceof _t)this.checkValid(f);else if(f instanceof wt)this.checkValid(f);else if(f instanceof St)this.checkValid(f);else if(f instanceof Nt)this.checkValid(f);else{if(!(f instanceof ht))throw new UnsupportedOperationException(f.getClass().getName());this.checkValid(f)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,i){var n=t.getCoordinates(),r=e.getExteriorRing(),o=r.getCoordinates(),s=Tr.findPtNotNode(n,r,i);if(null===s)return null;if(!Zt.isPointInRing(s,o))return null;if(e.getNumInteriorRing()<=0)return this.validErr=new Lr(Lr.NESTED_SHELLS,s),null;for(var a=null,l=0;l<e.getNumInteriorRing();l++){var h=e.getInteriorRingN(l);if(null===(a=this.checkShellInsideHole(t,h,i)))return null}this.validErr=new Lr(Lr.NESTED_SHELLS,a)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this.validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this.validErr)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new Lr(Lr.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var i=0;i<t.getNumGeometries();i++)for(var n=t.getGeometryN(i),r=n.getExteriorRing(),o=0;o<t.getNumGeometries();o++)if(i!==o){var s=t.getGeometryN(o);if(this.checkShellNotNested(r,s,e),null!==this.validErr)return null}},interfaces_:function(){return[]},getClass:function(){return Tr}}),Tr.findPtNotNode=function(t,e,i){for(var n=i.findEdge(e).getEdgeIntersectionList(),r=0;r<t.length;r++){var o=t[r];if(!n.isIntersection(o))return o}return null},Tr.isValid=function(){if(arguments[0]instanceof F)return new Tr(arguments[0]).isValid();if(arguments[0]instanceof u){var t=arguments[0];return!(n.isNaN(t.x)||n.isInfinite(t.x)||n.isNaN(t.y)||n.isInfinite(t.y))}},Wo(Ar.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(null===this.ringPts){for(var t=new w,e=this.deList.iterator();e.hasNext();){var i=e.next(),n=i.getEdge();Ar.addEdge(n.getLine().getCoordinates(),i.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),Tr.isValid(this.ring))},build:function(t){var e=t;do{this.add(e),e.setRing(this),e=e.getNext(),c.isTrue(null!==e,"found null DE in ring"),c.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t)},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var t=null;if(null!==this.holes){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}return this.factory.createPolygon(this.ring,t)},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof _t){var t=arguments[0];null===this.holes&&(this.holes=new x),this.holes.add(t)}else if(arguments[0]instanceof Ar){var e=arguments[0];e.setShell(this);var i=e.getRing();null===this.holes&&(this.holes=new x),this.holes.add(i)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t).getSym().getRing();if(e.isOuterHole())return e}return null},computeHole:function(){var t=this.getRing();this._isHole=Zt.isCCW(t.getCoordinates())},hasShell:function(){return null!==this.shell},isOuterShell:function(){return null!==this.getOuterHole()},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return Xt.toLineString(new Rt(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(null!==this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&M.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof E))throw t;M.out.println(this.ringPts)}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t).getSym().getRing().getShell();if(null!==e&&e.isIncludedSet())return this.setIncluded(!e.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return Ar}}),Ar.findDirEdgesInRing=function(t){var e=t,i=new x;do{i.add(e),e=e.getNext(),c.isTrue(null!==e,"found null DE in ring"),c.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t);return i},Ar.addEdge=function(t,e,i){if(e)for(n=0;n<t.length;n++)i.add(t[n],!1);else for(var n=t.length-1;n>=0;n--)i.add(t[n],!1)},Ar.findEdgeRingContaining=function(t,e){for(var i=t.getRing(),n=i.getEnvelopeInternal(),r=i.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),h=l.getRing(),c=h.getEnvelopeInternal();if(!c.equals(n)&&c.contains(n)){r=Y.ptNotInList(i.getCoordinates(),h.getCoordinates());var u=!1;Zt.isPointInRing(r,h.getCoordinates())&&(u=!0),u&&(null===o||s.contains(c))&&(o=l,s=o.getRing().getEnvelopeInternal())}}return o},Wo(Pr.prototype,{compare:function(t,e){var i=e;return t.getRing().getEnvelope().compareTo(i.getRing().getEnvelope())},interfaces_:function(){return[s]},getClass:function(){return Pr}}),Ar.EnvelopeComparator=Pr,jo(Mr,dr),Wo(Mr.prototype,{findEdgeRing:function(t){var e=new Ar(this.factory);return e.build(t),e},computeDepthParity:function(){if(0===arguments.length)for(;;)return null;else 1===arguments.length&&arguments[0]},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();Mr.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=Y.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var i=e[0],n=e[e.length-1],r=this.getNode(i),o=this.getNode(n),s=new yr(r,o,e[1],!0),a=new yr(o,r,e[e.length-2],!1),l=new vr(t);l.setDirectedEdges(s,a),this.add(l)},deleteCutEdges:function(){this.computeNextCWEdges(),Mr.findLabeledEdgeRings(this.dirEdges);for(var t=new x,e=this.dirEdges.iterator();e.hasNext();){var i=e.next();if(!i.isMarked()){var n=i.getSym();if(i.getLabel()===n.getLabel()){i.setMarked(!0),n.setMarked(!0);var r=i.getEdge();t.add(r.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),Mr.label(this.dirEdges,-1);var t=Mr.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new x,i=this.dirEdges.iterator();i.hasNext();){var n=i.next();if(!n.isMarked()&&!n.isInRing()){var r=this.findEdgeRing(n);e.add(r)}}return e},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new ur(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),n=i.getLabel(),r=Mr.findIntersectionNodes(i,n);if(null!==r)for(var o=r.iterator();o.hasNext();){var s=o.next();Mr.computeNextCCWEdges(s,n)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new Q,i=new ee,n=t.iterator();n.hasNext();)i.push(n.next());for(;!i.isEmpty();){var r=i.pop();Mr.deleteAllEdges(r);for(n=r.getOutEdges().getEdges().iterator();n.hasNext();){var o=n.next();o.setMarked(!0);var s=o.getSym();null!==s&&s.setMarked(!0);var a=o.getEdge();e.add(a.getLine());var l=o.getToNode();1===Mr.getDegreeNonDeleted(l)&&i.push(l)}}return e},interfaces_:function(){return[]},getClass:function(){return Mr}}),Mr.findLabeledEdgeRings=function(t){for(var e=new x,i=1,n=t.iterator();n.hasNext();){var r=n.next();if(!(r.isMarked()||r.getLabel()>=0)){e.add(r);var o=Ar.findDirEdgesInRing(r);Mr.label(o,i),i++}}return e},Mr.getDegreeNonDeleted=function(t){for(var e=0,i=t.getOutEdges().getEdges().iterator();i.hasNext();)i.next().isMarked()||e++;return e},Mr.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges().iterator();e.hasNext();){var i=e.next();i.setMarked(!0);var n=i.getSym();null!==n&&n.setMarked(!0)}},Mr.label=function(t,e){for(var i=t.iterator();i.hasNext();)i.next().setLabel(e)},Mr.computeNextCWEdges=function(t){for(var e=null,i=null,n=t.getOutEdges().getEdges().iterator();n.hasNext();){var r=n.next();r.isMarked()||(null===e&&(e=r),null!==i&&(o=i.getSym()).setNext(r),i=r)}if(null!==i){var o=i.getSym();o.setNext(e)}},Mr.computeNextCCWEdges=function(t,e){for(var i=null,n=null,r=t.getOutEdges().getEdges(),o=r.size()-1;o>=0;o--){var s=r.get(o),a=s.getSym(),l=null;s.getLabel()===e&&(l=s);var h=null;a.getLabel()===e&&(h=a),null===l&&null===h||(null!==h&&(n=h),null!==l&&(null!==n&&(n.setNext(l),n=null),null===i&&(i=l)))}null!==n&&(c.isTrue(null!==i),n.setNext(i))},Mr.getDegree=function(t,e){for(var i=0,n=t.getOutEdges().getEdges().iterator();n.hasNext();)n.next().getLabel()===e&&i++;return i},Mr.findIntersectionNodes=function(t,e){var i=t,n=null;do{var r=i.getFromNode();Mr.getDegree(r,e)>1&&(null===n&&(n=new x),n.add(r)),i=i.getNext(),c.isTrue(null!==i,"found null DE in ring"),c.isTrue(i===t||!i.isInRing(),"found DE already in ring")}while(i!==t);return n},Wo(Rr.prototype,{getGeometry:function(){return null===this.geomFactory&&(this.geomFactory=new Yt),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(Yt.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,i){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isValid()?e.add(r):i.add(r.getLineString())}},polygonize:function(){if(null!==this.polyList)return null;if(this.polyList=new x,null===this.graph)return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new x;this.invalidRingLines=new x,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),Rr.assignHolesToShells(this.holeList,this.shellList),ls.sort(this.shellList,new Ar.EnvelopeComparator);var i=!0;this.extractOnlyPolygonal&&(Rr.findDisjointShells(this.shellList),i=!1),this.polyList=Rr.extractPolygons(this.shellList,i)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(Zo(arguments[0],d))for(var t=arguments[0],e=t.iterator();e.hasNext();){var i=e.next();this.add(i)}else if(arguments[0]instanceof wt){var n=arguments[0];this.geomFactory=n.getFactory(),null===this.graph&&(this.graph=new Mr(this.geomFactory)),this.graph.addEdge(n)}else arguments[0]instanceof F&&arguments[0].apply(this.lineStringAdder)},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new x,this.shellList=new x;for(var e=t.iterator();e.hasNext();){var i=e.next();i.computeHole(),i.isHole()?this.holeList.add(i):this.shellList.add(i)}},interfaces_:function(){return[]},getClass:function(){return Rr}}),Rr.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),n=i.getOuterHole();null===n||n.isProcessed()||(i.setIncluded(!0),n.setProcessed(!0))}},Rr.extractPolygons=function(t,e){for(var i=new x,n=t.iterator();n.hasNext();){var r=n.next();(e||r.isIncluded())&&i.add(r.getPolygon())}return i},Rr.assignHolesToShells=function(t,e){for(var i=t.iterator();i.hasNext();){var n=i.next();Rr.assignHoleToShell(n,e)}},Rr.assignHoleToShell=function(t,e){var i=Ar.findEdgeRingContaining(t,e);null!==i&&i.addHole(t)},Rr.findDisjointShells=function(t){Rr.findOuterShells(t);var e=null;do{e=!1;for(var i=t.iterator();i.hasNext();){var n=i.next();n.isIncludedSet()||(n.updateIncluded(),n.isIncludedSet()||(e=!0))}}while(e)},Wo(Or.prototype,{filter:function(t){t instanceof wt&&this.p.add(t)},interfaces_:function(){return[k]},getClass:function(){return Or}}),Rr.LineStringAdder=Or;var bs=Object.freeze({Polygonizer:Rr});Wo(kr.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this.nodes.add(i)}},computeProperIntersectionIM:function(t,e){var i=this.arg[0].getGeometry().getDimension(),n=this.arg[1].getGeometry().getDimension(),r=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===i&&2===n?r&&e.setAtLeast("212101212"):2===i&&1===n?(r&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):1===i&&2===n?(r&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):1===i&&1===n&&o&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var i=this.arg[t].getEdgeIterator();i.hasNext();){var n=i.next();n.isIsolated()&&(this.labelIsolatedEdge(n,e,this.arg[e].getGeometry()),this.isolatedEdges.add(n))}},labelIsolatedEdge:function(t,e,i){if(i.getDimension()>0){var n=this.ptLocator.locate(t.getCoordinate(),i);t.getLabel().setAllLocations(e,n)}else t.getLabel().setAllLocations(e,S.EXTERIOR)},computeIM:function(){var t=new Kt;if(t.set(S.EXTERIOR,S.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var i=new wr,n=i.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(n);var r=i.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();)t.next().getEdges().computeLabelling(this.arg)},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var i=e.next();this.nodes.addNode(i.getCoordinate()).setLabel(t,i.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var i=e.next(),n=i.getLabel().getLocation(t),r=i.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),s=this.nodes.find(o.coord);s.getLabel().isNull(t)&&(n===S.BOUNDARY?s.setLabelBoundary(t):s.setLabel(t,S.INTERIOR))}},labelIsolatedNode:function(t,e){var i=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,i)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var i=e.next(),n=i.getLabel().getLocation(t),r=i.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),s=this.nodes.addNode(o.coord);n===S.BOUNDARY?s.setLabelBoundary(t):s.getLabel().isNull(t)&&s.setLabel(t,S.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),i=e.getLabel();c.isTrue(i.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(i.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();)e.next().updateIM(t);for(var i=this.nodes.iterator();i.hasNext();){var n=i.next();n.updateIM(t),n.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(S.INTERIOR,S.EXTERIOR,e.getDimension()),t.set(S.BOUNDARY,S.EXTERIOR,e.getBoundaryDimension()));var i=this.arg[1].getGeometry();i.isEmpty()||(t.set(S.EXTERIOR,S.INTERIOR,i.getDimension()),t.set(S.EXTERIOR,S.BOUNDARY,i.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return kr}}),Wo(Fr.prototype,{isContainedInBoundary:function(t){if(t instanceof St)return!1;if(t instanceof Et)return this.isPointContainedInBoundary(t);if(t instanceof wt)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e);if(!this.isContainedInBoundary(i))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),i=new u,n=new u,r=0;r<e.size()-1;r++)if(e.getCoordinate(r,i),e.getCoordinate(r+1,n),!this.isLineSegmentContainedInBoundary(i,n))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof Et){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof u){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return!!this.rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)},interfaces_:function(){return[]},getClass:function(){return Fr}}),Fr.contains=function(t,e){return new Fr(t).contains(e)},Wo(Dr.prototype,{intersects:function(t,e){var i=new C(t,e);if(!this.rectEnv.intersects(i))return!1;if(this.rectEnv.intersects(t))return!0;if(this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var n=t;t=e,e=n}var r=!1;return e.y>t.y&&(r=!0),r?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return Dr}}),Wo(Gr.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var i=t.getGeometryN(e);if(i instanceof ht)this.applyTo(i);else if(this.visit(i),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return Gr}}),Wo(Br.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new Vr(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var i=new zr(this.rectangle);if(i.applyTo(t),i.containsPoint())return!0;var n=new qr(this.rectangle);return n.applyTo(t),!!n.intersects()},interfaces_:function(){return[]},getClass:function(){return Br}}),Br.intersects=function(t,e){return new Br(t).intersects(e)},jo(Vr,Gr),Wo(Vr.prototype,{isDone:function(){return!0===this._intersects},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return Vr}}),jo(zr,Gr),Wo(zr.prototype,{isDone:function(){return!0===this._containsPoint},visit:function(t){if(!(t instanceof St))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var i=new u,n=0;n<4;n++)if(this.rectSeq.getCoordinate(n,i),e.contains(i)&&fi.containsPointInPolygon(i,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return zr}}),jo(qr,Gr),Wo(qr.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return!0===this.hasIntersection},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var i=_i.getLines(t);this.checkIntersectionWithLineStrings(i)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();if(this.checkIntersectionWithSegments(i),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),i=1;i<e.size();i++)if(e.getCoordinate(i-1,this.p0),e.getCoordinate(i,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return qr}}),jo(Yr,Gi),Wo(Yr.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return Yr}}),Yr.covers=function(t,e){return!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||Yr.relate(t,e).isCovers())},Yr.intersects=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&(t.isRectangle()?Br.intersects(t,e):e.isRectangle()?Br.intersects(e,t):Yr.relate(t,e).isIntersects())},Yr.touches=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Yr.relate(t,e).isTouches(t.getDimension(),e.getDimension())},Yr.within=function(t,e){return e.contains(t)},Yr.coveredBy=function(t,e){return Yr.covers(e,t)},Yr.relate=function(){if(2===arguments.length)return r=(n=new Yr(arguments[0],arguments[1])).getIntersectionMatrix();if(3===arguments.length){if("string"==typeof arguments[2]&&arguments[0]instanceof F&&arguments[1]instanceof F){var t=arguments[0],e=arguments[1],i=arguments[2];return Yr.relateWithCheck(t,e).matches(i)}if(Zo(arguments[2],G)&&arguments[0]instanceof F&&arguments[1]instanceof F){var n=new Yr(arguments[0],arguments[1],arguments[2]),r=n.getIntersectionMatrix();return r}}},Yr.overlaps=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Yr.relate(t,e).isOverlaps(t.getDimension(),e.getDimension())},Yr.disjoint=function(t,e){return!t.intersects(e)},Yr.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Yr.relate(t,e)},Yr.crosses=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Yr.relate(t,e).isCrosses(t.getDimension(),e.getDimension())},Yr.contains=function(t,e){return!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?Fr.contains(t,e):Yr.relate(t,e).isContains())};var _s=Object.freeze({RelateOp:Yr});Wo(Ur.prototype,{extractElements:function(t,e){if(null===t)return null;for(var i=0;i<t.getNumGeometries();i++){var n=t.getGeometryN(i);this.skipEmpty&&n.isEmpty()||e.add(n)}},combine:function(){for(var t=new x,e=this.inputGeoms.iterator();e.hasNext();){var i=e.next();this.extractElements(i,t)}return 0===t.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return Ur}}),Ur.combine=function(){if(1===arguments.length)return(o=new Ur(arguments[0])).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return(o=new Ur(Ur.createList(t,e))).combine()}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=new Ur(Ur.createList(i,n,r));return o.combine()}},Ur.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ur.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return(o=new x).add(t),o.add(e),o}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=new x;return o.add(i),o.add(n),o.add(r),o}},Wo(Xr.prototype,{union:function(){for(var t=new de,e=new rt,i=0;i<this.pointGeom.getNumGeometries();i++){var n=this.pointGeom.getGeometryN(i).getCoordinate();t.locate(n,this.otherGeom)===S.EXTERIOR&&e.add(n)}if(0===e.size())return this.otherGeom;var r=null,o=Y.toCoordinateArray(e);return r=1===o.length?this.geomFact.createPoint(o[0]):this.geomFact.createMultiPointFromCoords(o),Ur.combine(r,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return Xr}}),Xr.union=function(t,e){return new Xr(t,e).union()},Wo(Hr.prototype,{filter:function(t){-1!==this.sortIndex&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[at]},getClass:function(){return Hr}}),Hr.extract=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return Hr.extract(t,e,new x)}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];return i.getSortIndex()===n?r.add(i):i instanceof ht&&i.apply(new Hr(n,r)),r}},Wo(Wr.prototype,{reduceToGeometries:function(t){for(var e=new x,i=t.iterator();i.hasNext();){var n=i.next(),r=null;Zo(n,m)?r=this.unionTree(n):n instanceof F&&(r=n),e.add(r)}return e},extractByEnvelope:function(t,e,i){for(var n=new x,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?n.add(o):i.add(o)}return this.geomFactory.buildGeometry(n)},unionOptimized:function(t,e){var i=t.getEnvelopeInternal(),n=e.getEnvelopeInternal();if(!i.intersects(n))return Ur.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=i.intersection(n);return this.unionUsingEnvelopeIntersection(t,e,r)},union:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new Ne(Wr.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var i=e.next();t.insert(i.getEnvelopeInternal(),i)}this.inputPolys=null;var n=t.itemsTree();return this.unionTree(n)},binaryUnion:function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2];if(n-i<=1){o=Wr.getGeometry(e,i);return this.unionSafe(o,null)}if(n-i==2)return this.unionSafe(Wr.getGeometry(e,i),Wr.getGeometry(e,i+1));var r=Math.trunc((n+i)/2),o=this.binaryUnion(e,i,r),s=this.binaryUnion(e,r,n);return this.unionSafe(o,s)}},repeatedUnion:function(t){for(var e=null,i=t.iterator();i.hasNext();){var n=i.next();e=null===e?n.copy():e.union(n)}return e},unionSafe:function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Wr.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},unionUsingEnvelopeIntersection:function(t,e,i){var n=new x,r=this.extractByEnvelope(i,t,n),o=this.extractByEnvelope(i,e,n),s=this.unionActual(r,o);return n.add(s),Ur.combine(n)},bufferUnion:function(){if(1===arguments.length){var t=arguments[0];return o=(r=(n=t.get(0).getFactory()).buildGeometry(t)).buffer(0)}if(2===arguments.length){var e=arguments[0],i=arguments[1],n=e.getFactory(),r=n.createGeometryCollection([e,i]),o=r.buffer(0);return o}},interfaces_:function(){return[]},getClass:function(){return Wr}}),Wr.restrictToPolygons=function(t){if(Zo(t,It))return t;var e=tr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Yt.toPolygonArray(e))},Wr.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Wr.union=function(t){return new Wr(t).union()},Wr.STRTREE_NODE_CAPACITY=4,Wo(jr.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return Yi.overlayOp(t,e,zi.UNION)},unionWithNull:function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},extract:function(){if(Zo(arguments[0],d))for(var t=arguments[0],e=t.iterator();e.hasNext();){var i=e.next();this.extract(i)}else if(arguments[0]instanceof F){var n=arguments[0];null===this.geomFact&&(this.geomFact=n.getFactory()),Hr.extract(n,F.SORTINDEX_POLYGON,this.polygons),Hr.extract(n,F.SORTINDEX_LINESTRING,this.lines),Hr.extract(n,F.SORTINDEX_POINT,this.points)}},union:function(){if(null===this.geomFact)return null;var t=null;if(this.points.size()>0){var e=this.geomFact.buildGeometry(this.points);t=this.unionNoOpt(e)}var i=null;if(this.lines.size()>0){var n=this.geomFact.buildGeometry(this.lines);i=this.unionNoOpt(n)}var r=null;this.polygons.size()>0&&(r=Wr.union(this.polygons));var o=this.unionWithNull(i,r),s=null;return null===(s=null===t?o:null===o?t:Xr.union(t,o))?this.geomFact.createGeometryCollection():s},interfaces_:function(){return[]},getClass:function(){return jr}}),jr.union=function(){if(1===arguments.length){if(Zo(arguments[0],d))return(t=new jr(arguments[0])).union();if(arguments[0]instanceof F)return(t=new jr(arguments[0])).union()}else if(2===arguments.length){var t=new jr(arguments[0],arguments[1]);return t.union()}};var Ns=Object.freeze({UnaryUnionOp:jr}),Ls=Object.freeze({IsValidOp:Tr,ConsistentAreaTester:_r}),Ts=Object.freeze({BoundaryOp:ut,IsSimpleOp:Mn,buffer:Cs,distance:Es,linemerge:Is,overlay:Ss,polygonize:bs,relate:_s,union:Ns,valid:Ls});jo(Qr,Lt.CoordinateOperation),Wo(Qr.prototype,{editCoordinates:function(t,e){if(0===t.length)return null;for(var i=new Array(t.length).fill(null),n=0;n<t.length;n++){var r=new u(t[n]);this.targetPM.makePrecise(r),i[n]=r}var o=new w(i,!1).toCoordinateArray(),s=0;e instanceof wt&&(s=2),e instanceof _t&&(s=4);var a=i;return this.removeCollapsed&&(a=null),o.length<s?a:o},interfaces_:function(){return[]},getClass:function(){return Qr}}),Wo(Zr.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var i=e.buffer(0),n=i;return this.changePrecisionModel||(n=this.changePM(i,t.getPrecisionModel())),n},reducePointwise:function(t){var e=null;e=this.changePrecisionModel?new Lt(this.createFactory(t.getFactory(),this.targetPM)):new Lt;var i=this.removeCollapsed;return t.getDimension()>=2&&(i=!0),e.edit(t,new Qr(this.targetPM,i))},changePM:function(t,e){return this.createEditor(t.getFactory(),e).edit(t,new Lt.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){return new Yt(e,t.getSRID(),t.getCoordinateSequenceFactory())},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:Zo(e,It)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){return t.getPrecisionModel()===e?new Lt:new Lt(this.createFactory(t,e))},interfaces_:function(){return[]},getClass:function(){return Zr}}),Zr.reduce=function(t,e){return new Zr(e).reduce(t)},Zr.reducePointwise=function(t,e){var i=new Zr(e);return i.setPointwise(!0),i.reduce(t)};var As=Object.freeze({GeometryPrecisionReducer:Zr});Wo(Jr.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var i=-1,n=t,r=t+1;r<e;r++){var o=this.seg.distance(this.pts[r]);o>i&&(i=o,n=r)}if(i<=this.distanceTolerance)for(r=t+1;r<e;r++)this.usePt[r]=!1;else this.simplifySection(t,n),this.simplifySection(n,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(e=0;e<this.pts.length;e++)this.usePt[e]=!0;this.simplifySection(0,this.pts.length-1);for(var t=new w,e=0;e<this.pts.length;e++)this.usePt[e]&&t.add(new u(this.pts[e]));return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Jr}}),Jr.simplify=function(t,e){var i=new Jr(t);return i.setDistanceTolerance(e),i.simplify()},Wo(Kr.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new $r(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<0)throw new i("Tolerance must be non-negative");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Kr}}),Kr.simplify=function(t,e){var i=new Kr(t);return i.setDistanceTolerance(e),i.getResultGeometry()},jo($r,oe),Wo($r.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var i=oe.prototype.transformPolygon.call(this,t,e);return e instanceof Nt?i:this.createValidArea(i)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var i=t.toCoordinateArray(),n=null;return n=0===i.length?new Array(0).fill(null):Jr.simplify(i,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(n)},transformMultiPolygon:function(t,e){var i=oe.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(i)},transformLinearRing:function(t,e){var i=e instanceof St,n=oe.prototype.transformLinearRing.call(this,t,e);return!i||n instanceof _t?n:null},interfaces_:function(){return[]},getClass:function(){return $r}}),Kr.DPTransformer=$r,jo(to,Jt),Wo(to.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return to}}),Wo(eo.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(eo.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return 0===t?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(eo.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var i=new to(t[e],t[e+1],this.parentLine,e);this.segs[e]=i}},getResultCoordinates:function(){return eo.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return eo}}),eo.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),i=null,n=0;n<t.size();n++)i=t.get(n),e[n]=i.p0;return e[e.length-1]=i.p1,e},Wo(io.prototype,{remove:function(t){this.index.remove(new C(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof eo)for(var t=arguments[0],e=t.getSegments(),i=0;i<e.length;i++){var n=e[i];this.add(n)}else if(arguments[0]instanceof Jt){var r=arguments[0];this.index.insert(new C(r.p0,r.p1),r)}},query:function(t){var e=new C(t.p0,t.p1),i=new no(t);return this.index.query(e,i),i.getItems()},interfaces_:function(){return[]},getClass:function(){return io}}),Wo(no.prototype,{visitItem:function(t){var e=t;C.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Ce]},getClass:function(){return no}}),Wo(ro.prototype,{flatten:function(t,e){var i=new Jt(this.linePts[t],this.linePts[e]);return this.remove(this.line,t,e),this.outputIndex.add(i),i},hasBadIntersection:function(t,e,i){return!!this.hasBadOutputIntersection(i)||!!this.hasBadInputIntersection(t,e,i)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,i){i+=1;var n=new Array(2).fill(null);if(t+1===e){l=this.line.getSegment(t);return this.line.addToResult(l),null}var r=!0;this.line.getResultSize()<this.line.getMinimumSize()&&i+1<this.line.getMinimumSize()&&(r=!1);var o=new Array(1).fill(null),s=this.findFurthestPoint(this.linePts,t,e,o);o[0]>this.distanceTolerance&&(r=!1);var a=new Jt;if(a.p0=this.linePts[t],a.p1=this.linePts[e],n[0]=t,n[1]=e,this.hasBadIntersection(this.line,n,a)&&(r=!1),r){var l=this.flatten(t,e);return this.line.addToResult(l),null}this.simplifySection(t,s,i),this.simplifySection(s,e,i)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t).iterator();e.hasNext();){var i=e.next();if(this.hasInteriorIntersection(i,t))return!0}return!1},findFurthestPoint:function(t,e,i,n){var r=new Jt;r.p0=t[e],r.p1=t[i];for(var o=-1,s=e,a=e+1;a<i;a++){var l=t[a],h=r.distance(l);h>o&&(o=h,s=a)}return n[0]=o,s},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,i){for(var n=e;n<i;n++){var r=t.getSegment(n);this.inputIndex.remove(r)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,i){for(var n=this.inputIndex.query(i).iterator();n.hasNext();){var r=n.next();if(this.hasInteriorIntersection(r,i)){if(ro.isInLineSection(t,e,r))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return ro}}),ro.isInLineSection=function(t,e,i){if(i.getParent()!==t.getParent())return!1;var n=i.getIndex();return n>=e[0]&&n<e[1]},Wo(oo.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(var e=t.iterator();e.hasNext();){var i=new ro(this.inputIndex,this.outputIndex);i.setDistanceTolerance(this.distanceTolerance),i.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return oo}}),Wo(so.prototype,{getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():(this.linestringMap=new Vt,this.inputGeom.apply(new lo(this)),this.lineSimplifier.simplify(this.linestringMap.values()),new ao(this.linestringMap).transform(this.inputGeom))},setDistanceTolerance:function(t){if(t<0)throw new i("Tolerance must be non-negative");this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return so}}),so.simplify=function(t,e){var i=new so(t);return i.setDistanceTolerance(e),i.getResultGeometry()},jo(ao,oe),Wo(ao.prototype,{transformCoordinates:function(t,e){if(0===t.size())return null;if(e instanceof wt){var i=this.linestringMap.get(e);return this.createCoordinateSequence(i.getResultCoordinates())}return oe.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return ao}}),Wo(lo.prototype,{filter:function(t){if(t instanceof wt){var e=t;if(e.isEmpty())return null;var i=new eo(e,e.isClosed()?4:2);this.tps.linestringMap.put(e,i)}},interfaces_:function(){return[k]},getClass:function(){return lo}}),so.LineStringTransformer=ao,so.LineStringMapBuilderFilter=lo;var Ps=Object.freeze({DouglasPeuckerSimplifier:Kr,TopologyPreservingSimplifier:so});Wo(ho.prototype,{splitAt:function(){if(1===arguments.length){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=ho.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(2===arguments.length){var i=arguments[0],n=arguments[1],r=this.getConstrainedLength(i)/this.segLen;n.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(r):this.splitPt=ho.pointAlongReverse(this.seg,r)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return ho}}),ho.pointAlongReverse=function(t,e){var i=new u;return i.x=t.p1.x-e*(t.p1.x-t.p0.x),i.y=t.p1.y-e*(t.p1.y-t.p0.y),i},Wo(co.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return co}}),Wo(uo.prototype,{findSplitPoint:function(t,e){var i=t.getLineSegment(),n=i.getLength()/2,r=new ho(i),o=uo.projectedSplitPoint(t,e),s=2*o.distance(e)*.8;return s>n&&(s=n),r.setMinimumLength(s),r.splitAt(o),r.getSplitPoint()},interfaces_:function(){return[co]},getClass:function(){return uo}}),uo.projectedSplitPoint=function(t,e){return t.getLineSegment().project(e)},Wo(fo.prototype,{interfaces_:function(){return[]},getClass:function(){return fo}}),fo.triArea=function(t,e,i){return(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x)},fo.isInCircleDDNormalized=function(t,e,i,n){var r=T.valueOf(t.x).selfSubtract(n.x),o=T.valueOf(t.y).selfSubtract(n.y),s=T.valueOf(e.x).selfSubtract(n.x),a=T.valueOf(e.y).selfSubtract(n.y),l=T.valueOf(i.x).selfSubtract(n.x),h=T.valueOf(i.y).selfSubtract(n.y),c=r.multiply(a).selfSubtract(s.multiply(o)),u=s.multiply(h).selfSubtract(l.multiply(a)),f=l.multiply(o).selfSubtract(r.multiply(h)),g=r.multiply(r).selfAdd(o.multiply(o)),d=s.multiply(s).selfAdd(a.multiply(a)),p=l.multiply(l).selfAdd(h.multiply(h));return g.selfMultiply(u).selfAdd(d.selfMultiply(f)).selfAdd(p.selfMultiply(c)).doubleValue()>0},fo.checkRobustInCircle=function(t,e,i,n){var r=fo.isInCircleNonRobust(t,e,i,n),o=fo.isInCircleDDSlow(t,e,i,n),s=fo.isInCircleCC(t,e,i,n),a=hn.circumcentre(t,e,i);M.out.println("p radius diff a = "+Math.abs(n.distance(a)-t.distance(a))/t.distance(a)),r===o&&r===s||(M.out.println("inCircle robustness failure (double result = "+r+", DD result = "+o+", CC result = "+s+")"),M.out.println(Xt.toLineString(new Rt([t,e,i,n]))),M.out.println("Circumcentre = "+Xt.toPoint(a)+" radius = "+t.distance(a)),M.out.println("p radius diff a = "+Math.abs(n.distance(a)/t.distance(a)-1)),M.out.println("p radius diff b = "+Math.abs(n.distance(a)/e.distance(a)-1)),M.out.println("p radius diff c = "+Math.abs(n.distance(a)/i.distance(a)-1)),M.out.println())},fo.isInCircleDDFast=function(t,e,i,n){var r=T.sqr(t.x).selfAdd(T.sqr(t.y)).selfMultiply(fo.triAreaDDFast(e,i,n)),o=T.sqr(e.x).selfAdd(T.sqr(e.y)).selfMultiply(fo.triAreaDDFast(t,i,n)),s=T.sqr(i.x).selfAdd(T.sqr(i.y)).selfMultiply(fo.triAreaDDFast(t,e,n)),a=T.sqr(n.x).selfAdd(T.sqr(n.y)).selfMultiply(fo.triAreaDDFast(t,e,i));return r.selfSubtract(o).selfAdd(s).selfSubtract(a).doubleValue()>0},fo.isInCircleCC=function(t,e,i,n){var r=hn.circumcentre(t,e,i),o=t.distance(r);return n.distance(r)-o<=0},fo.isInCircleNormalized=function(t,e,i,n){var r=t.x-n.x,o=t.y-n.y,s=e.x-n.x,a=e.y-n.y,l=i.x-n.x,h=i.y-n.y;return(r*r+o*o)*(s*h-l*a)+(s*s+a*a)*(l*o-r*h)+(l*l+h*h)*(r*a-s*o)>0},fo.isInCircleDDSlow=function(t,e,i,n){var r=T.valueOf(n.x),o=T.valueOf(n.y),s=T.valueOf(t.x),a=T.valueOf(t.y),l=T.valueOf(e.x),h=T.valueOf(e.y),c=T.valueOf(i.x),u=T.valueOf(i.y),f=s.multiply(s).add(a.multiply(a)).multiply(fo.triAreaDDSlow(l,h,c,u,r,o)),g=l.multiply(l).add(h.multiply(h)).multiply(fo.triAreaDDSlow(s,a,c,u,r,o)),d=c.multiply(c).add(u.multiply(u)).multiply(fo.triAreaDDSlow(s,a,l,h,r,o)),p=r.multiply(r).add(o.multiply(o)).multiply(fo.triAreaDDSlow(s,a,l,h,c,u));return f.subtract(g).add(d).subtract(p).doubleValue()>0},fo.isInCircleNonRobust=function(t,e,i,n){return(t.x*t.x+t.y*t.y)*fo.triArea(e,i,n)-(e.x*e.x+e.y*e.y)*fo.triArea(t,i,n)+(i.x*i.x+i.y*i.y)*fo.triArea(t,e,n)-(n.x*n.x+n.y*n.y)*fo.triArea(t,e,i)>0},fo.isInCircleRobust=function(t,e,i,n){return fo.isInCircleNormalized(t,e,i,n)},fo.triAreaDDSlow=function(t,e,i,n,r,o){return i.subtract(t).multiply(o.subtract(e)).subtract(n.subtract(e).multiply(r.subtract(t)))},fo.triAreaDDFast=function(t,e,i){var n=T.valueOf(e.x).selfSubtract(t.x).selfMultiply(T.valueOf(i.y).selfSubtract(t.y)),r=T.valueOf(e.y).selfSubtract(t.y).selfMultiply(T.valueOf(i.x).selfSubtract(t.x));return n.selfSubtract(r)},Wo(go.prototype,{circleCenter:function(t,e){var i=new go(this.getX(),this.getY()),n=new R(this.bisector(i,t),this.bisector(t,e)),r=null;try{r=new go(n.getX(),n.getY())}catch(n){if(!(n instanceof I))throw n;M.err.println("a: "+i+"  b: "+t+"  c: "+e),M.err.println(n)}return r},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var i=e.getX()-t.getX(),n=e.getY()-t.getY();return new R(new R(t.getX()+i/2,t.getY()+n/2,1),new R(t.getX()-n+i/2,t.getY()+i+n/2,1))},equals:function(){if(1===arguments.length){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(2===arguments.length){var e=arguments[0],i=arguments[1];return this.p.distance(e.getCoordinate())<i}},getCoordinate:function(){return this.p},isInCircle:function(t,e,i){return fo.isInCircleRobust(t.p,e.p,i.p,this.p)},interpolateZValue:function(t,e,i){var n=t.getX(),r=t.getY(),o=e.getX()-n,s=i.getX()-n,a=e.getY()-r,l=i.getY()-r,h=o*l-s*a,c=this.getX()-n,u=this.getY()-r,f=(l*c-s*u)/h,g=(-a*c+o*u)/h;return t.getZ()+f*(e.getZ()-t.getZ())+g*(i.getZ()-t.getZ())},midPoint:function(t){return new go((this.p.x+t.getX())/2,(this.p.y+t.getY())/2,(this.p.z+t.getZ())/2)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new go(t*this.p.x,t*this.p.y)},cross:function(){return new go(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new go(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var i=this,n=e.sub(t),r=i.sub(t),o=n.crossProduct(r);return o>0?go.LEFT:o<0?go.RIGHT:n.getX()*r.getX()<0||n.getY()*r.getY()<0?go.BEHIND:n.magn()<r.magn()?go.BEYOND:t.equals(i)?go.ORIGIN:e.equals(i)?go.DESTINATION:go.BETWEEN},sum:function(t){return new go(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var i=this.circleCenter(t,e),n=this.distance(i,t),r=this.distance(this,t),o=this.distance(t,e);return o<r&&(r=o),(o=this.distance(e,this))<r&&(r=o),n/r},interfaces_:function(){return[]},getClass:function(){return go}}),go.interpolateZ=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2],n=e.distance(i),r=t.distance(e),o=i.z-e.z;return e.z+o*(r/n)}if(4===arguments.length){var s=arguments[0],a=arguments[1],l=arguments[2],h=arguments[3],c=a.x,u=a.y,f=l.x-c,g=h.x-c,d=l.y-u,p=h.y-u,m=f*p-g*d,y=s.x-c,v=s.y-u,x=(p*y-g*v)/m,w=(-d*y+f*v)/m;return a.z+x*(l.z-a.z)+w*(h.z-a.z)}},go.LEFT=0,go.RIGHT=1,go.BEYOND=2,go.BEHIND=3,go.BETWEEN=4,go.ORIGIN=5,go.DESTINATION=6,jo(po,go),Wo(po.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return po}}),Wo(mo.prototype,{equalsNonOriented:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},toLineSegment:function(){return new Jt(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return Xt.toLineString(t,e)},isLive:function(){return null!==this._rot},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return mo}}),mo.makeEdge=function(t,e){var i=new mo,n=new mo,r=new mo,o=new mo;i._rot=n,n._rot=r,r._rot=o,o._rot=i,i.setNext(i),n.setNext(o),r.setNext(r),o.setNext(n);var s=i;return s.setOrig(t),s.setDest(e),s},mo.swap=function(t){var e=t.oPrev(),i=t.sym().oPrev();mo.splice(t,e),mo.splice(t.sym(),i),mo.splice(t,e.lNext()),mo.splice(t.sym(),i.lNext()),t.setOrig(e.dest()),t.setDest(i.dest())},mo.splice=function(t,e){var i=t.oNext().rot(),n=e.oNext().rot(),r=e.oNext(),o=t.oNext(),s=n.oNext(),a=i.oNext();t.setNext(r),e.setNext(o),i.setNext(s),n.setNext(a)},mo.connect=function(t,e){var i=mo.makeEdge(t.dest(),e.orig());return mo.splice(i,t.lNext()),mo.splice(i.sym(),e),i},Wo(yo.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var i=this.subdiv.makeEdge(e.orig(),t);mo.splice(i,e);var n=i;do{e=(i=this.subdiv.connect(e,i.sym())).oPrev()}while(e.lNext()!==n);for(;;){var r=e.oPrev();if(r.dest().rightOf(e)&&t.isInCircle(e.orig(),r.dest(),e.dest()))mo.swap(e),e=e.oPrev();else{if(e.oNext()===n)return i;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this.insertSite(i)}},interfaces_:function(){return[]},getClass:function(){return yo}}),Wo(vo.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return vo}}),Wo(xo.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},findEdge:function(){return this.subdiv.getEdges().iterator().next()},interfaces_:function(){return[vo]},getClass:function(){return xo}}),jo(wo,l),Wo(wo.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return wo}}),wo.msgWithSpatial=function(t,e){return null!==e?t+" [ "+e+" ]":t},Wo(Co.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Co}}),Wo(Eo.prototype,{getTriangleVertices:function(t){var e=new bo;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return!!t.equals(this.frameVertex[0])||!!t.equals(this.frameVertex[1])||!!t.equals(this.frameVertex[2])},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var i=mo.connect(t,e);return this.quadEdges.add(i),i},getVoronoiCellPolygon:function(t,e){var i=new x,n=t;do{var r=t.rot().orig().getCoordinate();i.add(r),t=t.oPrev()}while(t!==n);var o=new w;o.addAll(i,!1),o.closeRing(),o.size()<4&&(M.out.println(o),o.add(o.get(o.size()-1),!0));var s=o.toCoordinateArray(),a=e.createPolygon(e.createLinearRing(s),null),l=n.orig();return a.setUserData(l.getCoordinate()),a},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);mo.splice(t.sym(),e);var i=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return mo.splice(e.sym(),i),mo.splice(i.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);Eo.getTriangleEdges(t,e);var i=new Array(3).fill(null);Eo.getTriangleEdges(t.sym(),i);var n=t.lNext().dest();if(this.isFrameVertex(n))return!0;var r=t.sym().lNext().dest();return!!this.isFrameVertex(r)},makeEdge:function(t,e){var i=mo.makeEdge(t,e);return this.quadEdges.add(i),i},visitTriangles:function(t,e){this.visitedKey++;var i=new ee;i.push(this.startingEdge);for(var n=new Q;!i.empty();){var r=i.pop();if(!n.contains(r)){var o=this.fetchTriangleToVisit(r,i,e,n);null!==o&&t.visit(o)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){return this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate()),this.seg.distance(e)<this.edgeCoincidenceTolerance},getEnvelope:function(){return new C(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),i=t.getHeight(),n=0;n=e>i?10*e:10*i,this.frameVertex[0]=new go((t.getMaxX()+t.getMinX())/2,t.getMaxY()+n),this.frameVertex[1]=new go(t.getMinX()-n,t.getMinY()-n),this.frameVertex[2]=new go(t.getMaxX()+n,t.getMinY()-n),this.frameEnv=new C(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new _o;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new Q,i=this.quadEdges.iterator();i.hasNext();){var n=i.next(),r=n.orig();!t&&this.isFrameVertex(r)||e.add(r);var o=n.dest();!t&&this.isFrameVertex(o)||e.add(o)}return e},fetchTriangleToVisit:function(t,e,i,n){var r=t,o=0,s=!1;do{this.triEdges[o]=r,this.isFrameEdge(r)&&(s=!0);var a=r.sym();n.contains(a)||e.push(a),n.add(r),o++,r=r.lNext()}while(r!==t);return s&&!i?null:this.triEdges},getEdges:function(){if(0===arguments.length)return this.quadEdges;if(1===arguments.length){for(var t=arguments[0],e=this.getPrimaryEdges(!1),i=new Array(e.size()).fill(null),n=0,r=e.iterator();r.hasNext();){var o=r.next();i[n++]=t.createLineString([o.orig().getCoordinate(),o.dest().getCoordinate()])}return t.createMultiLineString(i)}},getVertexUniqueEdges:function(t){for(var e=new x,i=new Q,n=this.quadEdges.iterator();n.hasNext();){var r=n.next(),o=r.orig();i.contains(o)||(i.add(o),!t&&this.isFrameVertex(o)||e.add(r));var s=r.sym(),a=s.orig();i.contains(a)||(i.add(a),!t&&this.isFrameVertex(a)||e.add(s))}return e},getTriangleEdges:function(t){var e=new So;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new x,i=new ee;i.push(this.startingEdge);for(var n=new Q;!i.empty();){var r=i.pop();if(!n.contains(r)){var o=r.getPrimary();!t&&this.isFrameEdge(o)||e.add(o),i.push(r.oNext()),i.push(r.sym().oNext()),n.add(r),n.add(r.sym())}}return e},delete:function(t){mo.splice(t,t.oPrev()),mo.splice(t.sym(),t.sym().oPrev());var e=t.sym(),i=t.rot(),n=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(i),this.quadEdges.remove(n),t.delete(),e.delete(),i.delete(),n.delete()},locateFromEdge:function(t,e){for(var i=0,n=this.quadEdges.size(),r=e;;){if(++i>n)throw new wo(r.toLineSegment());if(t.equals(r.orig())||t.equals(r.dest()))break;if(t.rightOf(r))r=r.sym();else if(t.rightOf(r.oNext())){if(t.rightOf(r.dPrev()))break;r=r.dPrev()}else r=r.oNext()}return r},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new Io,!0);for(var e=new x,i=this.getVertexUniqueEdges(!1).iterator();i.hasNext();){var n=i.next();e.add(this.getVoronoiCellPolygon(n,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(Yt.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),i=new Array(e.size()).fill(null),n=0,r=e.iterator();r.hasNext();){var o=r.next();i[n++]=t.createPolygon(t.createLinearRing(o),null)}return t.createGeometryCollection(i)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var i=this.makeEdge(e.orig(),t);mo.splice(i,e);var n=i;do{e=(i=this.connect(e,i.sym())).oPrev()}while(e.lNext()!==n);return n},locate:function(){if(1===arguments.length){if(arguments[0]instanceof go){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof u){var e=arguments[0];return this.locator.locate(new go(e))}}else if(2===arguments.length){var i=arguments[0],n=arguments[1],r=this.locator.locate(new go(i));if(null===r)return null;var o=r;r.dest().getCoordinate().equals2D(i)&&(o=r.sym());var s=o;do{if(s.dest().getCoordinate().equals2D(n))return s;s=s.oNext()}while(s!==o);return null}},interfaces_:function(){return[]},getClass:function(){return Eo}}),Eo.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new i("Edges do not form a triangle")},Wo(Io.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),i=t[1].orig().getCoordinate(),n=t[2].orig().getCoordinate(),r=new go(hn.circumcentre(e,i,n)),o=0;o<3;o++)t[o].rot().setOrig(r)},interfaces_:function(){return[Co]},getClass:function(){return Io}}),Wo(So.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[Co]},getClass:function(){return So}}),Wo(bo.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[Co]},getClass:function(){return bo}}),Wo(_o.prototype,{checkTriangleSize:function(t){t.length>=2?Xt.toLineString(t[0],t[1]):t.length>=1&&Xt.toPoint(t[0])},visit:function(t){this.coordList.clear();for(var e=0;e<3;e++){var i=t[e].orig();this.coordList.add(i.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var n=this.coordList.toCoordinateArray();if(4!==n.length)return null;this.triCoords.add(n)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[Co]},getClass:function(){return _o}}),Eo.TriangleCircumcentreVisitor=Io,Eo.TriangleEdgesListVisitor=So,Eo.TriangleVertexListVisitor=bo,Eo.TriangleCoordinatesVisitor=_o,Eo.EDGE_COINCIDENCE_TOL_FACTOR=1e3,Wo(No.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){return this.ls.getCoordinate(1).z},getStartZ:function(){return this.ls.getCoordinate(0).z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){return this.ls.getCoordinate(1).y},getStartX:function(){return this.ls.getCoordinate(0).x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){return this.ls.getCoordinate(0).y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){return this.ls.getCoordinate(1).x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return No}}),Wo(Lo.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Lo}}),Wo(To.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return To}}),Wo(Ao.prototype,{insert:function(){if(1===arguments.length){var t=arguments[0];return this.insert(t,null)}if(2===arguments.length){var e=arguments[0],i=arguments[1];if(null===this.root)return this.root=new To(e,i),this.root;if(this.tolerance>0){var n=this.findBestMatchNode(e);if(null!==n)return n.increment(),n}return this.insertExact(e,i)}},query:function(){if(1===arguments.length){var t=arguments[0],e=new x;return this.query(t,e),e}if(2===arguments.length)if(arguments[0]instanceof C&&Zo(arguments[1],m)){var i=arguments[0],n=arguments[1];this.queryNode(this.root,i,!0,{interfaces_:function(){return[Lo]},visit:function(t){n.add(t)}})}else if(arguments[0]instanceof C&&Zo(arguments[1],Lo)){var r=arguments[0],o=arguments[1];this.queryNode(this.root,r,!0,o)}},queryNode:function(t,e,i,n){if(null===t)return null;var r=null,o=null,s=null;i?(r=e.getMinX(),o=e.getMaxX(),s=t.getX()):(r=e.getMinY(),o=e.getMaxY(),s=t.getY());var a=s<=o;r<s&&this.queryNode(t.getLeft(),e,!i,n),e.contains(t.getCoordinate())&&n.visit(t),a&&this.queryNode(t.getRight(),e,!i,n)},findBestMatchNode:function(t){var e=new Po(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return null===this.root},insertExact:function(t,e){for(var i=this.root,n=this.root,r=!0,o=!0;null!==i;){if(null!==i&&t.distance(i.getCoordinate())<=this.tolerance)return i.increment(),i;n=i,i=(o=r?t.x<i.getX():t.y<i.getY())?i.getLeft():i.getRight(),r=!r}this.numberOfNodes=this.numberOfNodes+1;var s=new To(t,e);return o?n.setLeft(s):n.setRight(s),s},interfaces_:function(){return[]},getClass:function(){return Ao}}),Ao.toCoordinates=function(){if(1===arguments.length){var t=arguments[0];return Ao.toCoordinates(t,!1)}if(2===arguments.length){for(var e=arguments[0],i=arguments[1],n=new w,r=e.iterator();r.hasNext();)for(var o=r.next(),s=i?o.getCount():1,a=0;a<s;a++)n.add(o.getCoordinate(),!0);return n.toCoordinateArray()}},Wo(Po.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate());if(!(e<=this.tolerance))return null;var i=!1;(null===this.matchNode||e<this.matchDist||null!==this.matchNode&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(i=!0),i&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new C(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[Lo]},getClass:function(){return Po}}),Ao.BestMatchVisitor=Po,Wo(Mo.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do{e=this.enforceGabriel(this.segments),t++}while(e>0&&t<Mo.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this.insertSite(i)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,i=this.initialVertices.iterator();i.hasNext();){r=i.next();t[e++]=r.getCoordinate()}for(var n=this.segVertices.iterator();n.hasNext();){var r=n.next();t[e++]=r.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new Yt,e=new ne(this.getPointArray(),t);this.convexHull=e.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),i=t.getEnd(),r=new u((e.x+i.x)/2,(e.y+i.y)/2),o=e.distance(r),s=new C(r);s.expandBy(o);for(var a=this.kdt.query(s),l=null,h=n.MAX_VALUE,c=a.iterator();c.hasNext();){var f=c.next().getCoordinate();if(!f.equals2D(e)&&!f.equals2D(i)){var g=r.distance(f);if(g<o){var d=g;(null===l||d<h)&&(l=f,h=d)}}}return l},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new x,i=0,n=new x,r=t.iterator();r.hasNext();){var o=r.next(),s=this.findNonGabrielPoint(o);if(null!==s){this.splitPt=this.splitFinder.findSplitPoint(o,s);var a=this.createVertex(this.splitPt,o),l=(this.insertSite(a),new No(o.getStartX(),o.getStartY(),o.getStartZ(),a.getX(),a.getY(),a.getZ(),o.getData())),h=new No(a.getX(),a.getY(),a.getZ(),o.getEndX(),o.getEndY(),o.getEndZ(),o.getData());e.add(l),e.add(h),n.add(o),i+=1}}return t.removeAll(n),t.addAll(e),i},createVertex:function(){if(1===arguments.length){var t=arguments[0],e=null;return e=null!==this.vertexFactory?this.vertexFactory.createVertex(t,null):new po(t)}if(2===arguments.length){var i=arguments[0],n=arguments[1],e=null;return(e=null!==this.vertexFactory?this.vertexFactory.createVertex(i,n):new po(i)).setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=Mo.computeVertexEnvelope(this.initialVertices),e=Mo.computeVertexEnvelope(this.segVertices),i=new C(t);i.expandToInclude(e);var n=.2*i.getWidth(),r=.2*i.getHeight(),o=Math.max(n,r);this.computeAreaEnv=new C(i),this.computeAreaEnv.expandBy(o)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new Eo(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new xo(this.subdiv)),this.incDel=new yo(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof po){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var i=e.getData();return i.merge(t),i}return this.incDel.insertSite(t),t}if(arguments[0]instanceof u){var n=arguments[0];this.insertSite(this.createVertex(n))}},interfaces_:function(){return[]},getClass:function(){return Mo}}),Mo.computeVertexEnvelope=function(t){for(var e=new C,i=t.iterator();i.hasNext();){var n=i.next();e.expandToInclude(n.getCoordinate())}return e},Mo.MAX_SPLIT_ITER=99,Wo(Ro.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Ro.envelope(this.siteCoords),e=Ro.toVertices(this.siteCoords);this.subdiv=new Eo(t,this.tolerance),new yo(this.subdiv).insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof F){var t=arguments[0];this.siteCoords=Ro.extractUniqueCoordinates(t)}else if(Zo(arguments[0],d)){var e=arguments[0];this.siteCoords=Ro.unique(Y.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return Ro}}),Ro.extractUniqueCoordinates=function(t){if(null===t)return new w;var e=t.getCoordinates();return Ro.unique(e)},Ro.envelope=function(t){for(var e=new C,i=t.iterator();i.hasNext();){var n=i.next();e.expandToInclude(n)}return e},Ro.unique=function(t){var e=Y.copyDeep(t);return ot.sort(e),new w(e,!1)},Ro.toVertices=function(t){for(var e=new x,i=t.iterator();i.hasNext();){var n=i.next();e.add(new go(n))}return e},Wo(Oo.prototype,{createSiteVertices:function(t){for(var e=new x,i=t.iterator();i.hasNext();){var n=i.next();this.constraintVertexMap.containsKey(n)||e.add(new po(n))}return e},create:function(){if(null!==this.subdiv)return null;var t=Ro.envelope(this.siteCoords),e=new x;null!==this.constraintLines&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=Oo.createConstraintSegments(this.constraintLines));var i=new Mo(this.createSiteVertices(this.siteCoords),this.tolerance);i.setConstraints(e,new x(this.constraintVertexMap.values())),i.formInitialDelaunay(),i.enforceConstraints(),this.subdiv=i.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=Ro.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),i=0;i<e.length;i++){var n=new po(e[i]);this.constraintVertexMap.put(e[i],n)}},interfaces_:function(){return[]},getClass:function(){return Oo}}),Oo.createConstraintSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=_i.getLines(t),i=new x,n=e.iterator();n.hasNext();){var r=n.next();Oo.createConstraintSegments(r,i)}return i}if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),n=1;n<a.length;n++)s.add(new No(a[n-1],a[n]))},Wo(ko.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Ro.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv);var i=Ro.toVertices(this.siteCoords);this.subdiv=new Eo(t,this.tolerance),new yo(this.subdiv).insertSites(i)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return ko.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof F){var t=arguments[0];this.siteCoords=Ro.extractUniqueCoordinates(t)}else if(Zo(arguments[0],d)){var e=arguments[0];this.siteCoords=Ro.unique(Y.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return ko}}),ko.clipGeometryCollection=function(t,e){for(var i=t.getFactory().toGeometry(e),n=new x,r=0;r<t.getNumGeometries();r++){var o=t.getGeometryN(r),s=null;e.contains(o.getEnvelopeInternal())?s=o:e.intersects(o.getEnvelopeInternal())&&(s=i.intersection(o)).setUserData(o.getUserData()),null===s||s.isEmpty()||n.add(s)}return t.getFactory().createGeometryCollection(Yt.toGeometryArray(n))};var Ms=Object.freeze({Vertex:go}),Rs=Object.freeze({ConformingDelaunayTriangulationBuilder:Oo,DelaunayTriangulationBuilder:Ro,VoronoiDiagramBuilder:ko,quadedge:Ms});Wo(Fo.prototype,{getSegmentIndex:function(){return this.segmentIndex},getComponentIndex:function(){return this.componentIndex},isEndpoint:function(t){var e=t.getGeometryN(this.componentIndex).getNumPoints()-1;return this.segmentIndex>=e||this.segmentIndex===e&&this.segmentFraction>=1},isValid:function(t){if(this.componentIndex<0||this.componentIndex>=t.getNumGeometries())return!1;var e=t.getGeometryN(this.componentIndex);return!(this.segmentIndex<0||this.segmentIndex>e.getNumPoints()||this.segmentIndex===e.getNumPoints()&&0!==this.segmentFraction||this.segmentFraction<0||this.segmentFraction>1)},normalize:function(){this.segmentFraction<0&&(this.segmentFraction=0),this.segmentFraction>1&&(this.segmentFraction=1),this.componentIndex<0&&(this.componentIndex=0,this.segmentIndex=0,this.segmentFraction=0),this.segmentIndex<0&&(this.segmentIndex=0,this.segmentFraction=0),1===this.segmentFraction&&(this.segmentFraction=0,this.segmentIndex+=1)},toLowest:function(t){var e=t.getGeometryN(this.componentIndex).getNumPoints()-1;return this.segmentIndex<e?this:new Fo(this.componentIndex,e,1,!1)},getCoordinate:function(t){var e=t.getGeometryN(this.componentIndex),i=e.getCoordinateN(this.segmentIndex);if(this.segmentIndex>=e.getNumPoints()-1)return i;var n=e.getCoordinateN(this.segmentIndex+1);return Fo.pointAlongSegmentByFraction(i,n,this.segmentFraction)},getSegmentFraction:function(){return this.segmentFraction},getSegment:function(t){var e=t.getGeometryN(this.componentIndex),i=e.getCoordinateN(this.segmentIndex);return this.segmentIndex>=e.getNumPoints()-1?new Jt(e.getCoordinateN(e.getNumPoints()-2),i):new Jt(i,e.getCoordinateN(this.segmentIndex+1))},clamp:function(t){if(this.componentIndex>=t.getNumGeometries())return this.setToEnd(t),null;if(this.segmentIndex>=t.getNumPoints()){var e=t.getGeometryN(this.componentIndex);this.segmentIndex=e.getNumPoints()-1,this.segmentFraction=1}},setToEnd:function(t){this.componentIndex=t.getNumGeometries()-1;var e=t.getGeometryN(this.componentIndex);this.segmentIndex=e.getNumPoints()-1,this.segmentFraction=1},compareTo:function(t){var e=t;return this.componentIndex<e.componentIndex?-1:this.componentIndex>e.componentIndex?1:this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.segmentFraction<e.segmentFraction?-1:this.segmentFraction>e.segmentFraction?1:0},clone:function(){return new Fo(this.componentIndex,this.segmentIndex,this.segmentFraction)},toString:function(){return"LinearLoc["+this.componentIndex+", "+this.segmentIndex+", "+this.segmentFraction+"]"},isOnSameSegment:function(t){return this.componentIndex===t.componentIndex&&(this.segmentIndex===t.segmentIndex||t.segmentIndex-this.segmentIndex==1&&0===t.segmentFraction||this.segmentIndex-t.segmentIndex==1&&0===this.segmentFraction)},snapToVertex:function(t,e){if(this.segmentFraction<=0||this.segmentFraction>=1)return null;var i=this.getSegmentLength(t),n=this.segmentFraction*i,r=i-n;n<=r&&n<e?this.segmentFraction=0:r<=n&&r<e&&(this.segmentFraction=1)},compareLocationValues:function(t,e,i){return this.componentIndex<t?-1:this.componentIndex>t?1:this.segmentIndex<e?-1:this.segmentIndex>e?1:this.segmentFraction<i?-1:this.segmentFraction>i?1:0},getSegmentLength:function(t){var e=t.getGeometryN(this.componentIndex),i=this.segmentIndex;this.segmentIndex>=e.getNumPoints()-1&&(i=e.getNumPoints()-2);var n=e.getCoordinateN(i),r=e.getCoordinateN(i+1);return n.distance(r)},isVertex:function(){return this.segmentFraction<=0||this.segmentFraction>=1},interfaces_:function(){return[r]},getClass:function(){return Fo}}),Fo.getEndLocation=function(t){var e=new Fo;return e.setToEnd(t),e},Fo.pointAlongSegmentByFraction=function(t,e,i){return i<=0?t:i>=1?e:new u((e.x-t.x)*i+t.x,(e.y-t.y)*i+t.y,(e.z-t.z)*i+t.z)},Fo.compareLocationValues=function(t,e,i,n,r,o){return t<n?-1:t>n?1:e<r?-1:e>r?1:i<o?-1:i>o?1:0},Wo(Do.prototype,{getComponentIndex:function(){return this.componentIndex},getLine:function(){return this.currentLine},getVertexIndex:function(){return this.vertexIndex},getSegmentEnd:function(){return this.vertexIndex<this.getLine().getNumPoints()-1?this.currentLine.getCoordinateN(this.vertexIndex+1):null},next:function(){if(!this.hasNext())return null;++this.vertexIndex>=this.currentLine.getNumPoints()&&(this.componentIndex++,this.loadCurrentLine(),this.vertexIndex=0)},loadCurrentLine:function(){if(this.componentIndex>=this.numLines)return this.currentLine=null,null;this.currentLine=this.linearGeom.getGeometryN(this.componentIndex)},getSegmentStart:function(){return this.currentLine.getCoordinateN(this.vertexIndex)},isEndOfLine:function(){return!(this.componentIndex>=this.numLines||this.vertexIndex<this.currentLine.getNumPoints()-1)},hasNext:function(){return!(this.componentIndex>=this.numLines||this.componentIndex===this.numLines-1&&this.vertexIndex>=this.currentLine.getNumPoints())},interfaces_:function(){return[]},getClass:function(){return Do}}),Do.segmentEndVertexIndex=function(t){return t.getSegmentFraction()>0?t.getSegmentIndex()+1:t.getSegmentIndex()},Wo(Go.prototype,{indexOf:function(t){return this.indexOfFromStart(t,null)},indexOfFromStart:function(t,e){for(var i=n.MAX_VALUE,r=0,o=0,s=-1,a=new Jt,l=new Do(this.linearGeom);l.hasNext();l.next())if(!l.isEndOfLine()){a.p0=l.getSegmentStart(),a.p1=l.getSegmentEnd();var h=a.distance(t),c=a.segmentFraction(t),u=l.getComponentIndex(),f=l.getVertexIndex();h<i&&(null===e||e.compareLocationValues(u,f,c)<0)&&(r=u,o=f,s=c,i=h)}return i===n.MAX_VALUE?new Fo(e):new Fo(r,o,s)},indexOfAfter:function(t,e){if(null===e)return this.indexOf(t);var i=Fo.getEndLocation(this.linearGeom);if(i.compareTo(e)<=0)return i;var n=this.indexOfFromStart(t,e);return c.isTrue(n.compareTo(e)>=0,"computed location is before specified minimum location"),n},interfaces_:function(){return[]},getClass:function(){return Go}}),Go.indexOf=function(t,e){return new Go(t).indexOf(e)},Go.indexOfAfter=function(t,e,i){return new Go(t).indexOfAfter(e,i)},Wo(Bo.prototype,{indicesOf:function(t){var e=t.getGeometryN(0).getCoordinateN(0),i=t.getGeometryN(t.getNumGeometries()-1),n=i.getCoordinateN(i.getNumPoints()-1),r=new Go(this.linearGeom),o=new Array(2).fill(null);return o[0]=r.indexOf(e),0===t.getLength()?o[1]=o[0].clone():o[1]=r.indexOfAfter(n,o[0]),o},interfaces_:function(){return[]},getClass:function(){return Bo}}),Bo.indicesOf=function(t,e){return new Bo(t).indicesOf(e)},Wo(Vo.prototype,{getGeometry:function(){return this.endLine(),this.geomFact.buildGeometry(this.lines)},getLastCoordinate:function(){return this.lastPt},endLine:function(){if(null===this.coordList)return null;if(this.ignoreInvalidLines&&this.coordList.size()<2)return this.coordList=null,null;var t=this.coordList.toCoordinateArray(),e=t;this.fixInvalidLines&&(e=this.validCoordinateSequence(t)),this.coordList=null;var n=null;try{n=this.geomFact.createLineString(e)}catch(t){if(!(t instanceof i))throw t;if(!this.ignoreInvalidLines)throw t}null!==n&&this.lines.add(n)},setFixInvalidLines:function(t){this.fixInvalidLines=t},add:function(){if(1===arguments.length){var t=arguments[0];this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];null===this.coordList&&(this.coordList=new w),this.coordList.add(e,i),this.lastPt=e}},setIgnoreInvalidLines:function(t){this.ignoreInvalidLines=t},validCoordinateSequence:function(t){return t.length>=2?t:[t[0],t[0]]},interfaces_:function(){return[]},getClass:function(){return Vo}}),Wo(zo.prototype,{computeLinear:function(t,e){var i=new Vo(this.line.getFactory());i.setFixInvalidLines(!0),t.isVertex()||i.add(t.getCoordinate(this.line));for(var n=new Do(this.line,t);n.hasNext()&&!(e.compareLocationValues(n.getComponentIndex(),n.getVertexIndex(),0)<0);n.next()){var r=n.getSegmentStart();i.add(r),n.isEndOfLine()&&i.endLine()}return e.isVertex()||i.add(e.getCoordinate(this.line)),i.getGeometry()},computeLine:function(t,e){var i=this.line.getCoordinates(),n=new w,r=t.getSegmentIndex();t.getSegmentFraction()>0&&(r+=1);var o=e.getSegmentIndex();1===e.getSegmentFraction()&&(o+=1),o>=i.length&&(o=i.length-1),t.isVertex()||n.add(t.getCoordinate(this.line));for(var s=r;s<=o;s++)n.add(i[s]);e.isVertex()||n.add(e.getCoordinate(this.line)),n.size()<=0&&n.add(t.getCoordinate(this.line));var a=n.toCoordinateArray();return a.length<=1&&(a=[a[0],a[0]]),this.line.getFactory().createLineString(a)},extract:function(t,e){return e.compareTo(t)<0?this.reverse(this.computeLinear(e,t)):this.computeLinear(t,e)},reverse:function(t){return t instanceof wt?t.reverse():t instanceof ct?t.reverse():(c.shouldNeverReachHere("non-linear geometry encountered"),null)},interfaces_:function(){return[]},getClass:function(){return zo}}),zo.extract=function(t,e,i){return new zo(t).extract(e,i)},Wo(qo.prototype,{clampIndex:function(t){var e=t.clone();return e.clamp(this.linearGeom),e},project:function(t){return Go.indexOf(this.linearGeom,t)},checkGeometryType:function(){if(!(this.linearGeom instanceof wt||this.linearGeom instanceof ct))throw new i("Input geometry must be linear")},extractPoint:function(){if(1===arguments.length)return arguments[0].getCoordinate(this.linearGeom);if(2===arguments.length){var t=arguments[0],e=arguments[1],i=t.toLowest(this.linearGeom);return i.getSegment(this.linearGeom).pointAlongOffset(i.getSegmentFraction(),e)}},isValidIndex:function(t){return t.isValid(this.linearGeom)},getEndIndex:function(){return Fo.getEndLocation(this.linearGeom)},getStartIndex:function(){return new Fo},indexOfAfter:function(t,e){return Go.indexOfAfter(this.linearGeom,t,e)},extractLine:function(t,e){return zo.extract(this.linearGeom,t,e)},indexOf:function(t){return Go.indexOf(this.linearGeom,t)},indicesOf:function(t){return Bo.indicesOf(this.linearGeom,t)},interfaces_:function(){return[]},getClass:function(){return qo}}),Wo(Yo.prototype,{indexOf:function(t){return this.indexOfFromStart(t,-1)},indexOfFromStart:function(t,e){for(var i=n.MAX_VALUE,r=e,o=0,s=new Jt,a=new Do(this.linearGeom);a.hasNext();){if(!a.isEndOfLine()){s.p0=a.getSegmentStart(),s.p1=a.getSegmentEnd();var l=s.distance(t),h=this.segmentNearestMeasure(s,t,o);l<i&&h>e&&(r=h,i=l),o+=s.getLength()}a.next()}return r},indexOfAfter:function(t,e){if(e<0)return this.indexOf(t);var i=this.linearGeom.getLength();if(i<e)return i;var n=this.indexOfFromStart(t,e);return c.isTrue(n>=e,"computed index is before specified minimum index"),n},segmentNearestMeasure:function(t,e,i){var n=t.projectionFactor(e);return n<=0?i:n<=1?i+n*t.getLength():i+t.getLength()},interfaces_:function(){return[]},getClass:function(){return Yo}}),Yo.indexOf=function(t,e){return new Yo(t).indexOf(e)},Yo.indexOfAfter=function(t,e,i){return new Yo(t).indexOfAfter(e,i)},Wo(Uo.prototype,{getLength:function(t){for(var e=0,i=new Do(this.linearGeom);i.hasNext();){if(!i.isEndOfLine()){var n=i.getSegmentStart(),r=i.getSegmentEnd().distance(n);if(t.getComponentIndex()===i.getComponentIndex()&&t.getSegmentIndex()===i.getVertexIndex())return e+r*t.getSegmentFraction();e+=r}i.next()}return e},resolveHigher:function(t){if(!t.isEndpoint(this.linearGeom))return t;var e=t.getComponentIndex();if(e>=this.linearGeom.getNumGeometries()-1)return t;do{e++}while(e<this.linearGeom.getNumGeometries()-1&&0===this.linearGeom.getGeometryN(e).getLength());return new Fo(e,0,0)},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.getLocation(t,!0)}if(2===arguments.length){var e=arguments[0],i=arguments[1],n=e;e<0&&(n=this.linearGeom.getLength()+e);var r=this.getLocationForward(n);return i?r:this.resolveHigher(r)}},getLocationForward:function(t){if(t<=0)return new Fo;for(var e=0,i=new Do(this.linearGeom);i.hasNext();){if(i.isEndOfLine()){if(e===t)return new Fo(s=i.getComponentIndex(),a=i.getVertexIndex(),0)}else{var n=i.getSegmentStart(),r=i.getSegmentEnd().distance(n);if(e+r>t){var o=(t-e)/r,s=i.getComponentIndex(),a=i.getVertexIndex();return new Fo(s,a,o)}e+=r}i.next()}return Fo.getEndLocation(this.linearGeom)},interfaces_:function(){return[]},getClass:function(){return Uo}}),Uo.getLength=function(t,e){return new Uo(t).getLength(e)},Uo.getLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return(o=new Uo(t)).getLocation(e)}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=new Uo(i);return o.getLocation(n,r)}},Wo(Xo.prototype,{clampIndex:function(t){var e=this.positiveIndex(t),i=this.getStartIndex();if(e<i)return i;var n=this.getEndIndex();return e>n?n:e},locationOf:function(){if(1===arguments.length){var t=arguments[0];return Uo.getLocation(this.linearGeom,t)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return Uo.getLocation(this.linearGeom,e,i)}},project:function(t){return Yo.indexOf(this.linearGeom,t)},positiveIndex:function(t){return t>=0?t:this.linearGeom.getLength()+t},extractPoint:function(){if(1===arguments.length){var t=arguments[0];return(n=Uo.getLocation(this.linearGeom,t)).getCoordinate(this.linearGeom)}if(2===arguments.length){var e=arguments[0],i=arguments[1],n=Uo.getLocation(this.linearGeom,e),r=n.toLowest(this.linearGeom);return r.getSegment(this.linearGeom).pointAlongOffset(r.getSegmentFraction(),i)}},isValidIndex:function(t){return t>=this.getStartIndex()&&t<=this.getEndIndex()},getEndIndex:function(){return this.linearGeom.getLength()},getStartIndex:function(){return 0},indexOfAfter:function(t,e){return Yo.indexOfAfter(this.linearGeom,t,e)},extractLine:function(t,e){var i=(new qo(this.linearGeom),this.clampIndex(t)),n=this.clampIndex(e),r=i===n,o=this.locationOf(i,r),s=this.locationOf(n);return zo.extract(this.linearGeom,o,s)},indexOf:function(t){return Yo.indexOf(this.linearGeom,t)},indicesOf:function(t){var e=Bo.indicesOf(this.linearGeom,t);return[Uo.getLength(this.linearGeom,e[0]),Uo.getLength(this.linearGeom,e[1])]},interfaces_:function(){return[]},getClass:function(){return Xo}});var Os=Object.freeze({LengthIndexedLine:Xo,LengthLocationMap:Uo,LinearGeometryBuilder:Vo,LinearIterator:Do,LinearLocation:Fo,LocationIndexedLine:qo});Wo(Ho.prototype,{interfaces_:function(){return[]},getClass:function(){return Ho}}),Ho.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return zi.createEmptyResult(zi.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Yi.overlayOp(t,e,zi.UNION)},Wo(F.prototype,{equalsTopo:function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&Yr.relate(this,t).isEquals(this.getDimension(),t.getDimension())},union:function(){if(0===arguments.length)return jr.union(this);if(1===arguments.length){var t=arguments[0];return Ho.union(this,t)}},isValid:function(){return Tr.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return zi.createEmptyResult(zi.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return je.map(this,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Yi.overlayOp(this,t,zi.INTERSECTION)},covers:function(t){return Yr.covers(this,t)},coveredBy:function(t){return Yr.coveredBy(this,t)},touches:function(t){return Yr.touches(this,t)},intersects:function(t){return Yr.intersects(this,t)},within:function(t){return Yr.within(this,t)},overlaps:function(t){return Yr.overlaps(this,t)},disjoint:function(t){return Yr.disjoint(this,t)},crosses:function(t){return Yr.crosses(this,t)},buffer:function(){if(1===arguments.length){var t=arguments[0];return $n.bufferOp(this,t)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return $n.bufferOp(this,e,i)}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];return $n.bufferOp(this,n,r,o)}},convexHull:function(){return new ne(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return Yr.relate.apply(Yr,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=$t.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(0===e)t=(i=new Wi(this)).getInteriorPoint();else if(1===e)t=(i=new Hi(this)).getInteriorPoint();else{var i=new Ui(this);t=i.getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return zi.createEmptyResult(zi.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Yi.overlayOp(this,t,zi.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){return(new Xt).write(this)},toString:function(){this.toText()},contains:function(t){return Yr.contains(this,t)},difference:function(t){return this.isEmpty()?zi.createEmptyResult(zi.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Yi.overlayOp(this,t,zi.DIFFERENCE))},isSimple:function(){return new Mn(this).isSimple()},isWithinDistance:function(t,e){return!(this.getEnvelopeInternal().distance(t.getEnvelopeInternal())>e)&&rr.isWithinDistance(this,t,e)},distance:function(t){return rr.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}}),t.version="1.4.0 (93f117d)",t.algorithm=hs,t.densify=cs,t.dissolve=us,t.geom=as,t.geomgraph=fs,t.index=ps,t.io=xs,t.noding=ws,t.operation=Ts,t.precision=As,t.simplify=Ps,t.triangulate=Rs,t.linearref=Os,Object.defineProperty(t,"__esModule",{value:!0})}),/**
 * ol3-ext - A set of cool extensions for OpenLayers 3 (ol3).
 * @abstract ol3,openlayers,popup,menu,symbol,renderer,filter,canvas,interaction,split,statistic,charts,pie,LayerSwitcher,toolbar,animation
 * @version v1.0.0
 * @author Jean-Marc Viglino (https://github.com/Viglino)
 * @link https://github.com/Viglino/ol3-ext#,
 * @license CECILL-B
 */
ol.control.LayerSwitcher=function(t){var e=t||{},i=this;this.dcount=0,this.show_progress=e.show_progress,this.oninfo="function"==typeof e.oninfo?e.oninfo:null,this.onextent="function"==typeof e.onextent?e.onextent:null,this.hasextent=e.extent||e.onextent,this.hastrash=e.trash,this.reordering=!1!==e.reordering;var n;e.target?n=$("<div>").addClass(e.switcherClass||"ol-layerswitcher"):(n=$("<div>").addClass((e.switcherClass||"ol-layerswitcher")+" ol-unselectable ol-control ol-collapsed"),this.button=$("<button>").on("touchstart",function(t){n.toggleClass("ol-collapsed"),t.preventDefault(),i.overflow()}).click(function(){n.toggleClass("ol-forceopen").addClass("ol-collapsed"),i.overflow()}).appendTo(n),e.mouseover&&$(n).mouseleave(function(){n.addClass("ol-collapsed")}).mouseover(function(){n.removeClass("ol-collapsed")}),this.topv=$("<div>").addClass("ol-switchertopdiv").click(function(){i.overflow("+50%")}).appendTo(n),this.botv=$("<div>").addClass("ol-switcherbottomdiv").click(function(){i.overflow("-50%")}).appendTo(n)),this.panel_=$("<ul>").addClass("panel").appendTo(n),this.panel_.on("mousewheel DOMMouseScroll onmousewheel",function(t){i.overflow(Math.max(-1,Math.min(1,t.originalEvent.wheelDelta||-t.originalEvent.detail)))&&(t.stopPropagation(),t.preventDefault())}),this.header_=$("<li>").addClass("ol-header").appendTo(this.panel_),ol.control.Control.call(this,{element:n.get(0),target:e.target}),this.target=e.target},ol.inherits(ol.control.LayerSwitcher,ol.control.Control),ol.control.LayerSwitcher.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"expand/shrink"},ol.control.LayerSwitcher.prototype.setMap=function(t){ol.control.Control.prototype.setMap.call(this,t),this.drawPanel(),this.map_&&(this.map_.getLayerGroup().un("change",this.drawPanel,this),this.map_.un("moveend",this.viewChange,this),this.map_.un("change:size",this.overflow,this)),this.map_=t,t&&(t.getLayerGroup().on("change",this.drawPanel,this),t.on("moveend",this.viewChange,this),t.on("change:size",this.overflow,this))},ol.control.LayerSwitcher.prototype.setHeader=function(t){this.header_.html(t)},ol.control.LayerSwitcher.prototype.overflow=function(t){if(this.button){if("none"==this.panel_.css("display"))return void $(this.element).css("height","auto");var e=$(this.element).outerHeight(),i=this.panel_.outerHeight(),n=this.button.position().top+this.button.outerHeight(!0),r=this.panel_.position().top-n;if(i>e-n){switch($(this.element).css("height","100%"),t){case 1:r+=2*$("li",this.panel_).height();break;case-1:r-=2*$("li",this.panel_).height();break;case"+50%":r+=Math.round(e/2);break;case"-50%":r-=Math.round(e/2)}return r+i<=e-3*n/2?(r=e-3*n/2-i,this.botv.hide()):this.botv.css("display",""),r>=0?(r=0,this.topv.hide()):this.topv.css("display",""),this.panel_.css("top",r+"px"),!0}return $(this.element).css("height","auto"),this.panel_.css("top","0px"),this.botv.hide(),this.topv.hide(),!1}return!1},ol.control.LayerSwitcher.prototype.viewChange=function(t){var e=this.map_,i=this.map_.getView().getResolution();$("li",this.panel_).each(function(){var t=$(this).data("layer");if(t)if(t.getMaxResolution()<=i||t.getMinResolution()>=i)$(this).addClass("ol-layer-hidden");else{var n=t.getExtent();if(n){var r=e.getView().calculateExtent(e.getSize());ol.extent.intersects(r,n)?$(this).removeClass("ol-layer-hidden"):$(this).addClass("ol-layer-hidden")}else $(this).removeClass("ol-layer-hidden")}})},ol.control.LayerSwitcher.prototype.drawPanel=function(t){if(this.getMap()){var e=this;this.dcount++,setTimeout(function(){e.drawPanel_()},0)}},ol.control.LayerSwitcher.prototype.drawPanel_=function(t){--this.dcount||this.dragging_||($("li",this.panel_).not(".ol-header").remove(),this.drawList(this.panel_,this.getMap().getLayers()))},ol.control.LayerSwitcher.prototype.switchLayerVisibility=function(t,e){t.get("baseLayer")?(t.getVisible()||t.setVisible(!0),e.forEach(function(e){t!==e&&e.get("baseLayer")&&e.getVisible()&&e.setVisible(!1)})):t.setVisible(!t.getVisible())},ol.control.LayerSwitcher.prototype.testLayerVisibility=function(t){if(this.map_){var e=this.map_.getView().getResolution();if(t.getMaxResolution()<=e||t.getMinResolution()>=e)return!1;var i=t.getExtent();if(i){var n=this.map_.getView().calculateExtent(this.map_.getSize());return ol.extent.intersects(n,i)}return!0}return!0},ol.control.LayerSwitcher.prototype.dragOrdering_=function(t){var e=t.data;switch(t.type){case"mousedown":case"touchstart":t.stopPropagation(),(e={self:e.self,elt:$(t.currentTarget).closest("li"),start:!0,element:e.self.element,panel:e.self.panel_,pageY:t.pageY||t.originalEvent.touches[0].pageY}).elt.parent().addClass("drag"),$(document).on("mouseup mousemove touchend touchcancel touchmove",e,e.self.dragOrdering_);break;case"touchcancel":case"touchend":case"mouseup":if(e.target){var i=e.layer,n=e.target;if(i&&n){for(var r,o=(r=e.group?e.group.getLayers():e.self.getMap().getLayers()).getArray(),s=0;s<o.length;s++)if(o[s]==i){r.removeAt(s);break}for(var a=0;a<o.length;a++)if(o[a]==n){s>a?r.insertAt(a,i):r.insertAt(a+1,i);break}}}$("li",e.elt.parent()).removeClass("dropover"),e.elt.removeClass("drag"),e.elt.parent().removeClass("drag"),$(e.element).removeClass("drag"),e.div&&e.div.remove(),$(document).off("mouseup mousemove touchend touchcancel touchmove",e.self.dragOrdering_);break;default:if(e.start&&Math.abs(e.pageY-(t.pageY||t.originalEvent.touches[0].pageY))>2&&(e.start=!1,e.elt.addClass("drag"),e.layer=e.elt.data("layer"),e.target=!1,e.group=e.elt.parent().parent().data("layer"),e.div=$("<li>").appendTo(e.panel),e.div.css({position:"absolute","z-index":1e4,left:e.elt.position().left,opacity:.5}).html($(e.elt).html()).addClass("ol-dragover").width(e.elt.outerWidth()).height(e.elt.height()),$(e.element).addClass("drag")),!e.start){t.preventDefault(),t.stopPropagation(),e.div.css({top:(t.pageY||t.originalEvent.touches[0].pageY)-e.panel.offset().top+5});var l;(l=t.pageX?$(t.target):$(document.elementFromPoint(t.originalEvent.touches[0].clientX,t.originalEvent.touches[0].clientY))).hasClass("ol-switcherbottomdiv")?e.self.overflow(-1):l.hasClass("ol-switchertopdiv")&&e.self.overflow(1),l.is("li")||(l=l.closest("li")),l.hasClass("dropover")||$("li",e.elt.parent()).removeClass("dropover"),l.parent().hasClass("drag")&&l.get(0)!==e.elt.get(0)?((n=l.data("layer"))&&!n.get("allwaysOnTop")==!e.layer.get("allwaysOnTop")?(l.addClass("dropover"),e.target=n):e.target=!1,e.div.show()):(e.target=!1,l.get(0)===e.elt.get(0)?e.div.hide():e.div.show()),e.target?e.div.removeClass("forbidden"):e.div.addClass("forbidden")}}},ol.control.LayerSwitcher.prototype.dragOpacity_=function(t){var e=t.data;switch(t.type){case"mousedown":case"touchstart":t.stopPropagation(),t.preventDefault(),e.start=t.pageX||t.originalEvent.touches[0].pageX,e.elt=$(t.target),e.layer=e.elt.closest("li").data("layer"),e.self.dragging_=!0,$(document).on("mouseup touchend mousemove touchmove touchcancel",e,e.self.dragOpacity_);break;case"touchcancel":case"touchend":case"mouseup":$(document).off("mouseup touchend mousemove touchmove touchcancel",e.self.dragOpacity_),e.layer.setOpacity(e.opacity),e.self.dragging_=!1,e=!1;break;default:var i=t.pageX||t.originalEvent.touches[0].pageX,n=Math.max(0,Math.min(1,(i-e.elt.parent().offset().left)/e.elt.parent().width()));e.elt.css("left",100*n+"%"),e.opacity=n,e.layer.setOpacity(n)}},ol.control.LayerSwitcher.prototype.drawList=function(t,e){function i(t){t.stopPropagation(),t.preventDefault();var e=$(this).closest("ul").parent();e.data("layer")?(e.data("layer").getLayers().remove($(this).closest("li").data("layer")),0==e.data("layer").getLayers().getLength()&&i.call($(".layerTrash",e),t)):n.map_.removeLayer($(this).closest("li").data("layer"))}for(var n=this,r=e.getArray(),o=function(t){t.stopPropagation(),t.preventDefault();var i=$(this).parent().parent().data("layer");n.switchLayerVisibility(i,e)},s=r.length-1;s>=0;s--){var a=r[s];if(!1!==a.get("displayInLayerSwitcher")){var l=$("<li>").addClass((a.getVisible()?"visible ":" ")+(a.get("baseLayer")?"baselayer":"")).data("layer",a).appendTo(t),h=$("<div>").addClass("ol-layerswitcher-buttons").appendTo(l),c=$("<div>").addClass("li-content").appendTo(l);if(this.testLayerVisibility(a)||c.addClass("ol-layer-hidden"),$("<input>").attr("type",a.get("baseLayer")?"radio":"checkbox").attr("checked",a.getVisible()).on("click",o).appendTo(c),$("<label>").text(a.get("title")||a.get("name")).attr("title",a.get("title")||a.get("name")).on("click",o).attr("unselectable","on").css("user-select","none").on("selectstart",!1).appendTo(c),this.reordering&&(s<r.length-1&&(a.get("allwaysOnTop")||!r[s+1].get("allwaysOnTop"))||s>0&&(!a.get("allwaysOnTop")||r[s-1].get("allwaysOnTop")))&&$("<div>").addClass("layerup").on("mousedown touchstart",{self:this},this.dragOrdering_).attr("title",this.tip.up).appendTo(h),a.getLayers){var u=0;a.getLayers().forEach(function(t){!1!==t.get("displayInLayerSwitcher")&&u++}),u&&$("<div>").addClass(a.get("openInLayerSwitcher")?"collapse-layers":"expend-layers").click(function(){var t=$(this).closest("li").data("layer");t.set("openInLayerSwitcher",!t.get("openInLayerSwitcher"))}).attr("title",this.tip.plus).appendTo(h)}if(this.oninfo&&$("<div>").addClass("layerInfo").on("click",function(t){t.stopPropagation(),t.preventDefault(),n.oninfo($(this).closest("li").data("layer"))}).attr("title",this.tip.info).appendTo(h),this.hastrash&&!a.get("noSwitcherDelete")&&$("<div>").addClass("layerTrash").on("click",i).attr("title",this.tip.trash).appendTo(h),this.hasextent&&r[s].getExtent()){var f=r[s].getExtent();4==f.length&&f[0]<f[2]&&f[1]<f[3]&&$("<div>").addClass("layerExtent").on("click",function(t){t.stopPropagation(),t.preventDefault(),n.onextent?n.onextent($(this).closest("li").data("layer")):n.map_.getView().fit($(this).closest("li").data("layer").getExtent(),n.map_.getSize())}).attr("title",this.tip.extent).appendTo(h)}if(this.show_progress&&a instanceof ol.layer.Tile){var g=$("<div>").addClass("layerswitcher-progress").appendTo(c);this.setprogress_(a),a.layerswitcher_progress=$("<div>").appendTo(g)}var d=$("<div>").addClass("layerswitcher-opacity").on("click",function(t){t.stopPropagation(),t.preventDefault();var e=t.pageX||t.originalEvent.touches[0].pageX,i=Math.max(0,Math.min(1,(e-$(this).offset().left)/$(this).width()));$(this).closest("li").data("layer").setOpacity(i)}).appendTo(c);$("<div>").addClass("layerswitcher-opacity-cursor").on("mousedown touchstart",{self:this},n.dragOpacity_).css("left",100*a.getOpacity()+"%").appendTo(d),a.getLayers&&!0===a.get("openInLayerSwitcher")&&this.drawList($("<ul>").appendTo(l),a.getLayers())}}t==this.panel_&&this.overflow()},ol.control.LayerSwitcher.prototype.setprogress_=function(t){function e(){n===i?(n=i=0,t.layerswitcher_progress.width(0)):t.layerswitcher_progress.css("width",(i/n*100).toFixed(1)+"%")}if(!t.layerswitcher_progress){var i=0,n=0;t.getSource().on("tileloadstart",function(){n++,e()}),t.getSource().on("tileloadend",function(){i++,e()}),t.getSource().on("tileloaderror",function(){i++,e()})}},ol.control.Button=function(t){t=t||{};var e=$("<div>").addClass((t.className||"")+" ol-button ol-unselectable ol-control"),i=this;$("<button>").html(t.html||"").attr("title",t.title).on("touchstart click",function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),t.handleClick&&t.handleClick.call(i,e)}).appendTo(e),ol.control.Control.call(this,{element:e.get(0),target:t.target}),t.title&&this.set("title",t.title)},ol.inherits(ol.control.Button,ol.control.Control),ol.control.TextButton=function(t){(t=t||{}).className=(t.className||"")+" ol-text-button",ol.control.Button.call(this,t)},ol.inherits(ol.control.TextButton,ol.control.Button),ol.control.CanvasAttribution=function(t){t||(t={}),ol.control.Attribution.call(this,t),this.isCanvas_=!!t.canvas,t||(t={}),t.style||(t.style=new ol.style.Style),this.setStyle(t.style)},ol.inherits(ol.control.CanvasAttribution,ol.control.Attribution),ol.control.CanvasAttribution.prototype.setCanvas=function(t){this.isCanvas_=t,$(this.element).css("visibility",t?"hidden":"visible"),this.map_&&this.map_.renderSync()},ol.control.CanvasAttribution.prototype.setStyle=function(t){var e=t.getText();this.font_=e?e.getFont():"10px Arial";var i=e?e.getStroke():null,n=e?e.getFill():null;this.fontStrokeStyle_=i?ol.color.asString(i.getColor()):"#fff",this.fontFillStyle_=n?ol.color.asString(n.getColor()):"#000",this.fontStrokeWidth_=i?i.getWidth():3,this.getMap()&&this.getMap().render()},ol.control.CanvasAttribution.prototype.setMap=function(t){var e=this.getMap();e&&e.un("postcompose",this.drawAttribution_,this),ol.control.ScaleLine.prototype.setMap.call(this,t),e&&e.renderSync(),t&&t.on("postcompose",this.drawAttribution_,this),this.map_=t,this.setCanvas(this.isCanvas_)},ol.control.CanvasAttribution.prototype.drawAttribution_=function(t){var e=t.context;if(this.isCanvas_){var i="";$("li",this.element).each(function(){"none"!=$(this).css("display")&&(i+=(i?" - ":"")+$(this).text())});var n=$(this.element).position(),r=t.frameState.pixelRatio;e.save(),e.scale(r,r);var o=$(this.getMap().getViewport()).parent(),s=o.outerWidth()/o.get(0).getBoundingClientRect().width,a=o.outerHeight()/o.get(0).getBoundingClientRect().height;n.left*=s,n.top*=a,n.right=n.left+$(this.element).outerWidth(),n.bottom=n.top+$(this.element).outerHeight(),e.beginPath(),e.strokeStyle=this.fontStrokeStyle_,e.fillStyle=this.fontFillStyle_,e.lineWidth=this.fontStrokeWidth_,e.textAlign="right",e.textBaseline="bottom",e.font=this.font_,e.strokeText(i,n.right,n.bottom),e.fillText(i,n.right,n.bottom),e.closePath(),e.restore()}},ol.control.CanvasScaleLine=function(t){ol.control.ScaleLine.call(this,t),this.scaleHeight_=6,t||(t={}),t.style||(t.style=new ol.style.Style),this.setStyle(t.style)},ol.inherits(ol.control.CanvasScaleLine,ol.control.ScaleLine),ol.control.CanvasScaleLine.prototype.setMap=function(t){var e=this.getMap();e&&e.un("postcompose",this.drawScale_,this),ol.control.ScaleLine.prototype.setMap.call(this,t),e&&e.renderSync(),t&&t.on("postcompose",this.drawScale_,this),this.$element=$(this.element).css("visibility","hidden"),this.olscale=$(".ol-scale-line-inner",this.element)},ol.control.CanvasScaleLine.prototype.setStyle=function(t){var e=t.getStroke();this.strokeStyle_=e?ol.color.asString(e.getColor()):"#000",this.strokeWidth_=e?e.getWidth():2;var i=t.getFill();this.fillStyle_=i?ol.color.asString(i.getColor()):"#fff";var n=t.getText();this.font_=n?n.getFont():"10px Arial",e=n?n.getStroke():null,i=n?n.getFill():null,this.fontStrokeStyle_=e?ol.color.asString(e.getColor()):this.fillStyle_,this.fontStrokeWidth_=e?e.getWidth():3,this.fontFillStyle_=i?ol.color.asString(i.getColor()):this.strokeStyle_,this.getMap()&&this.getMap().render()},ol.control.CanvasScaleLine.prototype.drawScale_=function(t){if("none"!=this.$element.css("display")){var e=t.context,i=this.olscale.width()/4;if(i){var n=this.olscale.text(),r=this.$element.position(),o=t.frameState.pixelRatio;e.save(),e.scale(o,o);var s=$(this.getMap().getViewport()).parent(),a=s.outerWidth()/s.get(0).getBoundingClientRect().width,l=s.outerHeight()/s.get(0).getBoundingClientRect().height;r.left*=a,r.top*=l,r.top+=this.$element.height()-this.scaleHeight_,e.beginPath(),e.strokeStyle=this.fontStrokeStyle_,e.fillStyle=this.fontFillStyle_,e.lineWidth=this.fontStrokeWidth_,e.textAlign="center",e.textBaseline="bottom",e.font=this.font_,e.strokeText(n,r.left+2*i,r.top),e.fillText(n,r.left+2*i,r.top),e.closePath(),r.top+=2,e.lineWidth=this.strokeWidth_,e.strokeStyle=this.strokeStyle_;for(var h=0;h<4;h++)e.beginPath(),e.fillStyle=h%2?this.fillStyle_:this.strokeStyle_,e.rect(r.left+h*i,r.top,i,this.scaleHeight_),e.stroke(),e.fill(),e.closePath();e.restore()}}},ol.control.CanvasTitle=function(t){t||(t={}),t.style||(t.style=new ol.style.Style),this.setStyle(t.style);var e=$("<div>").text(this.text_).addClass("ol-title ol-unselectable").css({font:this.font_,position:"absolute",top:0,left:0,right:0,display:"block",visibility:"hidden"});ol.control.Control.call(this,{element:e.get(0),target:t.target})},ol.inherits(ol.control.CanvasTitle,ol.control.Control),ol.control.CanvasTitle.prototype.setMap=function(t){var e=this.getMap();e&&e.un("postcompose",this.drawTitle_,this),ol.control.Control.prototype.setMap.call(this,t),e&&e.renderSync(),t&&t.on("postcompose",this.drawTitle_,this)},ol.control.CanvasTitle.prototype.setStyle=function(t){var e=t.getText();this.font_=e?e.getFont()||"20px Arial":"20px Arial",this.text_=e?e.getText():"";var i=e?e.getStroke():null,n=e?e.getFill():null;this.strokeStyle_=i?ol.color.asString(i.getColor()):"#fff",this.fillStyle_=n?ol.color.asString(n.getColor()):"#000",this.element&&$(this.element).text(this.text_).css({font:this.font_}),this.getMap()&&this.getMap().render()},ol.control.CanvasTitle.prototype.setTitle=function(t){this.text_=t,$(this.element).text(t),this.getMap()&&this.getMap().renderSync()},ol.control.CanvasTitle.prototype.getTitle=function(t){return this.text_},ol.control.CanvasTitle.prototype.setVisible=function(t){t?$(this.element).show():$(this.element).hide(),this.getMap()&&this.getMap().renderSync()},ol.control.CanvasTitle.prototype.getVisible=function(t){return"none"!=$(this.element).css("display")},ol.control.CanvasTitle.prototype.drawTitle_=function(t){if(this.getVisible()){var e=t.context,i=t.frameState.pixelRatio;e.save(),e.scale(i,i);var n=e.canvas.width/i,r=$(this.element).height(),o={top:0,left:n/2};e.beginPath(),e.fillStyle=this.strokeStyle_,e.rect(0,0,n,r),e.fill(),e.closePath(),e.beginPath(),e.fillStyle=this.fillStyle_,e.textAlign="center",e.textBaseline="middle",e.font=this.font_,e.fillText(this.text_,o.left,o.top+r/2),e.closePath(),e.restore()}},ol.control.Cloud=function(t){t=t||{};var e=document.createElement("div");e.className="ol-cloud ol-unselectable ol-control",ol.control.Control.call(this,{element:e}),this.cloud=t.img,this.cloud||(this.cloud=new Image,this.cloud.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AYRBhgFS4lkHAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAA6lBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Le70HAAAATnRSTlMAAwkMDxUXGiAiJSowMzU3Ojw/QkRGSUtOT1JUV1lbXmBiZGZoam1ucXN0d3l6fX6AgoSGh4qLjY6QkpSVl5mbnJ6foaKkpaeoqqutrrA/NNYeAAAAAWJLR0QB/wIt3gAALhJJREFUeNrtfel6azeuLAryd9//fbuFuj+IkYtLkr2902dyEseDLIkkiKFQAET+h3/gH/iL//v4Xy0w//Ul53/xJcAHq3q1WHD+/9feEbH+u3zw7+4H//Jpg++2Ctc3cvwT/gPSwX9U3PHhfvct5H8RDXE8r+/dirZ8+Mrg14AQggL252R8TfAf3oAfv+DdH2K+yvv9Zt+H3xWEv64Drq+HswDcvih36fft4N9Y+usN+HPZw+nu490rtC1Al4A/vQy3f47fXvd19Ygrn7bijfYbB94lgL+wAfsK8X1b9tHqh/Dv/7vRpGy/2y+E68XfFwP8vnJBlwB8bgSPBnCqAP6+cfxdJejiPZZ/kALmZ97dgnH4/Yvf3gJ8V/u9/D32he/2b78FtxIAXkWAf8E0+tvkDxd8v/yuBHDZiRQBvvSBt8Vf9uFv+QGvD/nenuCk/ptLEN/z+DRTBXQJIPjnUnBePX9LB1xkPxZ82JOXB44bK5Ar50E3/qetgLTj3RaNzS/wt4DL0nGjDgn25XKeP//o/DcvnT97Ipci7NYfcl3+JRwmuG1G+1VX+9Ma4BfVIf5s//KcQfRzxnQBLzEBL89bC+ZZD447QPCzHXh7rvuZfNsNRPvX/0+kdpn3/wYI4ulbXveAu2P8G4ESfkP3+S6eRf9kC187g7xoA25bcNyQ/8AGoEtAN3Qp+oRsNuH7e9AVAS9q4M0WfHgFfmZIEGeLoyEsNwvnV8IN9uWaH+4oUU5bcNWNP9Nk+JPjx77u7gPy3v7DVQHugmBej3/swCFG+KlTgD9eP2S7ATjY2NOG487tPQEiww3Yv/4TTYA/uf3t6ImuCgjh4eyH5wnB1fzxhUrgi/9+HijjJ84Tc/G7GsQ9Ajos4/pCxdRURGwsBwfP6PbQe6zAH+gB/Fj81ycKDlYAvF776w3Q+sZ2L+d4Pe5Fnz8OEvFtzVmaf9cBuwo4vET/tVaqzLcgfJsXwBBvrsCPtwAfq8ymNUsCLn4AXjz3epyaqNXqkXbdrnpgftmN/3EHtg389VigbjHm/S9P+LT+TfHrBhao1QGb78bJFG4mgHfKkX/VCnRtt/uAtzhY+0bLC/DVNx0otGkKpyHctcDZDJDf0OjfBkSwiz+OHlH7H+elbw/S/sRhBqwFh7w6CF0L4OoX/cQg4puPxTj+viNyFwutU5YRIOvlyc1Pz9T2SOiAiF1Env17yucXGz8+/yYFPeRvMZCeZO1y+G0Lhgq0HRo/40K8LP97qhBDx71+qLt7S9UhIBC0gLjQEDVdpgMDAuiHX0c9fAGCZXNMXkYBmyR8LANtqR+jwtjV/6YP60sXeVzyJSUVmwvUv7zgpHbYgT0C6Iv/pjHA99X/UQ2WMOgFAmvnPdaPWq+1z8MKLmVobXHXLBG7WWRYAv7xBlxjf5x2oPmG6O7di9uu9ZhYkm3SsJlBEwrByR9IuIgnLfAqyfvmCoR+5CXrARnrH6in+3kd+9Hz6neAiLEDdoMRsaKlg3vEtglTD/LXrgDaIa+lX9Jg8OimvGE9rr1FBGEfjZsIaHyl8Ws7+LpxStyX/60dwGcKsMt/vwilIFL80deq7W7rVCd5WyhipCFvr5qKxH8itvyDGwXPofs2Vcj3Ch4f6r+pAUfck9+E+Ovu+vGQRFuWAn6CT77Q3CZkMwZX0IQXA8B2K17bQ9wriWKV7KePif8h7DuG/6OWGnGQEsMXQPwBSeN6vxCK6XEHxHT5SjzklEPrcSrFe5eoLe4TEcAu/RgpULhmn+sfT09cLENoDZLyDEewHVpzlCxWYud1cVt2bMcnMvA+YrpKwCUK0nGzu6Ef8h/BAWRKgAlJsbEBOh2EsQOn5Nmm/yhdOf6RFYh1X86/7n77oq0+cXFu8XDlkFwJkmsHSnNr6cd+8PlVBDK8wiFs8sD3cQHeQaCXm182sDl+mKu/wOBsYcAEUvLdkib0ZLEKEAFvyUDbgXPylBcF8F4Gvjajeu8IYMd20E5fp4sH8ZVgcwDZZWf32tXKuWwP8d/536aPQH+VIBesCKqhjOD65wdXoCWL8/SRi3YB6JZfC+Vs0R/jHtB1f3iNGHBoOvCpBrBe0WSIQI9+rDvLF4CAuwDwpzpgu/fTDUZfv+4p0BXFFLscTfmhpQXhFyBd3rUD2gAC63hBrcZELfmTIzfA8c+Gkh1Yje9coFKBaFEB+u3X9Ah0IhkzMHLktECI/GSId2qirkuaUrSePNiCSMqASSm1n3yvCN9uwLYJzSdWgQjU+vpVBB3ZCzuIipIB1AWoVHcthuVBr7zZ3IK5C3bNmxBj7XwNEb2yApf1dwsA0dR+mqKAfk1baZBahsBAWEHCRCgIGLCUm7Q9kXkRuoCNjePGJPDV87VH+LpoyhfddUCqaG3XH37G6KbZDjFwdyhEBgLaw+EUEJuwoB1zabajZnnz8/xf6EF8SwOiyX+Ygbb+rtrBFtwOFg2UIijQD3WhfUMgh028bOwAUW3qe7b1v1YD+HT9KQBwJe1qUFE3PLyXOhwV08Wa6k/akFgxZYBgtjk3GdzoOPNtB/aLkPkRDkXAW0//vQtc1z89AF23IGMgnQDBcHHC9nsiWcNFHuAOMuTdT3yHT/vjrE58vwi+A6ECbkUA79bfRADhwELT/EU0hJkYnJyNIFE0f7jOfdNpWR5Bgan7/e307GoWNg1B7jvwSgvg8/U3k6DuqqQAzNRgx6p35vAeJ8OO+V8hCzDy2rp4ZmPLqDfZXyiSdN3Xd+DbG5AW4MX6h/5HMiPqAu8gkElHDsNR3thAHc4DhQRIQOiPt3DubHOGEBnm2IGuBM478PVCA/YvwslHrLcZN91Z0sQh++qaDJAtlVKxmFwLg3JHlUJ4aKGGARxYulsQqjl8vooxEZmmm7gI70zA0IPuAqM5AO4Q5TmrFQeaDQbT5uWslWoJefrwWjrOPB0XSmGDyZdB0O4h5gUKgK2fPm8y5/hg/Zse0LSAaycaPNhimHasEr8RS9QQBammdC5ryQn8YQTMiX/a9AQrqeTbk9HA3IsPr0BP9UzmDwb4h5EKuENYM3YTanAjEWxKFYMz5VAsE04nHRn/O9Aw/i58bUtmqq47sV6rdvB4Bb5eUQGwITgYYKavH5gs4QIznUJGzyUz31/Ax/RAGhk7Q8iVdh46lE5EdEswyovVDmmYoNnmw9ESa283AOPEJzMCBfpjPEKtgrhWm++xQ7vDlk70MvaeHYCIedpdBCTit25LSzocaU9lF8+79AHapqQIBPn4WxJwiQFaKKwjxlk/6Xn/YpSpw/zETI3qhXJE0RXLpuJfr8pO6vW7wUPpjVY0SVGjXwIpdO64BXrvHEBmQrBUvha84c+t23P6wauKKJrHB9b6NWxCBEoQQKHuVq6wmRFAo0OxAMY1POv1JoCYUvhSAnAgRJQBiE3T3QHYuACFks9dR6oOiVvj5tAEMFBEDSH9hau7GSa6NdsOdFBORrU0KHcigBd5oMCAUB7AsIDa9mdlerXwu3zP+Y4LC1AClUOmwwj+sGWxCcZ94GRTEBbG3WQgiT0essIDN4/4Mx0wZWGjBlbwh3mXVJA6mYM5ysUoL2WGdX1XTLRuNVxVgQ4e03e/7CDErZ91uJX5onZmObSzf58dxoDCKwhcJx7Xd3lAjR2a16LC9QiUV/zmUbCujVCIZBZUG6iFBDG4XP8WUrr/T1jHj2yXASalZAYCPIoAzlFQk/4GgoQVbOtvGXEtz9USI4bQwFB3LvoAEFdTe/zIugMjvJVqvkELSCAhIu7Qef46n2nsxWuCxOX2o7nAkQLw3WiZ8cH8qTAFWAFqpbsgXKIEESEBJ9x5fNMd19oWoiUblniYRPWgxZn3JGJGxUMLHPDRr3s/UHoisAygykaQaM4ukC69mIMk1HR91CBCqEsVAxkMGVqhW3TXudbXsNqwuFMc+j02yzFFXnkOd7m/r1snUDDqwrSFgE3+Ly6FiznXHyxRN4ABGoFaWaGAx5vFWzsAoTYe2EAaBIUfwZYKBNMIYsOPI4nI+ucTV7gyool5uRcMLOdmowOp7I0DsoBomX0VFVvr18ErZYVSK2AAhupzLhocJPLo3g9VF2ZqLmmhBEMS0NzA19nhqxvYHSJos/+BAzU+hGlvlAYBQ1wBQoVUTXEFREylKivXQ5UioJJbvU1kfZmoh2SkN3AxyzvQ5aF5TUdQ5Ot09kUIdjuo0jBwbRwZjThkT2yzvEiuHaQu+QY048I8/YwHBOuBtpNrHA4qnWEjBOCVe5xxcITgx046Xy+coCbnQE8BAIP1nM5/B8DoADg8tOvO+FpevitMeMTlAXl5BSbBvA7dSFGDzRTz7g9jZqhjx/lWCS5orZEjlvArPJbBDKNU/GzX5VWKQOXpIYyAK49Mq+xpYuQuK8x/47wnv2g5jEs9MjTlSJIN8usiG8owAfgoLwDP3dYnWSEaIqzT+IUGWUPT6Wf6uar6pIjKA4uspSLC5wI11BWYjruuvf4pQ3jptnxlUpejszhFlkmAhhBbJU8CQSt4+IIPfx28QNltXKd/TTKc9rRHevAKeQoEqqpitsQA5gpTDCsEgruOy+5l8A8mAMEsMhbz66DLGDgHxhxW6cWGSyuENswkfShA8KUSDMWzNUTSjgfOPYhdW/4Oirsj+pUwAADq8nxBi/C+LdXfmAawLdVtIb4hNtO+VRf3eCisIkZE6Xs1bMHXDRpUdIa0/xXPNk5Id2HcXidb4LFeys3n02MIo3oM7GBYODrhBokoG8l2YYHsEWPAXhRkjsT3b4EMtifcIvK42sGvCw52YYNoRsDqZr5yAuxlsiqUh7t6D/PACK4EDVR1G6+ZJWrKI/lVWjBmRFdbDxJrfuGGjtgWJA9Y8OQMf530YSMyhg+gkQNHX/8oElN3mLigS8AgX/JcCtTUFi+AucmmAfuFYyAP1n0ABGINFg1SXMDHK5jqF2BjGasNC8COEPBGCYbgaGM0tF64uLpMRDgrEACPhW4aKKaAUKjLw1MB3GJ3ZwmV9mlp4EtubaHEy3awu7lsWIGaXv2g9pS8LP/oCWLEROEEllpUv8wZKDnUQRUAut6mCB8al7GIRISpLWBgetsEQ6rY3y4k8wTSTCQKGKZ7SrZcEtvhIA6+7ntPcNRBJC8yaR7O7XkM9HXtPEQB/TILAX0s8GRFAR5A8PHvFUl5/ibeH2RofFeoDo5ZhEQWlDOb+syOlQBX6BxXY/h1Xvt6G02gZiMUDbvFZSSqFpxP/fr3ugR4qkC1AAQRCEwFcCEJT1dczYOiZKstdv9fI08OApYM2YWuJCktPOSwhvR9iktyTg9/XSCHec91EqA7DO92mysUchqsiqgaIAqCAL6IQn4BW/QqwwAQKhVSyR8HBrC8OYiApJWzTy/kJOCsg+12r/yInHpxnv2AUQYhk/0sED5S3RXHgw9b6D4d6HvqgryEIlT10Hc1DBBg5XfBpffZafMVClM7NWCJgV+HiqhGkO9ZsQsl1qaR7PnSePDXNR+CTdFrlbo1qMTfvSlV5evZ7iMVFK4IAmLTutJRs0SalvCv1C5AbaBPOYm2frmcxPUDXUxMpTqanCxTG0EhhwrYWExvkqMj3+3+UKRFk5tuqiKWDROXLQapDpvp0/WAqAeGg+wQd84JIPWiSZYHherukBJcxKm2oUGBe0WNn227G56yKUF0p4st91GyqpEWDqTCKFDn8CwhMV1BpSfAHnH8y8OlrpC5x66sWuzRgnj3CQhd3rwRKlweP4JqFUB7segOXbrv/QD0OohidfNxVoH5nABpEFFYS6GpiS1R0S23hIj609ZJGXY0u+VqX1rbqQrWVuhFDZRIRWwFUZ1hDBb5brLtjmawwKcO9ZjeIglrHZaVjgp3XIAIXHoat4DqTPr7HphHmuxoMQtCJhp+ZitCUpguX9ixD7WVmG+YEDe5fwmKMtD65v364hWR5dZO40R5MQHLFcXBgZ/oNqRN9grTXS8GD4BjV5cOXUBYB4yTbmSw8iyWQ23OjWGXfn2OreCrvACu7T8hG7NhoEeP4nZH+dPj62vlQEhkriwANhWI+eVHZkSjHaVGCNL6VFXOEOkDZ/akPEKWIUTPjgjFjh2ZpiLYrUBHHdLY2SPUkWlGZelf529X1RcgBjM8YI9lO8AHWmvdUaIQDlJb6CKKgI0YAsL6z1Y8JYQ+x9JbVAxudLVuEihvABFecj5aSOjC9AlYI4CJCOSpCOh45b8U5QUzdoDd1qBBX0uLFggtFIhle7bkDKl1+WdkZuq81dTkTJYoT0gujhBq9Ri1gO1NWe2ATYFZ4bsGfORcikgMrMQHpoptrXaoKzxwvFhG3pnlyHtVrBekRRJpfVJyxkZqm+TPkHC90BYMVTBADIQhIgVvfKR05m7mbVXLbSOS7wdRKrdIHw3ty+QXyE6tb52EkANJXArWjnnS1RmDcf0/7R2ymUEc5L8HgyW3NnoCZC4IoEGFMIW5ylb2NBJ45SAiopqgxZabL1wehDUOOsiEGCgUfaaa4t6rt7VfORdEcWeJFecLhz/DqzS64Ov/Pej1jnQoUJEEsHG1W91J/RRIWobTRxiOZNVqNrpycTiaq3rJWI/ewzetDnWTClwl4qRIzRrnnSLC55OAqgihD+gS1qgQY71zlUa9Lsyl5WP2KhX0khNpmPSiy3mQ0lOVJUdbDcdBEnRj4GzJEJyuTT3iERyi57+eoQLUQgYaxBUaS1r5FLzoIHag2VbMEjtsuZsqX1iEwdhn7Q0Kmtu+l7LgsAHcz553reB3zfBQKp+2yt9pTKJSZKIGNQwbCVFRqRbdu/EFTYQywZoswPNdVXQmd18H9xkf2KVbBxNOZhmPJs+9Cjvc6C4vzQyPx0P5pH499EF7Cs0pnhzmp3FfixwLzas6qq6LmhYKgx1SKCLqgiGHC4vPSqIKSZ6CQZGbgQArxyid/hR5ETWu9CO9RFpFCHNE08muwdpulL/lwxCarm1cHSfKZs0Qk0HQ7Acgoou50WUHuIdKD/13vw6FLoPlonK9S4pEqPlv+RJR+Zc8SDxE24HQSU8ruOlBU5UXVkU9u35oI8j84ltz4Rn5IlbFxQJaZ7mqdU7IDgQws2l7NJQ/0KlFW3+LUE8QCP/1b+pDFSuH7bos3FZbNU+7MdlebWVLRluilHzMfp0MkGjntUB4JX/jYrH3N6BTxc1sFzc/gc0BGk0F//3veOASWMAZc7KNUkFeIzbYc4kwPXwWDi3WHJN2LXClp6MTOvSq+896Qe+3qFiwaNyJqadKVhI0sFgKVCGuHbZt7l0yWgXGsFGuSrP+scOk2IPbRJhcPW9M51ZkhtGVdSjBuUMDB0C1vdpcx3VNvr5UHg+BUMyMHLob6AxdJPvfVTzzhKsyNy0p/S61guQpoVtBuo6l6LGdy1Tvekea3+v9xvAAVFNpIJKcCpqIGE2K77/Uf4trYm96hzh2t4f+MSdWIHkyHLJq1XUjKX2J5MthogXu3JrLCE7q5lTxICeW3Y8gT7rS8xRRrxq8NhwGFmoYAlEXHNNa9frnKgALgCx6V0Q+PaksEiWteO0P6PAL9rdJqSfa0SWG9AJiJlEEsfJCQHQ19OMnefVSjKnw1TcYpDOiubWVTs7z8EhMOld9rAmhEfCKHqayq/nRAM1F3165VVCYPHqM1hI1VgkQKaJ0gLBoyjZayysiGRg1j434HluzdVPwCLHKj7oCwEtAQG9jnb4Vm6r01lfxa8+MWG+8Ll5foQNhxSJ7SbdwGI3ZmPrflYN5Ms1rBQIr4NZWNaPCFzMcjluhJyO4RctoHMJRxJAqXRewuaoDWsuvPe3fiMCUVVQmQR1QSmPENF6pzeswyA4qI2yccR72gs/TFugIlqd5uQsMrRIYzBMr8ve6AsYLnlJoBtKDJdHKOLSbjkVEKSMa5RMkSNJMZhIbuikBhdxE8zjoAI6AACcwfd+B1uGDxifNHVpgWYPYoARmAA+ZvFYUHNXC/SL4ZVCEiz2zRrtOVh3oU29vcHK+WbGnjl+zgfUjoOLcsFGP4BrBOaihvBq7S8Kqe4o/Qoai7wBVQYlLNhetQ1ijBHh5lmoL1j/oD5inz/0KTC9ghgI4tPIRmmvo55O09b0X8kHkXKjHlvu7uGVs/WsDU5idnkhyzFc4Ni8ePZfe7IuerolnfJrM1y+qlovZIYE0s+eKcq3PQVi/m+0EwjVgq8cqfd6BMxvEJD2FMaGZ0x/rDS1ThQ+dts2303uwZKnl6mDottia7NMLOP3Wrg8LpQbpxtu/JXtVGvYRBCu7zp4jQOk01vUnnBbU7BI2EOTQrLzA1asjdHGTx3UgT6Nfe5GgxQPdSxB2hkJFhWzC0U8DGv2pfJUa6X1s+tysgYSsrstsiXhtGMYrjFtPdsLr3tyTs+Dguzk2k+rjImZCMQJs3hp6ABqanYkWV7BFCSoTMOc1QlUDPXAPw5HDVhuF3kKpa6gdGj2D/6crwAw/BrRMs/Yrq0NY1LVVM1wePKU3UeHop3KNut2dUj9ot6XLLW7906s2QfMlOK3RaF92owG35hAnHdAAyyi8wAr8eJoAseQDaAY/uCYc83DYRYNsFPxCgVFZEhWot+x6BDWcETPaZr6rXLRYkxdg9OQYnboPMEa+ZJ8W5/8GPiPWsuzLv2+xARwUkBKDdLOWZURvpISpxswICPQRjRRctTsnsnlFJjfO8raqWWeBOzN4N/cySnEoZpYnWT28PN/VwPw4SkLZS58rnZexxWTcmNGPWF29wWtPAzNgVKczjiU9q1OkcIL8uHVv0g0v52ZFOG0JszNPxIGNizWB3iqRdT3RKHepUONzN5JeZA6KZiHpAloAXgAr6bqn96PWnsDuAAd32GwPWLgNvpDe2rp61Vp0BIXvQLnwSSm57Gm+gcIFl8owVt6XoK6q8tC60FWz55rfTpNZSROxU/xyqJvd86mlLjkMfyvOW+rfGzhFClC6hyRR3BcahOVBrwueuBeltUBm0uKjOH0RxFRhdHvY0swpKrN3NkdrvcLv9brmm+xwa8qbQIeVnUXrbD36GFXur26yCcy8pxcHXZvsBQweJZmUe+y19kvVBt84jwSkraLBaLfhvcMoT9n9AJUD5TTtELsO2Owke0fArioocuJeZS9vLpDULZL1RmaSlZy9+euK9oEONgWy8lw0i9ZgtKuf6sXXmhM31CArshQXkPMa3vZ5DOxd2i38nvL8AurI+zgHZBuNNEeLWZ5TOWU98gwDhpZ9dbJTIGEUCp9Pm5g/yegnEZ3Zj+n/Xps2MyK8C4YwDKfNIfAcXSnmgBd/7BqIwdL06e2G89ObPiTw6UbWyFVeFhHAeoqHKi16r5LZaIWkRLhpdvbxe2yKi8V/NIY8WpCGYmN4wYLhYk73afOt5qpiXTSaQdUbRDrTAjT3JgII35jBDbHWfJ37oJ2sBEZjP3IMLyXOk3CvmOApLOIIieQ6zssicYcoad44N8j65/Zme120zUhRu+WAiNHM8plHNxQzM1riDQcc/NxGE/KaKSo37FnzRicipA7/TliVz43cnZ3wWqVvdj+Rdkg1lYDRVm6BiqKLii+wagnJU4A3zLITp92LpbyC/nXflG3W85iAZBvotI7JTm6GLVc9QZNWyS6zDUq7EwtPWWdO4GmuJO1J2lK/RkOlFI00l0EdQdExNU5eFtiuAK7j+vpts+YcO4F1Ovq9QaitJAloLYyWggu8E5jLcigaPsmnkfY0kiAeYtFqx0RMnmsGAy/YH3lI8lxb7x9l4CGdrdgbSPWfrrNsPGJWGXl0t5Pst1pMP68QpVzm0u4oLCjyNPotQG+iJDQRWzyksSpXQW59GxfDPxmr4ewFmL2Ew9zUxjbvNDf5CCN479/0mVdazApI6+LFw3RQmsA8gfpQRwJCbMznjdk2YYK1/svZN/T8SpQ8B0PcdOSY9Rp2foy5YHEarfM4XDNYS4tw4X/Fk8kPEXuupXBR/lQ9CLI1eEaell6HNSgpumpYK9ijjGuJoQ62EXucV2D6Aa2LZvb5aV9HJDcnjhBo04WixgdBpGiPzy6ijfhFERXVJT4U4/PpQSchlOcKGNJJtVYD4/xSaxnk6c82dZuOXGxM34ArYVd6HxzWTzSbrbSpM9Eepjke+b0bQGA0EnYH1Rjk8OgPAnsaF4PCWzS7rK/ap/REI/Nic9ZcTCik3PTRbJ7RcQN2EYheiGzDpWJaXOfCowVT3kLHoVXWM7IzmyKqE8s2LEaBPK3QANPlFBBb3NPkXMpjrBTzKLuvEHyGBF9Xh+fgBxGm2CYGEo1g5OTH1TCB2qdhRZKQICxKPNzRc1eYFK7GyFZkpAUTUAgjzLoZzX6BDbOyFnhtPo2MlvWbFnx0LLgdO8ZMZb/3bNO2GMyW9ACCu8x23VGdbZPNyGyRwyvLN7TtahjBpu+qNnQZuLhKS84sVmeFjvCQBhBse/CQ6x3o0zRa3+x2OzTbq5Q3HBTRUcJQdaKjZlD6yJCl/1Ujlo6ooXjnsg3dZN8oL7DhjF4zBs/MGyZ2cYwFsvYkGnT0GrrIxBafRbP4PzANmGKBue3Uo9bIW2UVSYYol2DBPg76LOtd/y42hEXv2UNnNJteRaBYdSM4f3+8AncTZSQbFaTmZyQzMIhwUQ05/MlsCdFqPhDzDyrIY+EsthoL0zztZ37BE2uMXnP5ow1pQ/N6wIH4XBynx1aM0aB7bLOlEUuPDvuQy+TJSNz4HjCLBQtXhIx0c3pGqRbi6tvCBS1dJiQRY/YBYUuAY9aJswPacrUBezjMMR6QO40+aonDNeJWsBlcuAV04GGr00EoidUFZ7VEKaXsobVDgzbzD0v9geRqpU6WTVndsgKs6HtS+dNYP3vOk/KylVbR34Ds/XGTROsJZ6LU9FKIFnrf7ym8ISYbJrwuP709lPq7M+mTogqh5/24nKEY1C56YXTkPgMiHOcdtYrY/YOgURlOspMdX3ufH0YbFXoDOCYIumyEyzeyV3YW3XAMHU2g1hPu1U4oWwadG4zveRmedECzgNxHrLVOi56mS1s46fWQrd9hEqcxBkwVraWSj1LFICkAzfV13uSlHrYczzqKkHgrTcMzLrRvwDZctbWZXi3q3RrsflIv3GgjCSv9y1nS5MAuTFpg6KGmgZZ9EBkLMQbmmNAyqscYJ7KQzRXHLAqeppBeN2DrLt5+1lrcT9xko6ChmCCtygXzolSgPBjAPoW5wE9Wpr5hwulyJrksPT7r0G2BqXcfDzndAdmjYu9ygGB0EFKNA2XnsQ4fPNjw1evaq8BWZVnaqewC/3TyaBGl6wrM7nFsABC6v1+Y86Xr3o4UXzbgtAvtiyQ/ow2ZwLwFbK1JZbajK+x4rL3cftCYoVKk4jhQqYa2Dw6tVAsVBJzfcwnVTfROBxyHLF+67WfZh3LUtbZ+sCoVPEtoRUHPWjDP1SUD6eg3tKj116+2qtzJXhhob5BHeOyx9voK9AFLHLsQNzqLlttVuJSCNK8yZaF5F5Fih+Oszcz3hYphpQM6opx5VIwSvB3vAx0fYgdXW+Lz/QbIac4ussWZ9Ir3PP9o6ZINU4HZh67NPbQcBGXz2AMHDrZhQdzgNf+5iEUouLBiI3Zei9xlR3ZXmK1hEWs6kr9p3R6MYid2uubqfUBYFIa1hskTJM7kzfCpOaZOzvmNBA/qTK21EOmuwo3KvJOAZsW3qeM13SY7okUP3bTz3i0TwRsanfMRlUAoldcmKVgWyNFD45GxL8J5F/Mxwjzni+YNsJaavARB9xswQcGRJFncJYhUN4AAubfa8O6gZZ8FsBqcbqVgT7YZiXvWhDGEaoI8G5/LZ2k5YkxpeMoWFLzagKkAdoQciXGVi6SHDcTO4woQLJac/A4HftjKQULhtUprMcTMlck26yA/M1VUEDmHCuSpicQhGgynrf8vlUBTED5bV3mZNepNf1rPTP/DnAIMNAeA3LsNOFf9VO19yXTHFLVOYbWeLu7MEL7TAdt09T1RCDJt3wBRB802i0Xa3Oo++ZQF4y3IhyzUOijVMXcbBiN4X/OQuVMmNm6ybytvp5A/jjmDPQTcxrBn1QMm6wCtM1DqzkarbOUeAmsrb3njrJNOeOFSzdL6SSBue+YNPZDaqnruq0Yex6zJzbC5FhQVSNzzJ62uIZ3BUJ0sC9crKbLyxrIIh31nTWTMcyRa4909fbm0rDmztG/oqbP+zQZcJ02jdXfbAmG0FtNab5Qxm7n48s16rZ7oKm2gkhNAeryLaJ0hAoN3cWvhaG5K0bVoGTtwp/BBzqOHjxuwjRoFZpO9lhgK5gCH/WMmFEdjfCR2tvI9qyF0FJ0w0wTddfTkKfXSRr3E20LrJxBWloV9DvNnV+Dq/6KVYIK1A2SU/FBnynHUcTa2Q1x0DLpd5z/VjR/4QbP7W7JCBoOLLXDggU/EDyWgi8A2cRJZ8V1DUCNAzkJI4gISzXYkRKJ/nUPQG3m0CVsOiIc+GKMXWBx+iRou2qyzvPGC7zagNUfYunhJabZgA0T1Q0WGUIxWF6g8Ra92QGUHAx8JDA9nXrfYAlgh1cGn8VlX2aL1V6kkA89Dh282YNMCrcdS0+01bhLlJDZPgBk1+3HCw6bl9yNnvwUUHEnPvbFzlHCxD+MWLk4lwwUgq7yjDWcbs+f5oRKU69DB2TQGJPpA0mzj0rmkOUYxrzAyG1D3gEGs97oKtDRtx34SI+bWfqcpAFsx8VMGOYly01jz7QZUFevIFXfWTF4Tji5d6i2jRuFn4aGsfgqDR18tU3rX+AuBkdLmU5mk0BuDpJwVKI3HftdM7mYDrqPnmwJoPLkJmUTjBEZv3D7/pPiyef5lAXqeYFJ7T+5brG4lD4Oo70BKzp+fseUtLHxHlWUpu9bPOfzzmHnF1u45G7dZTVRvlFAkob16xzbafzpAK01WczV6jblJa2rT6poSPI9oGKPBxAsNcC8BV2RsTGIbqeOjn4DsEZLQyKWjwiR4e9e02d2zlAcPxQDGUp9sUeBOTL2bvH4fYg0EeMp5+gkxa8QJ8Yoi33MS87MJb7ZErT4z61yzPDfsS1OvM/3ZiZoWizMvmUqEsYMtG8zymQRccgTAVoCW498GAl5z8rLIm5BOZ+0wNoHObQv+Hgv+Sbgpx24F+IiiidJ6/QY3aiovFWafbcAlGJQ+WaY7RajxglszIueOVWmL5FgwNJJcH7NWIQ5nf8PL/J0MpRdpMgWg84DYbcD3N+DKl5nOSQW82fakWuNjw+Hg0o5WRCujqi60J6S50qlwR6en4ecYY/pssUVL7F86AS83oJO+x/ChLg4UGY5iJkZguQV1nL0h1KTn01tV+6QF8FDmy4pDu5tnSZx2OJSTCPBaAF5twFT/XRX2OCdAj9mKMBjLJg3eSfokUdMJYD3E5XTDspKkmQYO9rOBZIcBOZnp79b/yQb0/3HTA+LDdAqh7ESFSoh0yY0cX+c8YWRwsEPsGRH25zN4cZp5rZp1l69lQik/0gE3HsFhB4rygk61KVoHZuK6M2gjttnaWFew0apM40nJVVtA5h0w9wLZq34pry3g+w2AnNOEkxuHNpILRRtvkY8nfwmreL+ognKqhMJG6t62aGMBW6OSNlbwGwv4gQS0VXdvb9uAav9erCA2jJbBZmKrLMuCruZoZ8PzGrWJwQRq2GgmgdlzoZQxWfSDVvOQtzvQT3ZqwuhvnG3j2oNmndl2xzMYRCvAHk1wYjZV9eCfqzFthVwBJbTGe5UpfLMNEPlMBi6MiQoLNDzjrb1r8nVQBWVSPcSqTTOTW2xZyWO922ec+pXxYIGLDhicPRHCbxAkbtTA7g11CzWVYTddZZF3HhExmn5EFz7WPW8dSbYcwYyFEggit/SAvL39n0nAOVc23YGYRt0FALI1OAPl7jj0QGIQ2Xsb9H4WOUdGqlKNMwNG+UwN4BM1sVvBMY9K0LqXamesbSPkCXJlRM4Jvkt9T+/kZpsQtLYRHEnwbQ/ebsDjsw3oTIk5khNt6uZokrdh+DkaZYd974+jHmeth2ov7Gb4ECOm6GdP+XMJkGnkhzqoYjBtiXucAKx2gGtE4YHsfLgeJfhreA5nYxMp/3rzfT46/882YJOBBprP7IeOKQXHVzHtpu7mvE8fRZNity+c5JcxYvxX/IB7f3iPDKOdMS6tu1rTd6thwBlEffJhbSq7Dc9xNjsZd/+j9X+4AZM9KQ3268mbtgXcGlhtWObeq+2T5Rf/DRvWTxluYKcg/9oGTO78NAqTXhZ7sI9WujjyHLOsTK+3IO8LmxnoMMpM//RuNvKZApCtfv1DlxBycYoHYqbHdOtOJGq99e2gEmJyaJbDsTCDGRZ1Rt24ASK/KAGH298GJjavMJ5Ubeh6bLw3zy31m6EntZdU0WPVWyskHHrg8/V/4gdcItRWHHKZyFIkker6uolaxwR6BDT8A8tZqh7tplCPSerc/CD50Pr/RALkmiaZ8Ih0Ng+4dejGhY0XknL1/axjynX6vEEDOh3iVRrwUwnAW49o24GtT9lhqFdvnMg+cHxvB4OgC2FiG7x27tqSn5NQ/PmpfuMKXG7BlRyLw4WvhOrm8RXNodUdGbeOtba5dFdhn207v3P/f7YBfWbDVQKun6XPF8RR0q5dLhrtlXuKfH6a1aP82Pz9RAdsiXOZo3aioIiHPcCp7pJFoahv+vrT6aHM5Y6vZqOM760f/P4G7CSyURtzuP/5SYe9b3OyIYe4yHZ39+L7Tp+IP1n/jyRAbiVAdnfg9JOTxR9TXvfVz6XPagvh9df8wXL4ExmY1LFZQHowCXOI0uh9KrIBKHZV5zyIweEifHv5k+jN270Ab7zCGRSOFd/4weB9X8/m/+0tzPuSb1Tht8z/1Qrg7ZW4aO0ODYEYNF7sqoBt6egokZfJWHcBeHV3eHWBsF+O7y//JzpgC32woWKXbLGIHKed3rwLymmt1wO/UYbvpfdTPwDf3YFm7g9b0AxODZqB8HoleOlEzF0n8M4c/uDj8SdCs/sBu96/tvJ9l4iajmwSq+acGdlCgRfOH368AXjtCl3WD7n6Ajh2M8bm+7eycvKKm5z62/H7x3+r4h4/1w2buO/+8DYwgd/TNpSD93dj/X8i/fjWFcDLLdiWS4jc2cZvLX+38fvJU36+/j/SAZsAjEwpcfH/ICLvZt41/HTcdnB3AqfK558uH3+wAWUNWtc08LzgPhbtIOmvf8D7G/Dn7/7xC89xHmyOXU90f3lWsezDX3rjvCb7uEbMf74Hj+/rvVtluOu9oy88in4J3krAkToz1T7/4PK+1AH4eEf2JW7Ntne0dPRilpk6ifvfmwO9NQLymxLwx/egJodRdmgER/jh9vyJPRy4Nkf8Q28fH+sAfP4yzegRR2Gas9OiV9WGFx/9vpNz8EtH96tPhZP8H8Z/orUWl9aC5eQK4HQBfvYe+TeuwL3+n/rhEA4Hi5o3XuCeDvrVw//JBuDtby6uX8uRgoP+u6361spRplv0q9L++N7f4iMhO2nAmShg8/yws0OmBJS2+JXTx9+xAm/1QcnD7R4SN3L/V2Q/3sYD8je34JQ2awgkZjOoo5O3WcTf/nh8viD8VA6IqwU4CcBoESQ3pvA/tgE/tDqX1b/bRt74A39LTh8/0nTf3oaTwfTae4K4m/JC8C/cyu9LAH7hIfjkkeeigL/68ZB/8ANz0DDv3DP+9ffxSxuAH/0eN03/r1HBX1z3f0YC9rdD/HOi/mNT9hejKMh/hw/8j3uhX3mj+O/55g/v8/8Dqd6Iqc0B7UUAAAAASUVORK5CYII="),this.bird=t.bird,this.bird||(this.bird=new Image,this.bird.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAABDCAQAAAD+S8VaAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAAAvMAAALzAdLpCioAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAG90lEQVR42uWaaVRTRxTHJ4AUUIoIiqISOArIDiIhBBfccCMoR0vVUpXjTqun4Fr1tO5i3YuodaFqRMECKm4VUHEhUvWgBYuilgpiRVZpCARI3r8fWA4hYY9AXu77+ObNzO/O8u787xDSyeYSTzSICpu+DjV0ogrze84PBneByuJv3JpbBlx6MEBbJfG/8S2RAACFXXtU0gERN1BjCc9UEN/e7I2w1gFPinv3UDkHbFiGOqOwJVjlHMALRT3LLJ7trGIOuHwFUsY7q2IOuJ0u7YB//pswWFn6/vnUcbOCAn7ctfnUrsijl85dv5pw786fd9OTsvg5/JykN3fTb6ZcTDgVvefIkqXmVvKr0NN/IUQDO7C1qwJrOwyftIZ7cmIiN21eZlB+SOUtFKNl9kF0hb9ujmyVM73FMmWv3m+2J4zxw74NDN5/5vT1qzeT7j3n5/Bz7mcmPk24cy32Ai8i9Pj2nwIX+jo4kc8UMMqeXr5bfC6N/2tUHrdsCQ4gAR/QNhNRJ8+6GklXH7xStlxW+ViLxrpjqBswJ/z4rYyCFrQnwJPCxGe/x53i+fO+XOth2xpsvQm+PkfGP3YuYIo1oInTyIJiLDFtoZfUP+AXeaW2rZHXKZ8xJ35NeU+1odVSbIIBbEQeb70Tffd6ckmj0QbDy9/zOufdILE6SN0TBkVafnn0ka/NatrrditDXpmYKw36pREwPyr+Y0V72n0CsxoedTDFrMJJyRMDZJYIx8+yYICQKbDJtcjtL9IGAcEMKN7efIy+snnTYv/tR8Ry3+eWRUYFzavRB9SWL7icXKWAVrPRr96wEqjBTjg5bop03GGi77XF85FdqVZNIQ1konOsEvx35yOCN1xMFimszjNSDqh+ektGfVG3xjyTzaqkX3uDTiaCdh0ZA/qSgWXWWfb7CYMQQsiUUANK1j8hoJf1lSFUg0u+z1xCiFuMUYWsAy7QCj9ZzhIgIDCkpi4nhBCGsafNGx2peXCQRvhlcGrEAQSOhYQQQtyTG74YCglN8CswrVF8goEVhBBCrMzdozi33OOHJmvUvQqghQtKMEUu+GDB0Cj2Q/vsUdJn0JH8+oXG4rWS46djSD0ePcr2lUuafbZlIbN0UAnngpyA0I3FumeZxxQYVlZ/ooWleKm0+FHQbTDuWnAp5F6cbNfskcDtcg9J9aMGNUxDIiglgy+CPxhypj4Ddu/cfFpxOrIqrv7QAsH4V2nwYxoEvwQEOpRlAeeG07hWnopH7FMHgTr6VmhAA1xEQNjF4bMxQwpcj2I9duVZLiVtTb7YT7T2I30JccyqrrA7ZuESRF0SvhQ/QKfByDu/VZAs5O6rXS9U6onZ+A2CLgQvwWn0l5n4TAFnjOKksR5En6i73q6/q3IRhvwugB8LBylwi6IhixxX9Wd/CoWQwTrJTuaEOSwzENcKDR7Yj4xOg4+Hq3SEXzX8fIfcObAZPizV+bGxqLZhMyxBWgdP+xi4ScGbCNnhhrodqxnrso65pLidNxMQENihqoPgS3AY5rU7krh35eCPbon2c4hap2nnxob2GQQE+zpAM4qFb53EoUWxE3t93jXyBwyXcG1KD+8/IXwBAmFYg26Vx37oHjnIlnQlGzbJvMCX+lQrPgT6dat9yAcT/S6aSOIs2rjjxLaQ9SsX83gv8uShiNuAn4mR9fZ5dizpphRpREvj1YvOhiU84OdmoghFyKH47y/GHohtLf45ITvVuLyfyKLI5RlntyJSXx2+P+gaejt5O7FNCSEkcFHTuAmPom6/qqxJqFRee33wHGc6rVLjXtym8C8nTTcnDNMh/n5BfnN8mFY18jWdbPlceeBViEsPi16xxFSL7ncjukVelTvxUzsxjOlAUzsULv8/GfdEJa7G7D7YWLCcUzbNkfb42zaXNaG2h4XTHH/n9x+bjIHKqeAdNMZf55fbrKBYLNq+lqb433lkFrUk5hNKdu6mIf5XA1KetzibR+09TLcfonrMtVYlNKk9h2gV//FCW3tCFmMXT0nOe83bxpklbdDJqrD+BC1mwUzTtOw2Sl/UFjpsh8ci2pHirFgxV8nxV/oJxO2RwR6+HNFbmfkZ15PaqwQe/VmJ+R18Aql37XTAsQ9EefUBW6NeEk34IaWN8HkIQk+Jva0SzwGXP6p1XDeEoqB1qx/L0B3dKY+VSr0JDurDFNaK2ZoYg5142sx1m3LEYxUsq+Vv8ejVSv8bdJ/UXySds9eDB4JwEnFIRS6KUIi/8RJxCEEARte74GBR6DycFpGgtZNFPkHrHgOx61miSaPDEOtEn8qWwvepZMc5Mel3ItZmHbbM12wSXV/snMHZQ6eRlzEzI9d9rnftskwERhXVNxF7ik1Krd87pbLCbWYR9Y7v0f/htaJHbsoDhwAAAABJRU5ErkJggg=="),this.set("opacity",t.opacity||.3),this.set("density",t.density||.5),this.setWind(t)},ol.inherits(ol.control.Cloud,ol.control.Control),ol.control.Cloud.prototype.setMap=function(t){this.getMap()&&this.getMap().un("postcompose",this.drawCloud_,this),ol.control.Control.prototype.setMap.call(this,t),t&&t.on("postcompose",this.drawCloud_,this)},ol.control.Cloud.prototype.setWind=function(t){t=t||{};var e=Math.random,i=t.windAngle||e()*Math.PI,n=t.windSpeed||e();this.wind={angle:i,cos:Math.cos(i),sin:Math.sin(i),speed:n}},ol.control.Cloud.prototype.drawCloud_=function(t){function e(t,e){for(var i=0;i<t;i++)r.push({x:o()*n.width-l,y:o()*n.height-h})}if(this.getMap()){var i=t.context,n=i.canvas;t.frameState.pixelRatio;if(this.cloud.width){var r=this.particules,o=Math.random,s=this.cloud.width,a=this.cloud.height,l=this.cloud.width/2,h=this.cloud.height/2,c=10*this.get("density")*n.width*n.height/s/a<<0;if(r)c!=r.length&&(this.width!=n.width||this.height!=n.height?(r=this.particules=[],e(c),this.width=n.width,this.height=n.height):c>r.length?e(1):c<r.length&&r.splice(r.length*o()<<0,1));else{r=this.particules=[],e(c);o(),Math.PI;this.width=n.width,this.height=n.height,this.birds=[];for(d=0;d<5;d++){var u={angle:2*o()*Math.PI,x:o()*n.width,y:o()*n.height,rot:0,fly:0};u.cos=Math.cos(u.angle),u.sin=Math.cos(u.angle),this.birds.push(u)}}for(var f=this.wind.cos*this.wind.speed,g=this.wind.sin*this.wind.speed,d=0;d<r.length;d++)r[d].x+=f+2*o()-1,r[d].y+=g+2*o()-1,r[d].x<-s?(r[d].x=n.width,r[d].y=o()*n.height-h):r[d].x>n.width&&(r[d].x=-s,r[d].y=o()*n.height-h),r[d].y<-a?(r[d].y=n.height,r[d].x=o()*n.width-l):r[d].y>n.height&&(r[d].y=-a,r[d].x=o()*n.width-l);i.globalAlpha=this.get("opacity");for(d=0;d<r.length;d++)i.drawImage(this.cloud,r[d].x,r[d].y);i.globalAlpha=1;for(var s=this.bird.width/2,a=this.bird.height/2,p=n.width+s,m=n.height+a,d=0;d<this.birds.length;d++){var y=this.birds[d],v=0;y.fly?(y.fly=++y.fly%5,v=-.1):o()<.01&&(y.fly=1),y.rot&&(y.angle+=y.rot,y.cos=Math.cos(y.angle),y.sin=Math.sin(y.angle)),o()<.01&&(y.rot=y.rot?0:o()*Math.PI/200-Math.PI/400,y.cos=Math.cos(y.angle),y.sin=Math.sin(y.angle)),y.x+=y.sin,y.x>p&&(y.x=-s),y.x<-s&&(y.x=p),y.y-=y.cos,y.y>m&&(y.y=-a),y.y<-a&&(y.y=m),i.save(),i.translate(y.x,y.y),i.rotate(y.angle),i.scale(.5+v,.5),i.drawImage(this.bird,-s,-a),i.restore()}this.getMap().render()}}},ol.control.Compass=function(t){var e=this;t||(t={});var i=document.createElement("div");i.className="ol-compassctrl ol-unselectable ol-hidden"+(t.className?" "+t.className:""),i.style.position="absolute",i.style.visibility="hidden",ol.control.Control.call(this,{element:i}),this.set("rotateVithView",!1!==t.rotateWithView),this.style=t.style,t.image?this.img_=t.image:t.src?(this.img_=new Image,this.img_.onload=function(){e.getMap()&&e.getMap().renderSync()},this.img_.src=t.src):this.img_=this.defaultCompass_($(this.element).width(),this.style?this.style.getColor():""),this.da_=[];for(var n=0;n<8;n++)this.da_[n]=[Math.cos(Math.PI*n/8),Math.sin(Math.PI*n/8)]},ol.inherits(ol.control.Compass,ol.control.Control),ol.control.Compass.prototype.setMap=function(t){var e=this.getMap();e&&e.un("postcompose",this.drawCompass_,this),ol.control.Control.prototype.setMap.call(this,t),e&&e.renderSync(),t&&t.on("postcompose",this.drawCompass_,this)},ol.control.Compass.prototype.defaultCompass_=function(t,e){function i(t,i){o.fillStyle=e||"#963",o.beginPath(),o.moveTo(0,0),o.lineTo(t,0),o.lineTo(i,i),o.moveTo(0,0),o.lineTo(-t,0),o.lineTo(-i,-i),o.moveTo(0,0),o.lineTo(0,t),o.lineTo(-i,i),o.moveTo(0,0),o.lineTo(0,-t),o.lineTo(i,-i),o.moveTo(0,0),o.fill(),o.stroke()}function n(t,e){o.globalCompositeOperation="destination-out",o.fillStyle="#fff",o.beginPath(),o.moveTo(0,0),o.lineTo(t,0),o.lineTo(e,-e),o.moveTo(0,0),o.lineTo(-t,0),o.lineTo(-e,e),o.moveTo(0,0),o.lineTo(0,t),o.lineTo(e,e),o.moveTo(0,0),o.lineTo(0,-t),o.lineTo(-e,-e),o.moveTo(0,0),o.fill(),o.globalCompositeOperation="source-over",o.beginPath(),o.moveTo(0,0),o.lineTo(t,0),o.lineTo(e,-e),o.moveTo(0,0),o.lineTo(-t,0),o.lineTo(-e,e),o.moveTo(0,0),o.lineTo(0,t),o.lineTo(e,e),o.moveTo(0,0),o.lineTo(0,-t),o.lineTo(-e,-e),o.moveTo(0,0),o.stroke()}var r=document.createElement("canvas"),o=r.getContext("2d"),s=(t=r.width=r.height)/2,a=.22*s;return o.translate(s,s),o.strokeStyle=e||"#963",o.lineWidth=1.5,o.beginPath(),o.arc(0,0,.41*t,0,2*Math.PI),o.arc(0,0,.44*t,0,2*Math.PI),o.stroke(),o.rotate(Math.PI/4),i(.9*s,.8*a),n(.9*s,.8*a),o.rotate(-Math.PI/4),i(s,a),n(s,a),r},ol.control.Compass.prototype.drawCompass_=function(t){var e=t.context,i=e.canvas,n=t.frameState.pixelRatio;e.save(),e.scale(n,n);var r=$(this.element).width(),o=$(this.element).height(),s=$(this.element).position(),a=this.img_,l=t.frameState.viewState.rotation;if(e.beginPath(),e.translate(s.left+r/2,s.top+o/2),this.get("rotateVithView")&&e.rotate(l),this.style){e.beginPath(),e.strokeStyle=this.style.getColor(),e.lineWidth=this.style.getWidth();for(var h=Math.max(i.width,i.height),c=0;c<8;c++)e.moveTo(-this.da_[c][0]*h,-this.da_[c][1]*h),e.lineTo(this.da_[c][0]*h,this.da_[c][1]*h);e.stroke()}a.width&&e.drawImage(a,-r/2,-o/2,r,o),e.closePath(),e.restore()},ol.control.Bar=function(t){t||(t={});var e=$("<div>").addClass("ol-unselectable ol-control ol-bar");if(t.className&&e.addClass(t.className),t.group&&e.addClass("ol-group"),ol.control.Control.call(this,{element:e.get(0),target:t.target}),this.set("toggleOne",t.toggleOne),this.set("autoDeactivate",t.autoDeactivate),this.controls_=[],t.controls instanceof Array)for(var i=0;i<t.controls.length;i++)this.addControl(t.controls[i])},ol.inherits(ol.control.Bar,ol.control.Control),ol.control.Bar.prototype.setVisible=function(t){t?$(this.element).show():$(this.element).hide()},ol.control.Bar.prototype.getVisible=function(){return"none"!=$(this.element).css("display")},ol.control.Bar.prototype.setMap=function(t){ol.control.Control.prototype.setMap.call(this,t);for(var e=0;e<this.controls_.length;e++)this.controls_[e].setMap(t)},ol.control.Bar.prototype.getControls=function(){return this.controls_},ol.control.Bar.prototype.setPosition=function(t){$(this.element).removeClass("ol-left ol-top ol-bottom ol-right"),t=t.split("-");for(var e=0;e<t.length;e++)switch(t[e]){case"top":case"left":case"bottom":case"right":$(this.element).addClass("ol-"+t[e])}},ol.control.Bar.prototype.addControl=function(t){this.controls_.push(t),t.setTarget(this.element),this.getMap()&&this.getMap().addControl(t),t.on("change:active",this.onActivateControl_,this),t.getActive&&t.getActive()&&t.dispatchEvent({type:"change:active",key:"active",oldValue:!1,active:!0})},ol.control.Bar.prototype.deactivateControls=function(t){for(var e=0;e<this.controls_.length;e++)this.controls_[e]!==t&&this.controls_[e].setActive&&this.controls_[e].setActive(!1)},ol.control.Bar.prototype.setActive=function(t){if(!t&&this.get("autoDeactivate")&&this.deactivateControls(),t)for(var e,i=this.getControls(),n=0;e=i[n];n++)e.get("autoActivate")&&e.setActive(!0)},ol.control.Bar.prototype.onActivateControl_=function(t){if(t.active&&this.get("toggleOne")){var e,i=t.target;for(e=0;e<this.controls_.length&&this.controls_[e]!==i;e++);e!=this.controls_.length&&this.deactivateControls(this.controls_[e])}},ol.control.DeviceOrientation=function(t){var e=this;t||(t={});var i=$("<div>").addClass("ol-unselectable ol-control ol-deviceorientation");t.className&&i.addClass(t.className),this.compass=$("<div>").addClass("ol-compass").appendTo(i),ol.control.Control.call(this,{element:i.get(0),target:t.target}),window.DeviceOrientationEvent?window.addEventListener("deviceorientation",function(t){e.setOrientation(t.alpha)},!1):i.addClass("ol-disable")},ol.inherits(ol.control.DeviceOrientation,ol.control.Control),ol.control.DeviceOrientation.prototype.setOrientation=function(t){var e="translate(-50%, -50%) rotate("+t+"deg)";this.compass.css({"-webkit-transform":e,transform:e}),console.log(t)},ol.control.Disable=function(t){var t=t||{},e=$("<div>").addClass((t.calssName||"")+" ol-disable ol-unselectable ol-control");e.css({top:0,left:0,right:0,bottom:0,"z-index":1e4,background:"none",display:"none"}),ol.control.Control.call(this,{element:e.get(0)})},ol.inherits(ol.control.Disable,ol.control.Control),ol.control.Disable.prototype.isOn=function(){return $(this.element).hasClass("ol-disable")},ol.control.Disable.prototype.disableMap=function(t){t?$(this.element).addClass("ol-enable").show():$(this.element).removeClass("ol-enable").hide()},ol.control.Gauge=function(t){t=t||{};var e=$("<div>").addClass((t.className||"")+" ol-gauge ol-unselectable ol-control");this.title_=$("<span>").appendTo(e),this.gauge_=$("<button>").appendTo($("<div>").appendTo(e)).width(0),ol.control.Control.call(this,{element:e.get(0),target:t.target}),this.setTitle(t.title),this.val(t.val),this.set("max",t.max||100)},ol.inherits(ol.control.Gauge,ol.control.Control),ol.control.Gauge.prototype.setTitle=function(t){this.title_.html(t||""),t?this.title_.show():this.title_.hide()},ol.control.Gauge.prototype.val=function(t){return void 0!==t&&(this.val_=t,this.gauge_.css("width",t/this.get("max")*100+"%")),this.val_},ol.control.Globe=function(t){var e,i=t||{},n=this;i.target?(e=$("<div>"),this.panel_=$(i.target)):(e=$("<div>").addClass("ol-globe ol-unselectable ol-control"),/top/.test(i.align)&&e.addClass("ol-control-top"),/right/.test(i.align)&&e.addClass("ol-control-right"),this.panel_=$("<div>").addClass("panel").appendTo(e),this.pointer_=$("<div>").addClass("ol-pointer").appendTo(e)),ol.control.Control.call(this,{element:e.get(0),target:i.target}),this.ovmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:this.panel_.get(0),view:new ol.View({zoom:0,center:[0,0]}),layers:i.layers}),setTimeout(function(){n.ovmap_.updateSize()},0),this.set("follow",i.follow||!1),this.extentLayer=new ol.layer.Vector({name:"Cache extent",source:new ol.source.Vector,style:i.style||[new ol.style.Style({image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,0,0, 1)"}),stroke:new ol.style.Stroke({width:7,color:"rgba(255,0,0, 0.8)"}),radius:5})})]}),this.ovmap_.addLayer(this.extentLayer)},ol.inherits(ol.control.Globe,ol.control.Control),ol.control.Globe.prototype.setMap=function(t){this.getMap()&&this.getMap().getView().un("propertychange",this.setView,this),ol.control.Control.prototype.setMap.call(this,t),t&&(t.getView().on("propertychange",this.setView,this),this.setView())},ol.control.Globe.prototype.setView=function(){this.getMap()&&this.get("follow")&&this.setCenter(this.getMap().getView().getCenter())},ol.control.Globe.prototype.getGlobe=function(){return this.ovmap_},ol.control.Globe.prototype.show=function(t){!1!==t?$(this.element).removeClass("ol-collapsed"):$(this.element).addClass("ol-collapsed"),this.ovmap_.updateSize()},ol.control.Globe.prototype.setPosition=function(t){/top/.test(t)?$(this.element).addClass("ol-control-top"):$(this.element).removeClass("ol-control-top"),/right/.test(t)?$(this.element).addClass("ol-control-right"):$(this.element).removeClass("ol-control-right")},ol.control.Globe.prototype.setCenter=function(t,e){var i=this;if(this.pointer_.addClass("hidden"),t){var n=this.ovmap_,r=n.getPixelFromCoordinate(t),o=$(this.element).height();if(n.getView().animate)setTimeout(function(){i.pointer_.css({top:Math.min(Math.max(r[1],0),o),left:"50%"}).removeClass("hidden")},800),n.getView().animate({center:[t[0],0]});else{var s=ol.animation.pan({duration:800,source:n.getView().getCenter()});n.beforeRender(function(t,n){var a=s(t,n);return a||!1===e||i.pointer_.css({top:Math.min(Math.max(r[1],0),o),left:"50%"}).removeClass("hidden"),a}),n.getView().setCenter([t[0],0])}}},ol.control.Graticule=function(t){t||(t={});var e=document.createElement("div");e.className="ol-graticule ol-unselectable ol-hidden",ol.control.Control.call(this,{element:e}),this.set("projection",t.projection||"EPSG:4326");var i=new ol.proj.Projection({code:this.get("projection")}).getMetersPerUnit();for(this.fac=1;i/this.fac>10;)this.fac*=10;this.fac=1e4/this.fac,this.set("maxResolution",t.maxResolution||1/0),this.set("step",t.step||.1),this.set("stepCoord",t.stepCoord||1),this.set("spacing",t.spacing||40),this.set("margin",t.margin||0),this.set("borderWidth",t.borderWidth||5),this.set("stroke",!1!==t.stroke),this.formatCoord=t.formatCoord||function(t){return t},t.style instanceof ol.style.Style?this.style=t.style:this.style=new ol.style.Style({stroke:new ol.style.Stroke({color:"#000",width:1}),fill:new ol.style.Fill({color:"#fff"}),text:new ol.style.Text({stroke:new ol.style.Stroke({color:"#fff",width:2}),fill:new ol.style.Fill({color:"#000"})})})},ol.inherits(ol.control.Graticule,ol.control.Control),ol.control.Graticule.prototype.setMap=function(t){var e=this.getMap();e&&e.un("postcompose",this.drawGraticule_,this),ol.control.Control.prototype.setMap.call(this,t),e&&e.renderSync(),t&&t.on("postcompose",this.drawGraticule_,this)},ol.control.Graticule.prototype.setStyle=function(t){this.style=t},ol.control.Graticule.prototype.getStyle=function(t){return t},ol.control.Graticule.prototype.drawGraticule_=function(t){if(!(this.get("maxResolution")<t.frameState.viewState.resolution)){for(var e,i=t.context,n=i.canvas,r=t.frameState.pixelRatio,o=n.width/r,s=n.height/r,a=this.get("projection"),l=this.getMap(),h=[l.getCoordinateFromPixel([0,0]),l.getCoordinateFromPixel([o,0]),l.getCoordinateFromPixel([o,s]),l.getCoordinateFromPixel([0,s])],c=-1/0,u=1/0,f=-1/0,g=1/0,d=0;e=h[d];d++)h[d]=ol.proj.transform(e,l.getView().getProjection(),a),c=Math.max(c,h[d][0]),u=Math.min(u,h[d][0]),f=Math.max(f,h[d][1]),g=Math.min(g,h[d][1]);var p=this.get("spacing"),m=this.get("step"),y=this.get("stepCoord"),v=this.get("borderWidth"),x=this.get("margin");(c-u)/m*p>o&&(m*=Math.round((c-u)/o*p/m))>this.fac&&(m=Math.round(m/this.fac)*this.fac),u=Math.floor(u/m)*m-m,g=Math.floor(g/m)*m-m,c=Math.floor(c/m)*m+2*m,f=Math.floor(f/m)*m+2*m;var w=ol.proj.get(a).getExtent();w&&(u<w[0]&&(u=w[0]),g<w[1]&&(g=w[1]),c>w[2]&&(c=w[2]+m),f>w[3]&&(f=w[3]+m));var C=this.style.getStroke()&&this.get("stroke"),E=this.style.getText(),I=this.style.getFill();i.save(),i.scale(r,r),i.beginPath(),i.rect(x,x,o-2*x,s-2*x),i.clip(),i.beginPath();for(var S={top:[],left:[],bottom:[],right:[]},b=u;b<c;b+=m){L=ol.proj.transform([b,g],a,l.getView().getProjection());L=l.getPixelFromCoordinate(L),C&&i.moveTo(L[0],L[1]);for(var _=L,N=g+m;N<=f;N+=m){T=ol.proj.transform([b,N],a,l.getView().getProjection());T=l.getPixelFromCoordinate(T),C&&i.lineTo(T[0],T[1]),_[1]>0&&T[1]<0&&S.top.push([b,_]),_[1]>s&&T[1]<s&&S.bottom.push([b,_]),_=T}}for(N=g;N<f;N+=m){var L=ol.proj.transform([u,N],a,l.getView().getProjection());L=l.getPixelFromCoordinate(L),C&&i.moveTo(L[0],L[1]);for(var _=L,b=u+m;b<=c;b+=m){var T=ol.proj.transform([b,N],a,l.getView().getProjection());T=l.getPixelFromCoordinate(T),C&&i.lineTo(T[0],T[1]),_[0]<0&&T[0]>0&&S.left.push([N,_]),_[0]<o&&T[0]>o&&S.right.push([N,_]),_=T}}if(C&&(i.strokeStyle=this.style.getStroke().getColor(),i.lineWidth=this.style.getStroke().getWidth(),i.stroke()),E){i.fillStyle=this.style.getText().getFill().getColor(),i.strokeStyle=this.style.getText().getStroke().getColor(),i.lineWidth=this.style.getText().getStroke().getWidth(),i.textAlign="center",i.textBaseline="hanging";for(var A,P=(I?v:0)+x+2,d=0;M=S.top[d];d++)Math.round(M[0]/this.get("step"))%y||(A=this.formatCoord(M[0]),i.strokeText(A,M[1][0],P),i.fillText(A,M[1][0],P));i.textBaseline="alphabetic";for(d=0;M=S.bottom[d];d++)Math.round(M[0]/this.get("step"))%y||(A=this.formatCoord(M[0]),i.strokeText(A,M[1][0],s-P),i.fillText(A,M[1][0],s-P));i.textBaseline="middle",i.textAlign="left";for(d=0;M=S.left[d];d++)Math.round(M[0]/this.get("step"))%y||(A=this.formatCoord(M[0]),i.strokeText(A,P,M[1][1]),i.fillText(A,P,M[1][1]));i.textAlign="right";for(var M,d=0;M=S.right[d];d++)Math.round(M[0]/this.get("step"))%y||(A=this.formatCoord(M[0]),i.strokeText(A,o-P,M[1][1]),i.fillText(A,o-P,M[1][1]))}if(I){var R,O,k=this.style.getFill().getColor();(O=this.style.getStroke())?R=this.style.getStroke().getColor():(R=k,k="#fff"),i.strokeStyle=R,i.lineWidth=O?O.getWidth():1;for(d=1;d<S.top.length;d++)i.beginPath(),i.rect(S.top[d-1][1][0],x,S.top[d][1][0]-S.top[d-1][1][0],v),i.fillStyle=Math.round(S.top[d][0]/m)%2?R:k,i.fill(),i.stroke();for(d=1;d<S.bottom.length;d++)i.beginPath(),i.rect(S.bottom[d-1][1][0],s-v-x,S.bottom[d][1][0]-S.bottom[d-1][1][0],v),i.fillStyle=Math.round(S.bottom[d][0]/m)%2?R:k,i.fill(),i.stroke();for(d=1;d<S.left.length;d++)i.beginPath(),i.rect(x,S.left[d-1][1][1],v,S.left[d][1][1]-S.left[d-1][1][1]),i.fillStyle=Math.round(S.left[d][0]/m)%2?R:k,i.fill(),i.stroke();for(d=1;d<S.right.length;d++)i.beginPath(),i.rect(o-v-x,S.right[d-1][1][1],v,S.right[d][1][1]-S.right[d-1][1][1]),i.fillStyle=Math.round(S.right[d][0]/m)%2?R:k,i.fill(),i.stroke();i.beginPath(),i.fillStyle=R,i.rect(x,x,v,v),i.rect(x,s-v-x,v,v),i.rect(o-v-x,x,v,v),i.rect(o-v-x,s-v-x,v,v),i.fill()}i.restore()}},ol.control.GridReference=function(t){t||(t={});var e=document.createElement("div");e.className=(t.target?"":"ol-control ")+"ol-gridreference ol-unselectable "+(t.className||""),ol.control.Control.call(this,{element:e,target:t.target}),"function"==typeof t.property&&(this.getFeatureName=t.property),"function"==typeof t.sortFeatures&&(this.sortFeatures=t.sortFeatures),"function"==typeof t.indexTitle&&(this.indexTitle=t.indexTitle),this.source_=t.source,t.source&&(this.setIndex(t.source.getFeatures(),t),t.source.once("change",function(e){"ready"===t.source.getState()&&this.setIndex(t.source.getFeatures(),t)},this)),this.set("maxResolution",t.maxResolution||1/0),this.set("extent",t.extent),this.set("size",t.size),this.set("margin",t.margin||0),this.set("property",t.property||"name"),this.set("filterLabel",t.filterLabel||"filter"),t.style instanceof ol.style.Style?this.style=t.style:this.style=new ol.style.Style({stroke:new ol.style.Stroke({color:"#000",width:1}),text:new ol.style.Text({font:"bold 14px Arial",stroke:new ol.style.Stroke({color:"#fff",width:2}),fill:new ol.style.Fill({color:"#000"})})})},ol.inherits(ol.control.GridReference,ol.control.Control),ol.control.GridReference.prototype.getFeatureName=function(t){return t.get(this.get("property")||"name")},ol.control.GridReference.prototype.sortFeatures=function(t,e){return this.getFeatureName(t)==this.getFeatureName(e)?0:this.getFeatureName(t)<this.getFeatureName(e)?-1:1},ol.control.GridReference.prototype.indexTitle=function(t){return this.getFeatureName(t).charAt(0)},ol.control.GridReference.prototype.setIndex=function(t){if(this.getMap()){var e=this;t.getArray&&(t=t.getArray()),t.sort(function(t,i){return e.sortFeatures(t,i)});for(var i,n,r,o=$(this.element).html(""),s=($("<input>").attr("type","search").attr("placeholder",this.get("filterLabel")||"filter").on("search keyup",function(){var t=$(this).val().replace(/^\*/,""),e=new RegExp(t,"i");$("li",s).each(function(){var t=$(this);t.hasClass("ol-title")?t.show():e.test($(".ol-name",t).text())?t.show():t.hide()}),$("li.ol-title",s).each(function(){var t=$(this).nextAll("li:visible").first();t.length&&!t.hasClass("ol-title")?$(this).show():$(this).hide()})}).appendTo(o),$("<ul>").appendTo(o)),a=0;r=t[a];a++)if(i=this.getReference(r.getGeometry().getFirstCoordinate())){var l=this.getFeatureName(r),h=this.indexTitle(r);h!=n&&$("<li>").addClass("ol-title").text(h).appendTo(s),n=h,$("<li>").append($("<span>").addClass("ol-name").text(l)).append($("<span>").addClass("ol-ref").text(i)).data("feature",r).click(function(){e.dispatchEvent({type:"select",feature:$(this).data("feature")})}).appendTo(s)}}},ol.control.GridReference.prototype.getReference=function(t){if(this.getMap()){var e=this.get("extent"),i=this.get("size"),n=Math.floor((t[0]-e[0])/(e[2]-e[0])*i[0]);if(n<0||n>=i[0])return"";var r=Math.floor((e[3]-t[1])/(e[3]-e[1])*i[1]);return r<0||r>=i[1]?"":String.fromCharCode(65+n)+r}},ol.control.GridReference.prototype.setMap=function(t){var e=this.getMap();e&&e.un("postcompose",this.drawGrid_,this),ol.control.Control.prototype.setMap.call(this,t),e&&e.renderSync(),t&&(t.on("postcompose",this.drawGrid_,this),this.source_&&this.setIndex(this.source_.getFeatures()))},ol.control.GridReference.prototype.setStyle=function(t){this.style=t},ol.control.GridReference.prototype.getStyle=function(){return style},ol.control.GridReference.prototype.drawGrid_=function(t){if(!(this.get("maxResolution")<t.frameState.viewState.resolution)){var e=t.context,i=e.canvas,n=t.frameState.pixelRatio,r=i.width/n,o=i.height/n,s=this.get("extent"),a=this.get("size"),l=this.getMap(),h=ol.extent.boundingExtent([l.getPixelFromCoordinate([s[0],s[1]]),l.getPixelFromCoordinate([s[2],s[3]])]),c=[h[0],h[1]],u=[h[2],h[3]],f=(u[0]-c[0])/a[0],g=(u[1]-c[1])/a[1];e.save();var d=this.get("margin");e.scale(n,n),e.strokeStyle=this.style.getStroke().getColor(),e.lineWidth=this.style.getStroke().getWidth(),e.beginPath();for(x=0;x<=a[0];x++)e.moveTo(c[0]+x*f,c[1]),e.lineTo(c[0]+x*f,u[1]);for(x=0;x<=a[1];x++)e.moveTo(c[0],c[1]+x*g),e.lineTo(u[0],c[1]+x*g);e.stroke(),e.font=this.style.getText().getFont(),e.fillStyle=this.style.getText().getFill().getColor(),e.strokeStyle=this.style.getText().getStroke().getColor();var p=d+(e.lineWidth=this.style.getText().getStroke().getWidth());e.textAlign="center";for(var m,y,v,x=0;x<a[0];x++)m=String.fromCharCode(65+x),y=c[0]+x*f+f/2,(v=c[1]-p)<0?(v=p,e.textBaseline="hanging"):e.textBaseline="alphabetic",e.strokeText(m,y,v),e.fillText(m,y,v),(v=u[1]+p)>o?(v=o-p,e.textBaseline="alphabetic"):e.textBaseline="hanging",e.strokeText(m,y,v),e.fillText(m,y,v);e.textBaseline="middle";for(x=0;x<a[0];x++)v=c[1]+x*g+g/2,e.textAlign="right",(y=c[0]-p)<0?(y=p,e.textAlign="left"):e.textAlign="right",e.strokeText(x,y,v),e.fillText(x,y,v),(y=u[0]+p)>r?(y=r-p,e.textAlign="right"):e.textAlign="left",e.strokeText(x,y,v),e.fillText(x,y,v);e.restore()}},ol.control.LayerPopup=function(t){(t=t||{}).switcherClass="ol-layerswitcher-popup",!1!==t.mouseover&&(t.mouseover=!0),ol.control.LayerSwitcher.call(this,t)},ol.inherits(ol.control.LayerPopup,ol.control.LayerSwitcher),ol.control.LayerPopup.prototype.overflow=function(){},ol.control.LayerPopup.prototype.drawList=function(t,e){var i=this,n=function(t){t.preventDefault();var n=$(this).data("layer");i.switchLayerVisibility(n,e)};e.forEach(function(e){if(!1!==e.get("displayInLayerSwitcher")){var r=$("<li>").text(e.get("title")||e.get("name")).data("layer",e).click(n).on("touchstart",n).appendTo(t);i.testLayerVisibility(e)&&r.addClass("ol-layer-hidden"),e.getVisible()&&r.addClass("select")}})},ol.control.LayerSwitcherImage=function(t){(t=t||{}).switcherClass="ol-layerswitcher-image",!1!==t.mouseover&&(t.mouseover=!0),ol.control.LayerSwitcher.call(this,t)},ol.inherits(ol.control.LayerSwitcherImage,ol.control.LayerSwitcher),ol.control.LayerSwitcherImage.prototype.drawList=function(t,e){var i=this,n=function(t){t.preventDefault();var n=$(this).data("layer");i.switchLayerVisibility(n,e),"touchstart"==t.type&&$(i.element).addClass("ol-collapsed")};t.css("height","auto"),e.forEach(function(e){if(!1!==e.get("displayInLayerSwitcher")){var r=e.getPreview?e.getPreview():["none"],o=$("<li>").addClass("ol-imgcontainer").data("layer",e).click(n).on("touchstart",n);e.getVisible()&&o.addClass("select");for(var s=0;s<r.length;s++)$("<img>").attr("src",r[s]).appendTo(o);$("<p>").text(e.get("title")||e.get("name")).appendTo(o),i.testLayerVisibility(e)&&o.addClass("ol-layer-hidden"),o.appendTo(t)}})},ol.control.LayerSwitcherImage.prototype.overflow=function(){},ol.control.Overlay=function(t){t||(t={});var e=$("<div>").addClass("ol-unselectable ol-overlay");t.className&&e.addClass(t.className),ol.control.Control.call(this,{element:e.get(0),target:t.target});var i=this;t.hideOnClick&&e.click(function(){i.hide()}),this.set("closeBox",t.closeBox),this._timeout=!1,this.setContent(t.content)},ol.inherits(ol.control.Overlay,ol.control.Control),ol.control.Overlay.prototype.setContent=function(t){var e=this;if(t){var i=$(this.element);if(i.html(t),this.get("closeBox")){var n=$("<div>").addClass("ol-closebox").click(function(){e.hide()});i.prepend(n)}}},ol.control.Overlay.prototype.show=function(t,e){var i=this,n=$(this.element).show();e?(this.center_=this.getMap().getPixelFromCoordinate(e),n.css({top:this.center_[1],left:this.center_[0]})):(this.center_=!1,n.css({top:"",left:""})),this.setContent(t),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){n.addClass("ol-visible").css({top:"",left:""}),i.dispatchEvent({type:"change:visible",visible:!0,element:i.element})},10),i.dispatchEvent({type:"change:visible",visible:!1,element:i.element})},ol.control.Overlay.prototype.hide=function(){var t=$(this.element).removeClass("ol-visible");this.center_&&(t.css({top:this.center_[1],left:this.center_[0]}),this.center_=!1),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){t.hide()},500),this.dispatchEvent({type:"change:visible",visible:!1,element:this.element})},ol.control.Overlay.prototype.toggle=function(){this.getVisible()?this.hide():this.show()},ol.control.Overlay.prototype.getVisible=function(){return"none"!=$(this.element).css("display")},ol.control.Overlay.prototype.setClass=function(t){var e=$(this.element).hasClass("ol-visible");$(this.element).removeClass().addClass("ol-unselectable ol-overlay"+(e?" ol-visible ":" ")+t)},ol.control.Overview=function(t){var e=t||{},i=this;this.minZoom=e.minZoom||0,this.maxZoom=e.maxZoom||18,this.rotation=e.rotation;var n;e.target?(n=$("<div>"),this.panel_=$(e.target)):(n=$("<div>").addClass("ol-overview ol-unselectable ol-control ol-collapsed"),/top/.test(e.align)&&n.addClass("ol-control-top"),/right/.test(e.align)&&n.addClass("ol-control-right"),$("<button>").on("touchstart",function(t){i.toggleMap(),t.preventDefault()}).click(function(){i.toggleMap()}).appendTo(n),this.panel_=$("<div>").addClass("panel").appendTo(n)),ol.control.Control.call(this,{element:n.get(0),target:e.target}),this.ovmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:this.panel_.get(0),view:new ol.View({zoom:14,center:[270148,6247782]}),layers:e.layers}),this.oview_=this.ovmap_.getView(),this.extentLayer=new ol.layer.Vector({name:"Cache extent",source:new ol.source.Vector,style:e.style||[new ol.style.Style({image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,0,0, 1)"}),stroke:new ol.style.Stroke({width:7,color:"rgba(255,0,0, 0.8)"}),radius:5}),stroke:new ol.style.Stroke({width:5,color:"rgba(255,0,0,0.8)"})})]}),this.ovmap_.addLayer(this.extentLayer),ol.easing.bounceFn=function(t,e){var i=(2*t+1)*Math.PI/2,n=e>0?-1/e:-100,r=-Math.cos(i)*Math.pow(2,n);return function(t){return t=1-Math.cos(t*Math.PI/2),1+Math.abs(Math.cos(i*t))*Math.pow(2,n*t)+r*t}},ol.easing.elasticFn=function(t,e){var i=3*t*Math.PI/2,n=e>0?-1/e:-100,r=Math.cos(i)*Math.pow(2,n);return function(t){return t=1-Math.cos(t*Math.PI/2),1-Math.cos(i*t)*Math.pow(2,n*t)+r*t}},this.ovmap_.addInteraction(new ol.interaction.Pointer({handleDownEvent:function(t){if(ol.animation){var n;!1!==e.panAnimation&&(n="elastic"==e.panAnimation||e.elasticPan?ol.animation.pan({duration:1e3,easing:ol.easing.elasticFn(2,.3),source:i.getMap().getView().getCenter()}):ol.animation.pan({duration:300,source:i.getMap().getView().getCenter()})),i.getMap().beforeRender(n),i.getMap().getView().setCenter(t.coordinate)}else!1!==e.panAnimation?"elastic"==e.panAnimation||e.elasticPan?i.getMap().getView().animate({center:t.coordinate,easing:ol.easing.elasticFn(2,.3),duration:1e3}):i.getMap().getView().animate({center:t.coordinate,duration:300}):i.getMap().getView().setCenter(t.coordinate);return!1}}))},ol.inherits(ol.control.Overview,ol.control.Control),ol.control.Overview.prototype.getOverviewMap=function(){return this.ovmap_},ol.control.Overview.prototype.toggleMap=function(){$(this.element).toggleClass("ol-collapsed"),this.ovmap_.updateSize()},ol.control.Overview.prototype.setPosition=function(t){/top/.test(t)?$(this.element).addClass("ol-control-top"):$(this.element).removeClass("ol-control-top"),/right/.test(t)?$(this.element).addClass("ol-control-right"):$(this.element).removeClass("ol-control-right")},ol.control.Overview.prototype.setMap=function(t){this.getMap()&&this.getMap().getView().un("propertychange",this.setView,this),ol.control.Control.prototype.setMap.call(this,t),t&&(t.getView().on("propertychange",this.setView,this),this.setView())},ol.control.Overview.prototype.calcExtent_=function(t){var e=this.getMap();if(e){var i=this.extentLayer.getSource();i.clear();var n=new ol.Feature,r=e.getSize(),o=e.getView().getResolution(),s=e.getView().getRotation(),a=e.getView().getCenter();if(o){var l=o*r[0]/2,h=o*r[1]/2,c=this.oview_.getResolution();if(l/c>5||h/c>5){var u,f,g,d=Math.cos(s),p=Math.sin(s);for(t=[[-l,-h],[-l,h],[l,h],[l,-h]],u=0;u<4;++u)f=t[u][0],g=t[u][1],t[u][0]=a[0]+f*d-g*p,t[u][1]=a[1]+f*p+g*d;n.setGeometry(new ol.geom.Polygon([t]))}else n.setGeometry(new ol.geom.Point(a));i.addFeature(n)}}},ol.control.Overview.prototype.setView=function(t){if(!t)return this.setView({key:"rotation"}),this.setView({key:"resolution"}),void this.setView({key:"center"});switch(t.key){case"rotation":this.rotation?this.oview_.setRotation(this.getMap().getView().getRotation()):this.oview_.getRotation()&&this.oview_.setRotation(0);break;case"center":var e=this.getMap().getView().calculateExtent(this.getMap().getSize()),i=this.oview_.calculateExtent(this.ovmap_.getSize());(e[0]<i[0]||e[1]<i[1]||e[2]>i[2]||e[3]>i[3])&&this.oview_.setCenter(this.getMap().getView().getCenter());break;case"resolution":var n=2*Math.round(this.getMap().getView().getZoom()/2)-4;n=Math.min(this.maxZoom,Math.max(this.minZoom,n)),this.oview_.setZoom(n)}this.calcExtent_()},ol.control.Permalink=function(t){function e(){"function"==typeof i.onclick?i.onclick(n.getLink()):n.setUrlReplace(!n.replaceState_)}var i=t||{},n=this,r=document.createElement("button");this.replaceState_=!1!==i.urlReplace,this.fixed_=i.fixed||6,this.hash_=i.anchor?"#":"?",r.addEventListener("click",e,!1),r.addEventListener("touchstart",e,!1);var o=document.createElement("div");o.className=(i.className||"ol-permalink")+" ol-unselectable ol-control",o.appendChild(r),ol.control.Control.call(this,{element:o,target:i.target}),this.on("change",this.viewChange_,this),this.search_={};var s=document.location.hash||document.location.search;if(s){s=s.replace(/(^#|^\?)/,"").split("&");for(var a=0;a<s.length;a++){var l=s[a].split("=");switch(l[0]){case"lon":case"lat":case"z":case"r":case"l":break;default:this.search_[l[0]]=l[1]}}}this.setPosition()},ol.inherits(ol.control.Permalink,ol.control.Control),ol.control.Permalink.prototype.setMap=function(t){this.getMap()&&(this.getMap().getLayerGroup().un("change",this.layerChange_,this),this.getMap().un("moveend",this.viewChange_,this)),ol.control.Control.prototype.setMap.call(this,t),t&&(t.getLayerGroup().on("change",this.layerChange_,this),t.on("moveend",this.viewChange_,this),this.setPosition())},ol.control.Permalink.prototype.getLayerByLink=function(t,e){!e&&this.getMap()&&(e=this.getMap().getLayers().getArray());for(var i=0;i<e.length;i++){if(e[i].get("permalink")==t)return e[i];if(e[i].getLayers){var n=this.getLayerByLink(t,e[i].getLayers().getArray());if(n)return n}}return!1},ol.control.Permalink.prototype.setPosition=function(){function t(i){i||(i=e.getLayers().getArray());for(var n=0;n<i.length;n++)i[n].get("permalink")&&i[n].setVisible(!1),i[n].getLayers&&t(i[n].getLayers().getArray())}var e=this.getMap();if(e){var i=document.location.hash||document.location.search;if(i){var n={};i=i.replace(/(^#|^\?)/,"").split("&");for(s=0;s<i.length;s++)n[(a=i[s].split("="))[0]]=a[1];var r=ol.proj.transform([Number(n.lon),Number(n.lat)],"EPSG:4326",e.getView().getProjection());if(r[0]&&r[1]&&e.getView().setCenter(r),n.z&&e.getView().setZoom(Number(n.z)),n.r&&e.getView().setRotation(Number(n.r)),n.l){var o=n.l.split("|");t();for(var s=0;s<o.length;s++){var a=o[s].split(":"),l=this.getLayerByLink(a[0]),h=Number(a[1]);l&&(l.setOpacity(h),l.setVisible(!0))}}}}},ol.control.Permalink.prototype.getUrlParams=function(){return this.search_},ol.control.Permalink.prototype.getLink=function(){var t=this.getMap(),e=ol.proj.transform(t.getView().getCenter(),t.getView().getProjection(),"EPSG:4326"),i=t.getView().getZoom(),n=t.getView().getRotation(),r=this.layerStr_,o="lon="+e[0].toFixed(this.fixed_)+"&lat="+e[1].toFixed(this.fixed_)+"&z="+i+(n?"&r="+Math.round(1e4*n)/1e4:"")+(r?"&l="+r:"");for(var s in this.search_)o+="&"+s+"="+this.search_[s];return document.location.protocol+"//"+document.location.host+document.location.pathname+this.hash_+o},ol.control.Permalink.prototype.setUrlReplace=function(t){try{if(this.replaceState_=t,t)window.history.replaceState(null,null,this.getLink());else{var e="";for(var i in this.search_)e+=(""==e?"?":"&")+i+"="+this.search_[i];window.history.replaceState(null,null,document.location.origin+document.location.pathname+e)}}catch(t){}},ol.control.Permalink.prototype.viewChange_=function(){try{this.replaceState_&&window.history.replaceState(null,null,this.getLink())}catch(t){}},ol.control.Permalink.prototype.layerChange_=function(t){function e(t){for(var n=0;n<t.length;n++)t[n].getVisible()&&t[n].get("permalink")&&(i&&(i+="|"),i+=t[n].get("permalink")+":"+t[n].get("opacity")),t[n].getLayers&&e(t[n].getLayers().getArray())}var i="";e(this.getMap().getLayers().getArray()),this.layerStr_=i,this.viewChange_()},ol.control.PirateMap=function(t){console.error("ol.control.PirateMap is deprecated. Use a combination of ol.filter.Texture + ol.controlCompass + ol.control.Clip.\nSee http://viglino.github.io/ol3-ext/examples/map.pirate.html"),t=t||{};var e=this;this.asset={},this.hue=t.hue?ol.color.asString(t.hue):"#963",this.saturation=t.saturation||.6,this.opacity=t.opacity||.7,this.asset.back=new Image,this.asset.back.onload=function(){e.map_&&e.map_.renderSync()};i=$("<img>").addClass("pirate_back").appendTo("body");this.asset.back.src=i.css("background-image").replace(/^url\(\"(.*)\"\)$/,"$1"),i.remove(),this.asset.compass=new Image,this.asset.compass.onload=function(){e.map_&&e.map_.renderSync()};var i=$("<img>").addClass("pirate_compass").appendTo("body");this.asset.compass.src=i.css("background-image").replace(/^url\(\"(.*)\"\)$/,"$1"),i.remove();var n=document.createElement("div");n.className="ol-pirate ol-unselectable ol-control",ol.control.Control.call(this,{element:n,target:t.target})},ol.inherits(ol.control.PirateMap,ol.control.Control),ol.control.PirateMap.prototype.setMap=function(t){ol.control.Control.prototype.setMap.call(this,t),this.map_&&(this.map_.un("precompose",this.drawMask_,this),this.map_.un("postcompose",this.drawPirate_,this)),t&&(t.on("precompose",this.drawMask_,this),t.on("postcompose",this.drawPirate_,this)),this.map_=t},function(){function t(t,e,i,n){t.moveTo(e+n,i),t.lineTo(e-n,i),t.moveTo(e,i+n),t.lineTo(e,i-n),t.moveTo(e+n,i+n),t.lineTo(e-n,i-n),t.moveTo(e+n,i-n),t.lineTo(e-n,i+n),t.moveTo(e+n/2,i-3*n/2),t.lineTo(e-n/2,i+3*n/2),t.moveTo(e+n/2,i+3*n/2),t.lineTo(e-n/2,i-3*n/2),t.moveTo(e+3*n/2,i+n/2),t.lineTo(e-3*n/2,i-n/2),t.moveTo(e+3*n/2,i-n/2),t.lineTo(e-3*n/2,i+n/2)}function e(e,i,n,r,o,s,a){e.save(),e.translate(n,r),e.rotate(o),e.beginPath(),t(e,0,0,1.5*a),e.stroke(),s&&(e.globalAlpha=1,e.drawImage(i,-i.width/2*s,-i.height/2*s,i.width*s,i.height*s)),e.restore()}var i=[[.023,.957],[0,.463],[.007,.42],[.004,.397],[.029,.383],[.013,.383],[.046,.367],[.011,.371],[.004,.349],[.006,.297],[.012,.265],[.007,.246],[.016,.191],[.031,.191],[.019,.171],[.012,.1],[.046,.001],[.071,.012],[.1,0],[.186,.01],[.228,.008],[.239,.022],[.25,.009],[.304,.002],[.311,.027],[.313,.007],[.322,.064],[.311,.101],[.329,.055],[.321,.018],[.334,.01],[.496,.009],[.53,.019],[.553,.01],[.615,.014],[.683,.03],[.697,.019],[.728,.027],[.732,.066],[.735,.012],[.752,.006],[.795,.014],[.85,.007],[.929,.013],[1,.204],[.994,.324],[.999,.393],[.988,.464],[.947,.46],[.977,.47],[.978,.479],[.99,.489],[.994,.572],[.992,.669],[.982,.673],[.994,.689],[1,.716],[.999,.81],[.987,.816],[.996,.83],[.99,.894],[.944,1],[.848,.993],[.841,.97],[.837,.993],[.798,.981],[.697,.98],[.653,.986],[.606,.981],[.598,.968],[.598,.941],[.592,.982],[.558,.988],[.507,.983],[.485,.988],[.418,.978],[.4,.969],[.393,.98],[.338,.984],[.304,.977],[.251,.984],[.238,.979],[.252,.915],[.239,.969],[.233,.953],[.23,.984],[.155,.971],[.147,.957],[.142,.974],[.095,.976],[.066,.98],[.023,.957]];ol.control.PirateMap.prototype.drawMask_=function(t){var e=t.context,n=e.canvas,r=n.width,o=n.height;e.save(),e.beginPath(),e.moveTo(r*i[0][0],o*i[0][1]);for(var s=1;s<i.length;s++)e.lineTo(r*i[s][0],o*i[s][1]);e.clip()},ol.control.PirateMap.prototype.drawPirate_=function(t){if(this.map_){var i=t.context,n=i.canvas,r=t.frameState.pixelRatio,o=this.map_.getView(),s=this.asset.back,a=this.asset.compass,l=Math.max(n.width,n.height),h=o.getResolution()/r,c=o.getRotation();i.save(),i.globalCompositeOperation="color",i.fillStyle=this.hue,i.globalAlpha=this.saturation,i.fillRect(0,0,n.width,n.height),i.restore(),i.save();var u=t.frameState.extent,f=u[0]/h,g=u[1]/h;f%=s.width,g=s.height-g%s.height,f<0&&(f+=s.width),g<0&&(g+=s.height),i.globalCompositeOperation="multiply",i.globalAlpha=this.opacity,i.rotate(c);for(var d=-f-l;d<l;d+=s.width)for(var p=-g-l;p<l;p+=s.height)i.drawImage(s,d,p);i.restore(),i.save(),i.lineWidth=1,i.strokeStyle=this.hue,i.globalCompositeOperation="multiply",i.globalAlpha=this.opacity,e(i,a,.9*n.width,.9*n.height,c,r,1.5*l),e(i,a,a.width/2+.05*n.width,.5*n.height,c,.5*r,1.5*l),i.restore(),i.restore()}}}(),ol.control.Profil=function(t){var e=t||{};this.info=e.info||ol.control.Profil.prototype.info;var i,n=this;e.target?i=$("<div>").addClass(e.className||"ol-profil"):(i=$("<div>").addClass((e.className||"ol-profil")+" ol-unselectable ol-control ol-collapsed"),this.button=$("<button>").on("click touchstart",function(t){n.toggle(),t.preventDefault()}).appendTo(i));var r=$("<div>").addClass("ol-inner").appendTo(i);r=$("<div>").css("position","relative").appendTo(r);var o=this.ratio=2;this.canvas_=document.createElement("canvas"),this.canvas_.width=(e.width||300)*o,this.canvas_.height=(e.height||150)*o,$(this.canvas_).css({transform:"scale(0.5,0.5)","transform-origin":"0 0","-ms-transform":"scale(0.5,0.5)","-ms-transform-origin":"0 0","-webkit-transform":"scale(0.5,0.5)","-webkit-transform-origin":"0 0",transform:"scale(0.5,0.5)","transform-origin":"0 0"}),$("<div>").appendTo(r).width(this.canvas_.width/o).height(this.canvas_.height/o).append(this.canvas_).on("click mousemove",function(t){n.onMove(t)}),ol.control.Control.call(this,{element:i.get(0),target:e.target}),this.margin_={top:10*o,left:40*o,bottom:30*o,right:10*o},this.info.ytitle||(this.margin_.left-=20*o),this.info.xtitle||(this.margin_.bottom-=20*o),this.bar_=$("<div>").addClass("ol-profilbar").css({top:this.margin_.top/o+"px",height:(this.canvas_.height-this.margin_.top-this.margin_.bottom)/o+"px"}).appendTo(r),this.cursor_=$("<div>").addClass("ol-profilcursor").appendTo(r),this.popup_=$("<div>").addClass("ol-profilpopup").appendTo(this.cursor_);var s=$("<table cellpadding='0' cellspacing='0'>").appendTo(r).width(this.canvas_.width/o),a=$("<tr>").addClass("track-info").appendTo(s);$("<td>").html((this.info.zmin||"Zmin")+': <span class="zmin">').appendTo(a),$("<td>").html((this.info.zmax||"Zmax")+': <span class="zmax">').appendTo(a),$("<td>").html((this.info.distance||"Distance")+': <span class="dist">').appendTo(a),$("<td>").html((this.info.time||"Time")+': <span class="time">').appendTo(a),a=$("<tr>").addClass("point-info").appendTo(s),$("<td>").html((this.info.altitude||"Altitude")+': <span class="z">').appendTo(a),$("<td>").html((this.info.distance||"Distance")+': <span class="dist">').appendTo(a),$("<td>").html((this.info.time||"Time")+': <span class="time">').appendTo(a),this.tab_=[],e.feature&&this.setGeometry(e.feature)},ol.inherits(ol.control.Profil,ol.control.Control),ol.control.Profil.prototype.info={zmin:"Zmin",zmax:"Zmax",ytitle:"Altitude (m)",xtitle:"Distance (km)",time:"Time",altitude:"Altitude",distance:"Distance"},ol.control.Profil.prototype.popup=function(t){this.popup_.html(t)},ol.control.Profil.prototype.onMove=function(t){if(this.tab_.length){var e=$(this.canvas_).offset(),i=t.pageX-e.left,n=t.pageY-e.top,r=this.ratio;if(i>this.margin_.left/r&&i<(this.canvas_.width-this.margin_.right)/r&&n>this.margin_.top/r&&n<(this.canvas_.height-this.margin_.bottom)/r){this.bar_.css("left",i+"px").show();for(var o,s=(i*r-this.margin_.left)/this.scale_[0],a=this.tab_[0],l=1;o=this.tab_[l];l++)if(o[0]>=s){s<(o[0]+a[0])/2&&(o=a);break}o?this.cursor_.css({left:i+"px",top:(this.canvas_.height-this.margin_.bottom+o[1]*this.scale_[1]+this.dy_)/r+"px"}).show():this.cursor_.hide(),this.bar_.parent().addClass("over"),$(".point-info .z",this.element).text(o[1]+"m"),$(".point-info .dist",this.element).text((o[0]/1e3).toFixed(1)+"km"),$(".point-info .time",this.element).text(o[2]),i>this.canvas_.width/r/2?this.popup_.addClass("ol-left"):this.popup_.removeClass("ol-left"),this.dispatchEvent({type:"over",click:"click"==t.type,coord:o[3],time:o[2],distance:o[0]})}else this.bar_.parent().hasClass("over")&&(this.bar_.hide(),this.cursor_.hide(),this.bar_.parent().removeClass("over"),this.dispatchEvent({type:"out"}))}},ol.control.Profil.prototype.show=function(){$(this.element).removeClass("ol-collapsed"),this.dispatchEvent({type:"show",show:!0})},ol.control.Profil.prototype.hide=function(){$(this.element).addClass("ol-collapsed"),this.dispatchEvent({type:"show",show:!1})},ol.control.Profil.prototype.toggle=function(){var t=$(this.element).toggleClass("ol-collapsed").hasClass("ol-collapsed");this.dispatchEvent({type:"show",show:!t})},ol.control.Profil.prototype.isShown=function(){return!$(this.element).hasClass("ol-collapsed")},ol.control.Profil.prototype.setGeometry=function(t,e){e||(e={}),t instanceof ol.Feature&&(t=t.getGeometry());var i=this.canvas_,n=i.getContext("2d"),r=i.width,o=i.height;if(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r,o),/Z/.test(t.getLayout())){/M/.test(t.getLayout())?$(".time",this.element).parent().show():$(".time",this.element).parent().hide();var s=t.getCoordinates();switch(t.getType()){case"LineString":break;case"MultiLineString":s=s[0];break;default:return}var a=new ol.Sphere(6378137),l=e.projection||this.getMap().getView().getProjection();n.setTransform(1,0,0,1,this.margin_.left,o-this.margin_.bottom);var h=this.ratio;r-=this.margin_.right+this.margin_.left,o-=this.margin_.top+this.margin_.bottom,n.strokeStyle="#000",n.lineWidth=.5*h,n.beginPath(),n.moveTo(0,0),n.lineTo(0,-o),n.moveTo(0,0),n.lineTo(r,0),n.stroke();for(var c,u,f,g=1/0,d=-1/0,p=this.tab_=[],m=0;b=s[m];m++)(u=b[2])<g&&(g=u),u>d&&(d=u),0==m?c=0:c+=function(t,e){return a.haversineDistance(ol.proj.transform(t,l,"EPSG:4326"),ol.proj.transform(e,l,"EPSG:4326"))}(s[m-1],b),f=function(t,e){if(!t||!e)return"-";var i=(e-t)/60,n=Math.trunc(i/60),r=Math.trunc(i-60*n);return n+"h"+(r<10?"0":"")+r+"mn"}(s[0][3],b[3]),p.push([c,u,f,b]);$(".track-info .zmin",this.element).text(g.toFixed(2)+"m"),$(".track-info .zmax",this.element).text(d.toFixed(2)+"m"),c>1e3?$(".track-info .dist",this.element).text((c/1e3).toFixed(1)+"km"):$(".track-info .dist",this.element).text(c.toFixed(1)+"m"),$(".track-info .time",this.element).text(f);for(var y=e.graduation||100;;){if(!(o/(((d=Math.ceil(d/y)*y)-(g=Math.floor(g/y)*y))/y)<15*h))break;y*=2}"number"==typeof e.zmin&&g>e.zmin&&(g=e.zmin),"number"==typeof e.zmax&&d<e.zmax&&(d=e.zmax);var v=e.amplitude;v&&(d=Math.max(g+v,d));var x=r/c,w=-o/(d-g),C=this.dy_=-g*w;this.scale_=[x,w],n.font=10*h+"px arial",n.textAlign="right",n.textBaseline="middle",n.fillStyle="#000",n.beginPath();for(m=g;m<=d;m+=y)"km"!=e.zunit?n.fillText(m,-4*h,m*w+C):n.fillText((m/1e3).toFixed(1),-4*h,m*w+C),n.moveTo(-2*h,m*w+C),0!=m?n.lineTo(c*x,m*w+C):n.lineTo(0,m*w+C);n.textAlign="center",n.textBaseline="top",n.setLineDash([h,3*h]);var E,I=e.unit||"km";c>1e3?(E=100*Math.round(c/1e3))>1e3&&(E=1e3*Math.ceil(E/1e3)):(I="m",E=c>100?10*Math.round(c/100):c>10?Math.round(c/10):c>1?Math.round(c)/10:c);for(m=0;m<=c;m+=E){var S="m"==I?m:m/1e3;n.fillText(Math.round(10*S)/10,m*x,4*h),n.moveTo(m*x,2*h),n.lineTo(m*x,0)}n.font=12*h+"px arial",n.fillText(this.info.xtitle.replace("(km)","("+I+")"),r/2,18*h),n.save(),n.rotate(-Math.PI/2),n.fillText(this.info.ytitle,o/2,-this.margin_.left),n.restore(),n.stroke(),n.strokeStyle="#369",n.lineWidth=1,n.setLineDash([]),n.beginPath();for(var b,m=0;b=p[m];m++)0==m?n.moveTo(b[0]*x,b[1]*w+C):n.lineTo(b[0]*x,b[1]*w+C);n.stroke()}},ol.control.Profil.prototype.getImage=function(t,e){return"canvas"===t?this.canvas_:this.canvas_.toDataURL(t,e)},ol.control.SearchFeature=function(t){var e=this;t||(t={});var i;t.target?i=$("<div>").addClass((t.className||"")+"ol-searchfeature"):(i=$("<div>").addClass((t.className||"")+"ol-searchfeature ol-unselectable ol-control ol-collapsed"),this.button=$("<button>").click(function(){i.toggleClass("ol-collapsed"),i.hasClass("ol-collapsed")||$("input",i).focus()}).appendTo(i));var n,r="";$("<input>").attr("type","search").attr("placeholder",t.placeholder||"search...").on("keyup search",function(i){r!=$(this).val()&&(r=$(this).val(),n&&clearTimeout(n),n=setTimeout(function(){e.search(r)},t.typing||300))}).blur(function(){setTimeout(function(){i.addClass("ol-collapsed")},200)}).focus(function(){}).appendTo(i),$("<ul>").addClass("autocomplete").appendTo(i),ol.control.Control.call(this,{element:i.get(0),target:t.target}),"function"==typeof t.property&&(this.getFeatureName=t.property),"function"==typeof t.getSearchString&&(this.getSearchString=t.getSearchString),this.source_=t.source,this.set("property",t.property||"name"),this.set("minLength",t.minLength||1),this.set("maxItems",t.minLength||10)},ol.inherits(ol.control.SearchFeature,ol.control.Control),ol.control.SearchFeature.prototype.getFeatureName=function(t){return t.get(this.get("property")||"name")},ol.control.SearchFeature.prototype.getSearchString=function(t){return this.getFeatureName(t)},ol.control.SearchFeature.prototype.search=function(t){var e=$("ul",this.element).html("");if(!(t.length<this.get("minLength"))){var i=this,n=this.get("maxItems");t=t.replace(/^\*/,"");for(var r,o=new RegExp(t,"i"),s=this.source_.getFeatures(),a=0;(r=s[a])&&!(o.test(this.getSearchString(r))&&($("<li>").text(this.getFeatureName(r)).data("feature",r).click(function(t){i.dispatchEvent({type:"select",feature:$(this).data("feature")})}).appendTo(e),--n<=0));a++);}},ol.control.Swipe=function(t){var e=t||{},i=document.createElement("button"),n=document.createElement("div");n.className=(e.className||"ol-swipe")+" ol-unselectable ol-control",n.appendChild(i),$(n).on("mousedown touchstart",this,this.move),ol.control.Control.call(this,{element:n}),this.layers=[],e.layers&&this.addLayer(e.layers,!1),e.rightLayers&&this.addLayer(e.rightLayers,!0),this.on("propertychange",function(){this.getMap()&&this.getMap().renderSync(),"horizontal"===this.get("orientation")?($(this.element).css("top",100*this.get("position")+"%"),$(this.element).css("left","")):("vertical"!==this.get("orientation")&&this.set("orientation","vertical"),$(this.element).css("left",100*this.get("position")+"%"),$(this.element).css("top","")),$(this.element).removeClass("horizontal vertical"),$(this.element).addClass(this.get("orientation"))},this),this.set("position",e.position||.5),this.set("orientation",e.orientation||"vertical")},ol.inherits(ol.control.Swipe,ol.control.Control),ol.control.Swipe.prototype.setMap=function(t){if(this.getMap()){for(e=0;e<this.layers.length;e++)(i=this.layers[e]).right?i.layer.un("precompose",this.precomposeRight,this):i.layer.un("precompose",this.precomposeLeft,this),i.layer.un("postcompose",this.postcompose,this);this.getMap().renderSync()}if(ol.control.Control.prototype.setMap.call(this,t),t){for(var e=0;e<this.layers.length;e++){var i=this.layers[e];i.right?i.layer.on("precompose",this.precomposeRight,this):i.layer.on("precompose",this.precomposeLeft,this),i.layer.on("postcompose",this.postcompose,this)}t.renderSync()}},ol.control.Swipe.prototype.isLayer_=function(t){for(k=0;k<this.layers.length;k++)if(this.layers[k].layer===t)return k;return-1},ol.control.Swipe.prototype.addLayer=function(t,e){t instanceof Array||(t=[t]);for(var i=0;i<t.length;i++)l=t[i],this.isLayer_(l)<0&&(this.layers.push({layer:l,right:e}),this.getMap()&&(e?l.on("precompose",this.precomposeRight,this):l.on("precompose",this.precomposeLeft,this),l.on("postcompose",this.postcompose,this),this.getMap().renderSync()))},ol.control.Swipe.prototype.removeLayer=function(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){var i=this.isLayer_(t[e]);i>=0&&this.getMap()&&(this.layers[i].right?t[e].un("precompose",this.precomposeRight,this):t[e].un("precompose",this.precomposeLeft,this),t[e].un("postcompose",this.postcompose,this),this.layers.splice(i,1),this.getMap().renderSync())}},ol.control.Swipe.prototype.move=function(t){var e=t.data;switch(t.type){case"touchcancel":case"touchend":case"mouseup":e.isMoving=!1,$(document).off("mouseup mousemove touchend touchcancel touchmove",e.move);break;case"mousedown":case"touchstart":e.isMoving=!0,$(document).on("mouseup mousemove touchend touchcancel touchmove",e,e.move);default:if(e.isMoving)if("vertical"===e.get("orientation")){var i=t.pageX||t.originalEvent.touches[0].pageX;if(!i)break;i-=$(e.getMap().getTargetElement()).offset().left;r=e.getMap().getSize()[0];r=Math.min(Math.max(0,1-(r-i)/r),1),e.set("position",r)}else{var n=t.pageY||t.originalEvent.touches[0].pageY;if(!n)break;n-=$(e.getMap().getTargetElement()).offset().top;var r=e.getMap().getSize()[1];r=Math.min(Math.max(0,1-(r-n)/r),1),e.set("position",r)}}},ol.control.Swipe.prototype.precomposeLeft=function(t){var e=t.context,i=e.canvas;e.save(),e.beginPath(),"vertical"===this.get("orientation")?e.rect(0,0,i.width*this.get("position"),i.height):e.rect(0,0,i.width,i.height*this.get("position")),e.clip()},ol.control.Swipe.prototype.precomposeRight=function(t){var e=t.context,i=e.canvas;e.save(),e.beginPath(),"vertical"===this.get("orientation")?e.rect(i.width*this.get("position"),0,i.width,i.height):e.rect(0,i.height*this.get("position"),i.width,i.height),e.clip()},ol.control.Swipe.prototype.postcompose=function(t){ctx=t.context.restore()},ol.control.Target=function(t){t=t||{},this.style=t.style||[new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new ol.style.Stroke({color:"#fff",width:3})})}),new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new ol.style.Stroke({color:"#000",width:1})})})],this.style instanceof Array||(this.style=[this.style]),this.composite=t.composite||"";var e=document.createElement("div");e.className="ol-target ol-unselectable ol-control",ol.control.Control.call(this,{element:e,target:t.target}),this.setVisible(!1!==t.visible)},ol.inherits(ol.control.Target,ol.control.Control),ol.control.Target.prototype.setMap=function(t){this.getMap()&&(this.getMap().un("postcompose",this.drawTarget_,this),this.getVisible()&&this.getMap().renderSync()),ol.control.Control.prototype.setMap.call(this,t),t&&t.on("postcompose",this.drawTarget_,this)},ol.control.Target.prototype.setVisible=function(t){this.set("visible",t),this.getMap()&&this.getMap().renderSync()},ol.control.Target.prototype.getVisible=function(){return this.get("visible")},ol.control.Target.prototype.drawTarget_=function(t){if(this.getMap()&&this.getVisible()){var e=t.context,i=t.frameState.pixelRatio;e.save(),e.scale(i,i);var n=e.canvas.width/(2*i),r=e.canvas.height/(2*i),o=new ol.geom.Point(this.getMap().getCoordinateFromPixel([n,r]));this.composite&&(e.globalCompositeOperation=this.composite);for(var s=0;s<this.style.length;s++){var a=this.style[s];if(a instanceof ol.style.Style){var l=a.getImage();if(l){var h=l.getScale();l.setScale(i*h)}t.vectorContext.setStyle(a),t.vectorContext.drawGeometry(o),l&&l.setScale(h)}}e.restore()}},ol.control.Toggle=function(t){t=t||{};var e=this;this.interaction_=t.interaction,this.interaction_&&this.interaction_.on("change:active",function(t){e.setActive(!t.oldValue)}),t.toggleFn&&(t.onToggle=t.toggleFn),t.handleClick=function(){e.toggle(),t.onToggle&&t.onToggle.call(e,e.getActive())},t.className=(t.className||"")+" ol-toggle",ol.control.Button.call(this,t),this.set("title",t.title),this.set("autoActivate",t.autoActivate),t.bar&&(this.subbar_=t.bar,this.subbar_.setTarget(this.element),$(this.subbar_.element).addClass("ol-option-bar")),this.setActive(t.active)},ol.inherits(ol.control.Toggle,ol.control.Button),ol.control.Toggle.prototype.setMap=function(t){!t&&this.getMap()&&(this.interaction_&&this.getMap().removeInteraction(this.interaction_),this.subbar_&&this.getMap().removeControl(this.subbar_)),ol.control.Control.prototype.setMap.call(this,t),t&&(this.interaction_&&t.addInteraction(this.interaction_),this.subbar_&&t.addControl(this.subbar_))},ol.control.Toggle.prototype.getSubBar=function(){return this.subbar_},ol.control.Toggle.prototype.getActive=function(){return $(this.element).hasClass("ol-active")},ol.control.Toggle.prototype.toggle=function(){this.getActive()?this.setActive(!1):this.setActive(!0)},ol.control.Toggle.prototype.setActive=function(t){this.getActive()!=t&&(t?$(this.element).addClass("ol-active"):$(this.element).removeClass("ol-active"),this.interaction_&&this.interaction_.setActive(t),this.subbar_&&this.subbar_.setActive(t),this.dispatchEvent({type:"change:active",key:"active",oldValue:!t,active:t}))},ol.control.Toggle.prototype.setInteraction=function(t){this.interaction_=t},ol.control.Toggle.prototype.getInteraction=function(){return this.interaction_},ol.featureAnimation=function(t){t=t||{},this.duration_="number"==typeof t.duration?t.duration>=0?t.duration:0:1e3,this.fade_="function"==typeof t.fade?t.fade:null,this.repeat_=Number(t.repeat);var e="function"==typeof t.easing?t.easing:ol.easing.linear;t.revers?this.easing_=function(t){return 1-e(t)}:this.easing_=e,this.hiddenStyle=t.hiddenStyle,ol.Object.call(this)},ol.inherits(ol.featureAnimation,ol.Object),ol.featureAnimation.prototype.drawGeom_=function(t,e,i){this.fade_&&(t.context.globalAlpha=this.fade_(1-t.elapsed));for(var n=t.style,r=0;r<n.length;r++){var o,s=n[r].getImage();s&&(o=s.getScale(),s.setScale(t.frameState.pixelRatio*o)),t.vectorContext.setStyle(n[r]),n[r].getZIndex()<0?t.vectorContext.drawGeometry(i||e):t.vectorContext.drawGeometry(e),s&&s.setScale(o)}},ol.featureAnimation.prototype.animate=function(t){return!1},ol.Map.prototype.animateFeature=ol.layer.Vector.prototype.animateFeature=function(t,e){function i(i){h.vectorContext=i.vectorContext,h.frameState=i.frameState,h.extent||(h.extent=i.frameState.extent,h.start=i.frameState.time,h.context=i.context),h.time=i.frameState.time-h.start,h.elapsed=h.time/e[f].duration_,h.elapsed>1&&(h.elapsed=1),e[f].animate(h)||(++u<e[f].repeat_?h.extent=!1:f<e.length-1?(e[f].dispatchEvent({type:"animationend",feature:t}),f++,u=0,h.extent=!1):n()),i.frameState.animate=!0}function n(i){ol.Observable.unByKey(o),o=null,t.setStyle(a);var n={type:"animationend",feature:t};if(i)for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r]);e[f].dispatchEvent(n),s.dispatchEvent(n)}function r(n){if(e.length&&!o){o=s.on("postcompose",i,s),s.renderSync?s.renderSync():s.changed();var r={type:"animationstart",feature:t};if(n)for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a]);e[f].dispatchEvent(r),s.dispatchEvent(r)}}var o,s=this,a=t.getStyle(),l=a||(this.getStyleFunction?this.getStyleFunction()(t):null);l||(l=[]),l instanceof Array||(l=[l]),t.setStyle(e.hiddenStyle||[]);var h={vectorContext:null,frameState:null,start:0,time:0,elapsed:0,extent:!1,feature:t,geom:t.getGeometry(),typeGeom:t.getGeometry().getType(),bbox:t.getGeometry().getExtent(),coord:ol.extent.getCenter(t.getGeometry().getExtent()),style:l};e instanceof Array||(e=[e]);for(var c=e.length-1;c>=0;c--)0===e[c].duration_&&e.splice(c,1);var u=0,f=0;return r(),{start:r,stop:n,isPlaying:function(){return!!o}}},ol.featureAnimation.Bounce=function(t){t=t||{},ol.featureAnimation.call(this,t),this.amplitude_=t.amplitude||40,this.bounce_=-Math.PI*(t.bounce||3)},ol.inherits(ol.featureAnimation.Bounce,ol.featureAnimation),ol.featureAnimation.Bounce.prototype.animate=function(t){var e=t.geom.clone(),i=Math.abs(Math.sin(this.bounce_*t.elapsed))*this.amplitude_*(1-this.easing_(t.elapsed))*t.frameState.viewState.resolution;return e.translate(0,i),this.drawGeom_(t,e,t.geom),t.time<=this.duration_},ol.featureAnimation.Drop=function(t){t=t||{},this.speed_=t.speed||0,ol.featureAnimation.call(this,t),this.side_=t.side||"top"},ol.inherits(ol.featureAnimation.Drop,ol.featureAnimation),ol.featureAnimation.Drop.prototype.animate=function(t){t.time||("top"==this.side_?this.dy=t.extent[3]-t.bbox[1]:this.dy=t.extent[1]-t.bbox[3],this.speed_&&(this.duration_=Math.abs(this.dy)/this.speed_/t.frameState.viewState.resolution));var e=t.geom.clone();return e.translate(0,this.dy*(1-this.easing_(t.elapsed))),this.drawGeom_(t,e,t.geom),t.time<=this.duration_},ol.featureAnimation.Fade=function(t){t=t||{},this.speed_=t.speed||0,ol.featureAnimation.call(this,t)},ol.inherits(ol.featureAnimation.Fade,ol.featureAnimation),ol.featureAnimation.Fade.prototype.animate=function(t){return t.context.globalAlpha=this.easing_(t.elapsed),this.drawGeom_(t,t.geom),t.time<=this.duration_},ol.featureAnimation.None=function(t){ol.featureAnimation.call(this,t)},ol.inherits(ol.featureAnimation.None,ol.featureAnimation),ol.featureAnimation.None.prototype.animate=function(t){return t.time<=this.duration_},ol.featureAnimation.Null=function(t){ol.featureAnimation.call(this,{duration:0})},ol.inherits(ol.featureAnimation.Null,ol.featureAnimation),ol.featureAnimation.Path=function(t){t=t||{},ol.featureAnimation.call(this,t),this.speed_=t.speed||0,this.path_=t.path,this.path_&&this.path_.getGeometry&&(this.path_=this.path_.getGeometry()),this.path_&&this.path_.getLineString&&(this.path_=this.path_.getLineString()),this.path_.getLength?(this.dist_=this.path_.getLength(),this.path_&&this.path_.getCoordinates&&(this.path_=this.path_.getCoordinates())):this.dist_=0,this.speed_>0&&(this.duration_=this.dist_/this.speed_)},ol.inherits(ol.featureAnimation.Path,ol.featureAnimation),ol.featureAnimation.Path.prototype.animate=function(t){if(!t.time&&!this.dist_)return!1;var e,i,n,r,o,s=this.dist_*this.easing_(t.elapsed),a=0;i=this.path_[0];for(var l=1;l<this.path_.length;l++){if(e=i,i=this.path_[l],n=i[0]-e[0],r=i[1]-e[1],(o=Math.sqrt(n*n+r*r))&&a+o>=s){var h=(s-a)/o;i=[e[0]+(i[0]-e[0])*h,e[1]+(i[1]-e[1])*h];break}a+=o}return t.geom.setCoordinates(i),this.drawGeom_(t,t.geom),t.time<=this.duration_},ol.featureAnimation.Shake=function(t){t=t||{},ol.featureAnimation.call(this,t),this.amplitude_=t.amplitude||40,this.bounce_=-Math.PI*(t.bounce||6),this.horizontal_=t.horizontal},ol.inherits(ol.featureAnimation.Shake,ol.featureAnimation),ol.featureAnimation.Shake.prototype.animate=function(t){var e=t.geom.clone(),i=t.geom.clone(),n=this.easing_(t.elapsed);return n=Math.sin(this.bounce_*n)*this.amplitude_*(1-n)*t.frameState.viewState.resolution,this.horizontal_?(e.translate(n,0),i.translate(n,0)):e.translate(0,n),this.drawGeom_(t,e,i),t.time<=this.duration_},ol.featureAnimation.Show=function(t){ol.featureAnimation.call(this,t)},ol.inherits(ol.featureAnimation.Show,ol.featureAnimation),ol.featureAnimation.Show.prototype.animate=function(t){return this.drawGeom_(t,t.geom),t.time<=this.duration_},ol.featureAnimation.Slide=function(t){t=t||{},this.speed_=t.speed||0,ol.featureAnimation.call(this,t),this.side_=t.side||"left"},ol.inherits(ol.featureAnimation.Slide,ol.featureAnimation),ol.featureAnimation.Slide.prototype.animate=function(t){t.time||("left"==this.side_?this.dx=t.extent[0]-t.bbox[2]:this.dx=t.extent[2]-t.bbox[0],this.speed_&&(this.duration_=Math.abs(this.dx)/this.speed_/t.frameState.viewState.resolution));var e=t.geom.clone();return e.translate(this.dx*(1-this.easing_(t.elapsed)),0),this.drawGeom_(t,e),t.time<=this.duration_},ol.featureAnimation.Teleport=function(t){ol.featureAnimation.call(this,t)},ol.inherits(ol.featureAnimation.Teleport,ol.featureAnimation),ol.featureAnimation.Teleport.prototype.animate=function(t){var e=this.easing_(t.elapsed);if(e){t.context.save(),t.context.globalAlpha=e,t.context.scale(e,1/e);var i=t.frameState.coordinateToPixelTransform,n=(1/e-1)*(i[0]*t.coord[0]+i[1]*t.coord[1]+i[4]),r=(e-1)*(i[2]*t.coord[0]+i[3]*t.coord[1]+i[5]);t.context.translate(n,r),this.drawGeom_(t,t.geom),t.context.restore()}return t.time<=this.duration_},ol.featureAnimation.Throw=function(t){t=t||{},ol.featureAnimation.call(this,t),this.speed_=t.speed||0,this.side_=t.side||"left"},ol.inherits(ol.featureAnimation.Throw,ol.featureAnimation),ol.featureAnimation.Throw.prototype.animate=function(t){if(!t.time&&this.speed_){var e,i;"left"==this.side_?(e=this.dx=t.extent[0]-t.bbox[2],i=this.dy=t.extent[3]-t.bbox[1]):(e=this.dx=t.extent[2]-t.bbox[0],i=this.dy=t.extent[3]-t.bbox[1]),this.duration_=Math.sqrt(e*e+i*i)/this.speed_/t.frameState.viewState.resolution}var n=t.geom.clone(),r=t.geom.clone();return n.translate(this.dx*(1-this.easing_(t.elapsed)),this.dy*Math.cos(Math.PI/2*this.easing_(t.elapsed))),r.translate(this.dx*(1-this.easing_(t.elapsed)),0),this.drawGeom_(t,n,r),t.time<=this.duration_},ol.featureAnimation.Zoom=function(t){ol.featureAnimation.call(this,t)},ol.inherits(ol.featureAnimation.Zoom,ol.featureAnimation),ol.featureAnimation.Zoom.prototype.animate=function(t){var e=this.easing_(t.elapsed);if(e){t.context.save();var i=t.frameState.pixelRatio,n=t.frameState.coordinateToPixelTransform,r=(1/e-1)*i*(n[0]*t.coord[0]+n[1]*t.coord[1]+n[4]),o=(1/e-1)*i*(n[2]*t.coord[0]+n[3]*t.coord[1]+n[5]);t.context.scale(e,e),t.context.translate(r,o),t.frameState.pixelRatio=1,this.drawGeom_(t,t.geom),t.frameState.pixelRatio=i,t.context.restore()}return t.time<=this.duration_},ol.filter={},ol.filter.Base=function(t){ol.Object.call(this),t&&!1===t.active?this.set("active",!1):this.set("active",!0)},ol.inherits(ol.filter.Base,ol.Object),ol.filter.Base.prototype.setActive=function(t){this.set("active",!0===t)},ol.filter.Base.prototype.getActive=function(t){return this.get("active")},function(){function t(t){this.get("active")&&this.precompose(t)}function e(t){this.get("active")&&this.postcompose(t)}function i(t){this.renderSync?this.renderSync():this.changed()}function n(n){this.filters_||(this.filters_=[]),this.filters_.push(n),n.precompose&&this.on("precompose",t,n),n.postcompose&&this.on("postcompose",e,n),n.on("propertychange",i,this),i.call(this)}function r(n){this.filters_||(this.filters_=[]);for(var r=this.filters_.length-1;r>=0;r--)this.filters_[r]===n&&this.filters_.splice(r,1);n.precompose&&this.un("precompose",t,n),n.postcompose&&this.un("postcompose",e,n),n.un("propertychange",i,this),i.call(this)}ol.Map.prototype.addFilter=function(t){n.call(this,t)},ol.Map.prototype.removeFilter=function(t){r.call(this,t)},ol.Map.prototype.getFilters=function(){return this.filters_},ol.layer.Base.prototype.addFilter=function(t){n.call(this,t)},ol.layer.Base.prototype.removeFilter=function(t){r.call(this,t)},ol.layer.Base.prototype.getFilters=function(){return this.filters_}}(),ol.filter.Mask=function(t){if(t=t||{},ol.filter.Base.call(this,t),t.feature)switch(t.feature.getGeometry().getType()){case"Polygon":case"MultiPolygon":this.feature_=t.feature}this.set("inner",t.inner),this.fillColor_=t.fill?ol.color.asString(t.fill.getColor())||"rgba(0,0,0,0.2)":"rgba(0,0,0,0.2)"},ol.inherits(ol.filter.Mask,ol.filter.Base),ol.filter.Mask.prototype.drawFeaturePath_=function(t,e){function i(t){return[(t[0]*s[0]+t[1]*s[1]+s[4])*o,(t[0]*s[2]+t[1]*s[3]+s[5])*o]}var n=t.context,r=n.canvas,o=t.frameState.pixelRatio,s=t.frameState.coordinateToPixelTransform;s||(s=t.frameState.coordinateToPixelMatrix,i=function(t){return[(t[0]*s[0]+t[1]*s[1]+s[12])*o,(t[0]*s[4]+t[1]*s[5]+s[13])*o]});var a=this.feature_.getGeometry().getCoordinates();"Polygon"==this.feature_.getGeometry().getType()&&(a=[a]),n.beginPath(),e&&(n.moveTo(0,0),n.lineTo(r.width,0),n.lineTo(r.width,r.height),n.lineTo(0,r.height),n.lineTo(0,0));for(var l=0;l<a.length;l++)for(var h=a[l],c=0;c<h.length;c++){var u=i(h[c][0]);n.moveTo(u[0],u[1]);for(var f=1;f<h[c].length;f++)u=i(h[c][f]),n.lineTo(u[0],u[1])}},ol.filter.Mask.prototype.postcompose=function(t){if(this.feature_){var e=t.context;e.save(),this.drawFeaturePath_(t,!this.get("inner")),e.fillStyle=this.fillColor_,e.fill("evenodd"),e.restore()}},ol.filter.Clip=function(t){if(t=t||{},ol.filter.Base.call(this,t),this.set("coords",t.coords),this.set("units",t.units),this.set("keepAspectRatio",t.keepAspectRatio),this.set("extent",t.extent||[0,0,1,1]),this.set("color",t.color),!t.extent&&"%"!=t.units&&t.coords){for(var e,i=1/0,n=1/0,r=-1/0,o=-1/0,s=0;e=t.coords[s];s++)i>e[0]&&(i=e[0]),r<e[0]&&(r=e[0]),n>e[1]&&(n=e[1]),o<e[1]&&(o=e[1]);t.extent=[i,n,r,o]}},ol.inherits(ol.filter.Clip,ol.filter.Base),ol.filter.Clip.prototype.clipPath_=function(t){var e=t.context,i=e.canvas,n=this.get("coords");if(n){var r=this.get("extent"),o=1,s=1;"%"==this.get("units")&&(o=i.width/(r[2]-r[0]),s=i.height/(r[3]-r[1])),this.get("keepAspectRatio")&&(o=s=Math.min(o,s));var a=this.get("position"),l=0,h=0;/left/.test(a)?l=-r[0]*o:/center/.test(a)?l=i.width/2-(r[2]-r[0])*o/2:/right/.test(a)&&(l=i.width-(r[2]-r[0])*o);var c=function(t){return t*o+l};/top/.test(a)?h=-r[1]*s:/middle/.test(a)?h=i.height/2-(r[3]-r[1])*s/2:/bottom/.test(a)&&(h=i.height-(r[3]-r[1])*s);var u=function(t){return t*s+h};e.moveTo(c(n[0][0]),u(n[0][1]));for(var f=1;p=n[f];f++)e.lineTo(c(p[0]),u(p[1]));e.lineTo(c(n[0][0]),u(n[0][1]))}},ol.filter.Clip.prototype.precompose=function(t){this.get("color")||(t.context.save(),t.context.beginPath(),this.clipPath_(t),t.context.clip())},ol.filter.Clip.prototype.postcompose=function(t){if(this.get("color")){var e=t.context,i=t.context.canvas;e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(0,i.height),e.lineTo(i.width,i.height),e.lineTo(i.width,i.height),e.lineTo(i.width,0),e.lineTo(0,0),this.clipPath_(t),e.fillStyle=this.get("color"),e.fill("evenodd")}t.context.restore()},ol.filter.Colorize=function(t){ol.filter.Base.call(this,t),this.setFilter(t)},ol.inherits(ol.filter.Colorize,ol.filter.Base),ol.filter.Colorize.prototype.setFilter=function(t){switch(t=t||{}){case"grayscale":t={operation:"hue",red:0,green:0,blue:0,value:1};break;case"invert":t={operation:"difference",red:255,green:255,blue:255,value:1};break;case"sepia":t={operation:"color",red:153,green:102,blue:51,value:.6}}var e=t.color?ol.color.asArray(t.color):[t.red,t.green,t.blue,t.value];switch(this.set("color",ol.color.asString(e)),this.set("value",e[3]||1),t.operation){case"color":case"hue":case"difference":case"color-dodge":case"enhance":this.set("operation",t.operation);break;case"saturation":i=255*(t.value||0);this.set("color",ol.color.asString([0,0,i,i||1])),this.set("operation",t.operation);break;case"luminosity":i=255*(t.value||0);this.set("color",ol.color.asString([i,i,i,255])),this.set("operation","hard-light");break;case"contrast":var i=255*(t.value||0);this.set("color",ol.color.asString([i,i,i,255])),this.set("operation","soft-light");break;default:this.set("operation","color")}},ol.filter.Colorize.prototype.setValue=function(t){this.set("value",t);var e=ol.color.asArray(this.get("color"));e[3]=t,this.set("color",ol.color.asString(e))},ol.filter.Colorize.prototype.setColor=function(t){(t=ol.color.asArray(t))&&(t[3]=this.get("value"),this.set("color",ol.color.asString(t)))},ol.filter.Colorize.prototype.precompose=function(t){},ol.filter.Colorize.prototype.postcompose=function(t){var e=t.context,i=e.canvas;if(e.save(),"enhance"==this.get("operation")){var n=this.get("value");if(n){var r=i.width,o=i.height;e.globalCompositeOperation="color-burn",e.globalAlpha=n,e.drawImage(i,0,0,r,o),e.drawImage(i,0,0,r,o),e.drawImage(i,0,0,r,o)}}else e.globalCompositeOperation=this.get("operation"),e.fillStyle=this.get("color"),e.fillRect(0,0,i.width,i.height);e.restore()},ol.filter.Composite=function(t){ol.filter.Base.call(this,t),this.set("operation",t.operation||"source-over")},ol.inherits(ol.filter.Composite,ol.filter.Base),ol.filter.Composite.prototype.setOperation=function(t){this.set(t||"source-over")},ol.filter.Composite.prototype.precompose=function(t){var e=t.context;e.save(),e.globalCompositeOperation=this.get("operation")},ol.filter.Composite.prototype.postcompose=function(t){t.context.restore()},ol.filter.Crop=function(t){t=t||{},ol.filter.Mask.call(this,t)},ol.inherits(ol.filter.Crop,ol.filter.Mask),ol.filter.Crop.prototype.precompose=function(t){if(this.feature_){var e=t.context;e.save(),this.drawFeaturePath_(t,this.get("inner")),e.clip("evenodd")}},ol.filter.Crop.prototype.postcompose=function(t){this.feature_&&t.context.restore()},ol.filter.Fold=function(t){t=t||{},ol.filter.Base.call(this,t),this.set("fold",t.fold||[8,4]),this.set("margin",t.margin||8),this.set("padding",t.padding||8),"number"==typeof t.fsize&&(t.fsize=[t.fsize,t.fsize]),this.set("fsize",t.fsize||[8,10])},ol.inherits(ol.filter.Fold,ol.filter.Base),ol.filter.Fold.prototype.drawLine_=function(t,e,i){var n=t.canvas,r=this.get("fold"),o=n.width,s=n.height;t.beginPath(),t.moveTo(i,i);for(a=1;a<=r[0];a++)x=a*o/r[0]-(a==r[0]?i:0),y=e[1]*(a%2)+i,t.lineTo(x,y);for(a=1;a<=r[1];a++)x=o-e[0]*(a%2)-i,y=a*s/r[1]-(a==r[1]?e[0]*(r[0]%2)+i:0),t.lineTo(x,y);for(a=r[0];a>0;a--)x=a*o/r[0]-(a==r[0]?e[0]*(r[1]%2)+i:0),y=s-e[1]*(a%2)-i,t.lineTo(x,y);for(var a=r[1];a>0;a--)x=e[0]*(a%2)+i,y=a*s/r[1]-(a==r[1]?i:0),t.lineTo(x,y);t.closePath()},ol.filter.Fold.prototype.precompose=function(t){var e=t.context,i=e.canvas;this.get("fold"),i.width,i.height;e.save(),e.shadowColor="rgba(0,0,0,0.3)",e.shadowBlur=8,e.shadowOffsetX=2,e.shadowOffsetY=3,this.drawLine_(e,this.get("fsize"),this.get("margin")),e.fillStyle="#fff",e.fill(),e.strokeStyle="rgba(0,0,0,0.1)",e.stroke(),e.restore(),e.save(),this.drawLine_(e,this.get("fsize"),this.get("margin")+this.get("padding")),e.clip()},ol.filter.Fold.prototype.postcompose=function(t){var e=t.context,i=e.canvas;e.restore(),e.save(),this.drawLine_(e,this.get("fsize"),this.get("margin")),e.clip();var n=this.get("fold"),r=i.width/n[0],o=i.height/n[1],s=e.createRadialGradient(5*r/8,5*r/8,r/4,r/2,r/2,r);s.addColorStop(0,"transparent"),s.addColorStop(1,"rgba(0,0,0,0.2)"),e.fillStyle=s,e.scale(1,o/r);for(var a=0;a<n[0];a++)for(var l=0;l<n[1];l++)e.save(),e.translate(a*r,l*r),e.fillRect(0,0,r,r),e.restore();e.restore()},ol.filter.Lego=function(t){t||(t={}),ol.filter.Base.call(this,t);var e=new Image;e.src=this.img[t.img]||this.img.ol3,e.crossOrigin=t.crossOrigin||null,this.pattern={canvas:document.createElement("canvas")},this.setBrick(t.brickSize,e),this.internal_=document.createElement("canvas")},ol.inherits(ol.filter.Lego,ol.filter.Base),ol.filter.Lego.prototype.img={brick:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAAD10AAA9dAah0GUAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAGAElEQVRo3sWZy4tkVx3HP+fcc29Vd1dP17TdTcbJPDKPMGR0kVEZkuBCF0EE9Z8QXLhxMUsRF4oLwYWQTSCgSxUXroQhoiEuskgEUUQh+BhHOpkZO11dr3vvefxc3FPlNHNvPbrD1Dl016XoqvM539/znFbcZo3VjbFmxcMA3Mg2fSoAiQJDov7/B1o9+aEgkycv4PBSPU9eHeDEixNwOAFXPYvFia0+rcnQEeBr218cfLIwCqW1UWillEYphUKpCmCCIQAiCEhAJIggTiSISBAfggTvJZTifQghWO+89cOQexuOXN8Pwz/9ff9X/xF0uEA7AmTsjLp/2xZQCgXHlj0OEBEAeRwGkep3qN6pfibDB3DBixMnvdCXt8J3FZowNYFSjgv71RtPaehjD0alalVOqCtHU3qlAGrVAGbidCtUYLUAiV6dCUx8XV4BhUKjY0AJgUB4LE8sA7CkCRSalFYnE72WiBrLSCKCp6TALZNRDEDCwgAKQ/vyRidN9c32K1sbqlCP/C+P9kXJI597PA7HkGJRCLNUGCY767udF9e+9dz1S5ueoRzIEZa1OxcK9td+/fAHvYH0LY6MkgHFIuYwS0ifXe1+qXvn1vk99QfzCwokToUylPrre1/de/vMnf9+5MsSg2HMELegAsl86duvnP3e8y/f1r83v8Li1RO7k/9c2t/avHnt27xpyhRDguEIuxDA3OXXX93+8a0rz6ZvcKgadqUEL73wx+9sb5//WWKTGCOHsxEWM0H71e2ffmF3lPyEkZppVyVYefCw/9a5f3epSvsWh7MMsUgeaL20/dpLu4fJXZUvFCgi46/8i5RNFCCc4bA5JuZ7f/Kp7g9fuLSdvLnY8lEHxz8ItOPcaN7gPAB1tvPl7udupT9nvGSmLLlHSosWLdbJTgpgLna+eVv9hiO1ZIpFOGBEFmejBnrO/tc/0znXTf+sHMuPwD0MrSnETID6/SXPrH/junp3Xiw3atCjxJCRktKu10DHzrZ+pOvpc5cP/6T8CWtt4BATZ4tkBoCvTz8tbTb8TnHiYi/0pgCmPufMUkB1ss9vtU7Trgt9EgyGhIS0zgjRB6RukaSdfHpLPly2xTg2chQJmgRN2qiAa3DBtu5kYXgqAIFYEzTJDAVCnQIqaA+O0wyFjj8q1oY6AB/qd5nLw9JvcpqOOcFMT5dqlg/UAoy5exS2TgGg6DxhkHofqHVCGYf3ho/S904DcHZ6jpZ6lWMY1iogCDxsn8oDduP3BEI9QvSBWgU8YRDeGezsyEk1SNlD8HF51wjQoEAgHNkffXBw+XfJiZbXXCTBT2fZaAJfn4iEEt+z73bTk92jZTxPwOFxVCeGRif0tt4HCtxB+f0P7l//rTlBAN6gjcNicThcfU2NCnjf0NU43L59vf2XZf1A8wzX8JRTgLw+Ckx17SahIZGOyMri7dHalXf6DJdYfovPAgVlRLAzAXwI0gCQU5La8m6SXeH9pi+pWf5lUooIUFKSN6V0A1AE39RyeAYYEpvYNjf4OwP8XNuf50UycnKKKURjSTMALkjzzgpyEhI0LW7ygHvYRh00G7zARQL5dBYU9JtLWvQB52e0VX0MOl5anmOP+3yIjZldpteZijZXuIbBxZ1PAEbkc05GVspZtnX04hlHEDKucpUePYbklCgyNjjDLp9AERhjKSNAQc6IwSzPMQClt37OIeOQ7vQWxJPSZSf2OZMyK1h8jHsbNSgY0Z/tNRWA2HmuVXLIZsxnliw2mROAyR2Rjwmn8vyC0XynrUwQ3PzGs6QX06rDRgD9GIDEjF9pUFLSXyRsowLFIp2/44icDpZ02umq6S3ZxDwupp3hYs1cVMAu1noLBZaMNbJoAD3tl6prOodnTF5feBoBRmGweO8fyClISMlIowkkApRYyqbeZ5YJQrHc4UNieeGYArL8NeUkFcvgJKc/AU56ajxejod+/DT/W/IkQC4P3GoBwoGsFKAf9v2qAGIxej9MU8rTGdNjWtVsJv315aL3YwDYqG5MTDxAPMvTNkJS3ReY6AmtlTrhKsf/AHgAA6ezGE+FAAAAAElFTkSuQmCC",ol3:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAAD10AAA9dAah0GUAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAHtUlEQVRo3sWZTWxcVxXHf/d9zIztcTz+pE6cOHXiyLJJadKgKE2oCBLlQwIWSCxYI0WiGxZZIYRAArFAYoEEi0hIsGBBURd0g4iK2lJAaWlaojZVKkU0H26cxB8Zz/f7uPeweHdebDLPnqlQ5l2N5/mN7tz/+Z//OffcM4rPUKCPl0eBAqqfAEAt5Ia1LwCuAg93CyCnAzgj7TstEKMluW+/x0AsWmKBmFggTu4lIpYome2Qw0kA8I2xL9T2Bp5COY6ncJRSDkopFEolANowBEAEATGIGBEkFjEiYkQbI0ZrMaFobYwxkY51pOumpSNTiau6bm7oZX1NP4Ai+ylYADkmGqUPxwSUQsG2ZbcDsBAA2QoGkeSvSZ4kr/alDcRGSyyxbJqqvG5+pHAwbRegVMz+leTBY7qcbTee8vsmQycRmnL6CkD1G4DXFl0fGegvANfpnws8+947AwqFg2MDSjAYzJY80QuAHl2gcPDJF3PiDLiimtIQC0ETEhD3klE8AJeuASg8CgeHir7vLBVOjwypQK3plyoromRNtzSamJg6QbcgvJ7C0J0YnCweG/jek/Ozw5q6bEiFiIHz+wNWBv68+rPNmlQjYnKE1Ai6cYfXA/W5Q6Uvl84f3zel3vH+SIDYoVAeofOdqa9PvbHn/PoDHYZ4eDSpE3fJgLs79YXToz858uxJ5+/en4jQ6hHr5OPZlZHhpcM/4BUv9PFw8agQdQVg1+UHnx/75fG5Gf83lFWGVUrQsmmu/HBsbN8f3Mi1MVLeGUJ3Lig8P/a7s5MN97c01I5+VUIk91err0/fLqFwgBHKOzmimzyQPzX2q1OTZfeianUVKCLNr93EZxiFIOyhnB0Tu6vf/XTp54uzY+4r3S1veYj5CEPBjqFsA3cDoEaLXy199rj/Is0eM2XILXzy5MkzSO6TAvAOFF84qf5KRfWYYhE2aJCzI5MDbxf7B58pTpf89x8qX1yWGKXKFaUBZIF1tWo/KzJPiYi3VAgYbrFEnpiYiBzBTgx0ts99YvDcvHr7YSBJka/Q4k1u3jz5eQ/EYebkXvL241NUeZN/31gkDwibhHjk8PGzTh+OrWw7X/6g/+TB8nuJrQCc4Z/KU08rb+1f/1gCSqy9NUNoP72txtXRb40dfJ+nkgMEZTw78riZLhDRndNP3vGG9GBKnRzhrppmilfhmcWoRYkxyuxv86euUaT24h4W2WN53WQmheB1ygc7MaCKuc+N5LeW6wfOXeUorwFQZIV5RlnbNqcGjBMyaAFUcfHwcHHxOznBakA6JQq34B4dkXtt+8QjvnCQa/Z/jxpFCmdbpPSJI7NyhMVzK/j2UQuFi4OLkz57FECcIcGCU8yZeirQvdxjjuvpTKGAem2EcjpjkjnUC5cvfIm/bRG3Y4e7AwOmEwPKOJotfhvlPj61dGaBEChtAdD88Yeq9et1LqWOUTj2lYzOItSmcxi2ZDXUw+k0n0bqDoXDJBsMM8rHKeIKFbxgIV9nL3cSFlPpZQBoa6AjgCYXK2YkndbckkxmWWfu2D00ozzYNinOlagwbRct/k92zNJARxFK01yur/mX2wDWGE0jfuHyNfa+Y6hQYNsmJQ45hqwwFaPpOVo6s2zDsCMDgsBq2sBR9xj8ZvX70+LJc9w+scA1Sjz49rjMy7zMywE5IY64PMcNDlkHKCbt9xhMZwhOooGODGhMzVyqTUxIm4Pll9797ixnWFZ3WORdSqz//hI+Pv7LT5dXOcNZltUa49y3qplC0Hb5uBMAbwcGDKYS/eLu6YMfrSZCUhWY+QCfGZ7iZYRbarSdYMfd0bvXazh8ii/yF2vcAVwitB1hZirWnROREFLYjN4uLQ5QTZ/WmeA2VwDUHbBks351HRxK3OaqtTTHEQwxmpjkxJApQh111kBAvBH+9O7y/KveFsfcYyNj82qywqZdxmWBAjEREbHdkrNEqNE6o6qJiVeiC4UPHuqg20PvExxGE6YAWp2jwEvabmIyqpoGuTB4ozEwd6lKvYflRzgBBIQWQrQjAG2MZABoEeJH4UU3N8f1rC/psPyz+AQWQEhIK6s09wACk+EC0NTwcCM3KrDAf6ihd6ui2ccxcrRoEaQg6lnQPYDYSLZlAS1cXBzyLHGfW0SZPDgMscgBDK10BARUs48mVgNxtl2GKh6ObVpOM8Uy94hsZpe0nakoMMdhPGJreRtAg9YuJ6NIwp18G7OJsilVyHGIQ2yySZ0WIYocQ+xhknEUhiYRoQUQ0KJBbSfleAChjvQuh4wypbQLovEpMWHrnPY2K0RoG/eR5SCgQXVn1SQAJNpNWiFlhm0+i8jZIrMNoN0j0jbhJMoPaOwu2sQFJt69oRKyadNqTGQBOFsAiM34CQchIdVuwtYyEOgu4jumQosiEX5a6aq0S9Z2T2zTThfdkS0MRN21lISAiBwD5KwDnLReStp0MZomrc4bTyaAhql131gztAhw8cnhWxeIBRASEWbVPju5wAS9/VYgdnthGwPSe5uynYqlpun9EuCTzHt0O67r5uP8teRRAC25H/cXgNmQvgKomhXdLwB2M7pu0pTyeK70mJYUm251sLfo/T8AGEoKes8eIGZ43E5wk36BBwhO2mbqgwZa9C0CAP4LFLGzNDDzmrAAAAAASUVORK5CYII=",lego:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAA/CAQAAAD9VthUAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAADzoAAA86AZc528IAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAHvElEQVRYw8WZWWxcVxnHf+fec2fGu+M4qbPH2EmTLk4FApqQNrgiVYyKeClIwBsvPCAQkZAQPND2gRekCoGQEItYHhBLurCksoTKA6QNJW0CBZLWCc3qEBvHy3hsz93O+XiYMxM7nhmPGxGf++Dre2fO7/v+5/u+s4zigzSxVq3osaZNAwzkuq1nPeUrAE9p99JTAKWn5WYEwErpv9TdGbECRlKMgBEjRlIgsqlAKBBaSKUokAjgkcFz+Ce6BvM9sVbKU55WKKWUh1IeoJQCFhsgIIIgIohYEWwq1ooVK9ZasdbG1hhrjUmMsYlZsJEJzYIpmLwZs/8xZ9JpaGYHOYfPyvrChrdbpAxbjFRltCqhnQ2yxBTKf0WQUgNrwYqIFStGUkkllqIU5E/2aQBbEV8pz/ZM3Or8/95UmeUB+J63RiHoAWi1ZHTvNl6pNfXe99Taeq/W1HvuYOzvKG5c4q1afIWHj4eHBwgWwWCQ1aWvBvC8VXngE5DbmO3UxrOeqEhmTFEcPiIiadwEfVttWxmd623tyu7Mfnrjru5cM0Th+Nyp2Z/MztvJNDLkSImZJ27MhNWIr8j1tn+g9at7+/ubivaSHYkmjPF1f+sj7Uc3Xc29VPjm1JSJEzJkCZkjaVT8hvzubDvQ8cz9AwPeG/rHFD3BZkoeTqLwCuqzrQf7nw9+UJhOidEEFAhX0sCJr1fyXm/uPLr5849n/u1/j3mMWtqtYEFm5v/2pXUHdhzNjgaxzunQQzNX3wDdWIT0dT3bP3Qo8wIXSVWNDpWQys2xmW/3fbn1WpAWXUrWNaARvN+/7lu7jzysf8q4siuEh5A8fX5/+8XepLyEs8zfCd7raP/K9scf1T9iQjUUzU+JynOR3TQBgpAS1a16dVtusONTH8kc42ZjcFFKEApcJyBHjizt+O8Wr3e2P7Uv+3curyT7InhJ8nFCMmTJkqWlVlnzVsj0psc69vbrV1SyKnjJgCsEZMiQoanWINcfe39v6xfv808Suu6f5EVlQA7QAcC/1DXp42GmuazOiaJbjjDFSTUNCLOEZMiQEJAjrZYB9b0PmoPe7fpNZQAkYFb1A9CphtWwGlbNkmX/R59TpzhPAAwdf37XKWac1JZJAnc1VSfp0ufSqtK3NT/Y3DJVKZ5tYbHiwfvJAjc5dO7Pw4cZOb4vc51ccvZjh7ZfubaTC8y4evgeAjQaTYCpgZfq06TXpD++Rd6hHHTdZ8JKDs8yAsAD92/gjxSfGNvYzp7Wt3nj6sS2D5NxtXAeHNwnIFpOqSe+bg+2d6ejFXzXS8WlJUSyhBiKoAqj1yFuYQLQZCvFOMLDx8evPFuOF7HV0sqzXmsuP1mJ5tbfVirYc++VITnItvyN8rhJjqIrL7qS50KCX1mWeLXFr5Z02nqiJ2+lXOasIQHJkD75C6DjtQ8dH6Eg99FHyD+LBRclaomnqgL3lo++w4utWsBVbNYtr1htYZFBZgm2299Z5rmXl4+ZtwaPjDlt9CJ0gIeqXNXFN7WKDtMLnW1y+9e6Txc5z2le25Te0BTVic89ovf3yIXE1QeP4FbJbmCla21V723evjklncued/0mZA6AcEABfH/6rXzb2IM5fJD1zLvIB02zm3ak+iK0hK8mvmBnzA/Hoy3LJoyW4XIITn5daAbaX0w3XBnIIsCBL7zDpFNvPWoRvBY+larBZ5Gb6eX20xXxf/2QDMkgmc+sl8MyJH2cf/Seka3yGFv+kR7Ok/1riwxhvruJUYffhGCxWKS0IqqReFXFN5g583qaNokC0aSf/JUaVn95ufNrJ9SwGlapMkkUXuPMAy/E24CJbQVeVWeIXDAFbEYwWCymes3XAMZW9d5gC8k3Rn++79hJjErvvcBB0P53/sBBAOa5knmdnWwlywlQZ7mHfQivOsd6yVDEkGIwxDVrfo2yY4nJ5tMTLe9rkYKSkUtcEqXk9/DKok9d5nLlfpzxyn0Tu7Gk7jLVNx8eQFw98oUi6Vz07NiZ3c/4y+bz+i1gHxliEhJnQFKn6MbVu01ISRaSX2b8vk/4q4D77GErCTGxM2EBW1P8pLr4YJkjiKORhZ91hR1qpsG9m89O9pASOXxMXF6wrCb0ACIidBJe8ZNdjHID24DsA/RhCImInAnztQqr897UeI1lDp3ToU8TO2jiat39q0cLD7GJlNBdERFhLd8dPjamtldx98K8dhNGD91cZ6zKPl6hyNJPP5rYIcsGFGprVva+Nl4GF455lVzI0UcvU0ySX7R5aKabHnrwMRSJlhiQr7fT1QCprYPnmKHgzjQtliwZNrIZHyHBkHHLSMG4KI+JK6Lna+9wFuETUzecLAUHN6QkBARofHwCFImr6Mbld+Lw0Upwhy/acKWUMswS07YI77tllHJTqsW4t4lLtcLKBwyl0JN05YQSiqS0knW+a7eGu4W3rrgmJMwRNpCkLvRsaBoqKAkzZGgi66S/HV+Sf4GQxvor4xPbYDkVIuLS2RZ6CV4wRMQkNNpXGb9go1V8BSElJXRrWIXCupM9We2hvMPPG1bbaqxf3sWhamTzhjVpHsCc/a9dQ3xo82uJL9jRNRLfTTnnBO+u/pTkLT5c8fPNd9nt5tLmRbsVynbsXR704Bbeq775v0uht3btfyZT7OA5knjdAAAAAElFTkSuQmCC"},ol.filter.Lego.prototype.set=function(t,e){ol.filter.Base.prototype.set.call(this,t,e),"brickSize"==t&&this.pattern.canvas.width!=e&&this.setBrick(e)},ol.filter.Lego.prototype.setBrick=function(t,e,i){if(t=Number(t)||30,"string"==typeof e){var n=new Image;n.src=this.img[e]||this.img.ol3,n.crossOrigin=i||null,e=n}if(e&&(this.pattern.img=e),this.pattern.img.width)this.pattern.canvas.width=this.pattern.canvas.height=t,this.pattern.ctx=this.pattern.canvas.getContext("2d"),this.pattern.ctx.fillStyle=this.pattern.ctx.createPattern(this.pattern.img,"repeat"),this.set("brickSize",t),this.set("img",e.src);else{var r=this;this.pattern.img.onload=function(){r.setBrick(t,e)}}},ol.filter.Lego.prototype.getPattern=function(t,e){if(!this.pattern.ctx)return"transparent";var i=this.pattern.canvas,n=this.pattern.ctx,r=i.width/this.pattern.img.width;return n.save(),n.clearRect(0,0,i.width,i.height),n.scale(r,r),t/=r,e/=r,n.translate(t,e),n.beginPath(),n.clearRect(-2*i.width,-2*i.height,4*i.width,4*i.height),n.rect(-t,-e,2*i.width/r,2*i.height/r),n.fill(),n.restore(),n.createPattern(i,"repeat")},ol.filter.Lego.prototype.postcompose=function(t){var e=t.context,i=e.canvas,n=t.frameState.pixelRatio;e.save();var r=this.pattern.canvas.width*n,o=t.frameState.extent,s=t.frameState.viewState.resolution/n,a=[-Math.round(o[0]/s%r),Math.round(o[1]/s%r)],l=this.internal_.getContext("2d"),h=this.internal_.width=i.width,c=this.internal_.height=i.height;l.webkitImageSmoothingEnabled=!1,l.mozImageSmoothingEnabled=!1,l.imageSmoothingEnabled=!1;var u=Math.floor((h-a[0])/r),f=Math.floor((c-a[1])/r);l.drawImage(i,a[0],a[1],u*r,f*r,0,0,u,f),e.webkitImageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.imageSmoothingEnabled=!1,e.clearRect(0,0,h,c),e.drawImage(this.internal_,0,0,u,f,a[0],a[1],u*r,f*r),e.scale(n,n),e.fillStyle=this.getPattern(a[0]/n,a[1]/n),e.rect(0,0,h,c),e.fill(),e.restore()},ol.filter.Texture=function(t){ol.filter.Base.call(this,t),this.setFilter(t)},ol.inherits(ol.filter.Texture,ol.filter.Base),ol.filter.Texture.prototype.setFilter=function(t){function e(e){n.pattern={},n.pattern.scale=t.scale||1,n.pattern.canvas=document.createElement("canvas"),n.pattern.canvas.width=e.width*n.pattern.scale,n.pattern.canvas.height=e.height*n.pattern.scale,n.pattern.canvas.width=e.width,n.pattern.canvas.height=e.height,n.pattern.ctx=n.pattern.canvas.getContext("2d"),n.pattern.ctx.fillStyle=n.pattern.ctx.createPattern(e,"repeat"),n.set("ready",!0)}var i;(t=t||{}).img?i=option.img:(i=new Image,t.src&&(i.src=ol.filter.Texture[t.src]||t.src),i.crossOrigin=t.crossOrigin||null),this.set("rotateWithView",!1!==t.rotateWithView),this.set("opacity","number"==typeof t.opacity?t.opacity:1),this.set("ready",!1);var n=this;i.width?e(i):i.onload=function(){e(i)}},ol.filter.Texture.prototype.getPattern=function(t,e){var i=this.pattern.canvas,n=this.pattern.ctx;return n.save(),n.translate(-t,e),n.beginPath(),n.rect(t,-e,i.width,i.height),n.fill(),n.restore(),n.createPattern(i,"repeat")},ol.filter.Texture.prototype.postcompose=function(t){if(this.pattern){var e=t.context,i=e.canvas,n=1.5*Math.max(i.width,i.height),r=t.frameState.pixelToCoordinateTransform;r||((r=t.frameState.pixelToCoordinateMatrix)[2]=r[4],r[3]=r[5],r[4]=r[12],r[5]=r[13]);var o=t.frameState.pixelRatio,s=t.frameState.viewState.resolution,a=i.width/2,l=i.height/2;if(e.save(),e.globalCompositeOperation="multiply",e.globalAlpha=this.get("opacity"),e.scale(o*this.pattern.scale,o*this.pattern.scale),this.get("rotateWithView"))s*=this.pattern.scale,e.fillStyle=this.getPattern((a*r[0]+l*r[1]+r[4])/s,(a*r[2]+l*r[3]+r[5])/s),e.translate(a/this.pattern.scale,l/this.pattern.scale),e.rotate(t.frameState.viewState.rotation),e.beginPath(),e.rect(-a-n,-l-n,2*n,2*n),e.fill();else{var h=-(a*r[0]+l*r[1]+r[4])/s,c=(a*r[2]+l*r[3]+r[5])/s,u=Math.cos(t.frameState.viewState.rotation),f=Math.sin(t.frameState.viewState.rotation),g=(h*u-c*f)/this.pattern.scale,d=(h*f+c*u)/this.pattern.scale;e.translate(g,d),e.beginPath(),e.fillStyle=this.pattern.ctx.fillStyle,e.rect(-g-n,-d-n,2*n,2*n),e.fill()}e.restore()}},ol.interaction.CenterTouch=function(t){t=t||{};var e=/^pointermove$|^pointerup$/;this.targetStyle=t.targetStyle||[new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new ol.style.Stroke({color:"#fff",width:3})})}),new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new ol.style.Stroke({color:"#000",width:1})})})],this.targetStyle instanceof Array||(this.targetStyle=[this.targetStyle]),this.composite=t.composite||"",this.ctouch=new ol.interaction.Interaction({handleEvent:function(t){return e.test(t.type)&&this.getMap()&&(t.coordinate=this.getMap().getView().getCenter(),t.pixel=this.getMap().getSize(),t.pixel=[t.pixel[0]/2,t.pixel[1]/2]),!0}}),ol.interaction.Interaction.call(this,{handleEvent:function(i){return e.test(i.type)&&(this.pos_=i.coordinate),!t.handleEvent||t.handleEvent.call(this,i)}})},ol.inherits(ol.interaction.CenterTouch,ol.interaction.Interaction),ol.interaction.CenterTouch.prototype.setMap=function(t){this.getMap()&&(this.getMap().removeInteraction(this.ctouch),this.getMap().un("postcompose",this.drawTarget_,this)),ol.interaction.Interaction.prototype.setMap.call(this,t),this.getMap()&&(this.getActive()&&this.getMap().addInteraction(this.ctouch),this.getMap().on("postcompose",this.drawTarget_,this))},ol.interaction.CenterTouch.prototype.setActive=function(t){ol.interaction.Interaction.prototype.setActive.call(this,t),this.pos_=null,this.getMap()&&(this.getActive()?this.getMap().addInteraction(this.ctouch):this.getMap().removeInteraction(this.ctouch))},ol.interaction.CenterTouch.prototype.getPosition=function(t){if(!this.pos_){var e=this.getMap().getSize();e=[e[0]/2,e[1]/2],this.pos_=this.getMap().getCoordinateFromPixel(e)}return this.pos_},ol.interaction.CenterTouch.prototype.drawTarget_=function(t){if(this.getMap()&&this.getActive()){var e=t.context,i=t.frameState.pixelRatio;e.save();var n=e.canvas.width/(2*i),r=e.canvas.height/(2*i),o=new ol.geom.Point(this.getMap().getCoordinateFromPixel([n,r]));this.composite&&(e.globalCompositeOperation=this.composite);for(var s=0;s<this.targetStyle.length;s++){var a=this.targetStyle[s];if(a instanceof ol.style.Style){var l=a.getImage();if(l){var h=l.getScale();l.setScale(i*h)}t.vectorContext.setStyle(a),t.vectorContext.drawGeometry(o),l&&l.setScale(h)}}e.restore()}},ol.interaction.Clip=function(t){this.layers_=[],ol.interaction.Pointer.call(this,{handleDownEvent:this.setPosition,handleMoveEvent:this.setPosition}),t=t||{},this.pos=!1,this.radius=t.radius||100,t.layers&&this.addLayer(t.layers)},ol.inherits(ol.interaction.Clip,ol.interaction.Pointer),ol.interaction.Clip.prototype.setMap=function(t){if(this.getMap()){for(e=0;e<this.layers_.length;e++)this.layers_[e].un("precompose",this.precompose_,this),this.layers_[e].un("postcompose",this.postcompose_,this);this.getMap().renderSync()}if(ol.interaction.Pointer.prototype.setMap.call(this,t),t){for(var e=0;e<this.layers_.length;e++)this.layers_[e].on("precompose",this.precompose_,this),this.layers_[e].on("postcompose",this.postcompose_,this);t.renderSync()}},ol.interaction.Clip.prototype.setRadius=function(t){this.radius=t,this.getMap()&&this.getMap().renderSync()},ol.interaction.Clip.prototype.addLayer=function(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++)this.getMap()&&(t[e].on("precompose",this.precompose_,this),t[e].on("postcompose",this.postcompose_,this),this.getMap().renderSync()),this.layers_.push(t[e])},ol.interaction.Clip.prototype.removeLayer=function(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){var i;for(i=0;i<this.layers_.length&&this.layers_[i]!==t[e];i++);i!=this.layers_.length&&this.getMap()&&(this.layers_.splice(i,1),t[e].un("precompose",this.precompose_,this),t[e].un("postcompose",this.postcompose_,this),this.getMap().renderSync())}},ol.interaction.Clip.prototype.setPosition=function(t){t.pixel?this.pos=t.pixel:t&&t instanceof Array?this.pos=t:t=[-1e7,-1e7],this.getMap()&&this.getMap().renderSync()},ol.interaction.Clip.prototype.precompose_=function(t){var e=t.context,i=t.frameState.pixelRatio;e.save(),e.beginPath(),e.arc(this.pos[0]*i,this.pos[1]*i,this.radius*i,0,2*Math.PI),e.clip()},ol.interaction.Clip.prototype.postcompose_=function(t){t.context.restore()},ol.interaction.Clip.prototype.setActive=function(t){if(ol.interaction.Pointer.prototype.setActive.call(this,t),t)for(e=0;e<this.layers_.length;e++)this.layers_[e].on("precompose",this.precompose_,this),this.layers_[e].on("postcompose",this.postcompose_,this);else for(var e=0;e<this.layers_.length;e++)this.layers_[e].un("precompose",this.precompose_,this),this.layers_[e].un("postcompose",this.postcompose_,this);this.getMap()&&this.getMap().renderSync()},ol.interaction.DrawRegular=function(t){t||(t={});ol.interaction.Pointer.call(this,{handleDownEvent:this.handleDownEvent_,handleMoveEvent:this.handleMoveEvent_,handleUpEvent:this.handleUpEvent_,handleEvent:this.handleEvent_}),this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.maxCircleCoordinates_=t.maxCircleCoordinates||100,this.features_=t.features,this.source_=t.source,this.squareFn_=t.squareCondition,this.centeredFn_=t.centerCondition,this.canRotate_=!1!==t.canRotate,this.setSides(t.sides);var e=[255,255,255,1],i=[0,153,255,1],n=[new ol.style.Style({stroke:new ol.style.Stroke({color:e,width:5})}),new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:i}),stroke:new ol.style.Stroke({color:e,width:1.5})}),stroke:new ol.style.Stroke({color:i,width:3}),fill:new ol.style.Fill({color:[255,255,255,.5]})})];this.sketch_=new ol.Collection,this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({features:this.sketch_,useSpatialIndex:!1}),name:"DrawRegular overlay",displayInLayerSwitcher:!1,style:t.style||n})},ol.inherits(ol.interaction.DrawRegular,ol.interaction.Pointer),ol.interaction.DrawRegular.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Pointer.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t)},ol.interaction.DrawRegular.prototype.setActive=function(t){this.overlayLayer_.getSource().clear(),ol.interaction.Pointer.prototype.setActive.call(this,t)},ol.interaction.DrawRegular.prototype.setSides=function(t){t=parseInt(t),this.sides_=t>2?t:0},ol.interaction.DrawRegular.prototype.canRotate=function(t){return!0!==t&&!1!==t||(this.canRotate_=t),this.canRotate_},ol.interaction.DrawRegular.prototype.getSides=function(){return this.sides_},ol.interaction.DrawRegular.prototype.startAngle={default:Math.PI/2,3:-Math.PI/2,4:Math.PI/4},ol.interaction.DrawRegular.prototype.getGeom_=function(){if(this.overlayLayer_.getSource().clear(),!this.center_)return!1;var t;if(this.coord_){var e=this.center_,n=this.coord_,r=this.canRotate_&&this.centered_&&this.square_;if(this.square_&&!r){var o=[n[0]-e[0],n[1]-e[1]],s=Math.max(Math.abs(o[0]),Math.abs(o[1]));n[0]=e[0]+(o[0]>0?s:-s),n[1]=e[1]+(o[1]>0?s:-s)}var o=[n[0]-e[0],n[1]-e[1]],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]);if(a>0){var l,h=new ol.geom.Circle(e,a,"XY");if(l=r?Math.atan2(o[1],o[0]):this.startAngle[this.sides_]||this.startAngle.default,this.sides_)t=ol.geom.Polygon.fromCircle(h,this.sides_,l);else{var c=this.getMap().getPixelFromCoordinate(this.center_),u=Math.max(100,Math.abs(c[0]-this.coordPx_[0]),Math.abs(c[1]-this.coordPx_[1]));u=Math.min(this.maxCircleCoordinates_,Math.round(u/(this.centered_?3:5))),t=ol.geom.Polygon.fromCircle(h,u,0)}if(r)return t;var f=t.getExtent(),g=((e=this.centered_?[2*this.center_[0]-this.coord_[0],2*this.center_[1]-this.coord_[1]]:this.center_)[0]-n[0])/(f[0]-f[2]),d=(e[1]-n[1])/(f[1]-f[3]);if(this.square_){var p=Math.min(Math.abs(g),Math.abs(d));g=Math.sign(g)*p,d=Math.sign(d)*p}var m=[e[0]-f[0]*g,e[1]-f[1]*d];return t.applyTransform(function(t,e,n){for(i=0;i<t.length;i+=n)e[i]=t[i]*g+m[0],e[i+1]=t[i+1]*d+m[1];return e}),t}}return new ol.geom.Point(this.center_)},ol.interaction.DrawRegular.prototype.drawSketch_=function(t){if(this.overlayLayer_.getSource().clear(),t){this.square_=this.squareFn_?this.squareFn_(t):t.originalEvent.shiftKey,this.centered_=this.centeredFn_?this.centeredFn_(t):t.originalEvent.metaKey||t.originalEvent.ctrlKey;var e=this.getGeom_();if(e){var i=this.feature_;return i.setGeometry(e),this.overlayLayer_.getSource().addFeature(i),this.canRotate_&&this.centered_&&this.square_&&this.coord_&&this.overlayLayer_.getSource().addFeature(new ol.Feature(new ol.geom.LineString([this.center_,this.coord_]))),i}}},ol.interaction.DrawRegular.prototype.drawPoint_=function(t){this.overlayLayer_.getSource().clear(),this.overlayLayer_.getSource().addFeature(new ol.Feature(new ol.geom.Point(t)))},ol.interaction.DrawRegular.prototype.handleDownEvent_=function(t){return this.downPx_=t.pixel,!0},ol.interaction.DrawRegular.prototype.handleEvent_=function(t){return ol.interaction.Pointer.handleEvent.call(this,t),!0},ol.interaction.DrawRegular.prototype.handleMoveEvent_=function(t){if(this.started_){this.coord_=t.coordinate,this.coordPx_=t.pixel;var e=this.drawSketch_(t);this.dispatchEvent({type:"drawing",feature:e,pixel:t.pixel,coordinate:t.coordinate,square:this.square_,centered:this.centered_})}else this.drawPoint_(t.coordinate);return!1},ol.interaction.DrawRegular.prototype.handleUpEvent_=function(t){var e=this.downPx_,i=t.pixel,n=e[0]-i[0],r=e[1]-i[1];if(n*n+r*r<=this.squaredClickTolerance_){if(this.started_)this.started_=!1,this.coord_&&this.center_[0]!=this.coord_[0]&&this.center_[1]!=this.coord_[1]?((o=this.feature_).setGeometry(this.getGeom_()),this.source_?this.source_.addFeature(o):this.features_&&this.features_.push(o),this.dispatchEvent({type:"drawend",feature:o,pixel:t.pixel,coordinate:t.coordinate,square:this.square_,centered:this.centered_})):this.dispatchEvent({type:"drawend",feature:null,pixel:t.pixel,coordinate:t.coordinate,square:this.square_,centered:this.centered_}),this.center_=this.coord_=null,this.drawSketch_();else{this.started_=!0,this.center_=t.coordinate,this.coord_=null;var o=this.feature_=new ol.Feature;this.drawSketch_(t),this.dispatchEvent({type:"drawstart",feature:o,pixel:t.pixel,coordinate:t.coordinate})}return!1}return!0},ol.interaction.DrawTouch=function(t){(t=t||{}).handleEvent=function(t){if(this.get("tap"))switch(t.type){case"singleclick":this.addPoint();break;case"dblclick":return this.addPoint(),this.finishDrawing(),!1}return!0},ol.interaction.CenterTouch.call(this,t),this.typeGeom_=t.type,this.source_=t.source,this.set("tap",!1!==t.tap);var e=[255,255,255,1],i=[0,153,255,1],n=[new ol.style.Style({stroke:new ol.style.Stroke({color:e,width:5})}),new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:i}),stroke:new ol.style.Stroke({color:e,width:1.5})}),stroke:new ol.style.Stroke({color:i,width:3}),fill:new ol.style.Fill({color:[255,255,255,.5]})})];this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:!1}),style:n}),this.geom_=[]},ol.inherits(ol.interaction.DrawTouch,ol.interaction.CenterTouch),ol.interaction.DrawTouch.prototype.setMap=function(t){this.getMap()&&this.getMap().un("postcompose",this.drawSketchLink_,this),ol.interaction.CenterTouch.prototype.setMap.call(this,t),this.overlay_.setMap(t),this.getMap()&&this.getMap().on("postcompose",this.drawSketchLink_,this)},ol.interaction.DrawTouch.prototype.startDrawing=function(){this.geom_=[],this.addPoint()},ol.interaction.DrawTouch.prototype.getGeometryType=function(){return this.typeGeom_},ol.interaction.DrawTouch.prototype.finishDrawing=function(){if(this.getMap()){var t;switch(this.typeGeom_){case"LineString":this.geom_.length>1&&(t=new ol.Feature(new ol.geom.LineString(this.geom_)));break;case"Polygon":this.geom_[this.geom_.length-1]!=this.geom_[0]&&this.geom_.push(this.geom_[0]),this.geom_.length>3&&(t=new ol.Feature(new ol.geom.Polygon([this.geom_])))}t&&this.source_.addFeature(t),this.geom_=[],this.drawSketch_()}},ol.interaction.DrawTouch.prototype.addPoint=function(){if(this.getMap())switch(this.geom_.push(this.getPosition()),this.typeGeom_){case"Point":var t=new ol.Feature(new ol.geom.Point(this.geom_.pop()));this.source_.addFeature(t);break;case"LineString":case"Polygon":this.drawSketch_()}},ol.interaction.DrawTouch.prototype.removeLastPoint=function(){this.getMap()&&(this.geom_.pop(),this.drawSketch_())},ol.interaction.DrawTouch.prototype.drawSketch_=function(){if(this.overlay_.getSource().clear(),this.geom_.length){var t;"Polygon"==this.typeGeom_&&(t=new ol.Feature(new ol.geom.Polygon([this.geom_])),this.overlay_.getSource().addFeature(t));var e=new ol.geom.LineString(this.geom_);t=new ol.Feature(e),this.overlay_.getSource().addFeature(t),t=new ol.Feature(new ol.geom.Point(this.geom_.slice(-1).pop())),this.overlay_.getSource().addFeature(t)}},ol.interaction.DrawTouch.prototype.drawSketchLink_=function(t){if(this.getActive()&&this.getPosition()){var e=t.context;e.save();var i,n=this.getMap().getPixelFromCoordinate(this.getPosition()),r=t.frameState.pixelRatio||1;e.scale(r,r),e.strokeStyle="rgba(0, 153, 255, 1)",e.lineWidth=1,e.beginPath(),e.arc(n[0],n[1],5,0,2*Math.PI),e.stroke(),this.geom_.length&&(i=this.getMap().getPixelFromCoordinate(this.geom_[this.geom_.length-1]),e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(n[0],n[1]),"Polygon"==this.typeGeom_&&(i=this.getMap().getPixelFromCoordinate(this.geom_[0]),e.lineTo(i[0],i[1])),e.stroke()),e.restore()}},ol.interaction.DrawTouch.prototype.setActive=function(t){ol.interaction.CenterTouch.prototype.setActive.call(this,t),t||(this.geom_=[]),this.drawSketch_()},ol.interaction.DropFile=function(t){t=t||{},ol.interaction.DragAndDrop.call(this,{});var e=t.zone||document;$(e).on("dragenter",this.onstop),$(e).on("dragover",this.onstop),$(e).on("dragleave",this.onstop),this.formatConstructors_=t.formatConstructors||[ol.format.GPX,ol.format.GeoJSON,ol.format.IGC,ol.format.KML,ol.format.TopoJSON],this.projection_=t.projection,this.accept_=t.accept||["gpx","json","geojson","igc","kml","topojson"];var i=this;$(e).on("drop",function(t){return i.ondrop(t.originalEvent)})},ol.inherits(ol.interaction.DropFile,ol.interaction.DragAndDrop),ol.interaction.DropFile.prototype.setMap=function(t){ol.interaction.Interaction.prototype.setMap.call(this,t)},ol.interaction.DropFile.prototype.onstop=function(t){return t.preventDefault(),t.stopPropagation(),!1},ol.interaction.DropFile.prototype.ondrop=function(t){function e(t,e,i){try{return t.readFeatures(e,i)}catch(t){}}if(t.dataTransfer&&t.dataTransfer.files.length){var i=this;t.preventDefault(),t.stopPropagation();for(var n,r=t.dataTransfer.files,o=/\.([0-9a-z]+)(?=[?#])|(\.)(?:[\w]+)$/,s=0;n=r[s];s++){var a=n.name.match(o)[0];i.dispatchEvent({type:"loadstart",file:n,filesize:n.size,filetype:n.type,fileextension:a,projection:h,target:i}),features=[];var l=new FileReader,h=this.projection_||this.getMap().getView().getProjection(),c=this.formatConstructors_;if(!h)return;var u=n;l.onload=function(t){var n,r,o=t.target.result,s=[];for(n=0,r=c.length;n<r;++n)if((s=e(new(0,c[n]),o,{featureProjection:h}))&&s.length>0)return i.dispatchEvent({type:"addfeatures",features:s,file:u,projection:h,target:i}),void i.dispatchEvent({type:"loadend",features:s,file:u,projection:h,target:i});i.dispatchEvent({type:"loadend",file:u,target:i})},l.readAsText(n)}}return!1},ol.interaction.Flashlight=function(t){ol.interaction.Pointer.call(this,{handleDownEvent:this.setPosition,handleMoveEvent:this.setPosition}),t=t||{},this.pos=!1,this.radius=t.radius||100,this.setColor(t)},ol.inherits(ol.interaction.Flashlight,ol.interaction.Pointer),ol.interaction.Flashlight.prototype.setMap=function(t){this.getMap()&&(this.getMap().un("postcompose",this.postcompose_,this),this.getMap().render()),ol.interaction.Pointer.prototype.setMap.call(this,t),t&&t.on("postcompose",this.postcompose_,this)},ol.interaction.Flashlight.prototype.setRadius=function(t){this.radius=t,this.getMap()&&this.getMap().renderSync()},ol.interaction.Flashlight.prototype.setColor=function(t){var e=t.fill?t.fill:[0,0,0,.8],i=ol.color.asArray(e);this.startColor=ol.color.asString(i);t.color?i=this.endColor=ol.color.asString(ol.color.asArray(t.color)||t.color):(i[3]=0,this.endColor=ol.color.asString(i)),i[3]=.1,this.midColor=ol.color.asString(i),this.getMap()&&this.getMap().renderSync()},ol.interaction.Flashlight.prototype.setPosition=function(t){t.pixel?this.pos=t.pixel:this.pos=t,this.getMap()&&this.getMap().renderSync()},ol.interaction.Flashlight.prototype.postcompose_=function(t){var e=t.context,i=t.frameState.pixelRatio,n=e.canvas.width,r=e.canvas.height;if(e.save(),e.scale(i,i),this.pos){var o=Math.max(n,r),s=e.createRadialGradient(this.pos[0],this.pos[1],n*this.radius/o,this.pos[0],this.pos[1],r*this.radius/o);s.addColorStop(0,this.startColor),s.addColorStop(.8,this.midColor),s.addColorStop(1,this.endColor),e.fillStyle=s,e.fillRect(this.pos[0]-o,this.pos[1]-o,2*o,2*o)}else e.fillStyle=this.startColor,e.fillRect(0,0,n,r);e.restore()},ol.interaction.GeolocationDraw=function(t){t||(t={});var e=this.geolocation=new ol.Geolocation({projection:"EPSG:4326",trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}});this.geolocation.on("change",this.draw_,this),this.path_=[];var i=[255,255,255,1],n=[0,153,255,1],r=new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:n}),stroke:new ol.style.Stroke({color:i,width:1.5})}),o=[new ol.style.Style({stroke:new ol.style.Stroke({color:i,width:5})}),new ol.style.Style({stroke:new ol.style.Stroke({color:n,width:3}),fill:new ol.style.Fill({color:[255,255,255,.5]})})],s=new ol.style.RegularShape({radius:10.5,points:3,rotation:0,fill:new ol.style.Fill({color:n}),stroke:new ol.style.Stroke({color:i,width:1.5})}),a=s.getImage(),l=a.getContext("2d"),h=document.createElement("canvas");h.width=h.height=a.width,h.getContext("2d").drawImage(a,0,0),l.clearRect(0,0,a.width,a.height),l.drawImage(h,0,0,a.width,a.height,3,0,a.width-6,a.height);this.locStyle={error:new ol.style.Style({fill:new ol.style.Fill({color:[255,0,0,.2]})}),warn:new ol.style.Style({fill:new ol.style.Fill({color:[255,192,0,.2]})}),ok:new ol.style.Style({fill:new ol.style.Fill({color:[0,255,0,.2]})})},this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector,name:"GeolocationDraw overlay",style:t.style||function(t){return void 0===t.get("heading")?o[1].setImage(r):(o[1].setImage(s),s.setRotation(t.get("heading")||0)),o}}),this.sketch_=[new ol.Feature,new ol.Feature,new ol.Feature],this.overlayLayer_.getSource().addFeatures(this.sketch_),this.features_=t.features,this.source_=t.source,this.condition_=t.condition||function(t){return t.getAccuracy()<this.get("minAccuracy")},ol.interaction.Interaction.call(this,{handleEvent:function(){return this.get("preventTracking")||!e.getTracking()}}),this.set("type",t.type||"LineString"),this.set("attributes",t.attributes||{}),this.set("minAccuracy",t.minAccuracy||20),this.set("tolerance",t.tolerance||5),this.set("zoom",t.zoom||16),this.set("preventTracking",t.preventTracking||!1)},ol.inherits(ol.interaction.GeolocationDraw,ol.interaction.Interaction),ol.interaction.GeolocationDraw.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Pointer.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),t&&this.geolocation.setProjection(t.getView().getProjection())},ol.interaction.GeolocationDraw.prototype.setActive=function(t){ol.interaction.Interaction.prototype.setActive.call(this,t),this.overlayLayer_.setVisible(t),this.reset(),this.getMap()&&(this.geolocation.setTracking(t),this.getMap().renderSync())},ol.interaction.GeolocationDraw.prototype.reset=function(){this.sketch_[1].setGeometry(),this.path_=[]},ol.interaction.GeolocationDraw.prototype.start=function(){this.pause(!1),this.dispatchEvent({type:"drawstart",feature:this.sketch_[1]})},ol.interaction.GeolocationDraw.prototype.stop=function(){var t=this.sketch_[1].clone();t.getGeometry()&&(this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t),this.dispatchEvent({type:"drawend",feature:this.sketch_[1]})),this.reset(),this.pause(!0)},ol.interaction.GeolocationDraw.prototype.pause=function(t){this.pause_=t},ol.interaction.GeolocationDraw.prototype.draw_=function(t){var e=this.getMap();if(e){var i=this.geolocation,n=i.getAccuracy(),r=i.getPosition();r.push(i.getAltitude());var o=i.getAccuracyGeometry();this.get("preventTracking")||(e.getView().setCenter(r),e.getView().setZoom(this.get("zoom")||16),ol.extent.containsExtent(e.getView().calculateExtent(e.getSize()),o.getExtent())||e.getView().fit(o.getExtent()));var s=this.sketch_[0];s.setGeometry(o),n<this.get("minAccuracy")/2?s.setStyle(this.locStyle.ok):n<this.get("minAccuracy")?s.setStyle(this.locStyle.warn):s.setStyle(this.locStyle.error);var a;if(!this.pause_&&this.condition_.call(this,i)){switch(s=this.sketch_[1],this.path_.push(r),this.get("type")){case"Point":this.path_=[r],s.setGeometry(new ol.geom.Point(r));var l=this.get("attributes");l.heading&&s.set("heading",i.getHeading()),l.accuracy&&s.set("accuracy",i.getAccuracy()),l.altitudeAccuracy&&s.set("altitudeAccuracy",i.getAltitudeAccuracy()),l.speed&&s.set("speed",i.getSpeed());break;case"LineString":this.path_.length>1?((a=new ol.geom.LineString(this.path_)).simplify(this.get("tolerance")),s.setGeometry(a)):s.setGeometry();break;case"Polygon":this.path_.length>2?((a=new ol.geom.Polygon([this.path_])).simplify(this.get("tolerance")),s.setGeometry(a)):s.setGeometry()}this.dispatchEvent({type:"drawing",feature:this.sketch_[1],geolocation:i})}this.sketch_[2].setGeometry(new ol.geom.Point(r)),this.sketch_[2].set("heading",i.getHeading()),this.dispatchEvent({type:"tracking",feature:this.sketch_[1],geolocation:i})}},ol.interaction.Hover=function(t){t||(t={});var e=this;ol.interaction.Interaction.call(this,{handleEvent:function(i){return"pointermove"==i.type&&e.handleMove_(i),!t.handleEvent||t.handleEvent(i)}}),this.setFeatureFilter(t.featureFilter),this.setLayerFilter(t.layerFilter),this.setCursor(t.cursor)},ol.inherits(ol.interaction.Hover,ol.interaction.Interaction),ol.interaction.Hover.prototype.setMap=function(t){void 0!==this.previousCursor_&&this.getMap()&&(this.getMap().getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=void 0),ol.interaction.Interaction.prototype.setMap.call(this,t)},ol.interaction.Hover.prototype.setCursor=function(t){!t&&void 0!==this.previousCursor_&&this.getMap()&&(this.getMap().getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=void 0),this.cursor_=t},ol.interaction.Hover.prototype.setFeatureFilter=function(t){this.featureFilter_="function"==typeof t?t:function(){return!0}},ol.interaction.Hover.prototype.setLayerFilter=function(t){this.layerFilter_="function"==typeof t?t:function(){return!0}},ol.interaction.Hover.prototype.handleMove_=function(t){var e=this.getMap();if(e){var i,n,r=this,o=e.forEachFeatureAtPixel(t.pixel,function(t,e){return r.layerFilter_.call(null,e)&&r.featureFilter_.call(null,t,e)?(i=t,n=e,!0):(i=n=null,!1)});if(o&&this.dispatchEvent({type:"hover",feature:i,layer:n,coordinate:t.coordinate,pixel:t.pixel,map:t.map,dragging:t.dragging}),this.feature_===i&&this.layer_===n||(this.feature_=i,this.layer_=n,i?this.dispatchEvent({type:"enter",feature:i,layer:n,coordinate:t.coordinate,pixel:t.pixel,map:t.map,dragging:t.dragging}):this.dispatchEvent({type:"leave",coordinate:t.coordinate,pixel:t.pixel,map:t.map,dragging:t.dragging})),this.cursor_){var s=e.getTargetElement().style;o?s.cursor!=this.cursor_&&(this.previousCursor_=s.cursor,s.cursor=this.cursor_):void 0!==this.previousCursor_&&(s.cursor=this.previousCursor_,this.previousCursor_=void 0)}}},ol.interaction.LongTouch=function(t){t||(t={}),this.delay_=t.delay||1e3;var e=t.handleLongTouchEvent||function(){},i=null;ol.interaction.Interaction.call(this,{handleEvent:function(t){if(this.getActive())switch(t.type){case"pointerdown":i&&clearTimeout(i),i=setTimeout(function(){t.type="longtouch",e(t)},this.delay_);break;case"pointerup":case"pointermove":case"pointerdrag":i&&(clearTimeout(i),i=null)}else i&&(clearTimeout(i),i=null);return!0}})},ol.inherits(ol.interaction.LongTouch,ol.interaction.Interaction),ol.interaction.Ripple=function(t){ol.interaction.Pointer.call(this,{handleDownEvent:this.rainDrop,handleMoveEvent:this.rainDrop}),t=t||{},this.riprad=t.radius||3,this.ripplemap=[],this.last_map=[],this.interval=t.interval,this.rains(this.interval)},ol.inherits(ol.interaction.Ripple,ol.interaction.Pointer),ol.interaction.Ripple.prototype.setMap=function(t){this.oncompose&&(ol.Observable.unByKey(oncompose),this.getMap()&&this.getMap().render()),ol.interaction.Pointer.prototype.setMap.call(this,t),t&&(this.oncompose=t.on("postcompose",this.postcompose_,this))},ol.interaction.Ripple.prototype.rains=function(t){function e(){i.width&&i.rainDrop([n()*i.width,n()*i.height]),i.onrain=setTimeout(e,n()*vdelay+delay)}this.onrain&&clearTimeout(this.onrain);var i=this;vdelay=("number"==typeof t?t:1e3)/2,delay=3*vdelay/2;var n=Math.random;delay&&e()},ol.interaction.Ripple.prototype.rainDrop=function(t){if(this.width){var e,i;t.pixel?(e=t.pixel[0]*this.ratio,i=t.pixel[1]*this.ratio):(e=t[0]*this.ratio,i=t[1]*this.ratio),e<<=0;for(var n=(i<<=0)-this.riprad*this.ratio;n<i+this.riprad*this.ratio;n++)for(var r=e-this.riprad*this.ratio;r<e+this.riprad*this.ratio;r++)this.ripplemap[this.oldind+n*this.width+r]+=128}},ol.interaction.Ripple.prototype.postcompose_=function(t){var e=t.context,i=e.canvas;if(this.width!=i.width||this.height!=i.height){this.width=i.width,this.height=i.height,this.ratio=t.frameState.pixelRatio,this.half_width=this.width>>1,this.half_height=this.height>>1,this.size=this.width*(this.height+2)*2,this.oldind=this.width,this.newind=this.width*(this.height+3);for(h=0;h<this.size;h++)this.last_map[h]=this.ripplemap[h]=0}this.texture=e.getImageData(0,0,this.width,this.height),this.ripple=e.getImageData(0,0,this.width,this.height);var n,r,o,s,a,l=this.oldind;this.oldind=this.newind,this.newind=l;for(var h=0,c=this.ripple.data,u=this.texture.data,f=0;f<this.height;f++)for(var g=0;g<this.width;g++){var d=this.newind+h,p=this.oldind+h;o=this.ripplemap[p-this.width]+this.ripplemap[p+this.width]+this.ripplemap[p-1]+this.ripplemap[p+1]>>1,o-=this.ripplemap[d],o-=o>>5,this.ripplemap[d]=o,o=1024-o,this.last_map[h]!=o&&(this.last_map[h]=o,n=((g-this.half_width)*o/1024<<0)+this.half_width,r=((f-this.half_height)*o/1024<<0)+this.half_height,n>=this.width&&(n=this.width-1),n<0&&(n=0),r>=this.height&&(r=this.height-1),r<0&&(r=0),a=4*(n+r*this.width),c[s=4*h]=u[a],c[s+1]=u[a+1],c[s+2]=u[a+2]),++h}e.putImageData(this.ripple,0,0),this.getMap().render()},ol.interaction.SnapGuides=function(t){function e(t,e){var i=t[1][0]-t[0][0],n=t[1][1]-t[0][1],r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],s=i*o-n*r;if(0!=s){var a=(i*t[0][1]-i*e[0][1]-n*t[0][0]+n*e[0][0])/s;return[e[0][0]+a*r,e[0][1]+a*o]}return!1}function i(t,e){var i=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(i*i+n*n)}t||(t={}),ol.interaction.Interaction.call(this,{handleEvent:function(t){if(this.getActive()){for(var n,r=this.overlayLayer_.getSource().getFeatures(),o=null,s=null,a=t.frameState.viewState.resolution,l=0;n=r[l];l++){var h=n.getGeometry().getClosestPoint(t.coordinate);if(i(h,t.coordinate)/a<this.snapDistance_){if(o){var c=e(o.getGeometry().getCoordinates(),n.getGeometry().getCoordinates());c&&i(c,t.coordinate)/a<this.snapDistance_&&(s=c)}else s=h;o=n}}s&&(t.coordinate=s)}return!0}}),this.snapDistance_=t.pixelTolerance||10;var n=[new ol.style.Style({stroke:new ol.style.Stroke({color:"#ffcc33",lineDash:[8,5],width:1.25})})];t.style&&(n=t.style instanceof Array?t.style:[t.style]),this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({features:new ol.Collection,useSpatialIndex:!1}),name:"Snap overlay",displayInLayerSwitcher:!1,style:function(t){return n}})},ol.inherits(ol.interaction.SnapGuides,ol.interaction.Interaction),ol.interaction.SnapGuides.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Interaction.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t)},ol.interaction.SnapGuides.prototype.setActive=function(t){this.overlayLayer_.setVisible(t),ol.interaction.Interaction.prototype.setActive.call(this,t)},ol.interaction.SnapGuides.prototype.clearGuides=function(t){if(t)for(var e,i=0;e=t[i];i++)this.overlayLayer_.getSource().removeFeature(e);else this.overlayLayer_.getSource().clear()},ol.interaction.SnapGuides.prototype.getGuides=function(t){return this.overlayLayer_.getSource().getFeaturesCollection()},ol.interaction.SnapGuides.prototype.addGuide=function(t){if(t){var e=t[0][0]-t[1][0],i=t[0][1]-t[1][1],n=1e8/Math.sqrt(e*e+i*i),r=[t[0][0]+e*n,t[0][1]+i*n],o=[t[0][0]-e*n,t[0][1]-i*n],s=new ol.Feature(new ol.geom.LineString([r,o]));return this.overlayLayer_.getSource().addFeature(s),s}},ol.interaction.SnapGuides.prototype.addOrthoGuide=function(t){if(t){var e=t[0][0]-t[1][0],i=t[0][1]-t[1][1],n=1e8/Math.sqrt(e*e+i*i),r=[t[0][0]+i*n,t[0][1]-e*n],o=[t[0][0]-i*n,t[0][1]+e*n],s=new ol.Feature(new ol.geom.LineString([r,o]));return this.overlayLayer_.getSource().addFeature(s),s}},ol.interaction.SnapGuides.prototype.setDrawInteraction=function(t){function e(t){var e=[],r=2;switch(t.target.getType()){case"LineString":e=t.target.getCoordinates(),r=2;break;case"Polygon":e=t.target.getCoordinates()[0],r=3}var o=e.length;o!=i&&o>r&&(snapi.clearGuides(n),n=[snapi.addOrthoGuide([e[o-r],e[o-r-1]]),snapi.addGuide([e[0],e[1]]),snapi.addOrthoGuide([e[0],e[1]])],i=o)}var i=0,n=[];t.on("drawstart",function(t){t.feature.getGeometry().on("change",e)}),t.on("drawend",function(t){snapi.clearGuides(n),t.feature.getGeometry().un("change",e),i=0,n=[]})},ol.interaction.Split=function(t){t||(t={}),ol.interaction.Interaction.call(this,{handleEvent:function(t){switch(t.type){case"singleclick":return this.handleDownEvent(t);case"pointermove":return this.handleMoveEvent(t);default:return!0}return!0}}),this.snapDistance_=t.snapDistance||25,this.tolerance_=t.tolerance||1e-10,this.cursor_=t.cursor,this.sources_=t.sources?t.sources instanceof Array?t.sources:[t.sources]:[],t.features&&this.sources_.push(new ol.source.Vector({features:features})),this.filterSplit_=t.filter||function(){return!0};var e=[255,255,255,1],i=[0,153,255,1],n=new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),r=new ol.style.Stroke({color:"#3399CC",width:1.25}),o=[new ol.style.Style({image:new ol.style.Circle({fill:n,stroke:r,radius:5}),fill:n,stroke:r})],s=[new ol.style.Style({stroke:new ol.style.Stroke({color:e,width:5})}),new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:i}),stroke:new ol.style.Stroke({color:e,width:1.5})}),stroke:new ol.style.Stroke({color:i,width:3})})];t.sketchStyle&&(o=t.sketchStyle instanceof Array?t.sketchStyle:[t.sketchStyle]),t.featureStyle&&(s=t.featureStyle instanceof Array?t.featureStyle:[t.featureStyle]),this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:!1}),name:"Split overlay",displayInLayerSwitcher:!1,style:function(t){return t._sketch_?o:s}})},ol.inherits(ol.interaction.Split,ol.interaction.Interaction),ol.interaction.Split.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Interaction.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t)},ol.interaction.Split.prototype.getClosestFeature=function(t){for(var e,i,n,r=this.snapDistance_+1,o=0;o<this.sources_.length;o++){var s=this.sources_[o];if((e=s.getClosestFeatureToCoordinate(t.coordinate)).getGeometry().splitAt,this.tolerance_){i=e.getGeometry().getClosestPoint(t.coordinate),r=(n=new ol.geom.LineString([t.coordinate,i])).getLength()/t.frameState.viewState.resolution;break}}if(r>this.snapDistance_)return!1;var a=this.getNearestCoord(i,e.getGeometry().getCoordinates()),l=this.getMap().getPixelFromCoordinate(a);return ol.coordinate.dist2d(t.pixel,l)<this.snapDistance_&&(i=a),{source:s,feature:e,coord:i,link:n}},ol.interaction.Split.prototype.getNearestCoord=function(t,e){for(var i,n,r=Number.MAX_VALUE,o=0;o<e.length;o++)(i=ol.coordinate.dist2d(t,e[o]))<r&&(r=i,n=e[o]);return n},ol.interaction.Split.prototype.handleDownEvent=function(t){var e=this.getClosestFeature(t);if(e){var i=this;i.overlayLayer_.getSource().clear();var n=e.feature.getGeometry().splitAt(e.coord,this.tolerance_);if(n.length>1){for(var r=[],o=0;o<n.length;o++){var s=e.feature.clone();s.setGeometry(n[o]),r.push(s)}i.dispatchEvent({type:"beforesplit",original:e.feature,features:r}),e.source.dispatchEvent({type:"beforesplit",original:e.feature,features:r}),e.source.removeFeature(e.feature);for(o=0;o<r.length;o++)e.source.addFeature(r[o]);i.dispatchEvent({type:"aftersplit",original:e.feature,features:r}),e.source.dispatchEvent({type:"aftersplit",original:e.feature,features:r})}}return!1},ol.interaction.Split.prototype.handleMoveEvent=function(t){var e=t.map;this.overlayLayer_.getSource().clear();var i=this.getClosestFeature(t);if(i&&this.filterSplit_(i.feature)){var n,r;this.overlayLayer_.getSource().addFeature(i.feature),(n=new ol.Feature(new ol.geom.Point(i.coord)))._sketch_=!0,this.overlayLayer_.getSource().addFeature(n),(r=new ol.Feature(new ol.geom.LineString([t.coordinate,i.coord])))._sketch_=!0,this.overlayLayer_.getSource().addFeature(r)}var o=e.getTargetElement();this.cursor_&&(i?o.style.cursor!=this.cursor_&&(this.previousCursor_=o.style.cursor,o.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(o.style.cursor=this.previousCursor_,this.previousCursor_=void 0))},ol.interaction.Splitter=function(t){t||(t={}),ol.interaction.Interaction.call(this,{handleEvent:function(t){return"pointermove"!=t.type&&"pointerdrag"!=t.type?(this.lastEvent_&&(this.splitSource(this.lastEvent_.feature),this.lastEvent_=null),this.moving_=!1):this.moving_=!0,!0}}),this.added_=[],this.removed_=[],t.features?this.source_=new ol.source.Vector({features:t.features}):this.source_=t.source?t.source:new ol.source.Vector({features:new ol.Collection});var e=this.triggerSource;t.triggerFeatures&&(e=new ol.source.Vector({features:t.triggerFeatures})),e?(e.on("addfeature",this.onAddFeature,this),e.on("changefeature",this.onChangeFeature,this),e.on("removefeature",this.onRemoveFeature,this)):(this.source_.on("addfeature",this.onAddFeature,this),this.source_.on("changefeature",this.onChangeFeature,this),this.source_.on("removefeature",this.onRemoveFeature,this)),this.tolerance_=t.tolerance||1e-10,this.filterSplit_=t.filter||function(){return!0}},ol.inherits(ol.interaction.Splitter,ol.interaction.Interaction),ol.interaction.Splitter.prototype.intersectSegs=function(t,e){var i=this.tolerance_,n=t[0][0]-t[1][0],r=e[0][0]-e[1][0],o=t[0][1]-t[1][1],s=e[0][1]-e[1][1],a=n*s-o*r;if(Math.abs(a)<i)return!1;var l=((t[0][0]-e[1][0])*s-(t[0][1]-e[1][1])*r)/a;if(Math.abs(l)<i)return t[0];if(Math.abs(1-l)<i)return t[1];if(l<0||l>1)return!1;var h=((t[0][1]-e[1][1])*n-(t[0][0]-e[1][0])*o)/a;if(Math.abs(h)<i)return e[1];if(Math.abs(1-h)<i)return e[0];if(h<0||h>1)return!1;var c=t[0][0]*t[1][1]-t[0][1]*t[1][0],u=e[0][0]*e[1][1]-e[0][1]*e[1][0];return[(c*r-u*n)/a,(c*s-u*o)/a]},ol.interaction.Splitter.prototype.splitSource=function(t){if(!this.splitting){var e,i,n,r=this;this.source_.dispatchEvent({type:"beforesplit",feaure:t,source:this.source_}),this.splitting=!0,this.added_=[],this.removed_=[];var o,s=t.getGeometry().getCoordinates(),a=[];for(e=0;e<s.length-1;e++){o=[s[e],s[e+1]];for(var l,h=ol.extent.buffer(ol.extent.boundingExtent(o),this.tolerance_);;){var c=!1;if(this.source_.forEachFeatureIntersectingExtent(h,function(e){if(e!==t)for(var i=e.getGeometry().getCoordinates(),n=0;n<i.length-1;n++){var r=this.intersectSegs(o,[i[n],i[n+1]]);if(r&&(a.push(r),(l=e.getGeometry().splitAt(r,this.tolerance_))&&l.length>1))return c=e,!0}return!1},this),!c)break;var u=c;for(this.source_.removeFeature(u),i=0;i<l.length;i++)(n=u.clone()).setGeometry(l[i]),this.source_.addFeature(n)}}for(e=0;e<s.length-2;e++)for(var f=e+1;f<s.length-1;f++){var g=this.intersectSegs([s[e],s[e+1]],[s[f],s[f+1]]);g&&g!=s[e+1]&&a.push(g)}var d=!1;if(a.length){var p=t.getGeometry().splitAt(a,this.tolerance_);if(p.length>1){for(i=0;i<p.length;i++)(n=t.clone()).setGeometry(p[i]),this.source_.addFeature(n);d=!0}}setTimeout(function(){d&&r.source_.removeFeature(t),r.source_.dispatchEvent({type:"aftersplit",featureAdded:r.added_,featureRemoved:r.removed_,source:this.source_}),r.splitting=!1},0)}},ol.interaction.Splitter.prototype.onAddFeature=function(t){this.splitSource(t.feature),this.splitting&&this.added_.push(t.feature)},ol.interaction.Splitter.prototype.onRemoveFeature=function(t){if(this.splitting){var e=this.added_.indexOf(t.feature);-1==e?this.removed_.push(t.feature):this.added_.splice(e,1)}},ol.interaction.Splitter.prototype.onChangeFeature=function(t){this.moving_?this.lastEvent_=t:this.splitSource(t.feature)},ol.interaction.Synchronize=function(t){t||(t={});var e=this;ol.interaction.Interaction.call(this,{handleEvent:function(t){return"pointermove"==t.type&&e.handleMove_(t),!0}}),this.maps=t.maps},ol.inherits(ol.interaction.Synchronize,ol.interaction.Interaction),ol.interaction.Synchronize.prototype.setMap=function(t){if(this.getMap()&&(this.getMap().getView().un("change:center",this.syncMaps,this),this.getMap().getView().un("change:rotation",this.syncMaps,this),this.getMap().getView().un("change:resolution",this.syncMaps,this),ol.events.unlisten(this.getMap().getViewport(),ol.events.EventType.MOUSEOUT,this.handleMouseOut_,this)),ol.interaction.Interaction.prototype.setMap.call(this,t),t){this.getMap().getView().on("change:center",this.syncMaps,this),this.getMap().getView().on("change:rotation",this.syncMaps,this),this.getMap().getView().on("change:resolution",this.syncMaps,this);var e=this;$(this.getMap().getTargetElement()).mouseout(function(){for(var t=0;t<e.maps.length;t++)e.maps[t].hideTarget();e.getMap().hideTarget()}),this.syncMaps()}},ol.interaction.Synchronize.prototype.syncMaps=function(t){var e=this.getMap();if(t||(t={type:"all"}),e)for(var i=0;i<this.maps.length;i++)switch(t.type){case"change:rotation":this.maps[i].getView().getRotation()!=e.getView().getRotation()&&this.maps[i].getView().setRotation(e.getView().getRotation());break;case"change:center":this.maps[i].getView().getCenter()!=e.getView().getCenter()&&this.maps[i].getView().setCenter(e.getView().getCenter());break;case"change:resolution":this.maps[i].getView().getResolution()!=e.getView().getResolution()&&this.maps[i].getView().setResolution(e.getView().getResolution());break;default:this.maps[i].getView().setRotation(e.getView().getRotation()),this.maps[i].getView().setCenter(e.getView().getCenter()),this.maps[i].getView().setResolution(e.getView().getResolution())}},ol.interaction.Synchronize.prototype.handleMove_=function(t){for(var e=0;e<this.maps.length;e++)this.maps[e].showTarget(t.coordinate);this.getMap().showTarget()},ol.interaction.Synchronize.prototype.handleMouseOut_=function(t,e){for(var i=0;i<e.maps.length;i++)e.maps[i].targetOverlay_.setPosition(void 0)},ol.Map.prototype.showTarget=function(t){if(!this.targetOverlay_){var e=$("<div>").addClass("ol-target");this.targetOverlay_=new ol.Overlay({element:e.get(0)}),this.targetOverlay_.setPositioning("center-center"),this.addOverlay(this.targetOverlay_),e.parent().addClass("ol-target-overlay"),this.targetOverlay_.setPosition([0,0])}this.targetOverlay_.setPosition(t)},ol.Map.prototype.hideTarget=function(){this.removeOverlay(this.targetOverlay_),this.targetOverlay_=void 0},ol.interaction.TouchCompass=function(t){var t=t||{},e={};if(e.handleDownEvent=function(t){var e=this.getCenter_(),i=t.pixel[0]-e[0],n=t.pixel[1]-e[1];return this.start=t,Math.sqrt(i*i+n*n)<this.size/2},e.handleDragEvent=function(t){this.pos||(this.pos=this.start,this.getMap().renderSync()),this.pos=t},e.handleUpEvent=function(t){return this.pos=!1,!0},ol.interaction.Pointer.call(this,e),this.ondrag_=t.onDrag,this.size=t.size||80,this.alpha=t.alpha||.5,!ol.interaction.TouchCompass.prototype.compass){var i=ol.interaction.TouchCompass.prototype.compass=document.createElement("canvas"),n=i.getContext("2d"),r=i.width=i.height=this.size,o=r/10,s=r/2,a=.22*s;n.translate(s,s),n.fillStyle="#999",n.strokeStyle="#ccc",n.lineWidth=o,n.beginPath(),n.arc(0,0,.42*r,0,2*Math.PI),n.fill(),n.stroke(),n.fillStyle="#99f",n.beginPath(),n.moveTo(0,0),n.lineTo(s,0),n.lineTo(a,a),n.moveTo(0,0),n.lineTo(-s,0),n.lineTo(-a,-a),n.moveTo(0,0),n.lineTo(0,s),n.lineTo(-a,a),n.moveTo(0,0),n.lineTo(0,-s),n.lineTo(a,-a),n.moveTo(0,0),n.fill(),n.fillStyle="#eee",n.beginPath(),n.moveTo(0,0),n.lineTo(s,0),n.lineTo(a,-a),n.moveTo(0,0),n.lineTo(-s,0),n.lineTo(-a,a),n.moveTo(0,0),n.lineTo(0,s),n.lineTo(a,a),n.moveTo(0,0),n.lineTo(0,-s),n.lineTo(-a,-a),n.moveTo(0,0),n.fill()}},ol.inherits(ol.interaction.TouchCompass,ol.interaction.Pointer),ol.interaction.TouchCompass.prototype.compass=null,ol.interaction.TouchCompass.prototype.setMap=function(t){this.getMap()&&this.getMap().un("postcompose",this.drawCompass_,this),ol.interaction.Pointer.prototype.setMap.call(this,t),t&&t.on("postcompose",this.drawCompass_,this)},ol.interaction.TouchCompass.prototype.setActive=function(t){ol.interaction.Pointer.prototype.setActive.call(this,t),this.getMap()&&this.getMap().renderSync()},ol.interaction.TouchCompass.prototype.getCenter_=function(){var t=this.size,e=this.getMap().getSize();return[e[0]/2,e[1]-10-t/2]},ol.interaction.TouchCompass.prototype.drawCompass_=function(t){if(this.getActive()){var e=t.context,i=t.frameState.pixelRatio;e.save(),e.scale(i,i),e.globalAlpha=this.alpha,e.strokeStyle="#fff",e.lineWidth=5;var n=this.size,r=this.getCenter_();if(e.drawImage(this.compass,0,0,this.compass.width,this.compass.height,r[0]-n/2,r[1]-n/2,n,n),this.pos)for(var o=this.pos.pixel[0]-this.start.pixel[0],s=this.pos.pixel[1]-this.start.pixel[1],a=1;a<=4;a++)e.beginPath(),e.arc(r[0]+o/4*a,r[1]+s/4*a,n/2*(.6+.4*a/4),0,2*Math.PI),e.stroke();if(e.restore(),this.pos){if(this.ondrag_){var l=this.getMap().getView().getResolution(),h={dpixel:[this.pos.pixel[0]-this.start.pixel[0],this.pos.pixel[1]-this.start.pixel[1]]};h.traction=[h.dpixel[0]*l,-h.dpixel[1]*l],this.ondrag_(h,this.pos)}t.frameState.animate=!0}}},ol.interaction.Transform=function(t){t||(t={});var e=this;this.handles_=new ol.Collection,this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({features:this.handles_,useSpatialIndex:!1}),name:"Transform overlay",displayInLayerSwitcher:!1,style:function(t){return e.style[(t.get("handle")||"default")+(t.get("constraint")||"")+(t.get("option")||"")]}}),ol.interaction.Pointer.call(this,{handleDownEvent:this.handleDownEvent_,handleDragEvent:this.handleDragEvent_,handleMoveEvent:this.handleMoveEvent_,handleUpEvent:this.handleUpEvent_}),this.features_=t.features,this.layers_=t.layers?t.layers instanceof Array?t.layers:[t.layers]:null,this.set("translateFeature",!1!==t.translateFeature),this.set("translate",!1!==t.translate),this.set("stretch",!1!==t.stretch),this.set("scale",!1!==t.scale),this.set("rotate",!1!==t.rotate),this.set("keepAspectRatio",t.keepAspectRatio||function(t){return t.originalEvent.shiftKey}),this.on("propertychange",function(){this.drawSketch_()}),this.setDefaultStyle()},ol.inherits(ol.interaction.Transform,ol.interaction.Pointer),ol.interaction.Transform.prototype.Cursors={default:"auto",select:"pointer",translate:"move",rotate:"move",scale:"ne-resize",scale1:"nw-resize",scale2:"ne-resize",scale3:"nw-resize",scalev:"e-resize",scaleh1:"n-resize",scalev2:"e-resize",scaleh3:"n-resize"},ol.interaction.Transform.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Pointer.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),null!==t&&(this.isTouch=/touch/.test(t.getViewport().className),this.setDefaultStyle())},ol.interaction.Transform.prototype.setActive=function(t){ol.interaction.Pointer.prototype.setActive.call(this,t),t&&this.select(null)},ol.interaction.Transform.prototype.setDefaultStyle=function(){function t(t,e,i){return[new ol.style.Style({image:t,stroke:e,fill:i})]}var e=new ol.style.Stroke({color:[255,0,0,1],width:1}),i=new ol.style.Stroke({color:[255,0,0,1],width:1,lineDash:[4,4]}),n=new ol.style.Fill({color:[255,0,0,.01]}),r=new ol.style.Fill({color:[255,255,255,.8]}),o=new ol.style.RegularShape({fill:r,stroke:e,radius:this.isTouch?12:6,points:15});o.getAnchor()[0]=this.isTouch?-10:-5;var s=new ol.style.RegularShape({fill:r,stroke:e,radius:this.isTouch?16:8,points:4,angle:Math.PI/4}),a=new ol.style.RegularShape({fill:r,stroke:e,radius:this.isTouch?12:6,points:4,angle:Math.PI/4});this.style={default:t(s,i,n),translate:t(s,e,r),rotate:t(o,e,r),rotate0:t(s,e,r),scale:t(s,e,r),scale1:t(s,e,r),scale2:t(s,e,r),scale3:t(s,e,r),scalev:t(a,e,r),scaleh1:t(a,e,r),scalev2:t(a,e,r),scaleh3:t(a,e,r)},this.drawSketch_()},ol.interaction.Transform.prototype.setStyle=function(t,e){if(e){e instanceof Array?this.style[t]=e:this.style[t]=[e];for(var i=0;i<this.style[t].length;i++){var n=this.style[t][i].getImage();n&&("rotate"==t&&(n.getAnchor()[0]=-5),this.isTouch&&n.setScale(1.8));var r=this.style[t][i].getText();r&&("rotate"==t&&r.setOffsetX(this.isTouch?14:7),this.isTouch&&r.setScale(1.8))}this.drawSketch_()}},ol.interaction.Transform.prototype.getFeatureAtPixel_=function(t){var e=this;return this.getMap().forEachFeatureAtPixel(t,function(t,i){var n=!1;if(!i){if(t===e.bbox_)return!1;if(e.handles_.forEach(function(e){e===t&&(n=!0)}),n)return{feature:t,handle:t.get("handle"),constraint:t.get("constraint"),option:t.get("option")}}if(e.layers_){for(var r=0;r<e.layers_.length;r++)if(e.layers_[r]===i)return{feature:t};return null}return e.features_?(e.features_.forEach(function(e){e===t&&(n=!0)}),n?{feature:t}:null):{feature:t}})||{}},ol.interaction.Transform.prototype.drawSketch_=function(t){if(this.overlayLayer_.getSource().clear(),this.feature_)if(!0===t){if(!this.ispt_){this.overlayLayer_.getSource().addFeature(new ol.Feature({geometry:new ol.geom.Point(this.center_),handle:"rotate0"}));var e=this.feature_.getGeometry().getExtent(),i=ol.geom.Polygon.fromExtent(e),n=this.bbox_=new ol.Feature(i);this.overlayLayer_.getSource().addFeature(n)}}else{e=this.feature_.getGeometry().getExtent();if(this.ispt_){var r=this.getMap().getPixelFromCoordinate([e[0],e[1]]);e=ol.extent.boundingExtent([this.getMap().getCoordinateFromPixel([r[0]-10,r[1]-10]),this.getMap().getCoordinateFromPixel([r[0]+10,r[1]+10])])}var i=ol.geom.Polygon.fromExtent(e),n=this.bbox_=new ol.Feature(i),o=[],s=i.getCoordinates()[0];if(!this.ispt_){if(o.push(n),this.get("stretch")&&this.get("scale"))for(a=0;a<s.length-1;a++)n=new ol.Feature({geometry:new ol.geom.Point([(s[a][0]+s[a+1][0])/2,(s[a][1]+s[a+1][1])/2]),handle:"scale",constraint:a%2?"h":"v",option:a}),o.push(n);if(this.get("scale"))for(var a=0;a<s.length-1;a++)n=new ol.Feature({geometry:new ol.geom.Point(s[a]),handle:"scale",option:a}),o.push(n);this.get("translate")&&!this.get("translateFeature")&&(n=new ol.Feature({geometry:new ol.geom.Point([(s[0][0]+s[2][0])/2,(s[0][1]+s[2][1])/2]),handle:"translate"}),o.push(n))}this.get("rotate")&&(n=new ol.Feature({geometry:new ol.geom.Point(s[3]),handle:"rotate"}),o.push(n)),this.overlayLayer_.getSource().addFeatures(o)}},ol.interaction.Transform.prototype.select=function(t){this.feature_=t,this.ispt_=!!this.feature_&&"Point"==this.feature_.getGeometry().getType(),this.drawSketch_(),this.dispatchEvent({type:"select",feature:this.feature_})},ol.interaction.Transform.prototype.handleDownEvent_=function(t){var e=this.getFeatureAtPixel_(t.pixel),i=e.feature;return this.feature_&&this.feature_==i&&(this.ispt_&&this.get("translate")||this.get("translateFeature"))&&(e.handle="translate"),e.handle?(this.mode_=e.handle,this.opt_=e.option,this.constraint_=e.constraint,this.coordinate_=t.coordinate,this.pixel_=t.pixel,this.geom_=this.feature_.getGeometry().clone(),this.extent_=ol.geom.Polygon.fromExtent(this.geom_.getExtent()).getCoordinates()[0],this.center_=ol.extent.getCenter(this.geom_.getExtent()),this.angle_=Math.atan2(this.center_[1]-t.coordinate[1],this.center_[0]-t.coordinate[0]),this.dispatchEvent({type:this.mode_+"start",feature:this.feature_,pixel:t.pixel,coordinate:t.coordinate}),!0):(this.feature_=i,this.ispt_=!!this.feature_&&"Point"==this.feature_.getGeometry().getType(),this.drawSketch_(),this.dispatchEvent({type:"select",feature:this.feature_,pixel:t.pixel,coordinate:t.coordinate}),!1)},ol.interaction.Transform.prototype.handleDragEvent_=function(t){switch(this.mode_){case"rotate":var e=Math.atan2(this.center_[1]-t.coordinate[1],this.center_[0]-t.coordinate[0]);this.ispt||((l=this.geom_.clone()).rotate(e-this.angle_,this.center_),this.feature_.setGeometry(l)),this.drawSketch_(!0),this.dispatchEvent({type:"rotating",feature:this.feature_,angle:e-this.angle_,pixel:t.pixel,coordinate:t.coordinate});break;case"translate":var n=t.coordinate[0]-this.coordinate_[0],r=t.coordinate[1]-this.coordinate_[1];this.feature_.getGeometry().translate(n,r),this.handles_.forEach(function(t){t.getGeometry().translate(n,r)}),this.coordinate_=t.coordinate,this.dispatchEvent({type:"translating",feature:this.feature_,delta:[n,r],pixel:t.pixel,coordinate:t.coordinate});break;case"scale":var o=this.center_;(t.originalEvent.metaKey||t.originalEvent.ctrlKey)&&(o=this.extent_[(Number(this.opt_)+2)%4]);var s=(t.coordinate[0]-o[0])/(this.coordinate_[0]-o[0]),a=(t.coordinate[1]-o[1])/(this.coordinate_[1]-o[1]);this.constraint_?"h"==this.constraint_?s=1:a=1:this.get("keepAspectRatio")(t)&&(s=a=Math.min(s,a));var l=this.geom_.clone();l.applyTransform(function(t,e,n){if(n<2)return e;for(i=0;i<t.length;i+=n)1!=s&&(e[i]=o[0]+(t[i]-o[0])*s),1!=a&&(e[i+1]=o[1]+(t[i+1]-o[1])*a);return e}),this.feature_.setGeometry(l),this.drawSketch_(),this.dispatchEvent({type:"scaling",feature:this.feature_,scale:[s,a],pixel:t.pixel,coordinate:t.coordinate})}},ol.interaction.Transform.prototype.handleMoveEvent_=function(t){if(!this.mode_){t.map;var e=this.getFeatureAtPixel_(t.pixel),i=t.map.getTargetElement();if(e.feature){var n=e.handle?this.Cursors[(e.handle||"default")+(e.constraint||"")+(e.option||"")]:this.Cursors.select;void 0===this.previousCursor_&&(this.previousCursor_=i.style.cursor),i.style.cursor=n}else void 0!==this.previousCursor_&&(i.style.cursor=this.previousCursor_),this.previousCursor_=void 0}},ol.interaction.Transform.prototype.handleUpEvent_=function(t){return this.dispatchEvent({type:this.mode_+"end",feature:this.feature_,oldgeom:this.geom_}),this.drawSketch_(),this.mode_=null,!1},ol.source.DBPedia=function(t){var e=t||{};e.loader=this._loaderFn,this._url=e.url||"http://fr.dbpedia.org/sparql",this._maxResolution=e.maxResolution||100,this._lang=e.lang||"fr",this._limit=e.limit||1e3,e.attributions||(e.attributions=[new ol.Attribution({html:"&copy; <a href='http://dbpedia.org/'>DBpedia</a> CC-by-SA"})]),e.strategy||(e.strategy=ol.loadingstrategy.bbox),ol.source.Vector.call(this,e)},ol.inherits(ol.source.DBPedia,ol.source.Vector),ol.source.DBPedia.prototype.readFeature=function(t,e,i){for(var n in e)t.set(n,e[n].value);return!i||i.get("subject")!=e.subject.value||(i.set("type",i.get("type")+"\n"+e.type.value),!1)},ol.source.DBPedia.prototype.querySubject=function(){return"?subject rdfs:label ?label. OPTIONAL {?subject dbpedia-owl:thumbnail ?thumbnail}.OPTIONAL {?subject dbpedia-owl:abstract ?abstract} . OPTIONAL {?subject rdf:type ?type}"},ol.source.DBPedia.prototype.queryFilter=function(){return"lang(?label) = '"+this._lang+"' && lang(?abstract) = '"+this._lang+"'"},ol.source.DBPedia.prototype._loaderFn=function(t,e,i){if(!(e>this._maxResolution)){var n=this,r=ol.proj.transformExtent(t,i,"EPSG:4326");query="PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> SELECT DISTINCT * WHERE { ?subject geo:lat ?lat . ?subject geo:long ?long . "+this.querySubject()+" . FILTER("+this.queryFilter()+") . FILTER(xsd:float(?lat) <= "+r[3]+" && "+r[1]+" <= xsd:float(?lat) && xsd:float(?long) <= "+r[2]+" && "+r[0]+" <= xsd:float(?long) ) . } LIMIT "+this._limit,$.ajax({url:this._url,dataType:"jsonp",data:{query:query,format:"json"},success:function(t){var e,r,o,s=t.results.bindings,a=[],l=null;for(var h in s)e=s[h],r=[Number(s[h].long.value),Number(s[h].lat.value)],o=new ol.Feature(new ol.geom.Point(ol.proj.transform(r,"EPSG:4326",i))),n.readFeature(o,e,l)&&(a.push(o),l=o);n.addFeatures(a)}})}},function(){var t={};ol.style.clearDBPediaStyleCache=function(){t={}},ol.style.dbPediaStyleFunction=function(e){e||(e={});var i;switch(typeof e.glyph){case"function":i=e.glyph;break;case"string":i=function(){return e.glyph};break;default:i=function(t){var e=t.get("type");if(e){if(e.match("/Museum"))return"fa-camera";if(e.match("/Monument"))return"fa-building";if(e.match("/Sculpture"))return"fa-android";if(e.match("/Religious"))return"fa-institution";if(e.match("/Castle"))return"fa-key";if(e.match("Water"))return"fa-tint";if(e.match("Island"))return"fa-leaf";if(e.match("/Event"))return"fa-heart";if(e.match("/Artwork"))return"fa-asterisk";if(e.match("/Stadium"))return"fa-futbol-o";if(e.match("/Place"))return"fa-street-view"}return"fa-star"}}var n=e.radius||8,r=e.fill||new ol.style.Fill({color:"navy"}),o=e.stroke||new ol.style.Stroke({color:"#fff",width:2}),s=e.prefix?e.prefix+"_":"";return function(e,a){var l=i(e),h=s+l,c=t[h];return c||(t[h]=c=new ol.style.Style({image:new ol.style.FontSymbol({glyph:l,radius:n,fill:r,stroke:o})})),[c]}}}(),ol.source.GeoImage=function(t){var e={attributions:t.attributions,logo:t.logo,projection:t.projection};this.center=t.imageCenter,this.scale=t.imageScale,this.rotate=t.imageRotate?t.imageRotate:0,this.crop=t.imageCrop,this.mask=t.imageMask,this.image=t.image?t.image:new Image,this.image.crossOrigin=t.crossOrigin;var i=this;this.image.onload=function(){i.setCrop(i.crop),i.changed()},t.image||(this.image.src=t.url),e.canvasFunction=function(t,e,i,n,r){function o(e){return[(e[0]-t[0])/(t[2]-t[0])*n[0],(e[1]-t[3])/(t[1]-t[3])*n[1]]}var s=document.createElement("canvas");s.width=n[0],s.height=n[1];var a=s.getContext("2d");if(!this.imageSize)return s;if(this.mask){a.beginPath();var l=o(this.mask[0]);a.moveTo(l[0],l[1]);for(var h=1;h<this.mask.length;h++)l=o(this.mask[h]),a.lineTo(l[0],l[1]);a.clip()}var c=o(this.center),u=(this.image.naturalWidth/2-this.crop[0])*this.scale[0]/e*i,f=(this.image.naturalHeight/2-this.crop[1])*this.scale[1]/e*i,g=this.imageSize[0]*this.scale[0]/e*i,d=this.imageSize[1]*this.scale[1]/e*i;return a.translate(c[0],c[1]),this.rotate&&a.rotate(this.rotate),a.drawImage(this.image,this.crop[0],this.crop[1],this.imageSize[0],this.imageSize[1],-u,-f,g,d),s},ol.source.ImageCanvas.call(this,e),this.setCrop(this.crop)},ol.inherits(ol.source.GeoImage,ol.source.ImageCanvas),ol.source.GeoImage.prototype.getCenter=function(){return this.center},ol.source.GeoImage.prototype.setCenter=function(t){this.center=t,this.changed()},ol.source.GeoImage.prototype.getScale=function(){return this.scale},ol.source.GeoImage.prototype.setScale=function(t){switch(typeof t){case"number":t=[t,t];break;case"object":if(2!=t.length)return;break;default:return}this.scale=t,this.changed()},ol.source.GeoImage.prototype.getRotation=function(){return this.rotate},ol.source.GeoImage.prototype.setRotation=function(t){this.rotate=t,this.changed()},ol.source.GeoImage.prototype.getImage=function(){return this.image},ol.source.GeoImage.prototype.getCrop=function(){return this.crop},ol.source.GeoImage.prototype.setMask=function(t){this.mask=t,this.changed()},ol.source.GeoImage.prototype.getMask=function(){return this.mask},ol.source.GeoImage.prototype.setCrop=function(t){if(this.image.naturalWidth){if(t){switch(typeof t){case"number":t=[t,t,this.image.naturalWidth-t,this.image.naturalHeight-t];break;case"object":if(4!=t.length)return;break;default:return}var t=ol.extent.boundingExtent([[t[0],t[1]],[t[2],t[3]]]);this.crop=[Math.max(0,t[0]),Math.max(0,t[1]),Math.min(this.image.naturalWidth,t[2]),Math.min(this.image.naturalHeight,t[3])]}else this.crop=[0,0,this.image.naturalWidth,this.image.naturalHeight];this.crop[2]<=this.crop[0]&&(this.crop[2]=this.crop[0]+1),this.crop[3]<=this.crop[1]&&(this.crop[3]=this.crop[1]+1),this.imageSize=[this.crop[2]-this.crop[0],this.crop[3]-this.crop[1]],this.changed()}else this.crop=t},ol.source.Source.prototype.getPreview=function(t,e){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk6QAAJOkBUCTn+AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANeSURBVHic7ZpPiE1RHMc/780MBhkik79JSUlIUbOxI+wkI2yRhYSUlJLNpJF/xcpiJBmZGBZsNM1CkmhKITGkGbH0/BuPmXnP4rxbb/TOn3fvOffeec6nfqvb/b7f93fveeec37ng8Xg8Ho/nf6Uu4d+fDswFssCvhHOJhaXAMeApMAQUyyIPPAdOAiuTStAVy4EHjDWsix5gdRLJ2mY34ulWYz6IEeA4kIk9awtkgTOEM/5vdAKT4k0/Ou3YMR/ELcbRm9AKFLBbgCJwNE4TYZkJfMG++SIwDCyLz0o4bI17WdyJz0r1TAZ+oDcxCBwAFgIzEIuhvcBbg3sLwOK4DFXLFvQGniCGSSUagS4DjUPOHESkA3XiOWCORqMR6Nfo9DjI3QqPUSd+ylBnv0Zn0GrWFvmIOvGNhjqrNDp/EAutyFgRKUM2tgO+Gur81FxvAKYZaimxXYBvmuuLDHWWaK4X0RfJCNsF6NdcbzXU2a65PohYFKWOc+jn8PUajbWIXaBKp9NB7lZYh34OzwFbFfd/NtDYYSth27urLGIm0M31AL3APWAAmIooymaDnPIl/Vz4NN1yHrd7gcvxWQnHAuA3bsyPop8hUsE13BSgK04TUViBeFo2zedJ8S6wElexW4D2eNOPTjNi6WvD/DtEr8E6tk6GGoAmxFY2iFHE9NZiQf8gogiB9gTEH23izAZuE77vHyU+ANucO1QwD3hD/MbLowAcdm20EmkwXx4n3NodS9rMB2HabYpEWs0HcRqHp0fNwAvJD+eBTZr7p6BvmQVxUaEzEbiruNfJekH15L8jtrEm7JJolEcOmKXRqQOuKDQuY7HZY8s8iNfzkSLxIuI43FTrkkLnOlBfRW4VsWk+oAX5weknxFAxJQNckGgVgZuIRVoomoGXEmGTMa+iQ6K7M4SW7k24QYgiuDQPYinbhugiF4H3RGtzZYCzyIvQXfpNI1ybLyeLpf5+iTbkRbiP2EcocTHm4+YI8iI8RFHwWjAfsA95Q+YZFU6wasl8wB7kReijtNbIILa0vcg/PRlGfPQwHmlCviDqAzaA+OREtzqr1ejOIDorxlNEjTGUBV4nnUWCvAJxGDlA8q9j3DEArAn2zvXAfOwfl6eVAmJrPpJ0Ih6Px+PxeJLjLwPul3vj5d0eAAAAAElFTkSuQmCC"},ol.source.Tile.prototype.getPreview=function(t,e){t||(t=[21020,6355964]),e||(e=150);var i=this.getTileGrid().getTileCoordForCoordAndResolution(t,e);return this.getTileUrlFunction().call(this,i,this.getProjection())},ol.source.TileWMS.prototype.getPreview=function(t,e){t||(t=[21020,6355964]),e||(e=150);var i=this.getGetFeatureInfoUrl(t,e,this.getProjection()||"EPSG:3857",{});return i=i.replace(/getfeatureinfo/i,"GetMap")},ol.layer.Layer.prototype.getPreview=function(t,e){if(this.get("preview"))return[this.get("preview")];if(e||(e=150),e<this.getMinResolution()||e>this.getMaxResolution()){var i=this.getMinResolution(),n=this.getMaxResolution();for(n>1e5&&(n=156543),i<.15&&(i=.15),e=n;n>i;)n/=2,e=i*=2}var r=this.getExtent();return t||(t=[21020,6355964]),r&&!ol.extent.containsCoordinate(r,t)&&(t=[(r[0]+r[2])/2,(r[1]+r[3])/2]),this.getSource?[this.getSource().getPreview(t,e)]:[]},ol.layer.Group.prototype.getPreview=function(t,e){if(this.get("preview"))return[this.get("preview")];var i=[];if(this.getLayers)for(var n=this.getLayers().getArray(),r=0;r<n.length;r++)i=i.concat(n[r].getPreview(t,e));return i},ol.source.Mapillary=function(t){var e=t||{};e.loader=this._loaderFn,this._maxResolution=e.maxResolution||100,this._limit=e.limit||100,e.attributions||(e.attributions=[new ol.Attribution({html:"&copy; <a href='https://www.mapillary.com/'>Mapillary</a>"})]),e.strategy||(e.strategy=ol.loadingstrategy.bbox),ol.source.Vector.call(this,e)},ol.inherits(ol.source.Mapillary,ol.source.Vector),ol.source.Mapillary.prototype.readFeature=function(t,e){return!0},ol.source.Mapillary.prototype._loaderFn=function(t,e,i){if(!(e>this._maxResolution)){var n=ol.proj.transformExtent(t,i,"EPSG:4326"),r=Date.now()-15552e6,o="https://a.mapillary.com/v2/search/im?client_id="+this.get("clientId")+"&max_lat="+n[3]+"&max_lon="+n[2]+"&min_lat="+n[1]+"&min_lon="+n[0]+"&limit="+(this._limit-1)+"&start_time="+r;$.ajax({url:o,dataType:"jsonp",success:function(t){console.log(t)}})}},ol.layer.Vector.prototype.setRender3D=function(t){t.setLayer(this)},ol.render3D=function(t){var t=t||{};this.maxResolution_=t.maxResolution||100,this.defaultHeight_=t.defaultHeight||0,this.height_=this.getHfn(t.height)},ol.render3D.prototype.onPostcompose_=function(t){var e=t.frameState.viewState.resolution;if(!(e>this.maxResolution_)){if(this.res_=400*e,this.animate_){var i=t.frameState.time-this.animate_;i<this.animateDuration_?(this.elapsedRatio_=this.easing_(i/this.animateDuration_),t.frameState.animate=!0):(this.animate_=!1,this.height_=this.toHeight_)}var n=t.frameState.pixelRatio,r=t.context,o=this.matrix_=t.frameState.coordinateToPixelTransform;o||((o=t.frameState.coordinateToPixelMatrix)[2]=o[4],o[3]=o[5],o[4]=o[12],o[5]=o[13]),this.center_=[r.canvas.width/2/n,r.canvas.height/n];var s=this.layer_.getSource().getFeaturesInExtent(t.frameState.extent);r.save(),r.scale(n,n),r.lineWidth=1,r.strokeStyle="red",r.fillStyle="rgba(0,0,255,0.5)";for(var a=[],l=0;l<s.length;l++)a.push(this.getFeature3D_(s[l],this.getFeatureHeight(s[l])));this.drawFeature3D_(r,a),r.restore()}},ol.render3D.prototype.setLayer=function(t){this.layer_&&this.layer_.un("postcompose",this.onPostcompose_,this),this.layer_=t,t.on("postcompose",this.onPostcompose_,this)},ol.render3D.prototype.getHfn=function(t){switch(typeof t){case"function":return t;case"string":var e=this.defaultHeight_;return function(i){return Number(i.get(t))||e};case"number":return function(e){return t};default:return function(t){return 10}}},ol.render3D.prototype.animate=function(t){t=t||{},this.toHeight_=this.getHfn(t.height),this.animate_=(new Date).getTime(),this.animateDuration_=t.duration||1e3,this.easing_=t.easing||ol.easing.easeOut,this.layer_.changed()},ol.render3D.prototype.animating=function(){return this.animate_&&(new Date).getTime()-this.animate_>this.animateDuration_&&(this.animate_=!1),!!this.animate_},ol.render3D.prototype.getFeatureHeight=function(t){if(this.animate_){var e=this.height_(t),i=this.toHeight_(t);return e*(1-this.elapsedRatio_)+this.elapsedRatio_*i}return this.height_(t)},ol.render3D.prototype.hvector_=function(t,e){return p0=[t[0]*this.matrix_[0]+t[1]*this.matrix_[1]+this.matrix_[4],t[0]*this.matrix_[2]+t[1]*this.matrix_[3]+this.matrix_[5]],p1=[p0[0]+e/this.res_*(p0[0]-this.center_[0]),p0[1]+e/this.res_*(p0[1]-this.center_[1])],{p0:p0,p1:p1}},ol.render3D.prototype.getFeature3D_=function(t,e){var i=t.getGeometry().getCoordinates();switch(t.getGeometry().getType()){case"Polygon":i=[i];case"MultiPolygon":for(var n=[],r=0;r<i.length;r++)for(var o=0;o<i[r].length;o++){for(var s=[],a=0;a<i[r][o].length;a++)s.push(this.hvector_(i[r][o][a],e));n.push(s)}return{type:"MultiPolygon",feature:t,geom:n};case"Point":return{type:"Point",feature:t,geom:this.hvector_(i,e)};default:return{}}},ol.render3D.prototype.drawFeature3D_=function(t,e){for(o=0;o<e.length;o++)switch(e[o].type){case"MultiPolygon":for(s=0;s<e[o].geom.length;s++)for(var i=e[o].geom[s],n=0;n<i.length;n++)t.beginPath(),t.moveTo(i[n].p0[0],i[n].p0[1]),t.lineTo(i[n].p1[0],i[n].p1[1]),t.stroke();break;case"Point":var r=e[o].geom;t.beginPath(),t.moveTo(r.p0[0],r.p0[1]),t.lineTo(r.p1[0],r.p1[1]),t.stroke()}for(var o=0;o<e.length;o++)switch(e[o].type){case"MultiPolygon":t.beginPath();for(var s=0;s<e[o].geom.length;s++){i=e[o].geom[s];if(0==s){t.moveTo(i[0].p1[0],i[0].p1[1]);for(n=1;n<i.length;n++)t.lineTo(i[n].p1[0],i[n].p1[1])}else{t.moveTo(i[0].p1[0],i[0].p1[1]);for(n=i.length-2;n>=0;n--)t.lineTo(i[n].p1[0],i[n].p1[1])}t.closePath()}t.fill("evenodd"),t.stroke();break;case"Point":var a=(i=e[o]).feature.get("label"),l=i.geom.p1,h=t.fillStyle;t.fillStyle=t.strokeStyle,t.textAlign="center",t.textBaseline="bottom",t.fillText(a,l[0],l[1]);var c=t.measureText(a),u=Number(t.font.match(/\d+(\.\d+)?/g).join([]));t.fillStyle="rgba(255,255,255,0.5)",t.fillRect(l[0]-c.width/2-5,l[1]-u-5,c.width+10,u+10),t.strokeRect(l[0]-c.width/2-5,l[1]-u-5,c.width+10,u+10),t.fillStyle=h}},ol.source.WikiCommons=function(t){var e=t||{};e.loader=this._loaderFn,this._maxResolution=e.maxResolution||100,this._lang=e.lang||"fr",this._limit=e.limit||100,e.attributions||(e.attributions=[new ol.Attribution({html:"&copy; <a href='https://commons.wikimedia.org/'>Wikimedia Commons</a>"})]),e.strategy||(e.strategy=ol.loadingstrategy.bbox),ol.source.Vector.call(this,e)},ol.inherits(ol.source.WikiCommons,ol.source.Vector),ol.source.WikiCommons.prototype.readFeature=function(t,e){return t.set("descriptionurl",e.descriptionurl),t.set("url",e.url),t.set("title",e.title.replace(/^file:|.jpg$/gi,"")),t.set("thumbnail",e.url.replace(/^(.+wikipedia\/commons)\/([a-zA-Z0-9]\/[a-zA-Z0-9]{2})\/(.+)$/,"$1/thumb/$2/$3/200px-$3")),t.set("user",e.user),e.extmetadata&&e.extmetadata.LicenseShortName&&t.set("copy",e.extmetadata.LicenseShortName.value),!0},ol.source.WikiCommons.prototype._loaderFn=function(t,e,i){if(!(e>this._maxResolution)){var n=this,r=ol.proj.transformExtent(t,i,"EPSG:4326"),o="https://commons.wikimedia.org/w/api.php?action=query&format=json&origin=*&prop=coordinates|imageinfo&generator=geosearch&iiprop=timestamp|user|url|extmetadata|metadata|size&iiextmetadatafilter=LicenseShortName&ggsbbox="+r[3]+"|"+r[0]+"|"+r[1]+"|"+r[2]+"&ggslimit="+this._limit+"&iilimit="+(this._limit-1)+"&ggsnamespace=6";$.ajax({url:o,dataType:"jsonp",success:function(t){var e,r,o,s=[];if(t.query&&t.query.pages){for(var a in t.query.pages){if((e=t.query.pages[a]).coordinates&&e.coordinates.length)r=[e.coordinates[0].lon,e.coordinates[0].lat];else{var l=e.imageinfo[0].metadata;if(!l)continue;r=[];for(var h=0,c=0;c<l.length;c++)"GPSLongitude"==l[c].name&&(r[0]=l[c].value,h++),"GPSLatitude"==l[c].name&&(r[1]=l[c].value,h++);if(2!=h)continue}o=new ol.Feature(new ol.geom.Point(ol.proj.transform(r,"EPSG:4326",i))),e.imageinfo[0].title=e.title,n.readFeature(o,e.imageinfo[0])&&s.push(o)}n.addFeatures(s)}}})}},ol.Overlay.Magnify=function(t){var e=$("<div>").addClass("ol-magnify");this.element=e.get(0),ol.Overlay.call(this,{positioning:t.positioning||"center-center",element:this.element,stopEvent:!1}),this.mgmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:t.target||this.element,view:new ol.View,layers:t.layers}),this.mgview_=this.mgmap_.getView(),this.external_=!!t.target,this.set("zoomOffset",t.zoomOffset||1),this.set("active",!0),this.on("propertychange",this.setView_,this)},ol.inherits(ol.Overlay.Magnify,ol.Overlay),ol.Overlay.Magnify.prototype.setMap=function(t){this.getMap()&&($(this.getMap().getViewport()).off("mousemove",this.onMouseMove_),this.getMap().getView().un("propertychange",this.setView_,this)),ol.Overlay.prototype.setMap.call(this,t);$(t.getViewport()).on("mousemove",{self:this},this.onMouseMove_),t.getView().on("propertychange",this.setView_,this),this.setView_()},ol.Overlay.Magnify.prototype.getMagMap=function(){return this.mgmap_},ol.Overlay.Magnify.prototype.getActive=function(){return this.get("active")},ol.Overlay.Magnify.prototype.setActive=function(t){return this.set("active",t)},ol.Overlay.Magnify.prototype.onMouseMove_=function(t){var e=t.data.self;if(e.get("active")){var i=e.getMap().getEventCoordinate(t);e.external_||e.setPosition(i),e.mgview_.setCenter(i),"none"==$("canvas",e.element).css("display")&&e.mgmap_.updateSize()}else e.setPosition()},ol.Overlay.Magnify.prototype.setView_=function(t){if(this.get("active")){if(!t)return this.setView_({key:"rotation"}),void this.setView_({key:"resolution"});switch(t.key){case"rotation":this.mgview_.setRotation(this.getMap().getView().getRotation());break;case"zoomOffset":case"resolution":var e=Math.max(0,this.getMap().getView().getZoom()+Number(this.get("zoomOffset")));this.mgview_.setZoom(e)}}else this.setPosition()},ol.Overlay.Popup=function(t){var e=this,i=$("<div>");this.element=t.element=i.get(0),this.offsetBox=t.offsetBox,$("<div>").addClass("anchor").appendTo(i);var n=$("<div>").addClass("ol-overlaycontainer-stopevent").appendTo(i);this.content=$("<div>").addClass("content").appendTo(n).get(0),this.closeBox=t.closeBox,this.onclose=t.onclose,this.onshow=t.onshow,$("<button>").addClass("closeBox").addClass(t.closeBox?"hasclosebox":"").prependTo(n).click(function(){e.hide()}),t.stopEvent=!1,n.on("mousedown touchstart",function(t){t.stopPropagation()}),ol.Overlay.call(this,t),this.setPositioning(t.positioning),this.setPopupClass(t.popupClass)},ol.inherits(ol.Overlay.Popup,ol.Overlay),ol.Overlay.Popup.prototype.getClassPositioning=function(){var t="",e=this.getPositioning();return/bottom/.test(e)&&(t+="ol-popup-bottom "),/top/.test(e)&&(t+="ol-popup-top "),/left/.test(e)&&(t+="ol-popup-left "),/right/.test(e)&&(t+="ol-popup-right "),/^center/.test(e)&&(t+="ol-popup-middle "),/center$/.test(e)&&(t+="ol-popup-center "),t},ol.Overlay.Popup.prototype.setClosebox=function(t){this.closeBox=t,t?$(this.element).addClass("hasclosebox"):$(this.element).removeClass("hasclosebox")},ol.Overlay.Popup.prototype.setPopupClass=function(t){$(this.element).removeClass().addClass("ol-popup "+(t||"default")+" "+this.getClassPositioning()+(this.closeBox?" hasclosebox":""))},ol.Overlay.Popup.prototype.addPopupClass=function(t){$(this.element).addClass(t)},ol.Overlay.Popup.prototype.removePopupClass=function(t){$(this.element).removeClass(t)},ol.Overlay.Popup.prototype.setPositioning=function(t){void 0!==t&&(/auto/.test(t)?(this.autoPositioning=t.split("-"),1==this.autoPositioning.length&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,"center"==(t=t.replace(/auto/g,"center"))&&(t="bottom-center"),this.setPositioning_(t))},ol.Overlay.Popup.prototype.setPositioning_=function(t){ol.Overlay.prototype.setPositioning.call(this,t),$(this.element).removeClass("ol-popup-top ol-popup-bottom ol-popup-left ol-popup-right ol-popup-center ol-popup-middle"),$(this.element).addClass(this.getClassPositioning())},ol.Overlay.Popup.prototype.show=function(t,e){e||"string"!=typeof t||(e=t,t=null);var i=this,n=this.getMap();if(n&&(e&&e!==this.prevHTML&&(this.prevHTML=e,$(this.content).html("").append(e),$("*",this.content).load(function(){n.renderSync()})),t)){if(this.autoPositioning){var r=n.getPixelFromCoordinate(t),o=n.getSize(),s=[];"auto"==this.autoPositioning[0]?s[0]=r[1]<o[1]/3?"top":"bottom":s[0]=this.autoPositioning[0],s[1]=r[0]<2*o[0]/3?"left":"right",this.setPositioning_(s[0]+"-"+s[1]),this.offsetBox&&this.setOffset([this.offsetBox["left"==s[1]?2:0],this.offsetBox["top"==s[0]?3:1]])}this.setPosition(t),$(this.element).parent().show(),"function"==typeof this.onshow&&this.onshow(),this._tout=setTimeout(function(){$(i.element).addClass("visible")},0)}},ol.Overlay.Popup.prototype.hide=function(){void 0!=this.getPosition()&&("function"==typeof this.onclose&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),$(this.element).removeClass("visible"))},ol.style.FontSymbol=function(t){options=t||{};var e=0;options.stroke&&(e=options.stroke.getWidth()),ol.style.RegularShape.call(this,{radius:options.radius,fill:options.fill,rotation:options.rotation,rotateWithView:options.rotateWithView}),this.color_=options.color,this.fontSize_=options.fontSize||1,this.stroke_=options.stroke,this.fill_=options.fill,this.radius_=options.radius-e,this.form_=options.form||"none",this.gradient_=options.gradient,this.offset_=[options.offsetX?options.offsetX:0,options.offsetY?options.offsetY:0],this.glyph_=this.getGlyph(options.glyph)||"",this.renderMarker_()},ol.inherits(ol.style.FontSymbol,ol.style.RegularShape),ol.style.Image.prototype.getImagePNG=function(){var t=this.getImage();if(!t)return!1;try{return t.toDataURL("image/png")}catch(t){return!1}},ol.style.FontSymbol.prototype.defs={fonts:{},glyphs:{}},ol.style.FontSymbol.addDefs=function(t,e){var i=t;if("string"==typeof t&&(i={font:t,name:t,copyright:""}),i.font&&"string"==typeof i.font){var n=i.font;ol.style.FontSymbol.prototype.defs.fonts[n]=i;for(var r in e){var o=e[r];"string"==typeof o&&1==o.length&&(o={char:o}),ol.style.FontSymbol.prototype.defs.glyphs[r]={font:i.font,char:o.char||""+String.fromCharCode(o.code)||"",theme:o.theme||i.name,name:o.name||r,search:o.search||""}}}else console.log("bad font def")},ol.style.FontSymbol.prototype.getFill=function(){return this.fill_},ol.style.FontSymbol.prototype.getStroke=function(){return this.stroke_},ol.style.FontSymbol.prototype.getGlyph=function(t){return t?ol.style.FontSymbol.prototype.defs.glyphs[t]||{font:"none",char:t.charAt(0),theme:"none",name:"none",search:""}:this.glyph_},ol.style.FontSymbol.prototype.getFontInfo=function(t){return ol.style.FontSymbol.prototype.defs.fonts[t.font]},ol.style.FontSymbol.prototype.renderMarker_=function(t){var e,i=0;this.stroke_&&(e=ol.color.asString(this.stroke_.getColor()),i=this.stroke_.getWidth());var n=this.getImage(),r={strokeStyle:e,strokeWidth:i,size:n.width},o=n.getContext("2d");o.clearRect(0,0,n.width,n.height),this.drawMarker_(r,o,0,0);var s=this.getAnchor();s[0]=n.width/2-this.offset_[0],s[1]=n.width/2-this.offset_[1]},ol.style.FontSymbol.prototype.drawPath_=function(t,e){var i=2*this.radius_+t.strokeWidth+1,n=t.strokeWidth/2,r=t.size/2,o={fac:1,posX:t.size/2,posY:t.size/2};switch(e.lineJoin="round",e.beginPath(),this.form_){case"none":o.fac=1;break;case"circle":case"ban":e.arc(r,r,i/2,0,2*Math.PI,!0);break;case"poi":e.arc(r,r-.4*this.radius_,.6*this.radius_,.15*Math.PI,.85*Math.PI,!0),e.lineTo(r-.89*.05*i,(.95+.45*.05)*i+n),e.arc(r,.95*i+n,.05*i,.85*Math.PI,.15*Math.PI,!0),o={fac:.45,posX:r,posY:r-.35*this.radius_};break;case"bubble":e.arc(r,r-.2*this.radius_,.8*this.radius_,.4*Math.PI,.6*Math.PI,!0),e.lineTo(.5*i+n,i+n),o={fac:.7,posX:r,posY:r-.2*this.radius_};break;case"marker":e.arc(r,r-.2*this.radius_,.8*this.radius_,.25*Math.PI,.75*Math.PI,!0),e.lineTo(.5*i+n,i+n),o={fac:.7,posX:r,posY:r-.2*this.radius_};break;case"coma":e.moveTo(r+.8*this.radius_,r-.2*this.radius_),e.quadraticCurveTo(.95*i+n,.75*i+n,.5*i+n,i+n),e.arc(r,r-.2*this.radius_,.8*this.radius_,.45*Math.PI,0,!1),o={fac:.7,posX:r,posY:r-.2*this.radius_};break;default:var s;switch(this.form_){case"shield":s=[.05,0,.95,0,.95,.8,.5,1,.05,.8,.05,0],o.posY=.45*i+n;break;case"blazon":s=[.1,0,.9,0,.9,.8,.6,.8,.5,1,.4,.8,.1,.8,.1,0],o.fac=.8,o.posY=.4*i+n;break;case"bookmark":s=[.05,0,.95,0,.95,1,.5,.8,.05,1,.05,0],o.fac=.9,o.posY=.4*i+n;break;case"hexagon":s=[.05,.2,.5,0,.95,.2,.95,.8,.5,1,.05,.8,.05,.2],o.fac=.9,o.posY=.5*i+n;break;case"diamond":s=[.25,0,.75,0,1,.2,1,.4,.5,1,0,.4,0,.2,.25,0],o.fac=.75,o.posY=.35*i+n;break;case"triangle":s=[0,0,1,0,.5,1,0,0],o.fac=.6,o.posY=.3*i+n;break;case"sign":s=[.5,.05,1,.95,0,.95,.5,.05],o.fac=.7,o.posY=.65*i+n;break;case"lozenge":s=[.5,0,1,.5,.5,1,0,.5,.5,0],o.fac=.7;break;case"square":default:s=[0,0,1,0,1,1,0,1,0,0]}for(var a=0;a<s.length;a+=2)e.lineTo(s[a]*i+n,s[a+1]*i+n)}return e.closePath(),o},ol.style.FontSymbol.prototype.drawMarker_=function(t,e,i,n){var r=this.fill_?this.fill_.getColor():"#000",o=this.stroke_?this.stroke_.getColor():"#000";"none"==this.form_&&this.stroke_&&this.fill_&&(o=this.fill_.getColor(),r=this.stroke_.getColor()),e.setTransform(1,0,0,1,0,0),e.translate(i,n);var s=this.drawPath_(t,e);if(this.fill_){if(this.gradient_&&"none"!=this.form_){var a=e.createLinearGradient(0,0,t.size/2,t.size);a.addColorStop(1,ol.color.asString(r)),a.addColorStop(0,ol.color.asString(o)),e.fillStyle=a}else e.fillStyle=ol.color.asString(r);e.fill()}if(this.stroke_&&t.strokeWidth&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.stroke()),this.glyph_.char){e.font=2*s.fac*this.radius_*this.fontSize_+"px "+this.glyph_.font,e.strokeStyle=e.fillStyle,e.lineWidth=t.strokeWidth*("none"==this.form_?2:1),e.fillStyle=ol.color.asString(this.color_||o),e.textAlign="center",e.textBaseline="middle";var l=this.glyph_.char;t.strokeWidth&&"transparent"!=o&&e.strokeText(l,s.posX,s.posY),e.fillText(l,s.posX,s.posY)}if("ban"==this.form_&&this.stroke_&&t.strokeWidth){e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth;var h=this.radius_+t.strokeWidth,c=this.radius_*Math.cos(Math.PI/4);e.moveTo(h+c,h-c),e.lineTo(h-c,h+c),e.stroke()}},ol.style.FontSymbol.prototype.getChecksum=function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-",e=null!==this.fill_?this.fill_.getChecksum():"-";if(null===this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.form_+"-"+this.glyphs_!=this.checksums_[4]){var i="c"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+this.form_+"-"+this.glyphs_;this.checksums_=[i,t,e,this.radius_,this.form_+"-"+this.glyphs_]}return this.checksums_[0]},ol.style.Chart=function(t){options=t||{};var e=0;t.stroke&&(e=t.stroke.getWidth()),ol.style.RegularShape.call(this,{radius:options.radius+e,fill:new ol.style.Fill({color:[0,0,0]}),rotation:options.rotation,snapToPixel:options.snapToPixel}),options.scale&&this.setScale(options.scale),this.stroke_=options.stroke,this.radius_=options.radius||20,this.donutratio_=options.donutRatio||.5,this.type_=options.type,this.offset_=[options.offsetX?options.offsetX:0,options.offsetY?options.offsetY:0],this.animation_="number"==typeof options.animation?{animate:!0,step:options.animation}:this.animation_={animate:!1,step:1},this.data_=options.data,options.colors instanceof Array?this.colors_=options.colors:(this.colors_=ol.style.Chart.colors[options.colors],this.colors_||(this.colors_=ol.style.Chart.colors.classic)),this.renderChart_()},ol.inherits(ol.style.Chart,ol.style.RegularShape),ol.style.Chart.colors={classic:["#ffa500","blue","red","green","cyan","magenta","yellow","#0f0"],dark:["#960","#003","#900","#060","#099","#909","#990","#090"],pale:["#fd0","#369","#f64","#3b7","#880","#b5d","#666"],pastel:["#fb4","#79c","#f66","#7d7","#acc","#fdd","#ff9","#b9b"],neon:["#ff0","#0ff","#0f0","#f0f","#f00","#00f"]},ol.style.Chart.prototype.getData=function(){return this.data_},ol.style.Chart.prototype.setData=function(t){this.data_=t,this.renderChart_()},ol.style.Chart.prototype.getRadius=function(){return this.radius_},ol.style.Chart.prototype.setRadius=function(t,e){this.radius_=t,this.donuratio_=e||this.donuratio_,this.renderChart_()},ol.style.Chart.prototype.setAnimation=function(t){if(!1===t){if(0==this.animation_.animate)return;this.animation_.animate=!1}else{if(this.animation_.step==t)return;this.animation_.animate=!0,this.animation_.step=t}this.renderChart_()},ol.style.Chart.prototype.renderChart_=function(t){var e,i=0;this.stroke_&&(e=ol.color.asString(this.stroke_.getColor()),i=this.stroke_.getWidth());var n=this.getImage(),r=n.getContext("2d");r.clearRect(0,0,n.width,n.height),r.lineJoin="round";for(var o=0,s=0;s<this.data_.length;s++)o+=this.data_[s];r.setTransform(1,0,0,1,0,0),r.translate(0,0);var a=this.animation_.animate?this.animation_.step:1;switch(this.type_){case"donut":case"pie3D":case"pie":var l,h=Math.PI*(a-1.5),c=n.width/2;r.strokeStyle=e,r.lineWidth=i,r.save(),"pie3D"==this.type_&&(r.translate(0,.3*c),r.scale(1,.7),r.beginPath(),r.fillStyle="#369",r.arc(c,1.4*c,this.radius_*a,0,2*Math.PI),r.fill(),r.stroke()),"donut"==this.type_&&(r.save(),r.beginPath(),r.rect(0,0,2*c,2*c),r.arc(c,c,this.radius_*a*this.donutratio_,0,2*Math.PI),r.clip("evenodd"));for(s=0;s<this.data_.length;s++)r.beginPath(),r.moveTo(c,c),r.fillStyle=this.colors_[s%this.colors_.length],l=h+2*Math.PI*this.data_[s]/o*a,r.arc(c,c,this.radius_*a,h,l),r.closePath(),r.fill(),r.stroke(),h=l;"donut"==this.type_&&(r.restore(),r.beginPath(),r.strokeStyle=e,r.lineWidth=i,r.arc(c,c,this.radius_*a*this.donutratio_,Math.PI*(a-1.5),h),r.stroke()),r.restore();break;case"bar":default:for(var u=0,s=0;s<this.data_.length;s++)u<this.data_[s]&&(u=this.data_[s]);var f,g=Math.min(5,2*this.radius_/this.data_.length),c=n.width/2,d=n.width-i,p=c-this.data_.length*g/2;r.strokeStyle=e,r.lineWidth=i;for(s=0;s<this.data_.length;s++){r.beginPath(),r.fillStyle=this.colors_[s%this.colors_.length],f=p+g;var m=this.data_[s]/u*2*this.radius_*a;r.rect(p,d-m,g,m),r.closePath(),r.fill(),r.stroke(),p=f}}(l=this.getAnchor())[0]=c-this.offset_[0],l[1]=c-this.offset_[1]},ol.style.Chart.prototype.getChecksum=function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-";if(null===this.checksums_||t!=this.checksums_[1]||fillChecksum!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.data_.join("|")!=this.checksums_[4]){var e="c"+t+fillChecksum+(void 0!==this.radius_?this.radius_.toString():"-")+this.data_.join("|");this.checksums_=[e,t,fillChecksum,this.radius_,this.data_.join("|")]}return this.checksums_[0]},ol.style.FillPattern=function(t){t||(t={});var e,i=this.canvas_=document.createElement("canvas"),n=(Number(t.scale)>0?Number(t.scale):1)*ol.has.DEVICE_PIXEL_RATIO||ol.has.DEVICE_PIXEL_RATIO,r=i.getContext("2d");if(t.image){t.image.load();var o=t.image.getImage();if(o.width)i.width=Math.round(o.width*n),i.height=Math.round(o.height*n),r.globalAlpha="number"==typeof t.opacity?t.opacity:1,r.drawImage(o,0,0,o.width,o.height,0,0,i.width,i.height),e=r.createPattern(i,"repeat");else{var s=this;e=[0,0,0,0],o.onload=function(){i.width=Math.round(o.width*n),i.height=Math.round(o.height*n),r.globalAlpha="number"==typeof t.opacity?t.opacity:1,r.drawImage(o,0,0,o.width,o.height,0,0,i.width,i.height),e=r.createPattern(i,"repeat"),s.setColor(e)}}}else{var a=this.getPattern_(t);if(i.width=Math.round(a.width*n),i.height=Math.round(a.height*n),r.beginPath(),t.fill&&(r.fillStyle=ol.color.asString(t.fill.getColor()),r.fillRect(0,0,i.width,i.height)),r.scale(n,n),r.lineCap="round",r.lineWidth=a.stroke||1,r.fillStyle=ol.color.asString(t.color||"#000"),r.strokeStyle=ol.color.asString(t.color||"#000"),a.circles)for(h=0;h<a.circles.length;h++){var l=a.circles[h];r.beginPath(),r.arc(l[0],l[1],l[2],0,2*Math.PI),a.fill&&r.fill(),a.stroke&&r.stroke()}if(a.repeat||(a.repeat=[[0,0]]),a.char&&(r.font=a.font||a.width+"px Arial",r.textAlign="center",r.textBaseline="middle",a.angle?(r.fillText(a.char,a.width/4,a.height/4),r.fillText(a.char,5*a.width/4,5*a.height/4),r.fillText(a.char,a.width/4,5*a.height/4),r.fillText(a.char,5*a.width/4,a.height/4),r.fillText(a.char,3*a.width/4,3*a.height/4),r.fillText(a.char,-a.width/4,-a.height/4),r.fillText(a.char,3*a.width/4,-a.height/4),r.fillText(a.char,-a.width/4,3*a.height/4)):r.fillText(a.char,a.width/2,a.height/2)),a.lines)for(var h=0;h<a.lines.length;h++)for(var c=0;c<a.repeat.length;c++){var u=a.lines[h];r.beginPath(),r.moveTo(u[0]+a.repeat[c][0],u[1]+a.repeat[c][1]);for(var f=2;f<u.length;f+=2)r.lineTo(u[f]+a.repeat[c][0],u[f+1]+a.repeat[c][1]);a.fill&&r.fill(),a.stroke&&r.stroke(),r.save(),r.strokeStyle="red",r.strokeWidth=.1,r.restore()}if(e=r.createPattern(i,"repeat"),t.offset){var g=t.offset;if("number"==typeof g&&(g=[g,g]),g instanceof Array){var d=Math.round(g[0]*n),p=Math.round(g[1]*n);r.scale(1/n,1/n),r.clearRect(0,0,i.width,i.height),r.translate(d,p),r.fillStyle=e,r.fillRect(-d,-p,i.width,i.height),e=r.createPattern(i,"repeat")}}}ol.style.Fill.call(this,{color:e})},ol.inherits(ol.style.FillPattern,ol.style.Fill),ol.style.FillPattern.prototype.getImage=function(){return this.canvas_},ol.style.FillPattern.prototype.getPattern_=function(t){var e=ol.style.FillPattern.prototype.patterns[t.pattern]||ol.style.FillPattern.prototype.patterns.dot,i=Math.round(t.spacing)||10;Math.round(i/2);switch(t.pattern){case"dot":case"circle":n=0===t.size?0:t.size/2||2;t.angle?(i=e.width=e.height=Math.round(1.4*i),e.circles=[[i/4,i/4,n],[3*i/4,3*i/4,n]],"circle"==t.pattern&&(e.circles=e.circles.concat([[i/4+i,i/4,n],[i/4,i/4+i,n],[3*i/4-i,3*i/4,n],[3*i/4,3*i/4-i,n],[i/4+i,i/4+i,n],[3*i/4-i,3*i/4-i,n]]))):(e.width=e.height=i,e.circles=[[i/2,i/2,n]],"circle"==t.pattern&&(e.circles=e.circles.concat([[i/2+i,i/2,n],[i/2-i,i/2,n],[i/2,i/2+i,n],[i/2,i/2-i,n],[i/2+i,i/2+i,n],[i/2+i,i/2-i,n],[i/2-i,i/2+i,n],[i/2-i,i/2-i,n]])));break;case"tile":case"square":var n=0===t.size?0:t.size/2||2;t.angle?(e.width=e.height=i,e.lines=[[i/2-n,i/2,i/2,i/2-n,i/2+n,i/2,i/2,i/2+n,i/2-n,i/2]]):(e.width=e.height=i,e.lines=[[i/2-n,i/2-n,i/2+n,i/2-n,i/2+n,i/2+n,i/2-n,i/2+n,i/2-n,i/2-n]]),"square"==t.pattern&&(e.repeat=[[0,0],[0,i],[i,0],[0,-i],[-i,0],[-i,-i],[i,i],[-i,i],[i,-i]]);break;case"cross":t.angle&&(t.angle=45);case"hatch":var r=Math.round(((t.angle||0)-90)%360);r>180&&(r-=360),r*=Math.PI/180;var o=Math.cos(r),s=Math.sin(r);if(Math.abs(s)<1e-4)e.width=e.height=i,e.lines=[[0,.5,i,.5]],e.repeat=[[0,0],[0,i]];else if(Math.abs(o)<1e-4)e.width=e.height=i,e.lines=[[.5,0,.5,i]],e.repeat=[[0,0],[i,0]],"cross"==t.pattern&&(e.lines.push([0,.5,i,.5]),e.repeat.push([0,i]));else{var a=e.width=Math.round(Math.abs(i/s))||1,l=e.height=Math.round(Math.abs(i/o))||1;"cross"==t.pattern?(e.lines=[[-a,-l,2*a,2*l],[2*a,-l,-a,2*l]],e.repeat=[[0,0]]):o*s>0?(e.lines=[[-a,-l,2*a,2*l]],e.repeat=[[0,0],[a,0],[0,l]]):(e.lines=[[2*a,-l,-a,2*l]],e.repeat=[[0,0],[-a,0],[0,l]])}e.stroke=0===t.size?0:t.size||4}return e},ol.style.FillPattern.addPattern=function(t,e){e||(e={}),ol.style.FillPattern.prototype.patterns[t||e.char]={width:e.width||e.size||10,height:e.height||e.size||10,font:e.font,char:e.char,circles:e.circles,lines:e.lines,repeat:e.repeat,stroke:e.stroke,angle:e.angle,fill:e.fill}},ol.style.FillPattern.prototype.patterns={hatch:{width:5,height:5,lines:[[0,2.5,5,2.5]],stroke:1},cross:{width:7,height:7,lines:[[0,3,10,3],[3,0,3,10]],stroke:1},dot:{width:8,height:8,circles:[[5,5,2]],stroke:!1,fill:!0},circle:{width:10,height:10,circles:[[5,5,2]],stroke:1,fill:!1},square:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],stroke:1,fill:!1},tile:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],fill:!0},woven:{width:12,height:12,lines:[[3,3,9,9],[0,12,3,9],[9,3,12,0],[-1,1,1,-1],[13,11,11,13]],stroke:1},crosses:{width:8,height:8,lines:[[2,2,6,6],[2,6,6,2]],stroke:1},caps:{width:8,height:8,lines:[[2,6,4,2,6,6]],stroke:1},nylon:{width:20,height:20,lines:[[1,6,1,1,6,1],[6,11,11,11,11,6],[11,16,11,21,16,21],[16,11,21,11,21,16]],repeat:[[0,0],[-20,0],[0,-20]],stroke:1},hexagon:{width:20,height:12,lines:[[0,10,4,4,10,4,14,10,10,16,4,16,0,10]],stroke:1,repeat:[[0,0],[10,6],[10,-6],[-10,-6]]},cemetry:{width:15,height:19,lines:[[0,3.5,7,3.5],[3.5,0,3.5,10]],stroke:1,repeat:[[0,0],[7,9]]},sand:{width:20,height:20,circles:[[1,2,1],[9,3,1],[2,16,1],[7,8,1],[6,14,1],[4,19,1],[14,2,1],[12,10,1],[14,18,1],[18,8,1],[18,14,1]],fill:1},conglomerate:{width:30,height:20,circles:[[2,4,1],[17,3,1],[26,18,1],[12,17,1],[5,17,2],[28,11,2]],lines:[[7,5,6,7,9,9,11,8,11,6,9,5,7,5],[16,10,15,13,16,14,19,15,21,13,22,9,20,8,19,8,16,10],[24,6,26,7,27,5,26,4,24,4,24,6]],stroke:1},gravel:{width:15,height:10,circles:[[4,2,1],[5,9,1],[1,7,1]],lines:[[7,5,6,6,7,7,8,7,9,7,10,5,9,4,7,5],[11,2,14,4,14,1,12,1,11,2]],stroke:1},brick:{width:18,height:16,lines:[[0,1,18,1],[0,10,18,10],[6,1,6,10],[12,10,12,18],[12,0,12,1]],stroke:1},dolomite:{width:20,height:16,lines:[[0,1,20,1],[0,9,20,9],[1,9,6,1],[11,9,14,16],[14,0,14.4,1]],stroke:1},coal:{width:20,height:16,lines:[[1,5,7,1,7,7],[11,10,12,5,18,9],[5,10,2,15,9,15],[15,16,15,13,20,16],[15,0,15,2,20,0]],fill:1},breccia:{width:20,height:16,lines:[[1,5,7,1,7,7,1,5],[11,10,12,5,18,9,11,10],[5,10,2,15,9,15,5,10],[15,16,15,13,22,18],[15,0,15,2,20,0]],stroke:1},clay:{width:20,height:20,lines:[[0,0,3,11,0,20],[11,0,10,3,13,13,11,20],[0,0,10,3,20,0],[0,12,3,11,13,13,20,12]],stroke:1},flooded:{width:15,height:10,lines:[[0,1,10,1],[0,6,5,6],[10,6,15,6]],stroke:1},chaos:{width:40,height:40,lines:[[40,2,40,0,38,0,40,2],[4,0,3,2,2,5,0,0,0,3,2,7,5,6,7,7,8,10,9,12,9,13,9,14,8,14,6,15,2,15,0,20,0,22,2,20,5,19,8,15,10,14,11,12.25,10,12,10,10,12,9,13,7,12,6,13,4,16,7,17,4,20,0,18,0,15,3,14,2,14,0,12,1,11,0,10,1,11,4,10,7,9,8,8,5,6,4,5,3,5,1,5,0,4,0],[7,1,7,3,8,3,8,2,7,1],[4,3,5,5,4,5,4,3],[34,5,33,7,38,10,38,8,36,5,34,5],[27,0,23,2,21,8,30,0,27,0],[25,8,26,12,26,16,22.71875,15.375,20,13,18,15,17,18,13,22,17,21,19,22,21,20,19,18,22,17,30,25,26,26,24,28,21.75,33.34375,20,36,18,40,20,40,24,37,25,32,27,31,26,38,27,37,30,32,32,35,36,37,38,40,38,39,40,40,37,36,34,32,37,31,36,29,33,27,34,24,39,21,40,21,40,16,37,20,31,22,32,25,27,20,29,15,30,20,32,20,34,18,33,12,31,11,29,14,26,9,25,8],[39,24,37,26,40,28,39,24],[13,15,9,19,14,18,13,15],[18,23,14,27,16,27,17,25,20,26,18,23],[6,24,2,26,1,28,2,30,5,28,12,30,16,32,18,30,15,30,12,28,9,25,7,27,6,24],[29,27,32,28,33,31,30,29,27,28,29,27],[5,35,1,33,3,36,13,38,15,35,10,36,5,35]],fill:1},grass:{width:27,height:22,lines:[[0,10.5,13,10.5],[2.5,10,1.5,7],[4.5,10,4.5,5,3.5,4],[7,10,7.5,6,8.5,3],[10,10,11,6]],repeat:[[0,0],[14,10]],stroke:1},swamp:{width:24,height:23,lines:[[0,10.5,9.5,10.5],[2.5,10,2.5,7],[4.5,10,4.5,4],[6.5,10,6.5,6],[3,12.5,7,12.5]],repeat:[[0,0],[14,10]],stroke:1},wave:{width:10,height:8,lines:[[0,0,5,4,10,0]],stroke:1},vine:{width:13,height:13,lines:[[3,0,3,6],[9,7,9,13]],stroke:1},forest:{width:55,height:30,circles:[[7,7,3.5],[20,20,1.5],[42,22,3.5],[35,5,1.5]],stroke:1},scrub:{width:26,height:20,lines:[[1,4,4,8,6,4]],circles:[[20,13,1.5]],stroke:1},tree:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78]],repeat:[[3,1],[18,16]],stroke:1},pine:{width:30,height:30,lines:[[5.66,11.31,2.83,11.31,2.83,8.49,0,8.49,2.83,0,5.66,8.49,2.83,8.49]],repeat:[[3,1],[18,16]],stroke:1},pines:{width:22,height:20,lines:[[1,4,3.5,1,6,4],[1,8,3.5,5,6,8],[3.5,1,3.5,11],[12,14.5,14.5,14,17,14.5],[12,18,17,18],[14.5,12,14.5,18]],repeat:[[2,1]],stroke:1},rock:{width:20,height:20,lines:[[1,0,1,9],[4,0,4,9],[7,0,7,9],[10,1,19,1],[10,4,19,4],[10,7,19,7],[0,11,9,11],[0,14,9,14],[0,17,9,17],[12,10,12,19],[15,10,15,19],[18,10,18,19]],repeat:[[.5,.5]],stroke:1},rocks:{width:20,height:20,lines:[[5,0,3,0,5,4,4,6,0,3,0,5,3,6,5,9,3.75,10,2.5,10,0,9,0,10,4,11,5,14,4,15,0,13,0,13,0,13,0,14,0,14,5,16,5,18,3,19,0,19,-.25,19.9375,5,20,10,19,10,20,11,20,12,19,14,20,15,20,17,19,20,20,20,19,19,16,20,15,20,11,20,10,19,8,20,5,20,0,19,0,20,2,19,4,17,4,16,3,15,0,14,0,15,4,11,5,10,4,11,0,10,0,9,4,6,5,5,0],[18,5,19,6,18,10,16,10,14,9,16,5,18,5],[5,6,9,5,10,6,10,9,6,10,5,6],[14,5,14,8,13,9,12,9,11,7,12,5,14,5],[5,11,8,10,9,11,10,14,6,15,6,15,5,11],[13,10,14,11,15,14,15,14,15,14,11,15,10,11,11,10,13,10],[15,12,16,11,19,11,19,15,16,14,16,14,15,12],[6,16,9,15,10,18,5,19,6,16],[10,16,14,16,14,18,13,19,11,18,10,16],[15,15,18,16,18,18,16,19,15,18,15,15]],stroke:1}},ol.style.FontSymbol.addDefs({font:"FontAwesome",name:"FontAwesome",copyright:"SIL OFL 1.1",prefix:"fa"},{"fa-glass":"","fa-music":"","fa-search":"","fa-envelope-o":"","fa-heart":"","fa-star":"","fa-star-o":"","fa-user":"","fa-film":"","fa-th-large":"","fa-th":"","fa-th-list":"","fa-check":"","fa-remove":"","fa-close":"","fa-times":"","fa-search-plus":"","fa-search-minus":"","fa-power-off":"","fa-signal":"","fa-gear":"","fa-cog":"","fa-trash-o":"","fa-home":"","fa-file-o":"","fa-clock-o":"","fa-road":"","fa-download":"","fa-arrow-circle-o-down":"","fa-arrow-circle-o-up":"","fa-inbox":"","fa-play-circle-o":"","fa-rotate-right":"","fa-repeat":"","fa-refresh":"","fa-list-alt":"","fa-lock":"","fa-flag":"","fa-headphones":"","fa-volume-off":"","fa-volume-down":"","fa-volume-up":"","fa-qrcode":"","fa-barcode":"","fa-tag":"","fa-tags":"","fa-book":"","fa-bookmark":"","fa-print":"","fa-camera":"","fa-font":"","fa-bold":"","fa-italic":"","fa-text-height":"","fa-text-width":"","fa-align-left":"","fa-align-center":"","fa-align-right":"","fa-align-justify":"","fa-list":"","fa-dedent":"","fa-outdent":"","fa-indent":"","fa-video-camera":"","fa-photo":"","fa-image":"","fa-picture-o":"","fa-pencil":"","fa-map-marker":"","fa-adjust":"","fa-tint":"","fa-edit":"","fa-pencil-square-o":"","fa-share-square-o":"","fa-check-square-o":"","fa-arrows":"","fa-step-backward":"","fa-fast-backward":"","fa-backward":"","fa-play":"","fa-pause":"","fa-stop":"","fa-forward":"","fa-fast-forward":"","fa-step-forward":"","fa-eject":"","fa-chevron-left":"","fa-chevron-right":"","fa-plus-circle":"","fa-minus-circle":"","fa-times-circle":"","fa-check-circle":"","fa-question-circle":"","fa-info-circle":"","fa-crosshairs":"","fa-times-circle-o":"","fa-check-circle-o":"","fa-ban":"","fa-arrow-left":"","fa-arrow-right":"","fa-arrow-up":"","fa-arrow-down":"","fa-mail-forward":"","fa-share":"","fa-expand":"","fa-compress":"","fa-plus":"","fa-minus":"","fa-asterisk":"","fa-exclamation-circle":"","fa-gift":"","fa-leaf":"","fa-fire":"","fa-eye":"","fa-eye-slash":"","fa-warning":"","fa-exclamation-triangle":"","fa-plane":"","fa-calendar":"","fa-random":"","fa-comment":"","fa-magnet":"","fa-chevron-up":"","fa-chevron-down":"","fa-retweet":"","fa-shopping-cart":"","fa-folder":"","fa-folder-open":"","fa-arrows-v":"","fa-arrows-h":"","fa-bar-t-o":"","fa-bar-t":"","fa-twitter-square":"","fa-facebook-square":"","fa-camera-retro":"","fa-key":"","fa-gears":"","fa-cogs":"","fa-comments":"","fa-thumbs-o-up":"","fa-thumbs-o-down":"","fa-star-half":"","fa-heart-o":"","fa-sign-out":"","fa-linkedin-square":"","fa-thumb-tack":"","fa-external-link":"","fa-sign-in":"","fa-trophy":"","fa-github-square":"","fa-upload":"","fa-lemon-o":"","fa-phone":"","fa-square-o":"","fa-bookmark-o":"","fa-phone-square":"","fa-twitter":"","fa-facebook-f":"","fa-facebook":"","fa-github":"","fa-unlock":"","fa-credit-card":"","fa-feed":"","fa-rss":"","fa-hdd-o":"","fa-bullhorn":"","fa-bell":"","fa-certificate":"","fa-hand-o-right":"","fa-hand-o-left":"","fa-hand-o-up":"","fa-hand-o-down":"","fa-arrow-circle-left":"","fa-arrow-circle-right":"","fa-arrow-circle-up":"","fa-arrow-circle-down":"","fa-globe":"","fa-wrench":"","fa-tasks":"","fa-filter":"","fa-briefcase":"","fa-arrows-alt":"","fa-group":"","fa-users":"","fa-chain":"","fa-link":"","fa-cloud":"","fa-flask":"","fa-cut":"","fa-scissors":"","fa-copy":"","fa-files-o":"","fa-paperclip":"","fa-save":"","fa-floppy-o":"","fa-square":"","fa-navicon":"","fa-reorder":"","fa-bars":"","fa-list-ul":"","fa-list-ol":"","fa-strikethrough":"","fa-underline":"","fa-table":"","fa-magic":"","fa-truck":"","fa-pinterest":"","fa-pinterest-square":"","fa-google-plus-square":"","fa-google-plus":"","fa-money":"","fa-caret-down":"","fa-caret-up":"","fa-caret-left":"","fa-caret-right":"","fa-columns":"","fa-unsorted":"","fa-sort":"","fa-sort-down":"","fa-sort-desc":"","fa-sort-up":"","fa-sort-asc":"","fa-envelope":"","fa-linkedin":"","fa-rotate-left":"","fa-undo":"","fa-legal":"","fa-gavel":"","fa-dashboard":"","fa-tachometer":"","fa-comment-o":"","fa-comments-o":"","fa-flash":"","fa-bolt":"","fa-sitemap":"","fa-umbrella":"","fa-paste":"","fa-clipboard":"","fa-lightbulb-o":"","fa-exchange":"","fa-cloud-download":"","fa-cloud-upload":"","fa-user-md":"","fa-stethoscope":"","fa-suitcase":"","fa-bell-o":"","fa-coffee":"","fa-cutlery":"","fa-file-text-o":"","fa-building-o":"","fa-hospital-o":"","fa-ambulance":"","fa-medkit":"","fa-fighter-jet":"","fa-beer":"","fa-h-square":"","fa-plus-square":"","fa-angle-double-left":"","fa-angle-double-right":"","fa-angle-double-up":"","fa-angle-double-down":"","fa-angle-left":"","fa-angle-right":"","fa-angle-up":"","fa-angle-down":"","fa-desktop":"","fa-laptop":"","fa-tablet":"","fa-mobile-phone":"","fa-mobile":"","fa-circle-o":"","fa-quote-left":"","fa-quote-right":"","fa-spinner":"","fa-circle":"","fa-mail-reply":"","fa-reply":"","fa-github-alt":"","fa-folder-o":"","fa-folder-open-o":"","fa-smile-o":"","fa-frown-o":"","fa-meh-o":"","fa-gamepad":"","fa-keyboard-o":"","fa-flag-o":"","fa-flag-checkered":"","fa-terminal":"","fa-code":"","fa-mail-reply-all":"","fa-reply-all":"","fa-star-half-empty":"","fa-star-half-full":"","fa-star-half-o":"","fa-location-arrow":"","fa-crop":"","fa-code-fork":"","fa-unlink":"","fa-chain-broken":"","fa-question":"","fa-info":"","fa-exclamation":"","fa-superscript":"","fa-subscript":"","fa-eraser":"","fa-puzzle-piece":"","fa-microphone":"","fa-microphone-slash":"","fa-shield":"","fa-calendar-o":"","fa-fire-extinguisher":"","fa-rocket":"","fa-maxcdn":"","fa-chevron-circle-left":"","fa-chevron-circle-right":"","fa-chevron-circle-up":"","fa-chevron-circle-down":"","fa-html5":"","fa-css3":"","fa-anchor":"","fa-unlock-alt":"","fa-bullseye":"","fa-ellipsis-h":"","fa-ellipsis-v":"","fa-rss-square":"","fa-play-circle":"","fa-ticket":"","fa-minus-square":"","fa-minus-square-o":"","fa-level-up":"","fa-level-down":"","fa-check-square":"","fa-pencil-square":"","fa-external-link-square":"","fa-share-square":"","fa-compass":"","fa-toggle-down":"","fa-caret-square-o-down":"","fa-toggle-up":"","fa-caret-square-o-up":"","fa-toggle-right":"","fa-caret-square-o-right":"","fa-euro":"","fa-eur":"","fa-gbp":"","fa-dollar":"","fa-usd":"","fa-rupee":"","fa-inr":"","fa-cny":"","fa-rmb":"","fa-yen":"","fa-jpy":"","fa-ruble":"","fa-rouble":"","fa-rub":"","fa-won":"","fa-krw":"","fa-bitcoin":"","fa-btc":"","fa-file":"","fa-file-text":"","fa-sort-alpha-asc":"","fa-sort-alpha-desc":"","fa-sort-amount-asc":"","fa-sort-amount-desc":"","fa-sort-numeric-asc":"","fa-sort-numeric-desc":"","fa-thumbs-up":"","fa-thumbs-down":"","fa-youtube-square":"","fa-youtube":"","fa-xing":"","fa-xing-square":"","fa-youtube-play":"","fa-dropbox":"","fa-stack-overflow":"","fa-instagram":"","fa-flickr":"","fa-adn":"","fa-bitbucket":"","fa-bitbucket-square":"","fa-tumblr":"","fa-tumblr-square":"","fa-long-arrow-down":"","fa-long-arrow-up":"","fa-long-arrow-left":"","fa-long-arrow-right":"","fa-apple":"","fa-windows":"","fa-android":"","fa-linux":"","fa-dribbble":"","fa-skype":"","fa-foursquare":"","fa-trello":"","fa-female":"","fa-male":"","fa-gittip":"","fa-gratipay":"","fa-sun-o":"","fa-moon-o":"","fa-archive":"","fa-bug":"","fa-vk":"","fa-weibo":"","fa-renren":"","fa-pagelines":"","fa-stack-exchange":"","fa-arrow-circle-o-right":"","fa-arrow-circle-o-left":"","fa-toggle-left":"","fa-caret-square-o-left":"","fa-dot-circle-o":"","fa-wheelchair":"","fa-vimeo-square":"","fa-turkish-lira":"","fa-try":"","fa-plus-square-o":"","fa-space-shuttle":"","fa-slack":"","fa-envelope-square":"","fa-wordpress":"","fa-openid":"","fa-institution":"","fa-bank":"","fa-university":"","fa-mortar-board":"","fa-graduation-cap":"","fa-yahoo":"","fa-google":"","fa-reddit":"","fa-reddit-square":"","fa-stumbleupon-circle":"","fa-stumbleupon":"","fa-delicious":"","fa-digg":"","fa-pied-piper":"","fa-pied-piper-alt":"","fa-drupal":"","fa-joomla":"","fa-language":"","fa-fax":"","fa-building":"","fa-child":"","fa-paw":"","fa-spoon":"","fa-cube":"","fa-cubes":"","fa-behance":"","fa-behance-square":"","fa-steam":"","fa-steam-square":"","fa-recycle":"","fa-automobile":"","fa-car":"","fa-cab":"","fa-taxi":"","fa-tree":"","fa-spotify":"","fa-deviantart":"","fa-soundcloud":"","fa-database":"","fa-file-pdf-o":"","fa-file-word-o":"","fa-file-excel-o":"","fa-file-powerpoint-o":"","fa-file-photo-o":"","fa-file-picture-o":"","fa-file-image-o":"","fa-file-zip-o":"","fa-file-archive-o":"","fa-file-sound-o":"","fa-file-audio-o":"","fa-file-movie-o":"","fa-file-video-o":"","fa-file-code-o":"","fa-vine":"","fa-codepen":"","fa-jsfiddle":"","fa-life-bouy":"","fa-life-buoy":"","fa-life-saver":"","fa-support":"","fa-life-ring":"","fa-circle-o-notch":"","fa-ra":"","fa-rebel":"","fa-ge":"","fa-empire":"","fa-git-square":"","fa-git":"","fa-y-combinator-square":"","fa-yc-square":"","fa-hacker-news":"","fa-tencent-weibo":"","fa-qq":"","fa-wechat":"","fa-weixin":"","fa-send":"","fa-paper-plane":"","fa-send-o":"","fa-paper-plane-o":"","fa-history":"","fa-circle-thin":"","fa-header":"","fa-paragraph":"","fa-sliders":"","fa-share-alt":"","fa-share-alt-square":"","fa-bomb":"","fa-soccer-ball-o":"","fa-futbol-o":"","fa-tty":"","fa-binoculars":"","fa-plug":"","fa-slideshare":"","fa-twitch":"","fa-yelp":"","fa-newspaper-o":"","fa-wifi":"","fa-calculator":"","fa-paypal":"","fa-google-wallet":"","fa-cc-visa":"","fa-cc-mastercard":"","fa-cc-discover":"","fa-cc-amex":"","fa-cc-paypal":"","fa-cc-stripe":"","fa-bell-slash":"","fa-bell-slash-o":"","fa-trash":"","fa-copyright":"","fa-at":"","fa-eyedropper":"","fa-paint-brush":"","fa-birthday-cake":"","fa-area-t":"","fa-pie-t":"","fa-line-t":"","fa-lastfm":"","fa-lastfm-square":"","fa-toggle-off":"","fa-toggle-on":"","fa-bicycle":"","fa-bus":"","fa-ioxhost":"","fa-angellist":"","fa-cc":"","fa-shekel":"","fa-sheqel":"","fa-ils":"","fa-meanpath":"","fa-buysellads":"","fa-connectdevelop":"","fa-dashcube":"","fa-forumbee":"","fa-leanpub":"","fa-sellsy":"","fa-shirtsinbulk":"","fa-simplybuilt":"","fa-skyatlas":"","fa-cart-plus":"","fa-cart-arrow-down":"","fa-diamond":"","fa-ship":"","fa-user-secret":"","fa-motorcycle":"","fa-street-view":"","fa-heartbeat":"","fa-venus":"","fa-mars":"","fa-mercury":"","fa-intersex":"","fa-transgender":"","fa-transgender-alt":"","fa-venus-double":"","fa-mars-double":"","fa-venus-mars":"","fa-mars-stroke":"","fa-mars-stroke-v":"","fa-mars-stroke-h":"","fa-neuter":"","fa-genderless":"","fa-facebook-official":"","fa-pinterest-p":"","fa-whatsapp":"","fa-server":"","fa-user-plus":"","fa-user-times":"","fa-hotel":"","fa-bed":"","fa-viacoin":"","fa-train":"","fa-subway":"","fa-medium":"","fa-yc":"","fa-y-combinator":"","fa-optin-monster":"","fa-opencart":"","fa-expeditedssl":"","fa-battery-4":"","fa-battery-full":"","fa-battery-3":"","fa-battery-three-quarters":"","fa-battery-2":"","fa-battery-half":"","fa-battery-1":"","fa-battery-quarter":"","fa-battery-0":"","fa-battery-empty":"","fa-mouse-pointer":"","fa-i-cursor":"","fa-object-group":"","fa-object-ungroup":"","fa-sticky-note":"","fa-sticky-note-o":"","fa-cc-jcb":"","fa-cc-diners-club":"","fa-clone":"","fa-balance-scale":"","fa-hourglass-o":"","fa-hourglass-1":"","fa-hourglass-start":"","fa-hourglass-2":"","fa-hourglass-half":"","fa-hourglass-3":"","fa-hourglass-end":"","fa-hourglass":"","fa-hand-grab-o":"","fa-hand-rock-o":"","fa-hand-stop-o":"","fa-hand-paper-o":"","fa-hand-scissors-o":"","fa-hand-lizard-o":"","fa-hand-spock-o":"","fa-hand-pointer-o":"","fa-hand-peace-o":"","fa-trademark":"","fa-registered":"","fa-creative-commons":"","fa-gg":"","fa-gg-circle":"","fa-tripadvisor":"","fa-odnoklassniki":"","fa-odnoklassniki-square":"","fa-get-pocket":"","fa-wikipedia-w":"","fa-safari":"","fa-chrome":"","fa-firefox":"","fa-opera":"","fa-internet-explorer":"","fa-tv":"","fa-television":"","fa-contao":"","fa-500px":"","fa-amazon":"","fa-calendar-plus-o":"","fa-calendar-minus-o":"","fa-calendar-times-o":"","fa-calendar-check-o":"","fa-industry":"","fa-map-pin":"","fa-map-signs":"","fa-map-o":"","fa-map":"","fa-commenting":"","fa-commenting-o":"","fa-houzz":"","fa-vimeo":"","fa-black-tie":"","fa-fonticons":""}),ol.style.FontSymbol.addDefs({font:"fontmaki",name:"Maki",copyright:"CC0 - MapBox - https://www.mapbox.com/maki/",prefix:"maki"},{"maki-bicycle":{font:"fontmaki",code:59392,name:"bicycle",search:"bicycle"},"maki-building":{font:"fontmaki",code:59393,name:"building",search:"building"},"maki-bus":{font:"fontmaki",code:59394,name:"bus",search:"bus"},"maki-cafe":{font:"fontmaki",code:59395,name:"cafe",search:"cafe"},"maki-camera":{font:"fontmaki",code:59396,name:"camera",search:"camera"},"maki-campsite":{font:"fontmaki",code:59397,name:"campsite",search:"campsite"},"maki-car":{font:"fontmaki",code:59398,name:"car",search:"car"},"maki-cemetery":{font:"fontmaki",code:59399,name:"cemetery",search:"cemetery"},"maki-chemist":{font:"fontmaki",code:59400,name:"chemist",search:"chemist"},"maki-cinema":{font:"fontmaki",code:59401,name:"cinema",search:"cinema"},"maki-circle":{font:"fontmaki",code:59402,name:"circle",search:"circle"},"maki-circle_stroked":{font:"fontmaki",code:59403,name:"circle_stroked",search:"circle_stroked"},"maki-city":{font:"fontmaki",code:59404,name:"city",search:"city"},"maki-clothing_store":{font:"fontmaki",code:59405,name:"clothing_store",search:"clothing_store"},"maki-college":{font:"fontmaki",code:59406,name:"college",search:"college"},"maki-commercial":{font:"fontmaki",code:59407,name:"commercial",search:"commercial"},"maki-cricket":{font:"fontmaki",code:59408,name:"cricket",search:"cricket"},"maki-cross":{font:"fontmaki",code:59409,name:"cross",search:"cross"},"maki-dam":{font:"fontmaki",code:59410,name:"dam",search:"dam"},"maki-danger":{font:"fontmaki",code:59411,name:"danger",search:"danger"},"maki-dentist":{font:"fontmaki",code:59412,name:"dentist",search:"dentist"},"maki-disability":{font:"fontmaki",code:59413,name:"disability",search:"disability"},"maki-dog_park":{font:"fontmaki",code:59414,name:"dog_park",search:"dog_park"},"maki-embassy":{font:"fontmaki",code:59415,name:"embassy",search:"embassy"},"maki-emergency_telephone":{font:"fontmaki",code:59416,name:"emergency_telephone",search:"emergency_telephone"},"maki-entrance":{font:"fontmaki",code:59417,name:"entrance",search:"entrance"},"maki-farm":{font:"fontmaki",code:59418,name:"farm",search:"farm"},"maki-fast_food":{font:"fontmaki",code:59419,name:"fast_food",search:"fast_food"},"maki-ferry":{font:"fontmaki",code:59420,name:"ferry",search:"ferry"},"maki-fire_station":{font:"fontmaki",code:59421,name:"fire_station",search:"fire_station"},"maki-fuel":{font:"fontmaki",code:59422,name:"fuel",search:"fuel"},"maki-garden":{font:"fontmaki",code:59423,name:"garden",search:"garden"},"maki-gift":{font:"fontmaki",code:59424,name:"gift",search:"gift"},"maki-golf":{font:"fontmaki",code:59425,name:"golf",search:"golf"},"maki-grocery":{font:"fontmaki",code:59426,name:"grocery",search:"grocery"},"maki-hairdresser":{font:"fontmaki",code:59427,name:"hairdresser",search:"hairdresser"},"maki-harbor":{font:"fontmaki",code:59428,name:"harbor",search:"harbor"},"maki-heart":{font:"fontmaki",code:59429,name:"heart",search:"heart"},"maki-heliport":{font:"fontmaki",code:59430,name:"heliport",search:"heliport"},"maki-hospital":{font:"fontmaki",code:59431,name:"hospital",search:"hospital"},"maki-ice_cream":{font:"fontmaki",code:59432,name:"ice_cream",search:"ice_cream"},"maki-industrial":{font:"fontmaki",code:59433,name:"industrial",search:"industrial"},"maki-land_use":{font:"fontmaki",code:59434,name:"land_use",search:"land_use"},"maki-laundry":{font:"fontmaki",code:59435,name:"laundry",search:"laundry"},"maki-library":{font:"fontmaki",code:59436,name:"library",search:"library"},"maki-lighthouse":{font:"fontmaki",code:59437,name:"lighthouse",search:"lighthouse"},"maki-lodging":{font:"fontmaki",code:59438,name:"lodging",search:"lodging"},"maki-logging":{font:"fontmaki",code:59439,name:"logging",search:"logging"},"maki-london_underground":{font:"fontmaki",code:59440,name:"london_underground",search:"london_underground"},"maki-marker":{font:"fontmaki",code:59441,name:"marker",search:"marker"},"maki-minefield":{font:"fontmaki",code:59442,name:"minefield",search:"minefield"},"maki-marker_stroked":{font:"fontmaki",code:59443,name:"marker_stroked",search:"marker_stroked"},"maki-mobilephone":{font:"fontmaki",code:59444,name:"mobilephone",search:"mobilephone"},"maki-monument":{font:"fontmaki",code:59445,name:"monument",search:"monument"},"maki-museum":{font:"fontmaki",code:59446,name:"museum",search:"museum"},"maki-music":{font:"fontmaki",code:59447,name:"music",search:"music"},"maki-oil_well":{font:"fontmaki",code:59448,name:"oil_well",search:"oil_well"},"maki-park":{font:"fontmaki",code:59449,name:"park",search:"park"},"maki-park2":{font:"fontmaki",code:59450,name:"park2",search:"park2"},"maki-parking":{font:"fontmaki",code:59451,name:"parking",search:"parking"},"maki-parking_garage":{font:"fontmaki",code:59452,name:"parking_garage",search:"parking_garage"},"maki-pharmacy":{font:"fontmaki",code:59453,name:"pharmacy",search:"pharmacy"},"maki-pitch":{font:"fontmaki",code:59454,name:"pitch",search:"pitch"},"maki-playground":{font:"fontmaki",code:59455,name:"playground",search:"playground"},"maki-police":{font:"fontmaki",code:59456,name:"police",search:"police"},"maki-polling_place":{font:"fontmaki",code:59457,name:"polling_place",search:"polling_place"},"maki-post":{font:"fontmaki",code:59458,name:"post",search:"post"},"maki-prison":{font:"fontmaki",code:59459,name:"prison",search:"prison"},"maki-rail":{font:"fontmaki",code:59460,name:"rail",search:"rail"},"maki-rail_above":{font:"fontmaki",code:59461,name:"rail_above",search:"rail_above"},"maki-rail_light":{font:"fontmaki",code:59462,name:"rail_light",search:"rail_light"},"maki-rail_metro":{font:"fontmaki",code:59463,name:"rail_metro",search:"rail_metro"},"maki-rail_underground":{font:"fontmaki",code:59464,name:"rail_underground",search:"rail_underground"},"maki-religious-christian":{font:"fontmaki",code:59465,theme:"religious",name:"christian",search:"religious,christian"},"maki-religious-jewish":{font:"fontmaki",code:59466,theme:"religious",name:"jewish",search:"religious,jewish"},"maki-religious-muslim":{font:"fontmaki",code:59467,theme:"religious",name:"muslim",search:"religious,muslim"},"maki-religious-place_of_worship":{font:"fontmaki",code:59468,theme:"religious",name:"place_of_worship",search:"religious,place_of_worship"},"maki-restaurant":{font:"fontmaki",code:59469,name:"restaurant",search:"restaurant"},"maki-roadblock":{font:"fontmaki",code:59470,name:"roadblock",search:"roadblock"},"maki-rocket":{font:"fontmaki",code:59471,name:"rocket",search:"rocket"},"maki-school":{font:"fontmaki",code:59472,name:"school",search:"school"},"maki-scooter":{font:"fontmaki",code:59473,name:"scooter",search:"scooter"},"maki-shop":{font:"fontmaki",code:59474,name:"shop",search:"shop"},"maki-skiing":{font:"fontmaki",code:59475,name:"skiing",search:"skiing"},"maki-slaughterhouse":{font:"fontmaki",code:59476,name:"slaughterhouse",search:"slaughterhouse"},"maki-soccer":{font:"fontmaki",code:59477,name:"soccer",search:"soccer"},"maki-square":{font:"fontmaki",code:59478,name:"square",search:"square"},"maki-square_stroked":{font:"fontmaki",code:59479,name:"square_stroked",search:"square_stroked"},"maki-star":{font:"fontmaki",code:59480,name:"star",search:"star"},"maki-star_stroked":{font:"fontmaki",code:59481,name:"star_stroked",search:"star_stroked"},"maki-suitcase":{font:"fontmaki",code:59482,name:"suitcase",search:"suitcase"},"maki-swimming":{font:"fontmaki",code:59483,name:"swimming",search:"swimming"},"maki-telephone":{font:"fontmaki",code:59484,name:"telephone",search:"telephone"},"maki-tennis":{font:"fontmaki",code:59485,name:"tennis",search:"tennis"},"maki-theatre":{font:"fontmaki",code:59486,name:"theatre",search:"theatre"},"maki-toilets":{font:"fontmaki",code:59487,name:"toilets",search:"toilets"},"maki-town":{font:"fontmaki",code:59488,name:"town",search:"town"},"maki-town_hall":{font:"fontmaki",code:59489,name:"town_hall",search:"town_hall"},"maki-triangle":{font:"fontmaki",code:59490,name:"triangle",search:"triangle"},"maki-triangle_stroked":{font:"fontmaki",code:59491,name:"triangle_stroked",search:"triangle_stroked"},"maki-village":{font:"fontmaki",code:59492,name:"village",search:"village"},"maki-warehouse":{font:"fontmaki",code:59493,name:"warehouse",search:"warehouse"},"maki-waste_basket":{font:"fontmaki",code:59494,name:"waste_basket",search:"waste_basket"},"maki-water":{font:"fontmaki",code:59495,name:"water",search:"water"},"maki-wetland":{font:"fontmaki",code:59496,name:"wetland",search:"wetland"},"maki-zoo":{font:"fontmaki",code:59497,name:"zoo",search:"zoo"},"maki-aerialway":{font:"fontmaki",code:59498,name:"aerialway",search:"aerialway"},"maki-airfield":{font:"fontmaki",code:59499,name:"airfield",search:"airfield"},"maki-airport":{font:"fontmaki",code:59500,name:"airport",search:"airport"},"maki-alcohol_shop":{font:"fontmaki",code:59501,name:"alcohol_shop",search:"alcohol_shop"},"maki-america_football":{font:"fontmaki",code:59502,name:"america_football",search:"america_football"},"maki-art_gallery":{font:"fontmaki",code:59503,name:"art_gallery",search:"art_gallery"},"maki-bakery":{font:"fontmaki",code:59504,name:"bakery",search:"bakery"},"maki-bank":{font:"fontmaki",code:59505,name:"bank",search:"bank"},"maki-bar":{font:"fontmaki",code:59506,name:"bar",search:"bar"},"maki-baseball":{font:"fontmaki",code:59507,name:"baseball",search:"baseball"},"maki-basketball":{font:"fontmaki",code:59508,name:"basketball",search:"basketball"},"maki-beer":{font:"fontmaki",code:59509,name:"beer",search:"beer"}}),ol.style.Photo=function(t){options=t||{},this.sanchor_="anchored"==options.kind?8:0,this.shadow_=Number(options.shadow)||0,options.stroke||(options.stroke=new ol.style.Stroke({width:0,color:"#000"}));var e=options.stroke.getWidth();if(e<0&&(e=0),"folio"==options.kind&&(e+=6),options.stroke.setWidth(e),ol.style.RegularShape.call(this,{radius:options.radius+e+this.sanchor_/2+this.shadow_/2,points:0}),!this.hitDetectionCanvas_){var i=this.getImage();for(var n in this)if(this[n]&&this[n].getContext&&this[n]!==i){this.hitDetectionCanvas_=this[n];break}}this.stroke_=options.stroke,this.fill_=options.fill,this.crop_=options.crop,this.crossOrigin_=options.crossOrigin,this.kind_=options.kind||"default",this.radius_=options.radius,this.src_=options.src,this.offset_=[options.offsetX?options.offsetX:0,options.offsetY?options.offsetY:0],this.onload_=options.onload,this.render_()},ol.inherits(ol.style.Photo,ol.style.RegularShape),CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,n,r){return r?(i<2*r&&(r=i/2),n<2*r&&(r=n/2),this.beginPath(),this.moveTo(t+r,e),this.arcTo(t+i,e,t+i,e+n,r),this.arcTo(t+i,e+n,t,e+n,r),this.arcTo(t,e+n,t,e,r),this.arcTo(t,e,t+i,e,r),this.closePath()):this.rect(t,e,i,n),this},ol.style.Photo.prototype.drawBack_=function(t,e,i){var n=t.canvas;switch(t.beginPath(),t.fillStyle=e,t.clearRect(0,0,n.width,n.height),this.kind_){case"square":t.rect(0,0,n.width-this.shadow_,n.height-this.shadow_);break;case"circle":t.arc(this.radius_+i,this.radius_+i,this.radius_+i,0,2*Math.PI,!1);break;case"folio":offset=6,i-=offset,t.strokeStyle="rgba(0,0,0,0.5)";var r=n.width-this.shadow_-2*offset,o=Math.atan(6/r);t.save(),t.rotate(-o),t.translate(-6,2),t.beginPath(),t.rect(offset,offset,r,r),t.stroke(),t.fill(),t.restore(),t.save(),t.translate(6,-1),t.rotate(o),t.beginPath(),t.rect(offset,offset,r,r),t.stroke(),t.fill(),t.restore(),t.beginPath(),t.rect(offset,offset,r,r),t.stroke();break;case"anchored":t.roundRect(this.sanchor_/2,0,n.width-this.sanchor_-this.shadow_,n.height-this.sanchor_-this.shadow_,i),t.moveTo(n.width/2-this.sanchor_-this.shadow_/2,n.height-this.sanchor_-this.shadow_),t.lineTo(n.width/2+this.sanchor_-this.shadow_/2,n.height-this.sanchor_-this.shadow_),t.lineTo(n.width/2-this.shadow_/2,n.height-this.shadow_);break;default:t.roundRect(0,0,n.width-this.shadow_,n.height-this.shadow_,i)}t.closePath()},ol.style.Photo.prototype.render_=function(){var t,e=0;this.stroke_&&(t=ol.color.asString(this.stroke_.getColor()),e=this.stroke_.getWidth());var i=this.getImage(),n=this.hitDetectionCanvas_.getContext("2d");this.drawBack_(n,"#000",e),n.fill();n=i.getContext("2d");this.drawBack_(n,t,e),this.shadow_&&(n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=this.shadow_/2,n.shadowOffsetX=this.shadow_/2,n.shadowOffsetY=this.shadow_/2),n.fill(),n.shadowColor="transparent";var r=this,o=this.img_=new Image;this.crossOrigin_&&(o.crossOrigin=this.crossOrigin_),o.src=this.src_,o.width?r.drawImage_(o):o.onload=function(){r.drawImage_(o),r.onload_&&r.onload_()};var s=this.getAnchor();s[0]=(i.width-this.shadow_)/2,s[1]=(i.height-this.shadow_)/2,this.sanchor_&&(s[1]=i.height-this.shadow_)},ol.style.Photo.prototype.drawImage_=function(t){var e=this.getImage().getContext("2d"),i=0;this.stroke_&&(i=this.stroke_.getWidth());var n=2*this.radius_;e.save(),"circle"==this.kind_&&(e.beginPath(),e.arc(this.radius_+i,this.radius_+i,this.radius_,0,2*Math.PI,!1),e.clip());var r,o,s,a,l,h,c,u,f;this.crop_?(u=f=(r=Math.min(t.width/n,t.height/n))*n,h=(t.width-u)/2,c=(t.height-f)/2,o=s=0,a=l=n+1):(h=c=0,o=(n-(a=(r=Math.min(n/t.width,n/t.height))*(u=t.width)))/2,s=(n-(l=r*(f=t.height)))/2),o+=i+this.sanchor_/2,s+=i,e.drawImage(t,h,c,u,f,o,s,a,l),e.restore(),"circle"==this.kind_&&i&&(e.beginPath(),e.strokeStyle=ol.color.asString(this.stroke_.getColor()),e.lineWidth=i/4,e.arc(this.radius_+i,this.radius_+i,this.radius_,0,2*Math.PI,!1),e.stroke())},ol.style.Photo.prototype.getChecksum=function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-",e=null!==this.fill_?this.fill_.getChecksum():"-";if(null===this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]){var i="c"+t+e+(void 0!==this.radius_?this.radius_.toString():"-");this.checksums_=[i,t,e,this.radius_]}return this.checksums_[0]},function(){function t(t){if(!(t.frameState.viewState.resolution>this.textPathMaxResolution_)){var e=t.frameState.extent,i=t.frameState.coordinateToPixelTransform,n=t.context;n.save(),n.scale(t.frameState.pixelRatio,t.frameState.pixelRatio);for(var r,o=this.getSource().getFeaturesInExtent(e),s=0;r=o[s];s++)for(var a,l=this.textPathStyle_(r,t.frameState.viewState.resolution),h=0;a=l[h];h++){var c,u=a.getGeometry()||r.getGeometry();switch(u.getType()){case"LineString":c=u.getCoordinates();break;case"MultiLineString":c=u.getLineString(0).getCoordinates();break;default:continue}var f=a.getText(),g=function(t,e){for(var n=[],r=0;r<t.length;r++)n.push(i[0]*t[r][0]+i[1]*t[r][1]+i[4]),n.push(i[2]*t[r][0]+i[3]*t[r][1]+i[5]);if(e&&n[0]>n[n.length-2]){for(var o=[],r=n.length-2;r>=0;r-=2)o.push(n[r]),o.push(n[r+1]);return o}return n}(c,f.getRotateWithView());n.font=f.getFont(),n.textBaseline=f.getTextBaseline(),n.textAlign=f.getTextAlign(),n.lineWidth=f.getStroke()?f.getStroke().getWidth()||0:0,n.strokeStyle=f.getStroke()?f.getStroke().getColor()||"#fff":"#fff",n.fillStyle=f.getFill()?f.getFill().getColor()||"#000":"#000",n.textJustify="justify"==f.getTextAlign(),n.textOverflow=f.getTextOverflow?f.getTextOverflow():"",n.minWidth=f.getMinWidth?f.getMinWidth():0,n.textPath(f.getText()||r.get("name"),g)}n.restore()}}ol.layer.Vector.prototype.setTextPathStyle=function(e,i){if(null===e)return this.textPath_&&this.unByKey(this.textPath_),this.textPath_=null,void this.changed();this.textPath_||(this.textPath_=this.on("postcompose",t,this)),void 0===e&&(e=[new ol.style.Style({text:new ol.style.Text})]),this.textPathStyle_="function"==typeof e?e:function(){return e},this.textPathMaxResolution_=Number(i)||Number.MAX_VALUE,this.changed()},ol.style.TextPath=function(t){t||(t={}),ol.style.Text.call(this,t),this.textOverflow_=void 0!==t.textOverflow?t.textOverflow:"visible",this.minWidth_=t.minWidth||0},ol.inherits(ol.style.TextPath,ol.style.Text),ol.style.TextPath.prototype.getTextOverflow=function(){return this.textOverflow_},ol.style.TextPath.prototype.getMinWidth=function(){return this.minWidth_}}(),CanvasRenderingContext2D.prototype.textPath=function(t,e){function i(t,e,i,n){var r=i-t,o=n-e;return Math.sqrt(r*r+o*o)}for(var n,r=this,o=0,s=2,a=.25*r.measureText(" ").width,l=0,h=0,c=2;c<e.length;c+=2)h+=i(e[c-2],e[c-1],e[c],e[c+1]);if(!(h<r.minWidth)){var u=t.split(" ").length-1;if("visible"!=r.textOverflow&&h<r.measureText(t).width+(t.length-1+u)*a){var f="ellipsis"==r.textOverflow?"…":r.textOverflow;do{u=t.split(" ").length-1,t=t.slice(0,t.length-1)}while(t&&h<r.measureText(t+f).width+(t.length+f.length-1+u)*a);t+=f}switch(r.textJustify||r.textAlign){case!0:case"center":case"end":case"right":r.textJustify?(l=0,a=(h-r.measureText(t).width)/(t.length-1+u)):(l=h-r.measureText(t).width-(t.length+u)*a,"center"==r.textAlign&&(l/=2))}for(var g=0;g<t.length;g++){var d=t[g],p=r.measureText(d).width,m=function(t,e){if(!n||o+n<e)for(;s<t.length&&(n=i(t[s-2],t[s-1],t[s],t[s+1]),!(o+n>e))&&!((s+=2)>=t.length);)o+=n;var r,a,l,h=e-o;return s>=t.length&&(s=t.length-2),h?(r=t[s-2]+(t[s]-t[s-2])*h/n,a=t[s-1]+(t[s+1]-t[s-1])*h/n,l=Math.atan2(t[s+1]-t[s-1],t[s]-t[s-2])):(r=t[s-2],a=t[s-1],l=Math.atan2(t[s+1]-t[s-1],t[s]-t[s-2])),[r,a,l]}(e,l+p/2);r.save(),r.textAlign="center",r.translate(m[0],m[1]),r.rotate(m[2]),r.lineWidth&&r.strokeText(d,0,0),r.fillText(d,0,0),r.restore(),l+=p+a*(" "==d?2:1)}}},ol.style.Shadow=function(t){options=t||{},options.fill||(options.fill=new ol.style.Fill({color:"rgba(0,0,0,0.5)"})),ol.style.RegularShape.call(this,{radius:options.radius,fill:options.fill}),this.fill_=options.fill,this.radius_=options.radius,this.blur_=0===options.blur?0:options.blur||options.radius/3,this.offset_=[options.offsetX?options.offsetX:0,options.offsetY?options.offsetY:0],this.renderShadow_()},ol.inherits(ol.style.Shadow,ol.style.RegularShape),ol.style.Shadow.prototype.renderShadow_=function(){var t=this.radius_,e=this.getImage();[e.width,e.height][1]=t;var i=e.getContext("2d");i.beginPath(),i.clearRect(0,0,e.width,e.height),i.scale(1,.5),i.arc(t,-t,t-this.blur_,0,2*Math.PI,!1),i.fillStyle="#000",i.shadowColor=this.fill_.getColor(),i.shadowBlur=.7*this.blur_,i.shadowOffsetX=0,i.shadowOffsetY=t,i.closePath(),i.fill(),i.shadowColor="transparent";var n=this.getAnchor();n[0]=e.width/2-this.offset_[0],n[1]=e.height/5-this.offset_[1]},ol.style.Shadow.prototype.getChecksum=function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-",e=null!==this.fill_?this.fill_.getChecksum():"-";if(null===this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.form_+"-"+this.glyphs_!=this.checksums_[4]){var i="c"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+this.form_+"-"+this.glyphs_;this.checksums_=[i,t,e,this.radius_,this.form_+"-"+this.glyphs_]}return this.checksums_[0]},ol.geom.Geometry.prototype.cspline=function(t){return this.calcCSpline_?(this.csplineGeometryRevision==this.getRevision()&&this.csplineOption==JSON.stringify(t)||(this.csplineGeometry_=this.calcCSpline_(t),this.csplineGeometryRevision=this.getRevision(),this.csplineOption=JSON.stringify(t)),this.csplineGeometry_):this},ol.geom.GeometryCollection.prototype.calcCSpline_=function(t){for(var e=[],i=this.getGeometries(),n=0;n<i.length;n++)e.push(i[n].cspline());return new ol.geom.GeometryCollection(e)},ol.geom.MultiLineString.prototype.calcCSpline_=function(t){for(var e=[],i=this.getLineStrings(),n=0;n<i.length;n++)e.push(i[n].cspline().getCoordinates());return new ol.geom.MultiLineString(e)},ol.geom.Polygon.prototype.calcCSpline_=function(t){for(var e=[],i=this.getCoordinates(),n=0;n<i.length;n++)e.push(new ol.geom.LineString(i[n]).cspline().getCoordinates());return new ol.geom.Polygon(e)},ol.geom.MultiPolygon.prototype.calcCSpline_=function(t){for(var e=[],i=this.getPolygons(),n=0;n<i.length;n++)e.push(i[n].cspline().getCoordinates());return new ol.geom.MultiPolygon(e)},ol.geom.LineString.prototype.calcCSpline_=function(t){function e(t,e,i,n){var r=i-t,o=n-e;return Math.sqrt(r*r+o*o)}t||(t={});var i,n,r,o,s,a,l,h,c,u,f,g,d,p,m=this.getCoordinates(),y="number"==typeof t.tension?t.tension:.5,v=t.resolution||this.getLength()/m.length/(t.pointsPerSeg||10),x=[];for(i=m.slice(0),m.length>2&&m[0][0]==m[m.length-1][0]&&m[0][1]==m[m.length-1][1]?(i.unshift(m[m.length-2]),i.push(m[1])):(i.unshift(m[0]),i.push(m[m.length-1])),p=1;p<i.length-2;p++){var w=e(i[p][0],i[p][1],i[p+1][0],i[p+1][1]),C=Math.round(w/v),E=1;if(t.normalize){var w=e(i[p+1][0],i[p+1][1],i[p-1][0],i[p-1][1]),I=e(i[p+2][0],i[p+2][1],i[p][0],i[p][1]);E=w<I?w/I:I/w}for(o=(i[p+1][0]-i[p-1][0])*y*E,s=(i[p+2][0]-i[p][0])*y*E,a=(i[p+1][1]-i[p-1][1])*y*E,l=(i[p+2][1]-i[p][1])*y*E,d=0;d<=C;d++)g=d/C,h=2*Math.pow(g,3)-3*Math.pow(g,2)+1,c=-2*Math.pow(g,3)+3*Math.pow(g,2),u=Math.pow(g,3)-2*Math.pow(g,2)+g,f=Math.pow(g,3)-Math.pow(g,2),n=h*i[p][0]+c*i[p+1][0]+u*o+f*s,r=h*i[p][1]+c*i[p+1][1]+u*a+f*l,x.push([n,r])}return new ol.geom.LineString(x)};var exif2geojson;!function(){function t(t){return t.numerator/t.denominator}function e(e){return e?t(e[0])+t(e[1])/60+t(e[2])/3600:null}exif2geojson=function(i,n){"function"!=typeof(n=n||{}).loading&&(n.loading=function(){}),"function"!=typeof n.onLoad&&(n.onLoad=function(t){console.log(t)});for(var r,o={type:"FeatureCollection",features:[]},s=i.length,a=0;r=i[a];a++)EXIF.getData(r,function(){this.exifdata.GPSLongitudeRef&&(fjs={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[]}},o.features.push(fjs),fjs.geometry.coordinates=[("E"==this.exifdata.GPSLongitudeRef?1:-1)*e(this.exifdata.GPSLongitude),("N"==this.exifdata.GPSLatitudeRef?1:-1)*e(this.exifdata.GPSLatitude)],this.exifdata.GPSAltitude&&fjs.geometry.coordinates.push(t(this.exifdata.GPSAltitude)),fjs.properties.url=this.src||this.name,this.exifdata.ImageDescription&&(fjs.properties.description=this.exifdata.ImageDescription),n.date&&this.exifdata.DateTime&&(fjs.properties.date=this.exifdata.DateTime),n.camera&&(this.exifdata.Make&&(fjs.properties.make=this.exifdata.Make),this.exifdata.Model&&(fjs.properties.model=this.exifdata.Model.replace(new RegExp(String.fromCharCode(0),"g"),""))),n.image&&(fjs.properties.size=this.size,fjs.properties.type=this.type,this.exifdata.ImageHeight&&(fjs.properties.height=this.exifdata.ImageHeight),this.exifdata.ImageWidth&&(fjs.properties.width=this.exifdata.ImageWidth))),s--,n.loading(s),s||n.onLoad(o)})}}(),$.fn.exportMap=function(t,e){function i(t,i,n){if("pdf"==n){var r,o,s,a,l=i.toDataURL("image/jpeg"),h=Number($(t).data("margin"))||0;i.width>i.height?(a="landscape",r=[297,210]):(a="portrait",r=[210,297]);var c=Math.min((r[0]-2*h)/i.width,(r[1]-2*h)/i.height);o=c*i.width,s=c*i.height;var u=(r[0]-o)/2,f=(r[1]-s)/2,g=new jsPDF(a,"mm","a4");g.addImage(l,"JPEG",u,f,o,s),t.href=g.output("datauristring")}else t.href=i.toDataURL("image/"+(e.format||n),e.quality)}if(e||(e={}),this.each)return this.each(function(){if("download"in this){var n=this;$(this).on("click",function(){var r=$(this).attr("download").split(".").pop();"jpg"==r&&(r="jpeg"),e.dpi&&t.once("precompose",function(t){var i=t.context.canvas,n=e.dpi/96;i.width=Math.ceil(i.width*n),i.height=Math.ceil(i.height*n),t.context.scale(n,n)});$(this).text();"png"!=r&&t.once("precompose",function(t){t.context.fillStyle="white",t.context.fillRect(0,0,t.context.canvas.width,t.context.canvas.height)}),t.once("postcompose",function(e){i(n,e.context.canvas,r),setTimeout(function(){t.renderSync()},500)}),t.renderSync()})}else $(this).on("click",function(){alert("Export functions are not supported by your browser...")})})},function(){function t(t,e,i){return(t[0]-i[0])*(e[1]-i[1])-(t[1]-i[1])*(e[0]-i[0])<=0}function e(t){var i=[];switch(t.getType()){case"Point":i.push(t.getCoordinates());break;case"LineString":case"LinearRing":case"MultiPoint":i=t.getCoordinates();break;case"MultiLineString":for(var n=t.getLineStrings(),r=0;r<n.length;r++)i.concat(e(n[r]));break;case"Polygon":i=e(t.getLinearRing(0));break;case"MultiPolygon":for(var n=t.getPolygons(),r=0;r<n.length;r++)i.concat(e(n[r]));break;case"GeometryCollection":for(var n=t.getGeometries(),r=0;r<n.length;r++)i.concat(e(n[r]))}return i}ol.coordinate.convexHull=function(e){e.sort(function(t,e){return t[0]==e[0]?t[1]-e[1]:t[0]-e[0]});for(var i=[],n=0;n<e.length;n++){for(;i.length>=2&&t(i[i.length-2],i[i.length-1],e[n]);)i.pop();i.push(e[n])}for(var r=[],n=e.length-1;n>=0;n--){for(;r.length>=2&&t(r[r.length-2],r[r.length-1],e[n]);)r.pop();r.push(e[n])}return r.pop(),i.pop(),i.concat(r)},ol.geom.Geometry.prototype.convexHull=function(){return ol.coordinate.convexHull(e(this))}}(),ol.coordinate.dist2d=function(t,e){var i=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(i*i+n*n)},ol.coordinate.equal=function(t,e){return t[0]==e[0]&&t[1]==e[1]},ol.geom.LineString.prototype.splitAt=function(t,e){if(!t)return[this];if(e||(e=1e-10),t.length&&t[0].length){for(var i=[this],n=0;n<t.length;n++){for(var r=[],o=0;o<i.length;o++){var s=i[o].splitAt(t[n]);r=r.concat(s)}i=r}return i}if(ol.coordinate.equal(t,this.getFirstCoordinate())||ol.coordinate.equal(t,this.getLastCoordinate()))return[this];for(var a=this.getCoordinates(),l=[a[0]],h=[],n=0;n<a.length-1;n++)if(!ol.coordinate.equal(a[n],a[n+1])){if(ol.coordinate.equal(t,a[n+1]))l.push(a[n+1]),h.push(new ol.geom.LineString(l)),l=[];else if(!ol.coordinate.equal(t,a[n])){var c,u;a[n][0]==a[n+1][0]?c=u=(a[n][1]-t[1])/(a[n][1]-a[n+1][1]):a[n][1]==a[n+1][1]?c=u=(a[n][0]-t[0])/(a[n][0]-a[n+1][0]):(c=(a[n][0]-t[0])/(a[n][0]-a[n+1][0]),u=(a[n][1]-t[1])/(a[n][1]-a[n+1][1])),Math.abs(c-u)<e&&0<=c&&c<=1&&(l.push(t),h.push(new ol.geom.LineString(l)),l=[t])}l.push(a[n+1])}return l.length>1&&h.push(new ol.geom.LineString(l)),h.length?h:[this]},ol.Map.prototype.animExtent=function(t,e){var i;(e=e||{}).projection&&(t=ol.proj.transformExtent(t,e.projection,this.getView().getProjection()));var n=(new Date).getTime(),r=e.duration||1e3,o=e.easing||ol.easing.upAndDown,s=e.lineWidth||2,a=e.color||"red";i=this.on("postcompose",function(e){var l=e.frameState,h=l.pixelRatio,c=l.time-n;if(c>r)ol.Observable.unByKey(i);else{var u=c/r,f=this.getPixelFromCoordinate([t[0],t[1]]),g=this.getPixelFromCoordinate([t[2],t[3]]),d=e.context;d.save(),d.scale(h,h),d.beginPath(),o(u),d.globalAlpha=o(1-u),d.lineWidth=s,d.strokeStyle=a,d.rect(f[0],f[1],g[0]-f[0],g[1]-f[1]),d.stroke(),d.restore(),l.animate=!0}},this),this.renderSync()},ol.Map.prototype.markup=function(t,e){var i,n=this;(e=e||{}).projection&&(t=ol.proj.transform(t,e.projection,this.getView().getProjection()));var r=(new Date).getTime(),o=e.delay||3e3,s=1e3,a=e.maxZoom||100,l=ol.easing.easeOut,h=e.style;return h||(h=new ol.style.Circle({radius:10,stroke:new ol.style.Stroke({color:"red",width:2})})),h instanceof ol.style.Image&&(h=new ol.style.Style({image:h})),h instanceof Array||(h=[h]),setTimeout(function(){i&&n.renderSync()},o),i=this.on("postcompose",function(e){var n=e.frameState,c=n.time-r;if(c>o+s)ol.Observable.unByKey(i),i=null;else{o>c&&this.getView().getZoom()>a&&(o=c);var u=n.pixelRatio,f=0;c>o&&(f=(c-o)/s);var g=e.context;g.save(),g.beginPath(),g.globalAlpha=l(1-f);for(var d=0;d<h.length;d++){var p=h[d].getImage(),m=p.getScale();p.setScale(m*u),e.vectorContext.setStyle(h[d]),e.vectorContext.drawGeometry(new ol.geom.Point(t)),p.setScale(m)}g.restore(),c>=o&&(n.animate=!0)}},this),this.renderSync(),i.stop=function(){o=s=0,this.target.renderSync()},i},ol.Map.prototype.pulse=function(t,e){var i;(e=e||{}).projection&&(t=ol.proj.transform(t,e.projection,this.getView().getProjection()));var n=(new Date).getTime(),r=e.duration||3e3,o=e.easing||ol.easing.easeOut,s=e.style;s||(s=new ol.style.Circle({radius:30,stroke:new ol.style.Stroke({color:"red",width:2})})),s instanceof ol.style.Image&&(s=new ol.style.Style({image:s})),s instanceof Array||(s=[s]);var a=e.amplitude||1;a<0&&(a=0);var l=e.radius||15;l<0&&(l=5);e.amplitude,e.lineWidth,e.color;i=this.on("postcompose",function(e){var l=e.frameState,h=l.pixelRatio,c=l.time-n;if(c>r)ol.Observable.unByKey(i);else{var u=c/r,f=e.context;f.save(),f.beginPath();var g=o(u);f.globalAlpha=o(1-u);for(var d=0;d<s.length;d++){var p=s[d].getImage(),m=p.getScale();p.setScale(h*m*(1+a*(g-1))),e.vectorContext.setStyle(s[d]),e.vectorContext.drawGeometry(new ol.geom.Point(t)),p.setScale(m)}f.restore(),l.animate=!0}},this),this.renderSync()},ol.ordering={},ol.ordering.yOrdering=function(t){return function(t,e){return t.getGeometry().getExtent()[1]<e.getGeometry().getExtent()[1]}},ol.ordering.zIndex=function(t){t||(t={});var e=t.attribute||"zIndex";return option.equalFn?function(t,i){return t.get(e)==i.get(e)?option.equalFn(t,i):t.get(e)<i.get(e)}:function(t,i){return t.get(e)<i.get(e)}},window.WSynchro||(WSynchro={windows:[]}),WSynchro.open=function(t,e){var i=window.open(t||window.location.href,"_blank",void 0===e?"location=1,menubar=1,toolbar=1,scrollbars=1":e);i.WSynchro?(i.WSynchro.windows=[window],i.WSynchro.source=window):i.WSynchro={windows:[window],source:window},this.windows.push(i)},WSynchro.on=function(t,e){this.syncFn_||(this.syncFn_=[]),"synchronize"===t&&this.syncFn_.push(e)},WSynchro.synchronize=function(t){this.synchronize_(t)},WSynchro.synchronize_=function(t,e){if(e){if(e==this.sync)return;this.sync=e,this.synchronizing=!0;try{if(WSynchro.syncFn_){t.type="synchronize";for(i=0;i<WSynchro.syncFn_.length;i++)WSynchro.syncFn_[i].apply(null,[t])}}catch(t){}}else this.synchronizing?e=this.sync:this.sync=e=(new Date).getTime(),this.synchronizing=!1;if(t)for(var i=0;i<this.windows.length;i++)try{this.windows[i].WSynchro.synchronize_(t,e)}catch(t){}},ol.control.Button=function(t){t=t||{};var e=$("<div>").addClass((t.className||"")+" ol-button ol-unselectable ol-control"),i=this,n=null;n=t.id?'<button id="'+t.id+'">':"<button>",$(n).html(t.html||"").attr("title",t.title).on("touchstart click",function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),t.handleClick&&t.handleClick.call(i,e)}).appendTo(e),ol.control.Control.call(this,{element:e.get(0),target:t.target}),t.title&&this.set("title",t.title),t.id&&this.set("id",t.id)},ol.inherits(ol.control.Button,ol.control.Control),ol.control.LayerSwitcher=function(t){var e=t||{},i=this;this.dcount=0,this.show_progress=e.show_progress,this.oninfo="function"==typeof e.oninfo?e.oninfo:null,this.onextent="function"==typeof e.onextent?e.onextent:null,this.hasextent=e.extent||e.onextent,this.hastrash=e.trash,this.reordering=!1!==e.reordering,this.showHeader=!0===e.showHeader;var n;e.target?n=$("<div>").addClass(e.switcherClass||"ol-layerswitcher"):(n=$("<div>").addClass((e.switcherClass||"ol-layerswitcher")+" ol-unselectable ol-control ol-collapsed"),this.button=$("<button>").addClass("iconfont").on("touchstart",function(t){n.toggleClass("ol-collapsed"),t.preventDefault(),i.overflow()}).click(function(){n.toggleClass("ol-forceopen").addClass("ol-collapsed"),i.overflow()}).appendTo(n),e.mouseover&&$(n).mouseleave(function(){n.addClass("ol-collapsed")}).mouseover(function(){n.removeClass("ol-collapsed")}),this.topv=$("<div>").addClass("ol-switchertopdiv").click(function(){i.overflow("+50%")}).appendTo(n),this.botv=$("<div>").addClass("ol-switcherbottomdiv").click(function(){i.overflow("-50%")}).appendTo(n)),this.panel_=$("<ul>").addClass("panel").appendTo(n),this.panel_.on("mousewheel DOMMouseScroll onmousewheel",function(t){i.overflow(Math.max(-1,Math.min(1,t.originalEvent.wheelDelta||-t.originalEvent.detail)))&&(t.stopPropagation(),t.preventDefault())}),this.showHeader&&(this.header_=$("<li>").addClass("ol-header").appendTo(this.panel_)),ol.control.Control.call(this,{element:n.get(0),target:e.target}),this.target=e.target},ol.inherits(ol.control.LayerSwitcher,ol.control.Control),ol.control.LayerSwitcher.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"展开或收起"},ol.control.LayerSwitcher.prototype.setMap=function(t){ol.control.Control.prototype.setMap.call(this,t),this.drawPanel(),this.map_&&(this.map_.getLayers().un("change",this.drawPanel,this),this.map_.un("change:size",this.overflow,this)),this.map_=t,t&&(this.map_.getLayers().on("change",this.drawPanel,this),t.on("change:size",this.overflow,this))},ol.control.LayerSwitcher.prototype.setHeader=function(t){this.header_.html(t)},ol.control.LayerSwitcher.prototype.overflow=function(t){if(this.button){if("none"==this.panel_.css("display"))return void $(this.element).css("height","auto");var e=$(this.element).outerHeight(),i=this.panel_.outerHeight(),n=this.button.position().top+this.button.outerHeight(!0),r=this.panel_.position().top-n;if(i>e-n){switch($(this.element).css("height","100%"),t){case 1:r+=2*$("li",this.panel_).height();break;case-1:r-=2*$("li",this.panel_).height();break;case"+50%":r+=Math.round(e/2);break;case"-50%":r-=Math.round(e/2)}return r+i<=e-3*n/2?(r=e-3*n/2-i,this.botv.hide()):this.botv.css("display",""),r>=0?(r=0,this.topv.hide()):this.topv.css("display",""),this.panel_.css("top",r+"px"),!0}return $(this.element).css("height","auto"),this.panel_.css("top","0px"),this.botv.hide(),this.topv.hide(),!1}return!1},ol.control.LayerSwitcher.prototype.viewChange=function(t){},ol.control.LayerSwitcher.prototype.drawPanel=function(t){if(this.getMap()){var e=this;setTimeout(function(){e.drawPanel_()},2e3)}},ol.control.LayerSwitcher.prototype.drawPanel_=function(t){$("li",this.panel_).not(".ol-header").remove(),this.drawList(this.panel_,this.getMap().getLayers())},ol.control.LayerSwitcher.prototype.switchLayerVisibility=function(t,e){t.get("baseLayer")?(t.getVisible()||t.setVisible(!0),e.forEach(function(e){t!==e&&e.get("baseLayer")&&e.getVisible()&&e.setVisible(!1)})):t.setVisible(!t.getVisible())},ol.control.LayerSwitcher.prototype.testLayerVisibility=function(t){if(this.map_){var e=this.map_.getView().getResolution();if(t.getMaxResolution()<=e||t.getMinResolution()>=e)return!1;var i=t.getExtent();if(i){var n=this.map_.getView().calculateExtent(this.map_.getSize());return ol.extent.intersects(n,i)}return!0}return!0},ol.control.LayerSwitcher.prototype.dragOrdering_=function(t){var e=t.data;switch(t.type){case"mousedown":case"touchstart":t.stopPropagation(),(e={self:e.self,elt:$(t.currentTarget).closest("li"),start:!0,element:e.self.element,panel:e.self.panel_,pageY:t.pageY||t.originalEvent.touches[0].pageY}).elt.parent().addClass("drag"),$(document).on("mouseup mousemove touchend touchcancel touchmove",e,e.self.dragOrdering_);break;case"touchcancel":case"touchend":case"mouseup":if(e.target){var i=e.layer,n=e.target;if(i&&n){for(var r,o=(r=e.group?e.group.getLayers():e.self.getMap().getLayers()).getArray(),s=0;s<o.length;s++)if(o[s]==i){r.removeAt(s);break}for(var a=0;a<o.length;a++)if(o[a]==n){s>a?r.insertAt(a,i):r.insertAt(a+1,i);break}}}$("li",e.elt.parent()).removeClass("dropover"),e.elt.removeClass("drag"),e.elt.parent().removeClass("drag"),$(e.element).removeClass("drag"),e.div&&e.div.remove(),$(document).off("mouseup mousemove touchend touchcancel touchmove",e.self.dragOrdering_);break;default:if(e.start&&Math.abs(e.pageY-(t.pageY||t.originalEvent.touches[0].pageY))>2&&(e.start=!1,e.elt.addClass("drag"),e.layer=e.elt.data("layer"),e.target=!1,e.group=e.elt.parent().parent().data("layer"),e.div=$("<li>").appendTo(e.panel),e.div.css({position:"absolute","z-index":1e4,left:e.elt.position().left,opacity:.5}).html($(e.elt).html()).addClass("ol-dragover").width(e.elt.outerWidth()).height(e.elt.height()),$(e.element).addClass("drag")),!e.start){t.preventDefault(),t.stopPropagation(),e.div.css({top:(t.pageY||t.originalEvent.touches[0].pageY)-e.panel.offset().top+5});var l;(l=t.pageX?$(t.target):$(document.elementFromPoint(t.originalEvent.touches[0].clientX,t.originalEvent.touches[0].clientY))).hasClass("ol-switcherbottomdiv")?e.self.overflow(-1):l.hasClass("ol-switchertopdiv")&&e.self.overflow(1),l.is("li")||(l=l.closest("li")),l.hasClass("dropover")||$("li",e.elt.parent()).removeClass("dropover"),l.parent().hasClass("drag")&&l.get(0)!==e.elt.get(0)?((n=l.data("layer"))&&!n.get("allwaysOnTop")==!e.layer.get("allwaysOnTop")?(l.addClass("dropover"),e.target=n):e.target=!1,e.div.show()):(e.target=!1,l.get(0)===e.elt.get(0)?e.div.hide():e.div.show()),e.target?e.div.removeClass("forbidden"):e.div.addClass("forbidden")}}},ol.control.LayerSwitcher.prototype.dragOpacity_=function(t){var e=t.data;switch(t.type){case"mousedown":case"touchstart":t.stopPropagation(),t.preventDefault(),e.start=t.pageX||t.originalEvent.touches[0].pageX,e.elt=$(t.target),e.layer=e.elt.closest("li").data("layer"),e.self.dragging_=!0,$(document).on("mouseup touchend mousemove touchmove touchcancel",e,e.self.dragOpacity_);break;case"touchcancel":case"touchend":case"mouseup":$(document).off("mouseup touchend mousemove touchmove touchcancel",e.self.dragOpacity_),e.layer.setOpacity(e.opacity),e.self.dragging_=!1,e=!1;break;default:var i=t.pageX||t.originalEvent.touches[0].pageX,n=Math.max(0,Math.min(1,(i-e.elt.parent().offset().left)/e.elt.parent().width()));e.elt.css("left",100*n+"%"),e.opacity=n,e.layer.setOpacity(n)}},ol.control.LayerSwitcher.prototype.drawList=function(t,e){function i(t){t.stopPropagation(),t.preventDefault();var e=$(this).closest("ul").parent();e.data("layer")?(e.data("layer").getLayers().remove($(this).closest("li").data("layer")),0==e.data("layer").getLayers().getLength()&&i.call($(".layerTrash",e),t)):n.map_.removeLayer($(this).closest("li").data("layer"))}for(var n=this,r=e.getArray(),o=function(t){t.stopPropagation(),t.preventDefault();var i=$(this).parent().parent().data("layer");n.switchLayerVisibility(i,e),document.getElementById("layer-checkbox-"+i.get("id")).checked=i.getVisible(),"baseLayers"!=i.get("id")&&i instanceof ol.layer.Group&&i.getLayers()&&i.getLayers().getLength()>0&&i.getLayers().forEach(function(t){t.setVisible(i.getVisible());var e="layer-checkbox-"+t.get("id");document.getElementById(e)&&(document.getElementById(e).checked=i.getVisible()),t instanceof ol.layer.Group&&t.getLayers()&&t.getLayers().getLength()>0&&t.getLayers().forEach(function(t){t.setVisible(i.getVisible());var e="layer-checkbox-"+t.get("id");document.getElementById(e)&&(document.getElementById(e).checked=t.getVisible())},this)},this)},s=r.length-1;s>=0;s--){var a=r[s];if(!1!==a.get("displayInLayerSwitcher")){var l=$("<li>").addClass((a.getVisible()?"visible ":" ")+(a.get("baseLayer")?"baselayer":"")).data("layer",a).appendTo(t),h=$("<div>").addClass("ol-layerswitcher-buttons").appendTo(l),c=$("<div>").addClass("li-content").appendTo(l),u="layer-checkbox-"+a.get("id"),f=$("<input id='"+u+"'>").attr("type",a.get("baseLayer")?"radio":"checkbox").attr("checked",a.getVisible()).on("click",o);if(a.get("baseLayer")&&f.attr("name","baseLayer-radio"),f.appendTo(c),$("<label>").text(a.get("title")||a.get("name")).attr("title",a.get("title")||a.get("name")).on("click",o).attr("unselectable","on").css("user-select","none").on("selectstart",!1).appendTo(c),this.reordering&&(s<r.length-1&&(a.get("allwaysOnTop")||!r[s+1].get("allwaysOnTop"))||s>0&&(!a.get("allwaysOnTop")||r[s-1].get("allwaysOnTop")))&&$("<div>").addClass("layerup").on("mousedown touchstart",{self:this},this.dragOrdering_).attr("title",this.tip.up).appendTo(h),a.getLayers){var g=0;a.getLayers().forEach(function(t){!1!==t.get("displayInLayerSwitcher")&&g++}),g&&$("<div>").addClass(a.get("openInLayerSwitcher")?"collapse-layers":"expend-layers").click(function(){var t=$(this).closest("li").data("layer");t.set("openInLayerSwitcher",!t.get("openInLayerSwitcher")),!0===t.get("openInLayerSwitcher")?(n.drawList($("<ul>").appendTo($(this).closest("li")),t.getLayers()),$(this).removeClass("expend-layers"),$(this).addClass("collapse-layers")):($(this).closest("li").find("ul").remove(),$(this).removeClass("collapse-layers"),$(this).addClass("expend-layers"))}).attr("title",this.tip.plus).appendTo(h)}if(this.oninfo&&$("<div>").addClass("layerInfo").on("click",function(t){t.stopPropagation(),t.preventDefault(),n.oninfo($(this).closest("li").data("layer"))}).attr("title",this.tip.info).appendTo(h),this.hastrash&&!a.get("noSwitcherDelete")&&$("<div>").addClass("layerTrash").on("click",i).attr("title",this.tip.trash).appendTo(h),this.hasextent&&r[s].getExtent()){var d=r[s].getExtent();4==d.length&&d[0]<d[2]&&d[1]<d[3]&&$("<div>").addClass("layerExtent").on("click",function(t){t.stopPropagation(),t.preventDefault(),n.onextent?n.onextent($(this).closest("li").data("layer")):n.map_.getView().fit($(this).closest("li").data("layer").getExtent(),n.map_.getSize())}).attr("title",this.tip.extent).appendTo(h)}if(this.show_progress&&a instanceof ol.layer.Tile){var p=$("<div>").addClass("layerswitcher-progress").appendTo(c);this.setprogress_(a),a.layerswitcher_progress=$("<div>").appendTo(p)}var m=$("<div>").addClass("layerswitcher-opacity").on("click",function(t){t.stopPropagation(),t.preventDefault();var e=t.pageX||t.originalEvent.touches[0].pageX,i=Math.max(0,Math.min(1,(e-$(this).offset().left)/$(this).width()));$(this).closest("li").data("layer").setOpacity(i)}).appendTo(c);$("<div>").addClass("layerswitcher-opacity-cursor").on("mousedown touchstart",{self:this},n.dragOpacity_).css("left",100*a.getOpacity()+"%").appendTo(m),a.getLayers&&!0===a.get("openInLayerSwitcher")&&this.drawList($("<ul>").appendTo(l),a.getLayers())}}t==this.panel_&&this.overflow()},ol.control.LayerSwitcher.prototype.setprogress_=function(t){function e(){n===i?(n=i=0,t.layerswitcher_progress.width(0)):t.layerswitcher_progress.css("width",(i/n*100).toFixed(1)+"%")}if(!t.layerswitcher_progress){var i=0,n=0;t.getSource().on("tileloadstart",function(){n++,e()}),t.getSource().on("tileloadend",function(){i++,e()}),t.getSource().on("tileloaderror",function(){i++,e()})}},ol.control.LayerSwitcherImage=function(t){(t=t||{}).switcherClass="ol-layerswitcher-image",!1!==t.mouseover&&(t.mouseover=!0),ol.control.LayerSwitcher.call(this,t)},ol.inherits(ol.control.LayerSwitcherImage,ol.control.LayerSwitcher),ol.control.LayerSwitcherImage.prototype.drawList=function(t,e){var i=this,n=function(t){t.preventDefault();var e=$(this).data("layer"),n=$(this).data("layers");i.switchLayerVisibility(e,n),"touchstart"==t.type&&$(i.element).addClass("ol-collapsed"),document.getElementById("layer-checkbox-"+e.get("id")).checked=e.getVisible(),$(".ol-imgcontainer").removeClass("select"),e.getVisible()&&$(this).addClass("select")};t.css("height","auto");var r=function(e,i){if(!1!==e.get("displayInLayerSwitcher")&&e.getPreviewZ){var r=e.getPreviewZ?e.getPreviewZ():["none"];if("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk6QAAJOkBUCTn+AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANeSURBVHic7ZpPiE1RHMc/780MBhkik79JSUlIUbOxI+wkI2yRhYSUlJLNpJF/xcpiJBmZGBZsNM1CkmhKITGkGbH0/BuPmXnP4rxbb/TOn3fvOffeec6nfqvb/b7f93fveeec37ng8Xg8Ho/nf6Uu4d+fDswFssCvhHOJhaXAMeApMAQUyyIPPAdOAiuTStAVy4EHjDWsix5gdRLJ2mY34ulWYz6IEeA4kIk9awtkgTOEM/5vdAKT4k0/Ou3YMR/ELcbRm9AKFLBbgCJwNE4TYZkJfMG++SIwDCyLz0o4bI17WdyJz0r1TAZ+oDcxCBwAFgIzEIuhvcBbg3sLwOK4DFXLFvQGniCGSSUagS4DjUPOHESkA3XiOWCORqMR6Nfo9DjI3QqPUSd+ylBnv0Zn0GrWFvmIOvGNhjqrNDp/EAutyFgRKUM2tgO+Gur81FxvAKYZaimxXYBvmuuLDHWWaK4X0RfJCNsF6NdcbzXU2a65PohYFKWOc+jn8PUajbWIXaBKp9NB7lZYh34OzwFbFfd/NtDYYSth27urLGIm0M31AL3APWAAmIooymaDnPIl/Vz4NN1yHrd7gcvxWQnHAuA3bsyPop8hUsE13BSgK04TUViBeFo2zedJ8S6wElexW4D2eNOPTjNi6WvD/DtEr8E6tk6GGoAmxFY2iFHE9NZiQf8gogiB9gTEH23izAZuE77vHyU+ANucO1QwD3hD/MbLowAcdm20EmkwXx4n3NodS9rMB2HabYpEWs0HcRqHp0fNwAvJD+eBTZr7p6BvmQVxUaEzEbiruNfJekH15L8jtrEm7JJolEcOmKXRqQOuKDQuY7HZY8s8iNfzkSLxIuI43FTrkkLnOlBfRW4VsWk+oAX5weknxFAxJQNckGgVgZuIRVoomoGXEmGTMa+iQ6K7M4SW7k24QYgiuDQPYinbhugiF4H3RGtzZYCzyIvQXfpNI1ybLyeLpf5+iTbkRbiP2EcocTHm4+YI8iI8RFHwWjAfsA95Q+YZFU6wasl8wB7kReijtNbIILa0vcg/PRlGfPQwHmlCviDqAzaA+OREtzqr1ejOIDorxlNEjTGUBV4nnUWCvAJxGDlA8q9j3DEArAn2zvXAfOwfl6eVAmJrPpJ0Ih6Px+PxeJLjLwPul3vj5d0eAAAAAElFTkSuQmCC"!=r){var o=$("<li>").addClass("ol-imgcontainer").data("layer",e).data("layers",i).click(n).on("touchstart",n);e.getVisible()&&o.addClass("select");for(var s=0;s<r.length;s++)$("<img>").attr("src",r[s]).appendTo(o);$("<p>").text(e.get("title")||e.get("name")).appendTo(o),o.appendTo(t)}}};e.forEach(function(t,e){t instanceof ol.layer.Group&&"baseLayers"===t.get("id")&&t.getLayers().forEach(function(e,i){r(e,t.getLayers())})})},ol.control.LayerSwitcherImage.prototype.overflow=function(){},ol.control.Overlay=function(t){t||(t={});var e=$("<div>").addClass("ol-unselectable ol-overlay");t.className&&e.addClass(t.className),ol.control.Control.call(this,{element:e.get(0),target:t.target});var i=this;t.hideOnClick&&e.click(function(){i.hide()}),this.set("closeBox",t.closeBox),this.set("onclose",t.onclose),this._timeout=!1,this.setContent(t.content)},ol.inherits(ol.control.Overlay,ol.control.Control),ol.control.Overlay.prototype.setContent=function(t){var e=this;if(t){var i=$(this.element);if(i.html(t),this.get("closeBox")){var n=$("<div>").addClass("ol-closebox").click(function(){e.hide(),e.get("onclose")&&e.get("onclose").call(e)});i.prepend(n)}}},ol.control.Overlay.prototype.show=function(t,e){var i=this,n=$(this.element).show();e?(this.center_=this.getMap().getPixelFromCoordinate(e),n.css({top:this.center_[1],left:this.center_[0]})):(this.center_=!1,n.css({top:"",left:""})),this.setContent(t),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){n.addClass("ol-visible").css({top:"",left:""}),i.dispatchEvent({type:"change:visible",visible:!0,element:i.element})},10),i.dispatchEvent({type:"change:visible",visible:!1,element:i.element})},ol.control.Overlay.prototype.hide=function(){var t=$(this.element).removeClass("ol-visible");this.center_&&(t.css({top:this.center_[1],left:this.center_[0]}),this.center_=!1),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){t.hide()},500),this.dispatchEvent({type:"change:visible",visible:!1,element:this.element})},ol.control.Overlay.prototype.toggle=function(){this.getVisible()?this.hide():this.show()},ol.control.Overlay.prototype.getVisible=function(){return"none"!=$(this.element).css("display")},ol.control.Overlay.prototype.setClass=function(t){var e=$(this.element).hasClass("ol-visible");$(this.element).removeClass().addClass("ol-unselectable ol-overlay"+(e?" ol-visible ":" ")+t)},ol.control.Toggle=function(t){t=t||{};var e=this;this.interaction_=t.interaction,this.interaction_&&this.interaction_.on("change:active",function(t){e.setActive(!t.oldValue)}),t.toggleFn&&(t.onToggle=t.toggleFn),t.handleClick=function(){e.toggle(),t.onToggle&&t.onToggle.call(e,e.getActive())},t.className=(t.className||"")+" ol-toggle",ol.control.Button.call(this,t),this.set("title",t.title),this.set("autoActivate",t.autoActivate),this.set("inactive",t.inactive),t.bar&&(this.subbar_=t.bar,this.subbar_.setTarget(this.element),$(this.subbar_.element).addClass("ol-option-bar")),this.setActive(t.active)},ol.inherits(ol.control.Toggle,ol.control.Button),ol.control.Toggle.prototype.setMap=function(t){!t&&this.getMap()&&(this.interaction_&&this.getMap().removeInteraction(this.interaction_),this.subbar_&&this.getMap().removeControl(this.subbar_)),ol.control.Control.prototype.setMap.call(this,t),t&&(this.interaction_&&t.addInteraction(this.interaction_),this.subbar_&&t.addControl(this.subbar_))},ol.control.Toggle.prototype.getSubBar=function(){return this.subbar_},ol.control.Toggle.prototype.getActive=function(){return $(this.element).hasClass("ol-active")},ol.control.Toggle.prototype.toggle=function(){this.getActive()?this.setActive(!1):this.setActive(!0)},ol.control.Toggle.prototype.setActive=function(b){if(this.getActive()!=b&&(b?$(this.element).addClass("ol-active"):$(this.element).removeClass("ol-active"),this.interaction_&&this.interaction_.setActive(b),this.subbar_&&this.subbar_.setActive(b),this.dispatchEvent({type:"change:active",key:"active",oldValue:!b,active:b}),!b&&this.get("inactive"))){var inactiveEvent=this.get("inactive");inactiveEvent.indexOf("(")<0&&(inactiveEvent+="()"),eval(inactiveEvent)}},ol.control.Toggle.prototype.setInteraction=function(t){this.interaction_=t},ol.control.Toggle.prototype.getInteraction=function(){return this.interaction_},ol.layer.Layer.prototype.getPreviewZ=function(t,e){if(this.get("preview"))return[this.get("preview")];var i=this.getExtent();return t||(t=[21020,6355964]),i&&!ol.extent.containsCoordinate(i,t)&&(t=[(i[0]+i[2])/2,(i[1]+i[3])/2]),this.getSource?[this.getSource().getPreviewZ(t,e)]:[]},ol.Overlay.Popup=function(t){var e=this,i=$("<div>");this.element=t.element=i.get(0),this.offsetBox=t.offsetBox,$("<div>").addClass("anchor").appendTo(i);var n=$("<div>").addClass("ol-overlaycontainer-stopevent").appendTo(i);this.content=$("<div>").addClass("content").appendTo(n).get(0),this.closeBox=t.closeBox,this.onclose=t.onclose,this.onshow=t.onshow,$("<button>").addClass("closeBox").addClass(t.closeBox?"hasclosebox":"").prependTo(n).click(function(){e.hide()}),t.stopEvent=!0,n.on("mousedown touchstart",function(t){t.stopPropagation()}),ol.Overlay.call(this,t),this.setPositioning(t.positioning),this.setPopupClass(t.popupClass),this.modal=t.modal,$(this.element).parent().css("z-index",1001)},ol.inherits(ol.Overlay.Popup,ol.Overlay),ol.Overlay.Popup.prototype.getClassPositioning=function(){var t="",e=this.getPositioning();return/bottom/.test(e)&&(t+="ol-popup-bottom "),/top/.test(e)&&(t+="ol-popup-top "),/left/.test(e)&&(t+="ol-popup-left "),/right/.test(e)&&(t+="ol-popup-right "),/^center/.test(e)&&(t+="ol-popup-middle "),/center$/.test(e)&&(t+="ol-popup-center "),t},ol.Overlay.Popup.prototype.setModal=function(t){this.modal=t},ol.Overlay.Popup.prototype.setClosebox=function(t){this.closeBox=t,t?$(this.element).addClass("hasclosebox"):$(this.element).removeClass("hasclosebox")},ol.Overlay.Popup.prototype.setPopupClass=function(t){$(this.element).removeClass().addClass("ol-popup "+(t||"default")+" "+this.getClassPositioning()+(this.closeBox?" hasclosebox":""))},ol.Overlay.Popup.prototype.addPopupClass=function(t){$(this.element).addClass(t)},ol.Overlay.Popup.prototype.removePopupClass=function(t){$(this.element).removeClass(t)},ol.Overlay.Popup.prototype.setPositioning=function(t){void 0!==t&&(/auto/.test(t)?(this.autoPositioning=t.split("-"),1==this.autoPositioning.length&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,"center"==(t=t.replace(/auto/g,"center"))&&(t="bottom-center"),this.setPositioning_(t))},ol.Overlay.Popup.prototype.setPositioning_=function(t){ol.Overlay.prototype.setPositioning.call(this,t),$(this.element).removeClass("ol-popup-top ol-popup-bottom ol-popup-left ol-popup-right ol-popup-center ol-popup-middle"),$(this.element).addClass(this.getClassPositioning())},ol.Overlay.Popup.prototype.show=function(t,e){e||"string"!=typeof t||(e=t,t=null);var i=this,n=this.getMap();if(n&&(e&&e!==this.prevHTML&&(this.prevHTML=e,$(this.content).html("").append(e),$("*",this.content).load(function(){n.renderSync()})),t)){if(this.autoPositioning){var r=n.getPixelFromCoordinate(t),o=n.getSize(),s=[];"auto"==this.autoPositioning[0]?s[0]=r[1]<o[1]/3?"top":"bottom":s[0]=this.autoPositioning[0],s[1]=r[0]<2*o[0]/3?"left":"right",this.setPositioning_(s[0]+"-"+s[1]),this.offsetBox&&this.setOffset([this.offsetBox["left"==s[1]?2:0],this.offsetBox["top"==s[0]?3:1]])}this.setPosition(t),$(this.element).parent().show(),"function"==typeof this.onshow&&this.onshow(),this._tout=setTimeout(function(){$(i.element).addClass("visible")},0),this.modal&&this.enableModality_()}},ol.Overlay.Popup.prototype.hide=function(){void 0!=this.getPosition()&&("function"==typeof this.onclose&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),$(this.element).removeClass("visible"),this.modal&&this.disableModality_())},ol.Overlay.Popup.prototype.enableModality_=function(){this.modality||(this.modality=$('<div id="'+$(this.element).uniqueId().attr("id")+'_modal" class="ui-widget-overlay ui-dialog-mask"></div>').appendTo("body").css("z-index",$(this.element).parent().css("z-index")-1))},ol.Overlay.Popup.prototype.disableModality_=function(){this.modality&&($("body").children("div.ui-widget-overlay ui-dialog-mask").remove(),this.modality.remove(),this.modality=null)},ol.source.Source.prototype.getPreviewZ=function(t,e){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk6QAAJOkBUCTn+AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANeSURBVHic7ZpPiE1RHMc/780MBhkik79JSUlIUbOxI+wkI2yRhYSUlJLNpJF/xcpiJBmZGBZsNM1CkmhKITGkGbH0/BuPmXnP4rxbb/TOn3fvOffeec6nfqvb/b7f93fveeec37ng8Xg8Ho/nf6Uu4d+fDswFssCvhHOJhaXAMeApMAQUyyIPPAdOAiuTStAVy4EHjDWsix5gdRLJ2mY34ulWYz6IEeA4kIk9awtkgTOEM/5vdAKT4k0/Ou3YMR/ELcbRm9AKFLBbgCJwNE4TYZkJfMG++SIwDCyLz0o4bI17WdyJz0r1TAZ+oDcxCBwAFgIzEIuhvcBbg3sLwOK4DFXLFvQGniCGSSUagS4DjUPOHESkA3XiOWCORqMR6Nfo9DjI3QqPUSd+ylBnv0Zn0GrWFvmIOvGNhjqrNDp/EAutyFgRKUM2tgO+Gur81FxvAKYZaimxXYBvmuuLDHWWaK4X0RfJCNsF6NdcbzXU2a65PohYFKWOc+jn8PUajbWIXaBKp9NB7lZYh34OzwFbFfd/NtDYYSth27urLGIm0M31AL3APWAAmIooymaDnPIl/Vz4NN1yHrd7gcvxWQnHAuA3bsyPop8hUsE13BSgK04TUViBeFo2zedJ8S6wElexW4D2eNOPTjNi6WvD/DtEr8E6tk6GGoAmxFY2iFHE9NZiQf8gogiB9gTEH23izAZuE77vHyU+ANucO1QwD3hD/MbLowAcdm20EmkwXx4n3NodS9rMB2HabYpEWs0HcRqHp0fNwAvJD+eBTZr7p6BvmQVxUaEzEbiruNfJekH15L8jtrEm7JJolEcOmKXRqQOuKDQuY7HZY8s8iNfzkSLxIuI43FTrkkLnOlBfRW4VsWk+oAX5weknxFAxJQNckGgVgZuIRVoomoGXEmGTMa+iQ6K7M4SW7k24QYgiuDQPYinbhugiF4H3RGtzZYCzyIvQXfpNI1ybLyeLpf5+iTbkRbiP2EcocTHm4+YI8iI8RFHwWjAfsA95Q+YZFU6wasl8wB7kReijtNbIILa0vcg/PRlGfPQwHmlCviDqAzaA+OREtzqr1ejOIDorxlNEjTGUBV4nnUWCvAJxGDlA8q9j3DEArAn2zvXAfOwfl6eVAmJrPpJ0Ih6Px+PxeJLjLwPul3vj5d0eAAAAAElFTkSuQmCC"},ol.source.Tile.prototype.getPreviewZ=function(t,e){t||(t=[21020,6355964]),e||(e=this.getTileGrid().getMinZoom());var i=this.getTileGrid().getTileCoordForCoordAndZ(t,e);return this.getTileUrlFunction().call(this,i,this.getProjection())},com.leto.map.overlay.OverlayPanel=function(){},com.leto.map.overlay.OverlayPanel.init=function(t){var e=t.id,i=t.targetId,n=t.hideEvent;return $("#"+e).puioverlaypanel({target:"#"+i,showEffect:"fade",hideEffect:"fade",at:"right top",dismissable:!1,defaultShow:!0,preShow:function(t,e){com.leto.map.overlay.OverlayPanel.hide()},onHide:n})},com.leto.map.overlay.OverlayPanel.hide=function(t){$(".ui-overlaypanel").hide()},com.leto.map.overlay.OverlayPopup=function(){},com.leto.map.overlay.OverlayPopup.init=function(options){var id=options.id,modal=options.modal,closeBox=options.closeBox,closeCallEvent=options.closeCallEvent;id||(id=$(this).uniqueId().attr("id")),null!=modal&&modal||(modal=!1),null!=closeBox&&!1===closeBox||(closeBox=!0);var overlayPopup=com.leto.map.LetoMap.coreMap.getOlMap().getOverlayById(id);return overlayPopup?(overlayPopup.setModal(modal),overlayPopup.setClosebox(closeBox)):(overlayPopup=new ol.Overlay.Popup({id:id,popupClass:"default",closeBox:closeBox,onclose:function(){if(closeCallEvent)if("function"===$.type(closeCallEvent))closeCallEvent.call(this);else{var subFunc=closeCallEvent;subFunc.indexOf("(")<0&&(subFunc+="()"),eval(subFunc)}},positioning:"bottom-left",autoPan:!0,autoPanAnimation:{duration:250},modal:modal}),com.leto.map.LetoMap.coreMap.getOlMap().addOverlay(overlayPopup)),overlayPopup},com.leto.map.overlay.OverlayPopup.hide=function(t){if(t&&t.id){var e=com.leto.map.LetoMap.coreMap.getOlMap().getOverlayById(t.id);e&&e.hide()}},com.leto.map.interaction.Draw=function(t){t||(t={});var e,i=t.geoType;"Box"===i&&(i="Circle",e=ol.interaction.Draw.createBox());var n=new ol.source.Vector({wrapX:!1});this.features_=t.features,this.source_=n,this.type_=i,this.geometryFunction_=e,this.select_=t.select,this.event_=t.event,this.draw=new ol.interaction.Draw({id:"interactionDraw",features:this.features_,source:this.source_,type:this.type_,geometryFunction:this.geometryFunction_})},ol.inherits(com.leto.map.interaction.Draw,ol.interaction.Interaction),com.leto.map.interaction.Draw.prototype.setMap=function(t){this.getMap()&&this.getMap().removeInteraction(this.draw),ol.interaction.Interaction.prototype.setMap.call(this,t),this.getMap()&&(this.getMap().addInteraction(this.draw),this.draw.on("drawstart",this.handleDrawStartEvent,this),this.draw.on("drawend",this.handleDrawEndEvent,this))},com.leto.map.interaction.Draw.prototype.handleDrawStartEvent=function(t){this.draw.set("drawing",!0)},com.leto.map.interaction.Draw.prototype.handleDrawEndEvent=function(t){if(window.setTimeout(function(){this.draw.set("drawing",!1),this.select_&&this.select_.set("enable",!0)}.bind(this),1e3),this.event_){var e=this.event_,i=t.feature;i.set("geoType",this.type_),"function"===$.type(e)?e.call(this,i):"string"===$.type(e)&&com.leto.map.events.CustomEvent(e,i)}this.clear()},com.leto.map.interaction.Draw.prototype.getDraw=function(){return this.draw},com.leto.map.interaction.Draw.prototype.clear=function(){this.features_=null,this.source_=null,this.type_=null,this.geometryFunction_=null,this.select_=null,this.event_=null,this.draw&&(this.draw.un("drawstart",this.handleDrawStartEvent,this),this.draw.un("drawend",this.handleDrawEndEvent,this),this.getMap()&&this.getMap().removeInteraction(this.draw),this.draw=null)},com.leto.map.interaction.Modify=function(t){t||(t={}),this.modify=new ol.interaction.Modify({id:"interactionModify",features:t.features,deleteCondition:function(t){return ol.events.condition.shiftKeyOnly(t)&&ol.events.condition.singleClick(t)}})},ol.inherits(com.leto.map.interaction.Modify,ol.interaction.Interaction),com.leto.map.interaction.Modify.prototype.setMap=function(t){this.getMap()&&this.getMap().removeInteraction(this.modify),ol.interaction.Interaction.prototype.setMap.call(this,t),this.getMap()&&(this.getMap().addInteraction(this.modify),this.modify.on("modifystart",this.handleModifyStartEvent,this),this.modify.on("modifyend",this.handleModifyEndEvent,this))},com.leto.map.interaction.Modify.prototype.handleModifyStartEvent=function(t){this.modify.set("drawing",!0)},com.leto.map.interaction.Modify.prototype.handleModifyEndEvent=function(t){if(window.setTimeout(function(){this.modify.set("drawing",!1)}.bind(this),1e3),this.modify.get("event")){var e=this.modify.get("event");"function"===$.type(e)?e.call(this,t.features.getArray()[0]):"string"===$.type(e)&&com.leto.map.events.CustomEvent(e,t.features.getArray()[0])}this.clear()},com.leto.map.interaction.Modify.prototype.getModify=function(){return this.modify},com.leto.map.interaction.Modify.prototype.clear=function(){this.modify&&(this.modify.un("modifystart",this.handleModifyStartEvent,this),this.modify.un("modifyend",this.handleModifyEndEvent,this),this.getMap()&&this.getMap().removeInteraction(this.modify),this.modify=null)},com.leto.map.interaction.Select=function(t){t||(t={}),this.layers=t.layers,this.select=new ol.interaction.Select({enable:!1,hitTolerance:2,condition:function(t){return"singleclick"===t.type&&select.getProperties().enable},layers:layers})},ol.inherits(com.leto.map.interaction.Select,ol.interaction.Interaction),com.leto.map.interaction.Select.prototype.setMap=function(t){this.getMap()&&this.getMap().removeInteraction(this.select),ol.interaction.Interaction.prototype.setMap.call(this,t),this.getMap()&&(this.getMap().addInteraction(this.select),this.select.on("select",this.handleSelectEvent,this))},com.leto.map.interaction.Select.prototype.handleSelectEvent=function(t){if(t.selected&&t.selected.length>0&&this.select.get("event")){var e=this.select.get("event");"function"===$.type(e)?e.call(this,t.selected[0]):"string"===$.type(e)&&com.leto.map.events.CustomEvent(e,t.selected[0])}this.clear()},com.leto.map.interaction.Select.prototype.getSelect=function(){return this.select},com.leto.map.interaction.Select.prototype.getLayers=function(){return this.layers},com.leto.map.interaction.Select.prototype.setLayers=function(t){this.layers=t},com.leto.map.interaction.Select.prototype.clear=function(){this.layers=null,this.select&&(this.select.un("select",this.handleSelectEvent,this),this.getMap()&&this.getMap().removeInteraction(this.select),this.select=null)},com.leto.map.basecomps.mainbar,com.leto.map.basecomps.Bar=function(){},com.leto.map.basecomps.Bar.init=function(options){options=options||{};var datas=[],func=function(callEvent,data){var subFunc=callEvent;subFunc.indexOf("(")<0&&(data?subFunc=subFunc+"("+data+")":subFunc+="()"),eval(subFunc)};if(options.data&&options.data.length>0)for(var i=0;i<options.data.length;i++)!function(t){for(var e=options.data[t],i=[],n=e.childs?e.childs.length:0,r=0;r<n;r++)!function(t){var n=e.childs[t],r=null;r=null==n.type||"Button"==n.type?"Button":"TextButton",i[t]=new ol.control[r]({id:n.id,html:$("#"+n.templateId).html(),className:n.className,title:n.name,handleClick:function(t){n.event&&func(n.event,null)}})}(r);var o=null;i.length>0&&(o=new ol.control.Bar({toggleOne:!0,controls:i})),datas[t]=new ol.control.Toggle({id:e.id,html:$("#"+e.templateId).html(),className:e.className,title:e.name,bar:o,inactive:e.inactive,onToggle:function(t){o&&com.leto.map.overlay.OverlayPanel.hide(),e.init&&!e.inited?(func(e.init,t),e.inited=!0):t&&e.event&&func(e.event,t)}})}(i);com.leto.map.basecomps.mainbar=new ol.control.Bar({toggleOne:!0,autoDeactivate:!0,controls:datas}),com.leto.map.basecomps.mainbar.setPosition("top-right"),com.leto.map.LetoMap.coreMap.addControl(com.leto.map.basecomps.mainbar)},com.leto.map.basecomps.Bar.hideToolbar=function(){},com.leto.map.basecomps.LegendWindow=function(){},com.leto.map.basecomps.LegendWindow.window,com.leto.map.basecomps.LegendWindow.init=function(){com.leto.map.basecomps.LegendWindow.window||(com.leto.map.basecomps.LegendWindow.window=new ol.control.Overlay({closeBox:!0,className:"slide-left menu",content:$("#legendTemplate2").html(),onclose:function(){$(".content-search-open").length?$(".content-search").removeClass("content-search-open"):$(".content-search").addClass("content-search-open")}}),com.leto.map.LetoMap.coreMap.addControl(com.leto.map.basecomps.LegendWindow.window),com.leto.map.basecomps.LegendWindow.createLayerSwitcher())},com.leto.map.basecomps.LegendWindow.toggle=function(){com.leto.map.basecomps.LegendWindow.window&&com.leto.map.basecomps.LegendWindow.window.toggle(),$(".content-search-open").length?$(".content-search").removeClass("content-search-open"):$(".content-search").addClass("content-search-open")},com.leto.map.basecomps.LegendWindow.createLayerSwitcher=function(){var t=new ol.control.LayerSwitcher({target:$(".layerSwitcher").get(0),reordering:!1,showHeader:!0});com.leto.map.LetoMap.coreMap.addControl(t)},com.leto.map.basecomps.QuickPosition=function(){},com.leto.map.basecomps.QuickPosition.init=function(){if(null!=com.leto.map.config.QUICKPOSITION_MENU_URL){var t=this;$.ajax({type:"GET",url:com.leto.map.config.QUICKPOSITION_MENU_URL+"?q=typecode:3&sort=id asc&rows=1000&wt=json",dataType:"json",context:t,success:function(t){if(t&&t.response&&t.response.docs&&t.response.docs.length>0){var e={FirstData:t.response.docs},i=$("#quickPositionTemplate2").html();Mustache.parse(i);var n=Mustache.render(i,e);$("#"+com.leto.map.overlay.CONTENT_OVERLAY_ID).append(n);var r={id:"quickPositionOverlay",targetId:"quickPosition1",hideEvent:function(t){com.leto.map.LetoMap.coreMap.setStyle("quickPositionLayer",null),com.leto.map.LetoMap.coreMap.getLayerById("quickPositionLayer").getSource().clear()}};com.leto.map.overlay.OverlayPanel.init(r),com.leto.map.basecomps.QuickPosition.loadSubMenuData({upcode:t.response.docs[0].id})}},error:function(t,e,i){alert("加载数据失败，请检查网络！"),console.error(i)}})}},com.leto.map.basecomps.QuickPosition.loadSubMenuData=function(t){var e=(t=t||{}).upcode;if(null!=com.leto.map.config.QUICKPOSITION_MENU_URL){var i=this;$.ajax({type:"GET",url:com.leto.map.config.QUICKPOSITION_MENU_URL+'?q=typecode:4 AND upcode:"'+e+'"&sort=id asc&rows=1000&wt=json',dataType:"json",context:i,success:function(t){if(t&&t.response&&t.response.docs){var e={SecondData:t.response.docs},i=$("#quickPositionTemplate2-1").html();Mustache.parse(i);var n=Mustache.render(i,e);$("#quickPositionSecondData").html(n)}}})}},com.leto.map.basecomps.QuickPosition.onPositioning=function(t){var e=t.geo,i=t.style;if(!i){var n=new ol.style.Stroke({color:"#FFD700",width:1.5}),r=new ol.style.Fill({color:"rgba(200,100,181,0.2)"});i=new ol.style.Style({fill:r,stroke:n})}var o=com.leto.map.LetoMap.coreMap.getLayerById("quickPositionLayer");o.setStyle(i),o.getSource().clear();var s=(new ol.format.WKT).readFeature(e),a=s.getGeometry(),l=com.leto.map.LetoMap.coreMap.getOlMap().getView().getProjection().getCode();a=com.leto.map.utils.GeometryUtil.geomtransform(a,"EPSG:4326",l),s.setGeometry(a);var h=a.getExtent(),c=com.leto.map.LetoMap.coreMap.getOlMap();return c.getView().fit(h,c.getSize()),o.getSource().addFeature(s),s},com.leto.map.basecomps.QuickPosition.onPositioningByCoordinate=function(t){t&&t.coordinate&&com.leto.map.LetoMap.coreMap.setFlashCenter(t.coordinate)},com.leto.map.basecomps.QuickPosition.clear=function(){com.leto.map.LetoMap.coreMap.removeFlashCenter()},com.leto.map.businesscomps.Search=function(){},com.leto.map.businesscomps.Search.drawType,com.leto.map.businesscomps.Search.drawFeature,com.leto.map.businesscomps.Search.searchLayers=[],com.leto.map.businesscomps.Search.enableDraw=function(t){var e=com.leto.map.LetoMap.coreMap;com.leto.map.businesscomps.Search.drawType=t;var i=new ol.Collection;new com.leto.map.interaction.Draw({geoType:t,features:i,event:function(t){var e=new com.leto.map.style.Style({fill:new com.leto.map.style.Fill({color:"rgba(255, 47, 255, 0.2)"}),stroke:new com.leto.map.style.Stroke({color:"red",lineDash:[10,10],width:2}),image:new com.leto.map.style.Circle({radius:5,stroke:new com.leto.map.style.Stroke({color:"rgba(255, 0, 0, 0.7)"}),fill:new com.leto.map.style.Fill({color:"rgba(255, 255, 0, 0.8)"})})});t.setStyle(e);var i=t.getGeometry();if("LineString"===i.getType()){var n=com.leto.map.utils.GeometryUtil.createBuffer(i,100,!1,null),r=new ol.Feature;r.setGeometry(n),r.setStyle(e),com.leto.map.LetoMap.coreMap.getLayerById("tempLayer").getSource().addFeature(r),com.leto.map.businesscomps.Search.drawFeature=r.clone()}else com.leto.map.businesscomps.Search.drawFeature=t.clone();if(com.leto.map.businesscomps.Search.drawFeature){var o=com.leto.map.businesscomps.Search.drawFeature.getGeometry(),s=com.leto.map.LetoMap.coreMap.getOlMap().getView().getProjection().getCode();o=com.leto.map.utils.GeometryUtil.geomtransform(o,s,"EPSG:4326"),com.leto.map.businesscomps.Search.drawFeature.setGeometry(o)}}}).setMap(e.getOlMap());var n=e.getLayerById("tempLayer");n&&n.setSource(new ol.source.Vector({features:i}))},com.leto.map.businesscomps.Search.onSelectSearchLayer=function(t,e){e?com.leto.map.businesscomps.Search.searchLayers.indexOf(t)<0&&com.leto.map.businesscomps.Search.searchLayers.push(t):com.leto.map.businesscomps.Search.searchLayers.indexOf(t)>=0&&com.leto.map.businesscomps.Search.searchLayers.splice(com.leto.map.businesscomps.Search.searchLayers.indexOf(t),1)},com.leto.map.businesscomps.Search.onSelectSuggest=function(t,e){t=t.replace(/<.*?>/g,""),$("#searchKeyInput").val(t),null==e&&(e=0);var i="";com.leto.map.businesscomps.Search.drawFeature&&(i=com.leto.map.businesscomps.Search.GetGeoCriteria(com.leto.map.businesscomps.Search.drawFeature));var n="";com.leto.map.businesscomps.Search.searchLayers&&com.leto.map.businesscomps.Search.searchLayers.length>0&&(n=com.leto.map.businesscomps.Search.searchLayers.join(",")),com.leto.map.businesscomps.Search.searchResult(t,n,e,6,i)},com.leto.map.businesscomps.Search.onSearchClick=function(){var t=$("#searchKeyInput").val();com.leto.map.businesscomps.Search.onSelectSuggest(t,0)},com.leto.map.businesscomps.Search.searchResult=function(t,e,i,n,r){var o=this;$.ajax({type:"POST",url:com.leto.map.config.SEARCH_RESULT_URL,data:{criteria:t,layercodes:e,start:i,rows:n,spacecriteria:r},dataType:"json",context:o,success:function(t){if(t&&t.success){var e=$("#searchResultTemplate").html(),i={SearchResults:t.data,index:function(){return i.SearchResults.indexOf(this)+1},pageSize:t.pageSize,start:t.start,totalCount:t.totalCount,curPage:Math.floor(t.start/t.pageSize)},n=Mustache.render(e,i);$("#searchautocompleteresults").html(n),$("[data-uk-pagination]").on("select.uk.pagination",function(e,i){com.leto.map.businesscomps.Search.hidePopup();var n=$("#searchKeyInput").val();com.leto.map.businesscomps.Search.onSelectSuggest(n,i*t.pageSize)});var r=com.leto.map.LetoMap.coreMap;if(r.getLayerById("searchLayer").getSource().clear(),t.data&&t.data.length>0){for(var o,s,a,l,h,c=[],u=[],f=r.getOlMap().getView().getProjection().getCode(),g=0;g<t.data.length;g++)l=t.data[g],h=com.leto.map.utils.GeometryUtil.coortransform([l.x,l.y],"EPSG:4326",f),s=new ol.geom.Point(h),o=new ol.Feature({geometry:s,data:l,name:l.name,event:function(t){com.leto.map.businesscomps.Search.showPopup(t)}}),(a=[]).push(new ol.style.Style({text:new ol.style.Text({text:"",font:"22px iconfont",fill:new ol.style.Fill({color:"rgba(223, 81, 56, 1)"})})})),a.push(new ol.style.Style({text:new ol.style.Text({textBaseline:"middle",text:""+(g+1),font:"12px Microsoft YaHei",fill:new ol.style.Fill({color:"rgba(255, 255, 255, 1)"}),offsetX:0,offsetY:-2})})),o.setStyle(a),o.set("styles",a),c.push(o),u.push(h);r.getLayerById("searchLayer").getSource().addFeatures(c);var d=ol.extent.boundingExtent(u);r.getOlMap().getView().fit(d,r.getOlMap().getSize())}}},error:function(t,e,i){alert("关键字搜索失败，请检查网络！")}})},com.leto.map.businesscomps.Search.onClear=function(){$("#searchKeyInput").val(""),$("#searchautocompleteresults").html(""),$("#searchautocompleteresults").hide(),com.leto.map.businesscomps.Search.hidePopup();var t=com.leto.map.LetoMap.coreMap;t.getLayerById("searchLayer").getSource().clear(),t.getLayerById("tempLayer").getSource().clear(),com.leto.map.businesscomps.Search.drawType=null,com.leto.map.businesscomps.Search.drawFeature=null},com.leto.map.businesscomps.Search.onSelectOneSearchResult=function(t,e){var i,n=com.leto.map.LetoMap.coreMap.getOlMap(),r=n.getView().getProjection().getCode(),o=com.leto.map.utils.GeometryUtil.coortransform([t,e],"EPSG:4326",r),s=n.getPixelFromCoordinate(o),a=n.forEachFeatureAtPixel(s,function(t,e){return t});if(a){if(void 0==a.get("features"))i=a;else{var l=a.get("features");l&&l.length>0&&(i=l[0])}com.leto.map.businesscomps.Search.showPopup(i),$("#searchautocompleteresults").hide()}},com.leto.map.businesscomps.Search.hideResultWindow=function(){$("#searchautocompleteresults").hide()},com.leto.map.businesscomps.Search.showResultWindow=function(){$("#searchautocompleteresults").html()&&""!=$("#searchautocompleteresults").html()&&$("#searchautocompleteresults").show()},com.leto.map.businesscomps.Search.GetGeoCriteria=function(t){var e;switch(t.getGeometry().getType()){case"Circle":e=com.leto.map.businesscomps.Search.GetCircleGeoCriteria(t);break;case"Polygon":if(t.get("geoType")&&"Box"===t.get("geoType"))return com.leto.map.businesscomps.Search.GetBoxGeoCriteria(t);e=com.leto.map.businesscomps.Search.GetPolygonGeoCriteria(t)}return e},com.leto.map.businesscomps.Search.GetCircleGeoCriteria=function(t){var e=t.getGeometry().getCenter(),i=t.getGeometry().getLastCoordinate(),n=new ol.Sphere(6378137).haversineDistance(e,i)/1e3;return"{!geofilt sfield=geo pt="+e[1]+","+e[0]+" d="+n+"}"},com.leto.map.businesscomps.Search.GetBoxGeoCriteria=function(t){var e=t.getGeometry().getExtent();return"geo:["+e[1]+","+e[0]+" TO "+e[3]+","+e[2]+"]"},com.leto.map.businesscomps.Search.GetPolygonGeoCriteria=function(t){var e=[],i=t.getGeometry().getCoordinates()[0];if(i&&i.length>0){e.push('geo:"IsWithin(POLYGON((');for(var n,r=0;r<i.length;r++)n=i[r],0===r?e.push(n[0]+" "+n[1]):e.push(","+n[0]+" "+n[1]);e.push(')))"')}return e.join("")},com.leto.map.businesscomps.Search.showPopup=function(t){if(t&&t.get("data")){var e,i=t.get("data"),n={InfoPointModel:i};"poi"===i.layercode?e=$("#infopointTemplate0").html():"citycomponents"===i.layercode&&(e=$("#infopointTemplate1").html()),Mustache.parse(e);var r=Mustache.render(e,n);com.leto.map.overlay.OverlayPopup.init({id:"searchOverlayPopup",modal:!1,closeBox:!1}).show(t.getGeometry().getCoordinates(),r)}},com.leto.map.businesscomps.Search.hidePopup=function(){com.leto.map.overlay.OverlayPopup.hide({id:"searchOverlayPopup"})};